import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{c as v}from"./clsx-B-dksMZM.js";import"./index-BdpSHsi2.js";import{a as x,b as T}from"./ProgressBar-Dwuqfbjf.js";import{g as b}from"./getCategoricalColorByIndex-BIvTpnTO.js";import{W as $}from"./PropsContextProvider-DdyT-evq.js";import{L as k,a as D}from"./Legend-JfqUDQMg.js";const N="flow--donut-chart",q="flow--donut-chart--border",_="flow--donut-chart--background",V="flow--donut-chart--value",z="flow--donut-chart--info",I="flow--donut-chart--fill",L="flow--donut-chart--success",O="flow--donut-chart--danger",W="flow--donut-chart--warning",P="flow--donut-chart--donut-chart-container",A="flow--donut-chart--bottom",F="flow--donut-chart--top",B="flow--donut-chart--right",R="flow--donut-chart--legend",E="flow--donut-chart--left",i={donutChart:N,border:q,background:_,value:V,"size-l":"flow--donut-chart--size-l",info:z,fill:I,success:L,danger:O,warning:W,donutChartContainer:P,bottom:A,top:F,right:B,legend:R,left:E},g=d=>{const{value:a=0,formatOptions:c,valueText:n}=d,s=x(c),r=n??(c?s.format(a):`${a} %`),o=r.trim().match(/^([\d.,]+)\s*([a-zA-Z]+)$/);return r.includes("%")||!o?t.jsx("span",{className:i.value,children:t.jsx("b",{children:r})}):t.jsxs("span",{className:i.value,children:[t.jsx("b",{children:o[1]}),t.jsx("small",{children:o[2]})]})};g.__docgenInfo={description:"",methods:[],displayName:"DonutChartValue",props:{value:{required:!1,tsType:{name:"number"},description:""},valueText:{required:!1,tsType:{name:"string"},description:""}},composes:["Pick"]};const y=d=>{const{center:a,value:c=0,radius:n,segments:s,maxValue:r}=d,o=2*n*Math.PI,u=100/r*c;if(!s)return t.jsx("circle",{className:i.fill,cx:a,cy:a,r:n,strokeDasharray:`${o} ${o}`,strokeDashoffset:o-u/100*o,transform:`rotate(-90 ${a} ${a})`});let l=0;return s.map((e,m)=>{const h=100/r*e.value,f=l;return l=l+360/100*h,t.jsx("circle",{cx:a,cy:a,r:n,strokeDasharray:`${o} ${o}`,strokeDashoffset:o-h/100*o,stroke:`var(--color--categorical--${e.color??b(m)})`,transform:`rotate(${-90+f} ${a} ${a})`})})};y.__docgenInfo={description:"",methods:[],displayName:"DonutChartFill",props:{center:{required:!0,tsType:{name:"number"},description:""},value:{required:!1,tsType:{name:"number"},description:""},radius:{required:!0,tsType:{name:"number"},description:""},maxValue:{required:!0,tsType:{name:"number"},description:""}},composes:["Pick"]};const w=d=>{const{value:a=0,segments:c,formatOptions:n,size:s,maxValue:r,valueText:o}=d,u=.5,l=s==="m"?8:12,e=l*4,m=e-l/2;return t.jsxs(t.Fragment,{children:[t.jsxs("svg",{width:e*4,height:e*4,viewBox:`0 0 ${e*2} ${e*2}`,fill:"none",strokeWidth:l,children:[t.jsx("circle",{className:i.background,cx:e,cy:e,r:m,strokeWidth:l}),t.jsx("circle",{className:i.border,cx:e,cy:e,r:e-u/2,strokeWidth:u}),t.jsx("circle",{className:i.border,cx:e,cy:e,r:e-l+u/2,strokeWidth:u}),t.jsx(y,{radius:m,center:e,value:a,segments:c,maxValue:r??100})]}),t.jsx(g,{value:a,formatOptions:n,valueText:o})]})};w.__docgenInfo={description:"",methods:[],displayName:"Donut",props:{value:{required:!1,tsType:{name:"number"},description:""}},composes:["Pick"]};const C=d=>{const{segments:a,showLegend:c,formatOptions:n}=d,s=x(n);return!a||!c?null:t.jsx(k,{className:i.legend,children:a.map((r,o)=>t.jsx(D,{color:r.color??b(o),children:`${r.title} (${r.valueText??(n?s.format(r.value):`${r.value} %`)})`}))})};C.__docgenInfo={description:"",methods:[],displayName:"DonutChartLegend"};const M=d=>{const{size:a="m",status:c="info",className:n,value:s,segments:r,maxValue:o,formatOptions:u,valueText:l,showLegend:e,...m}=d,h=v(i.donutChart,a==="l"&&i["size-l"],i[c],n),f=r?r.map(p=>p.value).reduce((p,j)=>p+j,0):void 0;return t.jsx($,{if:e&&r,children:t.jsxs("div",{className:v(i.donutChartContainer,e&&i[e]),children:[t.jsxs(T,{className:h,value:f??s,...m,children:[t.jsx(w,{value:f??s,formatOptions:u,segments:r,size:a,maxValue:o,valueText:l}),t.jsx(g,{value:f??s,formatOptions:u,valueText:l})]}),e&&r&&t.jsx(C,{showLegend:e,segments:r,formatOptions:u})]})})};M.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"DonutChart",props:{size:{required:!1,tsType:{name:"union",raw:'"m" | "l"',elements:[{name:"literal",value:'"m"'},{name:"literal",value:'"l"'}]},description:'The size variant of the donut chart. @default "m"'},segments:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: number;
  title: string;
  color?: CategoricalColors;
  valueText?: string;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"color",value:{name:"CategoricalColors",required:!1}},{key:"valueText",value:{name:"string",required:!1}}]}}],raw:`{
  value: number;
  title: string;
  color?: CategoricalColors;
  valueText?: string;
}[]`},description:"Divides the fill of the donut chart into segments"},valueText:{required:!1,tsType:{name:"string"},description:"An optional text to be displayed instead of the formatted value"},showLegend:{required:!1,tsType:{name:"union",raw:'"top" | "left" | "bottom" | "right" | false',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"left"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"right"'},{name:"literal",value:"false"}]},description:`The position of the legend, if set to false, the legend is hidden @default
false`}},composes:["Omit","PropsWithStatus"]};export{M as D};
