import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{c as x}from"./clsx-B-dksMZM.js";import"./index-BdpSHsi2.js";import{a as v,b as T}from"./ProgressBar-Dwuqfbjf.js";import{g as b}from"./getCategoricalColorByIndex-BIvTpnTO.js";import{W as D}from"./PropsContextProvider-BJzI_1Ao.js";import{L as N,a as k}from"./Legend-CEtvMZjy.js";const q="flow--donut-chart",V="flow--donut-chart--border",_="flow--donut-chart--background",I="flow--donut-chart--value",L="flow--donut-chart--info",P="flow--donut-chart--fill",W="flow--donut-chart--success",z="flow--donut-chart--danger",O="flow--donut-chart--warning",R="flow--donut-chart--donut-chart-container",F="flow--donut-chart--bottom",S="flow--donut-chart--top",A="flow--donut-chart--right",B="flow--donut-chart--legend",E="flow--donut-chart--left",l={donutChart:q,border:V,background:_,value:I,"size-l":"flow--donut-chart--size-l",info:L,fill:P,success:W,danger:z,warning:O,donutChartContainer:R,bottom:F,top:S,right:A,legend:B,left:E},w=i=>{const{value:r=0,formatOptions:c,valueText:a}=i,s=v(c);if(a)return o.jsx("span",{className:l.value,children:a});const e=c?s.format(r):`${r} %`;return o.jsx("span",{className:l.value,children:o.jsx("b",{children:e})})};w.__docgenInfo={description:"",methods:[],displayName:"DonutChartValue",props:{value:{required:!1,tsType:{name:"number"},description:""},valueText:{required:!1,tsType:{name:"ReactNode"},description:""}},composes:["Pick"]};const y=i=>{const{center:r,value:c=0,radius:a,segments:s,maxValue:e}=i,n=2*a*Math.PI,t=100/e*c;if(!s)return o.jsx("circle",{className:l.fill,cx:r,cy:r,r:a,strokeDasharray:`${n} ${n}`,strokeDashoffset:n-t/100*n,transform:`rotate(-90 ${r} ${r})`});let d=0;return s.map((u,f)=>{const m=100/e*u.value,h=d;return d=d+360/100*m,o.jsx("circle",{cx:r,cy:r,r:a,strokeDasharray:`${n} ${n}`,strokeDashoffset:n-m/100*n,stroke:`var(--color--categorical--${u.color??b(f)})`,transform:`rotate(${-90+h} ${r} ${r})`})})};y.__docgenInfo={description:"",methods:[],displayName:"DonutChartFill",props:{center:{required:!0,tsType:{name:"number"},description:""},value:{required:!1,tsType:{name:"number"},description:""},radius:{required:!0,tsType:{name:"number"},description:""},maxValue:{required:!0,tsType:{name:"number"},description:""}},composes:["Pick"]};const C=i=>{const{value:r=0,segments:c,size:a,maxValue:s}=i,e=.5,n=a==="m"?8:12,t=n*4,d=t-n/2;return o.jsx(o.Fragment,{children:o.jsxs("svg",{width:t*4,height:t*4,viewBox:`0 0 ${t*2} ${t*2}`,fill:"none",strokeWidth:n,children:[o.jsx("circle",{className:l.background,cx:t,cy:t,r:d,strokeWidth:n}),o.jsx("circle",{className:l.border,cx:t,cy:t,r:t-e/2,strokeWidth:e}),o.jsx("circle",{className:l.border,cx:t,cy:t,r:t-n+e/2,strokeWidth:e}),o.jsx(y,{radius:d,center:t,value:r,segments:c,maxValue:s??100})]})})};C.__docgenInfo={description:"",methods:[],displayName:"Donut",props:{value:{required:!1,tsType:{name:"number"},description:""}},composes:["Pick"]};const $=i=>{const{segments:r,showLegend:c,formatOptions:a}=i,s=v(a);return!r||!c?null:o.jsx(N,{className:l.legend,children:r.map((e,n)=>{const t=a?s.format(e.value):`${e.value} %`;return o.jsx(k,{color:e.color??b(n),children:`${e.title} (${e.valueText??t})`})})})};$.__docgenInfo={description:"",methods:[],displayName:"DonutChartLegend"};const M=i=>{const{size:r="m",status:c="info",className:a,value:s,segments:e,maxValue:n,formatOptions:t,valueText:d,showLegend:u=!0,legendPosition:f="right",...m}=i,h=x(l.donutChart,r==="l"&&l["size-l"],l[c],a),p=e?e.map(g=>g.value).reduce((g,j)=>g+j,0):void 0;return o.jsx(D,{if:u&&e,children:o.jsxs("div",{className:x(l.donutChartContainer,l[f]),children:[o.jsxs(T,{className:h,value:p??s,...m,children:[o.jsx(C,{value:p??s,segments:e,size:r,maxValue:n}),o.jsx(w,{value:p??s,formatOptions:t,valueText:d})]}),u&&e&&o.jsx($,{showLegend:u,segments:e,formatOptions:t})]})})};M.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"DonutChart",props:{size:{required:!1,tsType:{name:"union",raw:'"m" | "l"',elements:[{name:"literal",value:'"m"'},{name:"literal",value:'"l"'}]},description:'The size variant of the donut chart. @default "m"'},segments:{required:!1,tsType:{name:"Array",elements:[{name:"DonutChartSegment"}],raw:"DonutChartSegment[]"},description:"Divides the fill of the donut chart into segments"},valueText:{required:!1,tsType:{name:"ReactNode"},description:"An optional text to be displayed instead of the formatted value"},showLegend:{required:!1,tsType:{name:"boolean"},description:`Whether the legend component is shown when segments are used. @default:
true`},legendPosition:{required:!1,tsType:{name:"union",raw:'"top" | "left" | "bottom" | "right"',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"left"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"right"'}]},description:'The position of the legend. @default "right"'}},composes:["Omit","PropsWithStatus"]};export{M as D};
