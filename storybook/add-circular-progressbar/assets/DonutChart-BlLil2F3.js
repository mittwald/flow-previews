import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{c as x}from"./clsx-B-dksMZM.js";import"./index-BdpSHsi2.js";import{a as v,b as C}from"./ProgressBar-Dwuqfbjf.js";import{g as b}from"./getCategoricalColorByIndex-BIvTpnTO.js";import{W as T}from"./PropsContextProvider-toBrFevI.js";import{L as D,a as N}from"./Legend-v2GdPhRV.js";const k="flow--donut-chart",q="flow--donut-chart--border",_="flow--donut-chart--background",V="flow--donut-chart--value",z="flow--donut-chart--info",I="flow--donut-chart--fill",L="flow--donut-chart--success",O="flow--donut-chart--danger",W="flow--donut-chart--warning",P="flow--donut-chart--donut-chart-container",A="flow--donut-chart--bottom",F="flow--donut-chart--top",S="flow--donut-chart--right",B="flow--donut-chart--legend",R="flow--donut-chart--left",c={donutChart:k,border:q,background:_,value:V,"size-l":"flow--donut-chart--size-l",info:z,fill:I,success:L,danger:O,warning:W,donutChartContainer:P,bottom:A,top:F,right:S,legend:B,left:R},g=u=>{const{value:r=0,formatOptions:i,valueText:n}=u,s=v(i),o=n??(i?s.format(r):`${r} %`),a=o.trim().match(/^([\d.,]+)\s*([a-zA-Z]+)$/);return o.includes("%")||!a||!a[1]||!a[2]?t.jsx("span",{className:c.value,children:t.jsx("b",{children:o})}):t.jsxs("span",{className:c.value,children:[t.jsx("b",{children:a[1]}),t.jsx("small",{children:a[2]})]})};g.__docgenInfo={description:"",methods:[],displayName:"DonutChartValue",props:{value:{required:!1,tsType:{name:"number"},description:""},valueText:{required:!1,tsType:{name:"string"},description:""}},composes:["Pick"]};const w=u=>{const{center:r,value:i=0,radius:n,segments:s,maxValue:o}=u,a=2*n*Math.PI,d=100/o*i;if(!s)return t.jsx("circle",{className:c.fill,cx:r,cy:r,r:n,strokeDasharray:`${a} ${a}`,strokeDashoffset:a-d/100*a,transform:`rotate(-90 ${r} ${r})`});let l=0;return s.map((e,m)=>{const h=100/o*e.value,f=l;return l=l+360/100*h,t.jsx("circle",{cx:r,cy:r,r:n,strokeDasharray:`${a} ${a}`,strokeDashoffset:a-h/100*a,stroke:`var(--color--categorical--${e.color??b(m)})`,transform:`rotate(${-90+f} ${r} ${r})`})})};w.__docgenInfo={description:"",methods:[],displayName:"DonutChartFill",props:{center:{required:!0,tsType:{name:"number"},description:""},value:{required:!1,tsType:{name:"number"},description:""},radius:{required:!0,tsType:{name:"number"},description:""},maxValue:{required:!0,tsType:{name:"number"},description:""}},composes:["Pick"]};const y=u=>{const{value:r=0,segments:i,formatOptions:n,size:s,maxValue:o,valueText:a}=u,d=.5,l=s==="m"?8:12,e=l*4,m=e-l/2;return t.jsxs(t.Fragment,{children:[t.jsxs("svg",{width:e*4,height:e*4,viewBox:`0 0 ${e*2} ${e*2}`,fill:"none",strokeWidth:l,children:[t.jsx("circle",{className:c.background,cx:e,cy:e,r:m,strokeWidth:l}),t.jsx("circle",{className:c.border,cx:e,cy:e,r:e-d/2,strokeWidth:d}),t.jsx("circle",{className:c.border,cx:e,cy:e,r:e-l+d/2,strokeWidth:d}),t.jsx(w,{radius:m,center:e,value:r,segments:i,maxValue:o??100})]}),t.jsx(g,{value:r,formatOptions:n,valueText:a})]})};y.__docgenInfo={description:"",methods:[],displayName:"Donut",props:{value:{required:!1,tsType:{name:"number"},description:""}},composes:["Pick"]};const j=u=>{const{segments:r,showLegend:i,formatOptions:n}=u,s=v(n);return!r||!i?null:t.jsx(D,{className:c.legend,children:r.map((o,a)=>t.jsx(N,{color:o.color??b(a),children:`${o.title} (${o.valueText??(n?s.format(o.value):`${o.value} %`)})`}))})};j.__docgenInfo={description:"",methods:[],displayName:"DonutChartLegend"};const E=u=>{const{size:r="m",status:i="info",className:n,value:s,segments:o,maxValue:a,formatOptions:d,valueText:l,showLegend:e,...m}=u,h=x(c.donutChart,r==="l"&&c["size-l"],c[i],n),f=o?o.map(p=>p.value).reduce((p,$)=>p+$,0):void 0;return t.jsx(T,{if:e&&o,children:t.jsxs("div",{className:x(c.donutChartContainer,e&&c[e]),children:[t.jsxs(C,{className:h,value:f??s,...m,children:[t.jsx(y,{value:f??s,formatOptions:d,segments:o,size:r,maxValue:a,valueText:l}),t.jsx(g,{value:f??s,formatOptions:d,valueText:l})]}),e&&o&&t.jsx(j,{showLegend:e,segments:o,formatOptions:d})]})})};E.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"DonutChart",props:{size:{required:!1,tsType:{name:"union",raw:'"m" | "l"',elements:[{name:"literal",value:'"m"'},{name:"literal",value:'"l"'}]},description:'The size variant of the donut chart. @default "m"'},segments:{required:!1,tsType:{name:"Array",elements:[{name:"DonutChartSegment"}],raw:"DonutChartSegment[]"},description:"Divides the fill of the donut chart into segments"},valueText:{required:!1,tsType:{name:"string"},description:"An optional text to be displayed instead of the formatted value"},showLegend:{required:!1,tsType:{name:"union",raw:'"top" | "left" | "bottom" | "right" | false',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"left"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"right"'},{name:"literal",value:"false"}]},description:`The position of the legend, if set to false, the legend is hidden @default
false`}},composes:["Omit","PropsWithStatus"]};export{E as D};
