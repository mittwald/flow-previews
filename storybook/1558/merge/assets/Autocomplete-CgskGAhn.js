import{r,R as Ae,j as x}from"./iframe-oDnSRKrU.js";import{f as ke,P as De,A as Se}from"./PropsContextProvider-DCrF-e2x.js";import{u as Ne}from"./DialogTriggerView-Ce3L8qPr.js";import{b as Te}from"./Option-B3WisWEn.js";import{T as we}from"./Text-BRg3dDEW.js";import{e as Be}from"./ReactAriaControlledValueFix-p0Vw7kd4.js";import{$ as B}from"./useLocalizedStringFormatter-DYhwfjLN.js";import{$ as Ve}from"./useFilter-CRby3MZG.js";import{c as Ke}from"./useFocusRing-BvVC0KGc.js";import{i as je}from"./ClearPropsContextView-C5KU2xgH.js";import{a as Oe,$ as Ue}from"./context-D1pfjzoG.js";import{b as Me,c as He,g as ze,d as We}from"./utils-BOFgiu6B.js";import{g as qe,d as h,a as Ge,$ as V}from"./mergeRefs-4PJ6advV.js";import{x as Je,o as Ze,B as Qe,b as D,a as Xe}from"./useFocus-CBAj8SSC.js";import{$ as Ye}from"./useLabel-IKTU3VFM.js";import{$ as _e}from"./useEvent-DUbYFqCh.js";import{i as S,j as et,k as tt,l as N,m as T,n as ot,o as rt}from"./SelectionManager-D05r5y9b.js";import{$ as lt}from"./useControlledState-C4SjqBt9.js";var K={};K={collectionLabel:"مقترحات"};var j={};j={collectionLabel:"Предложения"};var O={};O={collectionLabel:"Návrhy"};var U={};U={collectionLabel:"Forslag"};var M={};M={collectionLabel:"Empfehlungen"};var H={};H={collectionLabel:"Προτάσεις"};var z={};z={collectionLabel:"Suggestions"};var W={};W={collectionLabel:"Sugerencias"};var q={};q={collectionLabel:"Soovitused"};var G={};G={collectionLabel:"Ehdotukset"};var J={};J={collectionLabel:"Suggestions"};var Z={};Z={collectionLabel:"הצעות"};var Q={};Q={collectionLabel:"Prijedlozi"};var X={};X={collectionLabel:"Javaslatok"};var Y={};Y={collectionLabel:"Suggerimenti"};var _={};_={collectionLabel:"候補"};var ee={};ee={collectionLabel:"제안"};var te={};te={collectionLabel:"Pasiūlymai"};var oe={};oe={collectionLabel:"Ieteikumi"};var re={};re={collectionLabel:"Forslag"};var le={};le={collectionLabel:"Suggesties"};var ae={};ae={collectionLabel:"Sugestie"};var ne={};ne={collectionLabel:"Sugestões"};var ce={};ce={collectionLabel:"Sugestões"};var ue={};ue={collectionLabel:"Sugestii"};var se={};se={collectionLabel:"Предложения"};var ie={};ie={collectionLabel:"Návrhy"};var fe={};fe={collectionLabel:"Predlogi"};var de={};de={collectionLabel:"Predlozi"};var pe={};pe={collectionLabel:"Förslag"};var $e={};$e={collectionLabel:"Öneriler"};var be={};be={collectionLabel:"Пропозиції"};var ve={};ve={collectionLabel:"建议"};var me={};me={collectionLabel:"建議"};var xe={};xe={"ar-AE":K,"bg-BG":j,"cs-CZ":O,"da-DK":U,"de-DE":M,"el-GR":H,"en-US":z,"es-ES":W,"et-EE":q,"fi-FI":G,"fr-FR":J,"he-IL":Z,"hr-HR":Q,"hu-HU":X,"it-IT":Y,"ja-JP":_,"ko-KR":ee,"lt-LT":te,"lv-LV":oe,"nb-NO":re,"nl-NL":le,"pl-PL":ae,"pt-BR":ne,"pt-PT":ce,"ro-RO":ue,"ru-RU":se,"sk-SK":ie,"sl-SI":fe,"sr-SP":de,"sv-SE":pe,"tr-TR":$e,"uk-UA":be,"zh-CN":ve,"zh-TW":me};function at(o){return o&&o.__esModule?o.default:o}function nt(o,n){let{inputRef:s,collectionRef:l,filter:i,disableAutoFocusFirst:b=!1,disableVirtualFocus:v=!1}=o,c=qe(),p=r.useRef(void 0),f=r.useRef(!1),a=r.useRef(null),E=r.useRef(null),F=!(Je()==="virtual"&&(Ze()||Qe()))&&!v;r.useEffect(()=>()=>clearTimeout(p.current),[]);let d=h(e=>{!e.isTrusted&&F&&s.current&&D(Xe(s.current))!==s.current&&s.current.focus();let t=e.target;e.isTrusted||!t||a.current===t.id||(clearTimeout(p.current),t!==l.current?f.current?(a.current=t.id,p.current=setTimeout(()=>{n.setFocusedNodeId(t.id)},500)):(a.current=t.id,n.setFocusedNodeId(t.id)):a.current&&!document.getElementById(a.current)&&(a.current=null,n.setFocusedNodeId(null)),f.current=!1)}),y=r.useCallback(e=>{var t;if(e!=null){var u;(u=E.current)===null||u===void 0||u.removeEventListener("focusin",d),E.current=e,e.addEventListener("focusin",d)}else(t=E.current)===null||t===void 0||t.removeEventListener("focusin",d)},[d]),ge=Me(r.useMemo(()=>Ge(l,y),[l,y])),Ee=h(()=>{var e;f.current=!0,(e=l.current)===null||e===void 0||e.dispatchEvent(new CustomEvent(S,{cancelable:!0,bubbles:!0,detail:{focusStrategy:"first"}}))}),A=h(e=>{var t;et(D()),a.current=null,n.setFocusedNodeId(null);let u=new CustomEvent(tt,{cancelable:!0,bubbles:!0,detail:{clearFocusKey:e}});clearTimeout(p.current),f.current=!1,(t=l.current)===null||t===void 0||t.dispatchEvent(u)}),g=r.useRef("");_e(s,"input",e=>{let{inputType:t}=e;g.current=t});let Fe=e=>{g.current==="insertText"&&!b?Ee():g.current&&(g.current.includes("insert")||g.current.includes("delete")||g.current.includes("history"))&&(A(!0),rt(document)===s.current&&T(s.current,null)),n.setInputValue(e)},k=r.useRef(null),ye=e=>{if(k.current=e.target,e.nativeEvent.isComposing)return;let t=a.current;switch(e.key){case"a":if(ot(e))return;break;case"Escape":if(e.isDefaultPrevented())return;break;case" ":return;case"Tab":"continuePropagation"in e&&e.continuePropagation();return;case"Home":case"End":case"PageDown":case"PageUp":case"ArrowUp":case"ArrowDown":{var u;if((e.key==="Home"||e.key==="End")&&t==null&&e.shiftKey)return;e.preventDefault();let $=new CustomEvent(S,{cancelable:!0,bubbles:!0});(u=l.current)===null||u===void 0||u.dispatchEvent($);break}}e.isPropagationStopped()||e.stopPropagation();let m=!0;if(l.current!==null){var R;if(t==null)m=((R=l.current)===null||R===void 0?void 0:R.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1;else{let $=document.getElementById(t);$&&(m=($==null?void 0:$.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1)}}if(m)switch(e.key){case"ArrowLeft":case"ArrowRight":A();break;case"Enter":if(t!=null){let $=document.getElementById(t);$==null||$.click()}break}else e.preventDefault()},L=h(e=>{if(e.target===k.current){var t;e.stopImmediatePropagation();let u=a.current;if(u==null)(t=l.current)===null||t===void 0||t.dispatchEvent(new KeyboardEvent(e.type,e));else{let m=document.getElementById(u);m==null||m.dispatchEvent(new KeyboardEvent(e.type,e))}}});r.useEffect(()=>(document.addEventListener("keyup",L,!0),()=>{document.removeEventListener("keyup",L,!0)}),[L]);let he=B(at(xe),"@react-aria/autocomplete"),Le=Ye({id:c,"aria-label":he.format("collectionLabel")}),Ce=r.useCallback((e,t)=>i?i(e,n.inputValue,t):!0,[n.inputValue,i]),Ie=e=>{if(!e.isTrusted)return;let t=a.current?document.getElementById(a.current):null;t&&N(t,e.relatedTarget)},Re=e=>{if(!e.isTrusted)return;if(a.current?document.getElementById(a.current):null){let u=e.target;queueMicrotask(()=>{N(u,l.current),T(l.current,u)})}},C={value:n.inputValue,onChange:Fe};var I;let Pe={onKeyDown:ye,"aria-activedescendant":(I=n.focusedNodeId)!==null&&I!==void 0?I:void 0,onBlur:Ie,onFocus:Re};return c&&(C={...C,...F&&Pe,enterKeyHint:"go","aria-controls":c,"aria-autocomplete":"list",autoCorrect:"off",spellCheck:"false",autoComplete:"off"}),{inputProps:C,collectionProps:V(Le,{shouldUseVirtualFocus:F,disallowTypeAhead:!0}),collectionRef:ge,filter:i!=null?Ce:void 0}}function ct(o){let{onInputChange:n,inputValue:s,defaultInputValue:l=""}=o,i=f=>{n&&n(f)},[b,v]=r.useState(null),[c,p]=lt(s,l,i);return{inputValue:c,setInputValue:p,focusedNodeId:b,setFocusedNodeId:v}}const ut=r.createContext(null),st=r.createContext(null);function it(o){let n=He(ut,o.slot);o=V(n,o);let{filter:s,disableAutoFocusFirst:l}=o,i=ct(o),b=r.useRef(null),v=r.useRef(null),{inputProps:c,collectionProps:p,collectionRef:f,filter:a}=nt({...ze(o),filter:s,disableAutoFocusFirst:l,inputRef:b,collectionRef:v},i);return Ae.createElement(We,{values:[[st,i],[Oe,{...c,ref:b}],[Ue,{...p,filter:a,ref:f}]]},o.children)}const ft={"de-DE":{"autocomplete.empty":"Keine passenden Einträge"},"en-US":{"autocomplete.empty":"No matching entries"}},dt="flow--autocomplete--popover",pt="flow--autocomplete--empty",w={popover:dt,empty:pt},$t=ke("Autocomplete",o=>{const{children:n,...s}=o,{contains:l}=Ve({sensitivity:"base"}),i=B(ft),b=r.useRef(null),v=r.useRef(null),c=Ne("Popover",{reuseControllerFromContext:!1}),p=Ke({onBlurWithin:c.close}),f={onKeyDown:d=>{d.key==="Enter"&&c.isOpen&&d.preventDefault()},ref:v},a=()=>x.jsx(we,{className:w.empty,children:i.format("autocomplete.empty")}),E={SearchField:f,TextField:f,Option:{tunnelId:"options"},Popover:{className:w.popover}},P=d=>{d?c.isOpen||c.open():c.close()},F=d=>{const y=v.current;y&&Be(y,String(d)),c.close()};return x.jsx(De,{props:E,children:x.jsx("div",{...p.focusWithinProps,ref:b,children:x.jsx(je,{getContainer:()=>b.current,children:x.jsxs(it,{onInputChange:P,filter:l,disableAutoFocusFirst:!0,...s,children:[n,x.jsx(Te,{onAction:F,triggerRef:v,controller:c,renderEmptyState:a,isNonModal:!0,placement:"bottom start",children:x.jsx(Se,{id:"options"})})]})})})})});$t.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Autocomplete"};export{$t as A};
