import{R as s,r as c,j as x}from"./iframe-QjFTiyQe.js";import{c as j}from"./clsx-B-dksMZM.js";import{c as H,d as _,e as B,b as A,f as F,g as k,C as U,$ as V}from"./ClearPropsContextView-BPsPBjo2.js";import{$ as W,d as K,a as Y}from"./utils-r8e_N1jc.js";import{c as q,R as z,$ as h,f as G}from"./mergeRefs-DEBbLA0v.js";import{$ as D}from"./filterDOMProps-CghfNOdR.js";import{$ as J,c as Q}from"./useFocusable-D3z6GPZp.js";import{x as X,g as Z}from"./useFocus-CRsfU1Oq.js";import{$ as M}from"./useFocusRing-xi6RBNRG.js";const C=s.createContext(null);function ee(e){let{children:r}=e,t=c.useContext(C),[n,a]=c.useState(0),i=c.useMemo(()=>({parent:t,modalCount:n,addModal(){a(l=>l+1),t&&t.addModal()},removeModal(){a(l=>l-1),t&&t.removeModal()}}),[t,n]);return s.createElement(C.Provider,{value:i},r)}function te(){let e=c.useContext(C);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:void 0}}}function re(e){let{modalProviderProps:r}=te();return s.createElement("div",{"data-overlay-container":!0,...e,...r})}function oe(e){return s.createElement(ee,null,s.createElement(re,e))}function ne(e){let r=q(),{portalContainer:t=r?null:document.body,...n}=e,{getContainer:a}=H();if(!e.portalContainer&&a&&(t=a()),s.useEffect(()=>{if(t!=null&&t.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[t]),!t)return null;let i=s.createElement(oe,n);return z.createPortal(i,t)}function le(e,r){let t=D(e,{labelable:!0}),{hoverProps:n}=M({onHoverStart:()=>r==null?void 0:r.open(!0),onHoverEnd:()=>r==null?void 0:r.close()});return{tooltipProps:h(t,n,{role:"tooltip"})}}function ae(e,r,t){let{isDisabled:n,trigger:a}=e,i=G(),l=c.useRef(!1),o=c.useRef(!1),f=()=>{(l.current||o.current)&&r.open(o.current)},$=P=>{!l.current&&!o.current&&r.close(P)};c.useEffect(()=>{let P=O=>{t&&t.current&&O.key==="Escape"&&(O.stopPropagation(),r.close(!0))};if(r.isOpen)return document.addEventListener("keydown",P,!0),()=>{document.removeEventListener("keydown",P,!0)}},[t,r]);let m=()=>{a!=="focus"&&(X()==="pointer"?l.current=!0:l.current=!1,f())},g=()=>{a!=="focus"&&(o.current=!1,l.current=!1,$())},v=()=>{o.current=!1,l.current=!1,$(!0)},T=()=>{Z()&&(o.current=!0,f())},d=()=>{o.current=!1,l.current=!1,$(!0)},{hoverProps:L}=M({isDisabled:n,onHoverStart:m,onHoverEnd:g}),{focusableProps:N}=J({isDisabled:n,onFocus:T,onBlur:d},t);return{triggerProps:{"aria-describedby":r.isOpen?i:void 0,...h(N,L,{onPointerDown:v,onKeyDown:v}),tabIndex:void 0},tooltipProps:{id:i}}}const ie=1500,R=500;let p={},ce=0,E=!1,u=null,b=null;function S(e={}){let{delay:r=ie,closeDelay:t=R}=e,{isOpen:n,open:a,close:i}=_(e),l=c.useMemo(()=>`${++ce}`,[]),o=c.useRef(null),f=c.useRef(i),$=()=>{p[l]=v},m=()=>{for(let d in p)d!==l&&(p[d](!0),delete p[d])},g=()=>{o.current&&clearTimeout(o.current),o.current=null,m(),$(),E=!0,a(),u&&(clearTimeout(u),u=null),b&&(clearTimeout(b),b=null)},v=d=>{d||t<=0?(o.current&&clearTimeout(o.current),o.current=null,f.current()):o.current||(o.current=setTimeout(()=>{o.current=null,f.current()},t)),u&&(clearTimeout(u),u=null),E&&(b&&clearTimeout(b),b=setTimeout(()=>{delete p[l],b=null,E=!1},Math.max(R,t)))},T=()=>{m(),$(),!n&&!u&&!E?u=setTimeout(()=>{u=null,E=!0,g()},r):n||g()};return c.useEffect(()=>{f.current=i},[i]),c.useEffect(()=>()=>{o.current&&clearTimeout(o.current),p[l]&&delete p[l]},[l]),{isOpen:n,open:d=>{!d&&r>0&&!o.current?T():g()},close:v}}const y=c.createContext(null),I=c.createContext(null);function se(e){let r=S(e),t=c.useRef(null),{triggerProps:n,tooltipProps:a}=ae(e,r,t);return s.createElement(K,{values:[[y,r],[I,{...a,triggerRef:t}]]},s.createElement(Q,{...n,ref:t},e.children))}const fe=c.forwardRef(function({UNSTABLE_portalContainer:r,...t},n){[t,n]=W(t,n,I);let a=c.useContext(y),i=S(t),l=t.isOpen!=null||t.defaultOpen!=null||!a?i:a,o=B(n,l.isOpen)||t.isExiting||!1;return!l.isOpen&&!o?null:s.createElement(ne,{portalContainer:r},s.createElement(de,{...t,tooltipRef:n,isExiting:o}))});function de(e){let r=c.useContext(y),t=c.useRef(null),{overlayProps:n,arrowProps:a,placement:i,triggerAnchorPoint:l}=A({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,arrowRef:t,offset:e.offset,crossOffset:e.crossOffset,isOpen:r.isOpen,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip,containerPadding:e.containerPadding,onClose:()=>r.close(!0)}),o=F(e.tooltipRef,!!i)||e.isEntering||!1,f=Y({...e,defaultClassName:"react-aria-Tooltip",values:{placement:i,isEntering:o,isExiting:e.isExiting,state:r}});e=h(e,n);let{tooltipProps:$}=le(e,r),m=D(e,{global:!0});return s.createElement("div",{...h(m,f,$),ref:e.tooltipRef,style:{...n.style,"--trigger-anchor-point":l?`${l.x}px ${l.y}px`:void 0,...f.style},"data-placement":i??void 0,"data-entering":o||void 0,"data-exiting":e.isExiting||void 0},s.createElement(k.Provider,{value:{...a,placement:i,ref:t}},f.children))}const ue=e=>{const{children:r,...t}=e;return x.jsx(se,{...t,children:r})};ue.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TooltipTrigger"};const $e="flow--tooltip",pe="flow--tooltip--tip",w={tooltip:$e,tip:pe},be=e=>{const{children:r,className:t,...n}=e,a=j(w.tooltip,t);return x.jsx(U,{children:x.jsxs(fe,{...n,className:a,children:[x.jsx(V,{className:w.tip,children:x.jsx("svg",{viewBox:"0 0 8 8",children:x.jsx("path",{d:"M0 0 L4 4 L8 0"})})}),r]})})};be.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tooltip"};export{ue as T,be as a};
