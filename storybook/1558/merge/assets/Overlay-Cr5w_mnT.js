import{r as o,R as m,j as $}from"./iframe-QjFTiyQe.js";import{c as L}from"./clsx-B-dksMZM.js";import{g as S,h as q,i as I,j as V,k as x,l as W,m as z,f as _,u as H,O as F}from"./DialogTriggerView-nOYLeOX3.js";import{d as B,e as y,f as O,C as k}from"./ClearPropsContextView-BPsPBjo2.js";import{$ as U,b as E,a as w,d as A}from"./utils-r8e_N1jc.js";import{c as R,$ as v,a as K}from"./mergeRefs-DEBbLA0v.js";import{$ as P}from"./filterDOMProps-CghfNOdR.js";import{v as G}from"./PropsContextProvider-PqleG2qG.js";let c=typeof document<"u"&&window.visualViewport;function J(){let t=R(),[e,n]=o.useState(()=>t?{width:0,height:0}:g());return o.useEffect(()=>{let r=()=>{n(a=>{let i=g();return i.width===a.width&&i.height===a.height?a:i})};return c?c.addEventListener("resize",r):window.addEventListener("resize",r),()=>{c?c.removeEventListener("resize",r):window.removeEventListener("resize",r)}},[]),e}function g(){return{width:c&&(c==null?void 0:c.width)||window.innerWidth,height:c&&(c==null?void 0:c.height)||window.innerHeight}}function Q(t,e,n){let{overlayProps:r,underlayProps:a}=S({...t,isOpen:e.isOpen,onClose:e.close},n);return q({isDisabled:!e.isOpen}),I(),o.useEffect(()=>{if(e.isOpen&&n.current)return V([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:v(r),underlayProps:a}}const X=o.createContext(null),b=o.createContext(null),Y=o.forwardRef(function(e,n){if(o.useContext(b))return m.createElement(C,{...e,modalRef:n},e.children);let{isDismissable:a,isKeyboardDismissDisabled:i,isOpen:f,defaultOpen:s,onOpenChange:l,children:d,isEntering:u,isExiting:p,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:N,...j}=e;return m.createElement(M,{isDismissable:a,isKeyboardDismissDisabled:i,isOpen:f,defaultOpen:s,onOpenChange:l,isEntering:u,isExiting:p,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:N},m.createElement(C,{...j,modalRef:n},d))});function Z(t,e){[t,e]=U(t,e,X);let n=o.useContext(x),r=B(t),a=t.isOpen!=null||t.defaultOpen!=null||!n?r:n,i=E(e),f=o.useRef(null),s=y(i,a.isOpen),l=y(f,a.isOpen),d=s||l||t.isExiting||!1,u=R();return!a.isOpen&&!d||u?null:m.createElement(ee,{...t,state:a,isExiting:d,overlayRef:i,modalRef:f})}const M=o.forwardRef(Z);function ee({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:r}=e,{modalProps:a,underlayProps:i}=Q(e,r,n),f=O(e.overlayRef)||e.isEntering||!1,s=w({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:f,isExiting:e.isExiting,state:r}}),l=J(),d={...s.style,"--visual-viewport-height":l.height+"px"};return m.createElement(z,{isExiting:e.isExiting,portalContainer:t},m.createElement("div",{...v(P(e,{global:!0}),i),...s,style:d,ref:e.overlayRef,"data-entering":f||void 0,"data-exiting":e.isExiting||void 0},m.createElement(A,{values:[[b,{modalProps:a,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[x,r]]},s.children)))}function C(t){let{modalProps:e,modalRef:n,isExiting:r,isDismissable:a}=o.useContext(b),i=o.useContext(x),f=o.useMemo(()=>K(t.modalRef,n),[t.modalRef,n]),s=E(f),l=O(s),d=w({...t,defaultClassName:"react-aria-Modal",values:{isEntering:l,isExiting:r,state:i}});return m.createElement("div",{...v(P(t,{global:!0}),e),...d,ref:s,"data-entering":l||void 0,"data-exiting":r||void 0},a&&m.createElement(W,{onDismiss:i.close}),d.children)}const te="flow--overlay",ne={overlay:te},T=t=>{const{children:e,...n}=t;return $.jsx(M,{...n,children:$.jsx(Y,{children:$.jsx(_,{children:e})})})};T.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const h=o.memo(t=>{const e=o.useContext(G).OverlayContent??T;return $.jsx(e,{...t})});h.displayName="OverlayContentView";h.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const re=t=>{const{controller:e,children:n,isDismissable:r=!0,className:a,overlayType:i="Modal",ref:f}=t,s=H(i,{reuseControllerFromContext:!0}),l=e??s,d=l.useIsOpen(),u=L(ne.overlay,a);return $.jsx(k,{children:$.jsx(h,{onOpenChange:p=>l.setOpen(p),isOpen:d,ref:f,isDismissable:r,className:u,children:$.jsx(F,{type:"Modal",controller:l,children:d&&n})})})};re.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."}},composes:["PropsWithChildren","PropsWithClassName"]};export{re as O};
