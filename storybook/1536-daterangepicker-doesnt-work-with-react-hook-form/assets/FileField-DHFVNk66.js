import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{f}from"./FormField.module-B9AzUSUD.js";import{$ as h,a as b}from"./useFormValidation-BP6joqgG.js";import{a as F}from"./FieldError-D2eBwE7I.js";import{a as P,$ as I}from"./Input-Dom3MqAg.js";import"./index-BdpSHsi2.js";import{f as u}from"./utils-q_Aud5Js.js";import{P as v,f as j}from"./PropsContextProvider-Bb6ArHgd.js";const w="flow--file-field--trigger",C={trigger:w},y=r=>{const{children:s,isDisabled:o,onChange:e,ref:c}=r,n=u(c),l=()=>{var i,a;(i=n.current)!=null&&i.value&&(n.current.value="",e==null||e(null)),(a=n.current)==null||a.click()},d=i=>{e==null||e(i.target.files)},p={Button:{onPress:l,className:C.trigger,isDisabled:o}};return t.jsxs(v,{props:p,mergeInParentContext:!0,children:[s,t.jsx(P,{style:{display:"none"},type:"file",ref:n,onChange:d})]})};y.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""}},composes:["PropsWithChildren"]};const N="mittwald.flow-core.file.awaitedArrayBuffer",R=async r=>{const s=await r.arrayBuffer();Object.assign(r,{[N]:s})},q=j("FileField",r=>{const{children:s,ref:o,isRequired:e,isInvalid:c,isDisabled:n,validationBehavior:l,onChange:d,...p}=r,i=u(o),a=h({value:void 0,validationBehavior:l,isInvalid:c});b({validationBehavior:l},a,i);const x={...p,ref:i,"aria-invalid":a.displayValidation.isInvalid,value:void 0},g={Label:{className:f.label,optional:!r.isRequired},FieldDescription:{className:f.fieldDescription},FieldError:{className:f.customFieldError}},$=m=>{m&&d&&Promise.all(Array.from(m).map(R)).then(()=>d(m))};return t.jsx(I.Provider,{value:x,children:t.jsx(F.Provider,{value:a.displayValidation,children:t.jsx(v,{props:g,children:t.jsx("div",{"data-required":!!e||void 0,"data-invalid":a.displayValidation.isInvalid||void 0,className:f.formField,children:t.jsx(y,{ref:o,onChange:$,isDisabled:n,children:s})})})})})});q.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"FileField"};export{q as F};
