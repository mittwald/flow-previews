import{r as o,R as De,j as $}from"./iframe-fd4MG1i8.js";import{f as we,P as Te,R as Ve}from"./flowComponent-CuscKuFt.js";import{u as Be}from"./Popover-8ITLePTm.js";import{a as Ne}from"./Option-BbJ9K_Yp.js";import{T as je}from"./Text-Dcd0JdvI.js";import{e as Ke}from"./ReactAriaControlledValueFix-DAVtvYQ3.js";import{u as Ue}from"./useFieldComponent-CTpQ-XZg.js";import{$ as O}from"./useLocalizedStringFormatter-CKY9Jmr8.js";import{$ as Oe}from"./useFilter-ChOEWBqS.js";import{c as He}from"./useFocusRing-LifWKPgp.js";import{i as Me}from"./OverlayArrow-CL_DkMYI.js";import{b as ze,a as We}from"./RSPContexts-GsdtxIJ1.js";import{b as qe,c as Ge,g as Je,d as Ze}from"./utils-Cwcb_ph1.js";import{f as Qe,d as I,a as Xe,$ as H}from"./index-CeLeQ-qQ.js";import{x as Ye,o as _e,B as et,b as B,a as tt}from"./useFocus-BWTUKGe5.js";import{$ as ot}from"./useLabel-DjhpIeNr.js";import{$ as rt}from"./useEvent-5AoaQB1j.js";import{i as N,j as lt,k as at,l as j,m as K,n as nt,o as ct}from"./SelectionManager--Q9mVMbg.js";import{$ as ut}from"./useControlledState-oGGPnlEt.js";var M={};M={collectionLabel:"مقترحات"};var z={};z={collectionLabel:"Предложения"};var W={};W={collectionLabel:"Návrhy"};var q={};q={collectionLabel:"Forslag"};var G={};G={collectionLabel:"Empfehlungen"};var J={};J={collectionLabel:"Προτάσεις"};var Z={};Z={collectionLabel:"Suggestions"};var Q={};Q={collectionLabel:"Sugerencias"};var X={};X={collectionLabel:"Soovitused"};var Y={};Y={collectionLabel:"Ehdotukset"};var _={};_={collectionLabel:"Suggestions"};var ee={};ee={collectionLabel:"הצעות"};var te={};te={collectionLabel:"Prijedlozi"};var oe={};oe={collectionLabel:"Javaslatok"};var re={};re={collectionLabel:"Suggerimenti"};var le={};le={collectionLabel:"候補"};var ae={};ae={collectionLabel:"제안"};var ne={};ne={collectionLabel:"Pasiūlymai"};var ce={};ce={collectionLabel:"Ieteikumi"};var ue={};ue={collectionLabel:"Forslag"};var se={};se={collectionLabel:"Suggesties"};var ie={};ie={collectionLabel:"Sugestie"};var fe={};fe={collectionLabel:"Sugestões"};var de={};de={collectionLabel:"Sugestões"};var pe={};pe={collectionLabel:"Sugestii"};var $e={};$e={collectionLabel:"Предложения"};var be={};be={collectionLabel:"Návrhy"};var ve={};ve={collectionLabel:"Predlogi"};var me={};me={collectionLabel:"Predlozi"};var xe={};xe={collectionLabel:"Förslag"};var ge={};ge={collectionLabel:"Öneriler"};var Ee={};Ee={collectionLabel:"Пропозиції"};var Fe={};Fe={collectionLabel:"建议"};var he={};he={collectionLabel:"建議"};var ye={};ye={"ar-AE":M,"bg-BG":z,"cs-CZ":W,"da-DK":q,"de-DE":G,"el-GR":J,"en-US":Z,"es-ES":Q,"et-EE":X,"fi-FI":Y,"fr-FR":_,"he-IL":ee,"hr-HR":te,"hu-HU":oe,"it-IT":re,"ja-JP":le,"ko-KR":ae,"lt-LT":ne,"lv-LV":ce,"nb-NO":ue,"nl-NL":se,"pl-PL":ie,"pt-BR":fe,"pt-PT":de,"ro-RO":pe,"ru-RU":$e,"sk-SK":be,"sl-SI":ve,"sr-SP":me,"sv-SE":xe,"tr-TR":ge,"uk-UA":Ee,"zh-CN":Fe,"zh-TW":he};function st(r){return r&&r.__esModule?r.default:r}function it(r,n){let{inputRef:s,collectionRef:a,filter:i,disableAutoFocusFirst:b=!1,disableVirtualFocus:v=!1}=r,f=Qe(),c=o.useRef(void 0),d=o.useRef(!1),l=o.useRef(null),h=o.useRef(null),P=Ye()==="virtual"&&(_e()||et()),[g,R]=o.useState(!P&&!v),[A,y]=o.useState(!1);o.useEffect(()=>()=>clearTimeout(c.current),[]);let E=I(e=>{!e.isTrusted&&g&&s.current&&B(tt(s.current))!==s.current&&s.current.focus();let t=e.target;e.isTrusted||!t||l.current===t.id||(clearTimeout(c.current),t!==a.current?d.current?(l.current=t.id,c.current=setTimeout(()=>{n.setFocusedNodeId(t.id)},500)):(l.current=t.id,n.setFocusedNodeId(t.id)):l.current&&!document.getElementById(l.current)&&(l.current=null,n.setFocusedNodeId(null)),d.current=!1)}),L=o.useCallback(e=>{if(e!=null){var t;(t=h.current)===null||t===void 0||t.removeEventListener("focusin",E),h.current=e,e.addEventListener("focusin",E),e.getAttribute("tabindex")!=null&&R(!1),y(!0)}else{var u;(u=h.current)===null||u===void 0||u.removeEventListener("focusin",E),y(!1)}},[E]),m=qe(o.useMemo(()=>Xe(a,L),[a,L])),C=I(()=>{var e;d.current=!0,(e=a.current)===null||e===void 0||e.dispatchEvent(new CustomEvent(N,{cancelable:!0,bubbles:!0,detail:{focusStrategy:"first"}}))}),T=I(e=>{var t;lt(B()),l.current=null,n.setFocusedNodeId(null);let u=new CustomEvent(at,{cancelable:!0,bubbles:!0,detail:{clearFocusKey:e}});clearTimeout(c.current),d.current=!1,(t=a.current)===null||t===void 0||t.dispatchEvent(u)}),F=o.useRef("");rt(s,"input",e=>{let{inputType:t}=e;F.current=t});let Le=e=>{F.current==="insertText"&&!b?C():F.current&&(F.current.includes("insert")||F.current.includes("delete")||F.current.includes("history"))&&(T(!0),ct(document)===s.current&&K(s.current,null)),n.setInputValue(e)},V=o.useRef(null),Ce=e=>{if(V.current=e.target,e.nativeEvent.isComposing)return;let t=l.current;switch(e.key){case"a":if(nt(e))return;break;case"Escape":if(e.isDefaultPrevented())return;break;case" ":return;case"Tab":"continuePropagation"in e&&e.continuePropagation();return;case"Home":case"End":case"PageDown":case"PageUp":case"ArrowUp":case"ArrowDown":{var u;if((e.key==="Home"||e.key==="End")&&t==null&&e.shiftKey)return;e.preventDefault();let p=new CustomEvent(N,{cancelable:!0,bubbles:!0});(u=a.current)===null||u===void 0||u.dispatchEvent(p);break}}e.isPropagationStopped()||e.stopPropagation();let x=!0;if(a.current!==null){var w;if(t==null)x=((w=a.current)===null||w===void 0?void 0:w.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1;else{let p=document.getElementById(t);p&&(x=p?.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent))||!1)}}if(x)switch(e.key){case"ArrowLeft":case"ArrowRight":T();break;case"Enter":if(t!=null){let p=document.getElementById(t);p?.click()}break}else e.preventDefault()},S=I(e=>{if(e.target===V.current){var t;e.stopImmediatePropagation();let u=l.current;if(u==null)(t=a.current)===null||t===void 0||t.dispatchEvent(new KeyboardEvent(e.type,e));else{let x=document.getElementById(u);x?.dispatchEvent(new KeyboardEvent(e.type,e))}}});o.useEffect(()=>(document.addEventListener("keyup",S,!0),()=>{document.removeEventListener("keyup",S,!0)}),[S]);let Ie=O(st(ye),"@react-aria/autocomplete"),Pe=ot({id:f,"aria-label":Ie.format("collectionLabel")}),Re=o.useCallback((e,t)=>i?i(e,n.inputValue,t):!0,[n.inputValue,i]),Ae=e=>{if(!e.isTrusted)return;let t=l.current?document.getElementById(l.current):null;t&&j(t,e.relatedTarget)},Se=e=>{if(!e.isTrusted)return;if(l.current?document.getElementById(l.current):null){let u=e.target;queueMicrotask(()=>{j(u,a.current),K(a.current,u)})}},k={value:n.inputValue,onChange:Le};var D;let ke={onKeyDown:Ce,"aria-activedescendant":(D=n.focusedNodeId)!==null&&D!==void 0?D:void 0,onBlur:Ae,onFocus:Se};return A&&(k={...k,...g&&ke,enterKeyHint:"go","aria-controls":f,"aria-autocomplete":"list",autoCorrect:"off",spellCheck:"false",autoComplete:"off"}),{inputProps:k,collectionProps:H(Pe,{shouldUseVirtualFocus:g,disallowTypeAhead:g}),collectionRef:m,filter:i!=null?Re:void 0}}function ft(r){let{onInputChange:n,inputValue:s,defaultInputValue:a=""}=r,i=d=>{n&&n(d)},[b,v]=o.useState(null),[f,c]=ut(s,a,i);return{inputValue:f,setInputValue:c,focusedNodeId:b,setFocusedNodeId:v}}const dt=o.createContext(null),pt=o.createContext(null);function $t(r){let n=Ge(dt,r.slot);r=H(n,r);let{filter:s,disableAutoFocusFirst:a}=r,i=ft(r),b=o.useRef(null),v=o.useRef(null),{inputProps:f,collectionProps:c,collectionRef:d,filter:l}=it({...Je(r),filter:s,disableAutoFocusFirst:a,inputRef:b,collectionRef:v},i);return De.createElement(Ze,{values:[[pt,i],[ze,{...f,ref:b}],[We,{...c,filter:l,ref:d}]]},r.children)}const bt={"de-DE":{"autocomplete.empty":"Keine passenden Einträge"},"en-US":{"autocomplete.empty":"No matching entries"}},vt="flow--autocomplete--popover",mt="flow--autocomplete--empty",U={popover:vt,empty:mt},xt=we("Autocomplete",r=>{const{children:n,isInvalid:s,...a}=r,{contains:i}=Oe({sensitivity:"base"}),b=O(bt),v=o.useRef(null),f=o.useRef(null),c=Be("Popover",{reuseControllerFromContext:!1}),d=He({onBlurWithin:c.close}),l={onKeyDown:m=>{m.key==="Enter"&&c.isOpen&&m.preventDefault()},isInvalid:s,ref:f},h=()=>$.jsx(je,{className:U.empty,children:b.format("autocomplete.empty")}),P=m=>{m?c.isOpen||c.open():c.close()},g=m=>{const C=f.current;C&&Ke(C,String(m)),c.close()},{FieldErrorView:R,FieldErrorResetContext:A,fieldPropsContext:y,fieldProps:E}=Ue(r),L={SearchField:l,TextField:l,Option:{tunnelId:"options"},Popover:{className:U.popover},...y};return $.jsxs("div",{...E,children:[$.jsx(A,{children:$.jsx(Te,{props:L,children:$.jsx("div",{...d.focusWithinProps,ref:v,children:$.jsx(Me,{getContainer:()=>v.current,children:$.jsxs($t,{onInputChange:P,filter:i,disableAutoFocusFirst:!0,...a,children:[n,$.jsx(Ne,{onAction:g,triggerRef:f,controller:c,renderEmptyState:h,isNonModal:!0,placement:"bottom start",children:$.jsx(Ve,{id:"options"})})]})})})})}),$.jsx(R,{})]})});xt.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Autocomplete"};export{xt as A};
