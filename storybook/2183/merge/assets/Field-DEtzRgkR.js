import{r as m,j as k}from"./iframe-BsCnutBU.js";import{b as W,a as M,c as _}from"./Form-BTeyd2P5.js";import{d as B}from"./dynamic-DlsVuPIo.js";import{v as Z,P as G}from"./flowComponent-DoLxyVDl.js";import{F as U}from"./FieldError-CJPS-seQ.js";import{a as Q}from"./index-xZbZEtqW.js";import{$ as X}from"./useLocalizedStringFormatter-Bo0x_WGr.js";const j=["shift","alt","meta","mod","ctrl","control"],Y={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function x(e){return(Y[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function T(e){return j.includes(e)}function S(e,t=","){return e.toLowerCase().split(t)}function F(e,t="+",n=">",u=!1,i){let c=[],a=!1;e=e.trim(),e.includes(n)?(a=!0,c=e.toLocaleLowerCase().split(n).map(f=>x(f))):c=e.toLocaleLowerCase().split(t).map(f=>x(f));const d={alt:c.includes("alt"),ctrl:c.includes("ctrl")||c.includes("control"),shift:c.includes("shift"),meta:c.includes("meta"),mod:c.includes("mod"),useKey:u},l=c.filter(f=>!j.includes(f));return{...d,keys:l,description:i,isSequence:a,hotkey:e}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&q([x(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&N([x(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{v.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{v.clear()},0)}));const v=new Set;function K(e){return Array.isArray(e)}function z(e,t=","){return(K(e)?e:e.split(t)).every(n=>v.has(n.trim().toLowerCase()))}function q(e){const t=Array.isArray(e)?e:[e];v.has("meta")&&v.forEach(n=>!T(n)&&v.delete(n.toLowerCase())),t.forEach(n=>v.add(n.toLowerCase()))}function N(e){const t=Array.isArray(e)?e:[e];e==="meta"?v.clear():t.forEach(n=>v.delete(n.toLowerCase()))}function J(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function ee(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}const te=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function ne(e){return D(e,te)}function D(e,t=!1){const{target:n,composed:u}=e;let i,c;return re(n)&&u?(i=e.composedPath()[0]&&e.composedPath()[0].tagName,c=e.composedPath()[0]&&e.composedPath()[0].role):(i=n&&n.tagName,c=n&&n.role),K(t)?!!(i&&t&&t.some(a=>a.toLowerCase()===i.toLowerCase()||a===c)):!!(i&&t&&t)}function re(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function oe(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(n=>t.includes(n))||e.includes("*"):!0}const ie=(e,t,n=!1)=>{const{alt:u,meta:i,mod:c,shift:a,ctrl:d,keys:l,useKey:f}=t,{code:b,key:r,ctrlKey:o,metaKey:g,shiftKey:h,altKey:w}=e,p=x(b);if(f&&l?.length===1&&l.includes(r))return!0;if(!l?.includes(p)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(p))return!1;if(!n){if(u!==w&&p!=="alt"||a!==h&&p!=="shift")return!1;if(c){if(!g&&!o)return!1}else if(i!==g&&p!=="meta"&&p!=="os"||d!==o&&p!=="ctrl"&&p!=="control")return!1}return l&&l.length===1&&l.includes(p)?!0:l?z(l):!l},se=m.createContext(void 0),ae=()=>m.useContext(se);function I(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((n,u)=>n&&I(e[u],t[u]),!0):e===t}const ce=m.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),le=()=>m.useContext(ce);function ue(e){const t=m.useRef(void 0);return I(t.current,e)||(t.current=e),t.current}const $=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},de=typeof window<"u"?m.useLayoutEffect:m.useEffect;function me(e,t,n,u){const i=m.useRef(null),c=m.useRef(!1),a=Array.isArray(n)?Array.isArray(u)?void 0:u:n,d=K(e)?e.join(a?.delimiter):e,l=Array.isArray(n)?n:Array.isArray(u)?u:void 0,f=m.useCallback(t,l??[]),b=m.useRef(f);l?b.current=f:b.current=t;const r=ue(a),{activeScopes:o}=le(),g=ae();return de(()=>{if(r?.enabled===!1||!oe(o,r?.scopes))return;let h=[],w;const p=(s,P=!1)=>{if(!(ne(s)&&!D(s,r?.enableOnFormTags))){if(i.current!==null){const L=i.current.getRootNode();if((L instanceof Document||L instanceof ShadowRoot)&&L.activeElement!==i.current&&!i.current.contains(L.activeElement)){$(s);return}}s.target?.isContentEditable&&!r?.enableOnContentEditable||S(d,r?.delimiter).forEach(L=>{if(L.includes(r?.splitKey??"+")&&L.includes(r?.sequenceSplitKey??">")){console.warn(`Hotkey ${L} contains both ${r?.splitKey??"+"} and ${r?.sequenceSplitKey??">"} which is not supported.`);return}const y=F(L,r?.splitKey,r?.sequenceSplitKey,r?.useKey,r?.description);if(y.isSequence){w=setTimeout(()=>{h=[]},r?.sequenceTimeoutMs??1e3);const E=y.useKey?s.key:x(s.code);if(T(E.toLowerCase()))return;h.push(E);const V=y.keys?.[h.length-1];if(E!==V){h=[],w&&clearTimeout(w);return}h.length===y.keys?.length&&(b.current(s,y),w&&clearTimeout(w),h=[])}else if(ie(s,y,r?.ignoreModifiers)||y.keys?.includes("*")){if(r?.ignoreEventWhen?.(s)||P&&c.current)return;if(J(s,y,r?.preventDefault),!ee(s,y,r?.enabled)){$(s);return}b.current(s,y),P||(c.current=!0)}})}},A=s=>{s.code!==void 0&&(q(x(s.code)),(r?.keydown===void 0&&r?.keyup!==!0||r?.keydown)&&p(s))},O=s=>{s.code!==void 0&&(N(x(s.code)),c.current=!1,r?.keyup&&p(s,!0))},C=i.current||a?.document||document;return C.addEventListener("keyup",O,a?.eventListenerOptions),C.addEventListener("keydown",A,a?.eventListenerOptions),g&&S(d,r?.delimiter).forEach(s=>g.addHotkey(F(s,r?.splitKey,r?.sequenceSplitKey,r?.useKey,r?.description))),()=>{C.removeEventListener("keyup",O,a?.eventListenerOptions),C.removeEventListener("keydown",A,a?.eventListenerOptions),g&&S(d,r?.delimiter).forEach(s=>g.removeHotkey(F(s,r?.splitKey,r?.sequenceSplitKey,r?.useKey,r?.description))),h=[],w&&clearTimeout(w)}},[d,r,o]),i}const fe={"de-DE":{maxLength:e=>`Bitte gib hÃ¶chstens ${e.number} Zeichen ein`,minLength:e=>`Bitte gib mindestens ${e.number} Zeichen ein`},"en-US":{maxLength:e=>`Please enter at most ${e.number} characters`,minLength:e=>`Please enter at least ${e.number} characters`}},R=m.memo(e=>{const t=m.useContext(Z).FieldError??U;return k.jsx(t,{...e})});R.displayName="FieldErrorView";R.__docgenInfo={description:"",methods:[],displayName:"FieldErrorView"};function H(e){const{children:t,name:n,defaultValue:u,...i}=e,c=X(fe),a=W({...e,rules:{...e.rules,minLength:typeof i.rules?.minLength=="number"?{value:i.rules.minLength,message:c.format("minLength",{number:i.rules.minLength})}:i.rules?.minLength,maxLength:typeof i.rules?.maxLength=="number"?{value:i.rules.maxLength,message:c.format("maxLength",{number:i.rules.maxLength})}:i.rules?.maxLength}}),d=M(),l=_({control:d.form.control,name:n})??a.field.value,f=a.fieldState.invalid,b=me("mod+enter",()=>{d.submit()},{enableOnFormTags:!0,enableOnContentEditable:!0}),r=Q(a.field.ref,b),o={...a.field,ref:r,value:l,name:n,form:d.id,isRequired:!!i.rules?.required,isReadOnly:d.isReadOnly,validationBehavior:"aria",defaultValue:u,isInvalid:f,children:B(h=>k.jsxs(k.Fragment,{children:[h.children,k.jsx(R,{children:a.fieldState.error?.message})]}))},g={Autocomplete:{SearchField:o,TextField:o},SearchField:o,TextField:o,TextArea:o,MarkdownEditor:o,Checkbox:{...o,isSelected:l},CheckboxGroup:{...o},CheckboxButton:{...o,isSelected:l},FileField:o,FileDropZone:o,NumberField:o,RadioGroup:o,Switch:{...o,isSelected:l},Slider:o,PasswordCreationField:o,DatePicker:o,DateRangePicker:o,TimeField:o,SegmentedControl:o,Select:{...o,selectedKey:l},ComboBox:{...o,selectedKey:l}};return k.jsx(G,{props:g,dependencies:[a.fieldState,a.field,l,d.isReadOnly],children:t})}const be=e=>H;H.__docgenInfo={description:"",methods:[],displayName:"Field",composes:["Omit","PropsWithChildren"]};export{H as F,be as t};
