import{R as b,r as Q,j as be}from"./iframe-Be6XOKZ5.js";import{i as kt}from"./browser-DsJM6Avf.js";import{a as Dt}from"./Action-DlMDZkrW.js";import{e as Rt}from"./isPromise-APPd_fLV-8tYzn7uh.js";var he=e=>e.type==="checkbox",ue=e=>e instanceof Date,j=e=>e==null;const ut=e=>typeof e=="object";var M=e=>!j(e)&&!Array.isArray(e)&&ut(e)&&!ue(e),ot=e=>M(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,pt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,lt=(e,s)=>e.has(pt(s)),Ot=e=>{const s=e.constructor&&e.constructor.prototype;return M(s)&&s.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function U(e){let s;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(Oe&&(e instanceof Blob||i))&&(t||M(e)))if(s=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!Ot(e))s=e;else for(const u in e)e.hasOwnProperty(u)&&(s[u]=U(e[u]));else return e;return s}var xe=e=>/^\w*$/.test(e),O=e=>e===void 0,Te=e=>Array.isArray(e)?e.filter(Boolean):[],Le=e=>Te(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!M(e))return t;const i=(xe(s)?[s]:Le(s)).reduce((u,a)=>j(u)?u:u[a],e);return O(i)||i===e?O(e[s])?t:e[s]:i},K=e=>typeof e=="boolean",p=(e,s,t)=>{let i=-1;const u=xe(s)?[s]:Le(s),a=u.length,c=a-1;for(;++i<a;){const l=u[i];let w=t;if(i!==c){const x=e[l];w=M(x)||Array.isArray(x)?x:isNaN(+u[i+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=w,e=e[l]}};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},X={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Me=b.createContext(null);Me.displayName="HookFormContext";const Ue=()=>b.useContext(Me),Tt=e=>{const{children:s,...t}=e;return b.createElement(Me.Provider,{value:t},s)};var dt=(e,s,t,i=!0)=>{const u={defaultValues:s._defaultValues};for(const a in e)Object.defineProperty(u,a,{get:()=>{const c=a;return s._proxyFormState[c]!==X.all&&(s._proxyFormState[c]=!i||X.all),t&&(t[c]=!0),e[c]}});return u};const Pe=typeof window<"u"?b.useLayoutEffect:b.useEffect;function Lt(e){const s=Ue(),{control:t=s.control,disabled:i,name:u,exact:a}=e||{},[c,l]=b.useState(t._formState),w=b.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Pe(()=>t._subscribe({name:u,formState:w.current,exact:a,callback:x=>{!i&&l({...t._formState,...x})}}),[u,i,a]),b.useEffect(()=>{w.current.isValid&&t._setValid(!0)},[t]),b.useMemo(()=>dt(c,t,w.current,!1),[c,t])}var z=e=>typeof e=="string",De=(e,s,t,i,u)=>z(e)?(i&&s.watch.add(e),y(t,e,u)):Array.isArray(e)?e.map(a=>(i&&s.watch.add(a),y(t,a))):(i&&(s.watchAll=!0),t),Re=e=>j(e)||!ut(e);function Z(e,s,t=new WeakSet){if(Re(e)||Re(s))return Object.is(e,s);if(ue(e)&&ue(s))return e.getTime()===s.getTime();const i=Object.keys(e),u=Object.keys(s);if(i.length!==u.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const a of i){const c=e[a];if(!u.includes(a))return!1;if(a!=="ref"){const l=s[a];if(ue(c)&&ue(l)||M(c)&&M(l)||Array.isArray(c)&&Array.isArray(l)?!Z(c,l,t):!Object.is(c,l))return!1}}return!0}function Mt(e){const s=Ue(),{control:t=s.control,name:i,defaultValue:u,disabled:a,exact:c,compute:l}=e||{},w=b.useRef(u),x=b.useRef(l),g=b.useRef(void 0),F=b.useRef(t),v=b.useRef(i);x.current=l;const[G,N]=b.useState(()=>{const V=t._getWatch(i,w.current);return x.current?x.current(V):V}),D=b.useCallback(V=>{const S=De(i,t._names,V||t._formValues,!1,w.current);return x.current?x.current(S):S},[t._formValues,t._names,i]),P=b.useCallback(V=>{if(!a){const S=De(i,t._names,V||t._formValues,!1,w.current);if(x.current){const I=x.current(S);Z(I,g.current)||(N(I),g.current=I)}else N(S)}},[t._formValues,t._names,a,i]);Pe(()=>((F.current!==t||!Z(v.current,i))&&(F.current=t,v.current=i,P()),t._subscribe({name:i,formState:{values:!0},exact:c,callback:V=>{P(V.values)}})),[t,c,i,P]),b.useEffect(()=>t._removeUnmounted());const q=F.current!==t,_=v.current,C=b.useMemo(()=>{if(a)return null;const V=!q&&!Z(_,i);return q||V?D():null},[a,q,i,_,D]);return C!==null?C:G}function ur(e){const s=Ue(),{name:t,disabled:i,control:u=s.control,shouldUnregister:a,defaultValue:c}=e,l=lt(u._names.array,t),w=b.useMemo(()=>y(u._formValues,t,y(u._defaultValues,t,c)),[u,t,c]),x=Mt({control:u,name:t,defaultValue:w,exact:!0}),g=Lt({control:u,name:t,exact:!0}),F=b.useRef(e),v=b.useRef(void 0),G=b.useRef(u.register(t,{...e.rules,value:x,...K(e.disabled)?{disabled:e.disabled}:{}}));F.current=e;const N=b.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(g.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(g.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(g.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(g.validatingFields,t)},error:{enumerable:!0,get:()=>y(g.errors,t)}}),[g,t]),D=b.useCallback(C=>G.current.onChange({target:{value:ot(C),name:t},type:_e.CHANGE}),[t]),P=b.useCallback(()=>G.current.onBlur({target:{value:y(u._formValues,t),name:t},type:_e.BLUR}),[t,u._formValues]),q=b.useCallback(C=>{const V=y(u._fields,t);V&&C&&(V._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:S=>C.setCustomValidity(S),reportValidity:()=>C.reportValidity()})},[u._fields,t]),_=b.useMemo(()=>({name:t,value:x,...K(i)||g.disabled?{disabled:g.disabled||i}:{},onChange:D,onBlur:P,ref:q}),[t,i,g.disabled,D,P,q,x]);return b.useEffect(()=>{const C=u._options.shouldUnregister||a,V=v.current;V&&V!==t&&!l&&u.unregister(V),u.register(t,{...F.current.rules,...K(F.current.disabled)?{disabled:F.current.disabled}:{}});const S=(I,$)=>{const ne=y(u._fields,I);ne&&ne._f&&(ne._f.mount=$)};if(S(t,!0),C){const I=U(y(u._options.defaultValues,t,F.current.defaultValue));p(u._defaultValues,t,I),O(y(u._formValues,t))&&p(u._formValues,t,I)}return!l&&u.register(t),v.current=t,()=>{(l?C&&!u._state.action:C)?u.unregister(t):S(t,!1)}},[t,u,l,a]),b.useEffect(()=>{u._setDisabledField({disabled:i,name:t})},[i,t,u]),b.useMemo(()=>({field:_,formState:g,fieldState:N}),[_,g,N])}var Ut=(e,s,t,i,u)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:u||!0}}:{},ye=e=>Array.isArray(e)?e:[e],Je=()=>{let e=[];return{get observers(){return e},next:u=>{for(const a of e)a.next&&a.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(a=>a!==u)}}),unsubscribe:()=>{e=[]}}};function ct(e,s){const t={};for(const i in e)if(e.hasOwnProperty(i)){const u=e[i],a=s[i];if(u&&M(u)&&a){const c=ct(u,a);M(c)&&(t[i]=c)}else e[i]&&(t[i]=a)}return t}var B=e=>M(e)&&!Object.keys(e).length,Ne=e=>e.type==="file",ee=e=>typeof e=="function",Fe=e=>{if(!Oe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},ft=e=>e.type==="select-multiple",Ie=e=>e.type==="radio",Pt=e=>Ie(e)||he(e),ke=e=>Fe(e)&&e.isConnected;function Nt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=O(e)?i++:e[s[i++]];return e}function It(e){for(const s in e)if(e.hasOwnProperty(s)&&!O(e[s]))return!1;return!0}function L(e,s){const t=Array.isArray(s)?s:xe(s)?[s]:Le(s),i=t.length===1?e:Nt(e,t),u=t.length-1,a=t[u];return i&&delete i[a],u!==0&&(M(i)&&B(i)||Array.isArray(i)&&It(i))&&L(e,t.slice(0,-1)),e}var Ht=e=>{for(const s in e)if(ee(e[s]))return!0;return!1};function yt(e){return Array.isArray(e)||M(e)&&!Ht(e)}function pe(e,s={}){for(const t in e){const i=e[t];yt(i)?(s[t]=Array.isArray(i)?[]:{},pe(i,s[t])):O(i)||(s[t]=!0)}return s}function de(e,s,t){t||(t=pe(s));for(const i in e){const u=e[i];if(yt(u))O(s)||Re(t[i])?t[i]=pe(u,Array.isArray(u)?[]:{}):de(u,j(s)?{}:s[i],t[i]);else{const a=s[i];t[i]=!Z(u,a)}}return t}const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var mt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!O(e[0].attributes.value)?O(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe},ht=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>O(e)?e:s?e===""?NaN:e&&+e:t&&z(e)?new Date(e):i?i(e):e;const Ze={isValid:!1,value:null};var gt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ze):Ze;function et(e){const s=e.ref;return Ne(s)?s.files:Ie(s)?gt(e.refs).value:ft(s)?[...s.selectedOptions].map(({value:t})=>t):he(s)?mt(e.refs).value:ht(O(s.value)?e.ref.value:s.value,e)}var Bt=(e,s,t,i)=>{const u={};for(const a of e){const c=y(s,a);c&&p(u,a,c._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:i}},Ve=e=>e instanceof RegExp,fe=e=>O(e)?e:Ve(e)?e.source:M(e)?Ve(e.value)?e.value.source:e.value:e,tt=e=>({isOnSubmit:!e||e===X.onSubmit,isOnBlur:e===X.onBlur,isOnChange:e===X.onChange,isOnAll:e===X.all,isOnTouch:e===X.onTouched});const rt="AsyncFunction";var qt=e=>!!e&&!!e.validate&&!!(ee(e.validate)&&e.validate.constructor.name===rt||M(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===rt)),Wt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),st=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const me=(e,s,t,i)=>{for(const u of t||Object.keys(e)){const a=y(e,u);if(a){const{_f:c,...l}=a;if(c){if(c.refs&&c.refs[0]&&s(c.refs[0],u)&&!i)return!0;if(c.ref&&s(c.ref,c.name)&&!i)return!0;if(me(l,s))break}else if(M(l)&&me(l,s))break}}};function it(e,s,t){const i=y(e,t);if(i||xe(t))return{error:i,name:t};const u=t.split(".");for(;u.length;){const a=u.join("."),c=y(s,a),l=y(e,a);if(c&&!Array.isArray(c)&&t!==a)return{name:t};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};u.pop()}return{name:t}}var jt=(e,s,t,i)=>{t(e);const{name:u,...a}=e;return B(a)||Object.keys(a).length>=Object.keys(s).length||Object.keys(a).find(c=>s[c]===(!i||X.all))},$t=(e,s,t)=>!e||!s||e===s||ye(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),Kt=(e,s,t,i,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(s||e):(t?i.isOnBlur:u.isOnBlur)?!e:(t?i.isOnChange:u.isOnChange)?e:!0,zt=(e,s)=>!Te(y(e,s)).length&&L(e,s),Gt=(e,s,t)=>{const i=ye(y(e,t));return p(i,"root",s[t]),p(e,t,i),e};function nt(e,s,t="validate"){if(z(e)||Array.isArray(e)&&e.every(z)||K(e)&&!e)return{type:t,message:z(e)?e:"",ref:s}}var le=e=>M(e)&&!Ve(e)?e:{value:e,message:""},at=async(e,s,t,i,u,a)=>{const{ref:c,refs:l,required:w,maxLength:x,minLength:g,min:F,max:v,pattern:G,validate:N,name:D,valueAsNumber:P,mount:q}=e._f,_=y(t,D);if(!q||s.has(D))return{};const C=l?l[0]:c,V=A=>{u&&C.reportValidity&&(C.setCustomValidity(K(A)?"":A||""),C.reportValidity())},S={},I=Ie(c),$=he(c),ne=I||$,J=(P||Ne(c))&&O(c.value)&&O(_)||Fe(c)&&c.value===""||_===""||Array.isArray(_)&&!_.length,ae=Ut.bind(null,D,i,S),te=(A,k,T,H=se.maxLength,W=se.minLength)=>{const re=A?k:T;S[D]={type:A?H:W,message:re,ref:c,...ae(A?H:W,re)}};if(a?!Array.isArray(_)||!_.length:w&&(!ne&&(J||j(_))||K(_)&&!_||$&&!mt(l).isValid||I&&!gt(l).isValid)){const{value:A,message:k}=z(w)?{value:!!w,message:w}:le(w);if(A&&(S[D]={type:se.required,message:k,ref:C,...ae(se.required,k)},!i))return V(k),S}if(!J&&(!j(F)||!j(v))){let A,k;const T=le(v),H=le(F);if(!j(_)&&!isNaN(_)){const W=c.valueAsNumber||_&&+_;j(T.value)||(A=W>T.value),j(H.value)||(k=W<H.value)}else{const W=c.valueAsDate||new Date(_),re=ge=>new Date(new Date().toDateString()+" "+ge),ce=c.type=="time",oe=c.type=="week";z(T.value)&&_&&(A=ce?re(_)>re(T.value):oe?_>T.value:W>new Date(T.value)),z(H.value)&&_&&(k=ce?re(_)<re(H.value):oe?_<H.value:W<new Date(H.value))}if((A||k)&&(te(!!A,T.message,H.message,se.max,se.min),!i))return V(S[D].message),S}if((x||g)&&!J&&(z(_)||a&&Array.isArray(_))){const A=le(x),k=le(g),T=!j(A.value)&&_.length>+A.value,H=!j(k.value)&&_.length<+k.value;if((T||H)&&(te(T,A.message,k.message),!i))return V(S[D].message),S}if(G&&!J&&z(_)){const{value:A,message:k}=le(G);if(Ve(A)&&!_.match(A)&&(S[D]={type:se.pattern,message:k,ref:c,...ae(se.pattern,k)},!i))return V(k),S}if(N){if(ee(N)){const A=await N(_,t),k=nt(A,C);if(k&&(S[D]={...k,...ae(se.validate,k.message)},!i))return V(k.message),S}else if(M(N)){let A={};for(const k in N){if(!B(A)&&!i)break;const T=nt(await N[k](_,t),C,k);T&&(A={...T,...ae(k,T.message)},V(T.message),i&&(S[D]=A))}if(!B(A)&&(S[D]={ref:C,...A},!i))return S}}return V(!0),S};const Yt={mode:X.onSubmit,reValidateMode:X.onChange,shouldFocusError:!0};function Jt(e={}){let s={...Yt,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ee(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},u=M(s.defaultValues)||M(s.values)?U(s.defaultValues||s.values)||{}:{},a=s.shouldUnregister?{}:U(u),c={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},w,x=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let F={...g};const v={array:Je(),state:Je()},G=s.criteriaMode===X.all,N=r=>n=>{clearTimeout(x),x=setTimeout(r,n)},D=async r=>{if(!s.disabled&&(g.isValid||F.isValid||r)){const n=s.resolver?B((await $()).errors):await J(i,!0);n!==t.isValid&&v.state.next({isValid:n})}},P=(r,n)=>{!s.disabled&&(g.isValidating||g.validatingFields||F.isValidating||F.validatingFields)&&((r||Array.from(l.mount)).forEach(o=>{o&&(n?p(t.validatingFields,o,n):L(t.validatingFields,o))}),v.state.next({validatingFields:t.validatingFields,isValidating:!B(t.validatingFields)}))},q=(r,n=[],o,m,f=!0,d=!0)=>{if(m&&o&&!s.disabled){if(c.action=!0,d&&Array.isArray(y(i,r))){const h=o(y(i,r),m.argA,m.argB);f&&p(i,r,h)}if(d&&Array.isArray(y(t.errors,r))){const h=o(y(t.errors,r),m.argA,m.argB);f&&p(t.errors,r,h),zt(t.errors,r)}if((g.touchedFields||F.touchedFields)&&d&&Array.isArray(y(t.touchedFields,r))){const h=o(y(t.touchedFields,r),m.argA,m.argB);f&&p(t.touchedFields,r,h)}(g.dirtyFields||F.dirtyFields)&&(t.dirtyFields=de(u,a)),v.state.next({name:r,isDirty:te(r,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else p(a,r,n)},_=(r,n)=>{p(t.errors,r,n),v.state.next({errors:t.errors})},C=r=>{t.errors=r,v.state.next({errors:t.errors,isValid:!1})},V=(r,n,o,m)=>{const f=y(i,r);if(f){const d=y(a,r,O(o)?y(u,r):o);O(d)||m&&m.defaultChecked||n?p(a,r,n?d:et(f._f)):T(r,d),c.mount&&!c.action&&D()}},S=(r,n,o,m,f)=>{let d=!1,h=!1;const E={name:r};if(!s.disabled){if(!o||m){(g.isDirty||F.isDirty)&&(h=t.isDirty,t.isDirty=E.isDirty=te(),d=h!==E.isDirty);const R=Z(y(u,r),n);h=!!y(t.dirtyFields,r),R?L(t.dirtyFields,r):p(t.dirtyFields,r,!0),E.dirtyFields=t.dirtyFields,d=d||(g.dirtyFields||F.dirtyFields)&&h!==!R}if(o){const R=y(t.touchedFields,r);R||(p(t.touchedFields,r,o),E.touchedFields=t.touchedFields,d=d||(g.touchedFields||F.touchedFields)&&R!==o)}d&&f&&v.state.next(E)}return d?E:{}},I=(r,n,o,m)=>{const f=y(t.errors,r),d=(g.isValid||F.isValid)&&K(n)&&t.isValid!==n;if(s.delayError&&o?(w=N(()=>_(r,o)),w(s.delayError)):(clearTimeout(x),w=null,o?p(t.errors,r,o):L(t.errors,r)),(o?!Z(f,o):f)||!B(m)||d){const h={...m,...d&&K(n)?{isValid:n}:{},errors:t.errors,name:r};t={...t,...h},v.state.next(h)}},$=async r=>{P(r,!0);const n=await s.resolver(a,s.context,Bt(r||l.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return P(r),n},ne=async r=>{const{errors:n}=await $(r);if(r)for(const o of r){const m=y(n,o);m?p(t.errors,o,m):L(t.errors,o)}else t.errors=n;return n},J=async(r,n,o={valid:!0})=>{for(const m in r){const f=r[m];if(f){const{_f:d,...h}=f;if(d){const E=l.array.has(d.name),R=f._f&&qt(f._f);R&&g.validatingFields&&P([d.name],!0);const Y=await at(f,l.disabled,a,G,s.shouldUseNativeValidation&&!n,E);if(R&&g.validatingFields&&P([d.name]),Y[d.name]&&(o.valid=!1,n))break;!n&&(y(Y,d.name)?E?Gt(t.errors,Y,d.name):p(t.errors,d.name,Y[d.name]):L(t.errors,d.name))}!B(h)&&await J(h,n,o)}}return o.valid},ae=()=>{for(const r of l.unMount){const n=y(i,r);n&&(n._f.refs?n._f.refs.every(o=>!ke(o)):!ke(n._f.ref))&&Se(r)}l.unMount=new Set},te=(r,n)=>!s.disabled&&(r&&n&&p(a,r,n),!Z(ge(),u)),A=(r,n,o)=>De(r,l,{...c.mount?a:O(n)?u:z(r)?{[r]:n}:n},o,n),k=r=>Te(y(c.mount?a:u,r,s.shouldUnregister?y(u,r,[]):[])),T=(r,n,o={})=>{const m=y(i,r);let f=n;if(m){const d=m._f;d&&(!d.disabled&&p(a,r,ht(n,d)),f=Fe(d.ref)&&j(n)?"":n,ft(d.ref)?[...d.ref.options].forEach(h=>h.selected=f.includes(h.value)):d.refs?he(d.ref)?d.refs.forEach(h=>{(!h.defaultChecked||!h.disabled)&&(Array.isArray(f)?h.checked=!!f.find(E=>E===h.value):h.checked=f===h.value||!!f)}):d.refs.forEach(h=>h.checked=h.value===f):Ne(d.ref)?d.ref.value="":(d.ref.value=f,d.ref.type||v.state.next({name:r,values:U(a)})))}(o.shouldDirty||o.shouldTouch)&&S(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&oe(r)},H=(r,n,o)=>{for(const m in n){if(!n.hasOwnProperty(m))return;const f=n[m],d=r+"."+m,h=y(i,d);(l.array.has(r)||M(f)||h&&!h._f)&&!ue(f)?H(d,f,o):T(d,f,o)}},W=(r,n,o={})=>{const m=y(i,r),f=l.array.has(r),d=U(n);p(a,r,d),f?(v.array.next({name:r,values:U(a)}),(g.isDirty||g.dirtyFields||F.isDirty||F.dirtyFields)&&o.shouldDirty&&v.state.next({name:r,dirtyFields:de(u,a),isDirty:te(r,d)})):m&&!m._f&&!j(d)?H(r,d,o):T(r,d,o),st(r,l)&&v.state.next({...t,name:r}),v.state.next({name:c.mount?r:void 0,values:U(a)})},re=async r=>{c.mount=!0;const n=r.target;let o=n.name,m=!0;const f=y(i,o),d=R=>{m=Number.isNaN(R)||ue(R)&&isNaN(R.getTime())||Z(R,y(a,o,R))},h=tt(s.mode),E=tt(s.reValidateMode);if(f){let R,Y;const ve=n.type?et(f._f):ot(r),ie=r.type===_e.BLUR||r.type===_e.FOCUS_OUT,wt=!Wt(f._f)&&!s.resolver&&!y(t.errors,o)&&!f._f.deps||Kt(ie,y(t.touchedFields,o),t.isSubmitted,E,h),Ee=st(o,l,ie);p(a,o,ve),ie?(!n||!n.readOnly)&&(f._f.onBlur&&f._f.onBlur(r),w&&w(0)):f._f.onChange&&f._f.onChange(r);const Ce=S(o,ve,ie),Et=!B(Ce)||Ee;if(!ie&&v.state.next({name:o,type:r.type,values:U(a)}),wt)return(g.isValid||F.isValid)&&(s.mode==="onBlur"?ie&&D():ie||D()),Et&&v.state.next({name:o,...Ee?{}:Ce});if(!ie&&Ee&&v.state.next({...t}),s.resolver){const{errors:Ge}=await $([o]);if(d(ve),m){const Ct=it(t.errors,i,o),Ye=it(Ge,i,Ct.name||o);R=Ye.error,o=Ye.name,Y=B(Ge)}}else P([o],!0),R=(await at(f,l.disabled,a,G,s.shouldUseNativeValidation))[o],P([o]),d(ve),m&&(R?Y=!1:(g.isValid||F.isValid)&&(Y=await J(i,!0)));m&&(f._f.deps&&(!Array.isArray(f._f.deps)||f._f.deps.length>0)&&oe(f._f.deps),I(o,Y,R,Ce))}},ce=(r,n)=>{if(y(t.errors,n)&&r.focus)return r.focus(),1},oe=async(r,n={})=>{let o,m;const f=ye(r);if(s.resolver){const d=await ne(O(r)?r:f);o=B(d),m=r?!f.some(h=>y(d,h)):o}else r?(m=(await Promise.all(f.map(async d=>{const h=y(i,d);return await J(h&&h._f?{[d]:h}:h)}))).every(Boolean),!(!m&&!t.isValid)&&D()):m=o=await J(i);return v.state.next({...!z(r)||(g.isValid||F.isValid)&&o!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:o}:{},errors:t.errors}),n.shouldFocus&&!m&&me(i,ce,r?f:l.mount),m},ge=(r,n)=>{let o={...c.mount?a:u};return n&&(o=ct(n.dirtyFields?t.dirtyFields:t.touchedFields,o)),O(r)?o:z(r)?y(o,r):r.map(m=>y(o,m))},He=(r,n)=>({invalid:!!y((n||t).errors,r),isDirty:!!y((n||t).dirtyFields,r),error:y((n||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((n||t).touchedFields,r)}),bt=r=>{r&&ye(r).forEach(n=>L(t.errors,n)),v.state.next({errors:r?t.errors:{}})},Be=(r,n,o)=>{const m=(y(i,r,{_f:{}})._f||{}).ref,f=y(t.errors,r)||{},{ref:d,message:h,type:E,...R}=f;p(t.errors,r,{...R,...n,ref:m}),v.state.next({name:r,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&m&&m.focus&&m.focus()},_t=(r,n)=>ee(r)?v.state.subscribe({next:o=>"values"in o&&r(A(void 0,n),o)}):A(r,n,!0),qe=r=>v.state.subscribe({next:n=>{$t(r.name,n.name,r.exact)&&jt(n,r.formState||g,At,r.reRenderRoot)&&r.callback({values:{...a},...t,...n,defaultValues:u})}}).unsubscribe,Ft=r=>(c.mount=!0,F={...F,...r.formState},qe({...r,formState:F})),Se=(r,n={})=>{for(const o of r?ye(r):l.mount)l.mount.delete(o),l.array.delete(o),n.keepValue||(L(i,o),L(a,o)),!n.keepError&&L(t.errors,o),!n.keepDirty&&L(t.dirtyFields,o),!n.keepTouched&&L(t.touchedFields,o),!n.keepIsValidating&&L(t.validatingFields,o),!s.shouldUnregister&&!n.keepDefaultValue&&L(u,o);v.state.next({values:U(a)}),v.state.next({...t,...n.keepDirty?{isDirty:te()}:{}}),!n.keepIsValid&&D()},We=({disabled:r,name:n})=>{(K(r)&&c.mount||r||l.disabled.has(n))&&(r?l.disabled.add(n):l.disabled.delete(n))},Ae=(r,n={})=>{let o=y(i,r);const m=K(n.disabled)||K(s.disabled);return p(i,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...n}}),l.mount.add(r),o?We({disabled:K(n.disabled)?n.disabled:s.disabled,name:r}):V(r,!0,n.value),{...m?{disabled:n.disabled||s.disabled}:{},...s.progressive?{required:!!n.required,min:fe(n.min),max:fe(n.max),minLength:fe(n.minLength),maxLength:fe(n.maxLength),pattern:fe(n.pattern)}:{},name:r,onChange:re,onBlur:re,ref:f=>{if(f){Ae(r,n),o=y(i,r);const d=O(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,h=Pt(d),E=o._f.refs||[];if(h?E.find(R=>R===d):d===o._f.ref)return;p(i,r,{_f:{...o._f,...h?{refs:[...E.filter(ke),d,...Array.isArray(y(u,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),V(r,!1,void 0,d)}else o=y(i,r,{}),o._f&&(o._f.mount=!1),(s.shouldUnregister||n.shouldUnregister)&&!(lt(l.array,r)&&c.action)&&l.unMount.add(r)}}},we=()=>s.shouldFocusError&&me(i,ce,l.mount),Vt=r=>{K(r)&&(v.state.next({disabled:r}),me(i,(n,o)=>{const m=y(i,o);m&&(n.disabled=m._f.disabled||r,Array.isArray(m._f.refs)&&m._f.refs.forEach(f=>{f.disabled=m._f.disabled||r}))},0,!1))},je=(r,n)=>async o=>{let m;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let f=U(a);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:h}=await $();t.errors=d,f=U(h)}else await J(i);if(l.disabled.size)for(const d of l.disabled)L(f,d);if(L(t.errors,"root"),B(t.errors)){v.state.next({errors:{}});try{await r(f,o)}catch(d){m=d}}else n&&await n({...t.errors},o),we(),setTimeout(we);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(t.errors)&&!m,submitCount:t.submitCount+1,errors:t.errors}),m)throw m},xt=(r,n={})=>{y(i,r)&&(O(n.defaultValue)?W(r,U(y(u,r))):(W(r,n.defaultValue),p(u,r,U(n.defaultValue))),n.keepTouched||L(t.touchedFields,r),n.keepDirty||(L(t.dirtyFields,r),t.isDirty=n.defaultValue?te(r,U(y(u,r))):te()),n.keepError||(L(t.errors,r),g.isValid&&D()),v.state.next({...t}))},$e=(r,n={})=>{const o=r?U(r):u,m=U(o),f=B(r),d=f?u:m;if(n.keepDefaultValues||(u=o),!n.keepValues){if(n.keepDirtyValues){const h=new Set([...l.mount,...Object.keys(de(u,a))]);for(const E of Array.from(h))y(t.dirtyFields,E)?p(d,E,y(a,E)):W(E,y(d,E))}else{if(Oe&&O(r))for(const h of l.mount){const E=y(i,h);if(E&&E._f){const R=Array.isArray(E._f.refs)?E._f.refs[0]:E._f.ref;if(Fe(R)){const Y=R.closest("form");if(Y){Y.reset();break}}}}if(n.keepFieldsRef)for(const h of l.mount)W(h,y(d,h));else i={}}a=s.shouldUnregister?n.keepDefaultValues?U(u):{}:U(d),v.array.next({values:{...d}}),v.state.next({values:{...d}})}l={mount:n.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!g.isValid||!!n.keepIsValid||!!n.keepDirtyValues||!s.shouldUnregister&&!B(d),c.watch=!!s.shouldUnregister,v.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:f?!1:n.keepDirty?t.isDirty:!!(n.keepDefaultValues&&!Z(r,u)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:n.keepDirtyValues?n.keepDefaultValues&&a?de(u,a):t.dirtyFields:n.keepDefaultValues&&r?de(u,r):n.keepDirty?t.dirtyFields:{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:u})},Ke=(r,n)=>$e(ee(r)?r(a):r,n),St=(r,n={})=>{const o=y(i,r),m=o&&o._f;if(m){const f=m.refs?m.refs[0]:m.ref;f.focus&&(f.focus(),n.shouldSelect&&ee(f.select)&&f.select())}},At=r=>{t={...t,...r}},ze={control:{register:Ae,unregister:Se,getFieldState:He,handleSubmit:je,setError:Be,_subscribe:qe,_runSchema:$,_focusError:we,_getWatch:A,_getDirty:te,_setValid:D,_setFieldArray:q,_setDisabledField:We,_setErrors:C,_getFieldArray:k,_reset:$e,_resetDefaultValues:()=>ee(s.defaultValues)&&s.defaultValues().then(r=>{Ke(r,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:ae,_disableForm:Vt,_subjects:v,_proxyFormState:g,get _fields(){return i},get _formValues(){return a},get _state(){return c},set _state(r){c=r},get _defaultValues(){return u},get _names(){return l},set _names(r){l=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:Ft,trigger:oe,register:Ae,handleSubmit:je,watch:_t,setValue:W,getValues:ge,reset:Ke,resetField:xt,clearErrors:bt,unregister:Se,setError:Be,setFocus:St,getFieldState:He};return{...ze,formControl:ze}}function or(e={}){const s=b.useRef(void 0),t=b.useRef(void 0),[i,u]=b.useState({isDirty:!1,isValidating:!1,isLoading:ee(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ee(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!ee(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:c,...l}=Jt(e);s.current={...l,formState:i}}const a=s.current.control;return a._options=e,Pe(()=>{const c=a._subscribe({formState:a._proxyFormState,callback:()=>u({...a._formState}),reRenderRoot:!0});return u(l=>({...l,isReady:!0})),a._formState.isReady=!0,c},[a]),b.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),b.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),b.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),b.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),b.useEffect(()=>{if(a._proxyFormState.isDirty){const c=a._getDirty();c!==i.isDirty&&a._subjects.state.next({isDirty:c})}},[a,i.isDirty]),b.useEffect(()=>{var c;e.values&&!Z(e.values,t.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),!((c=a._options.resetOptions)===null||c===void 0)&&c.keepIsValid||a._setValid(),t.current=e.values,u(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),b.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),s.current.formState=dt(i,a),s.current}const vt=Q.createContext(void 0),Qt=vt.Provider,lr=()=>{const e=Q.useContext(vt);return kt(!!e,"Could not useFormContext() outside a Form, or multiple versions of Flow installed."),e},Xt=e=>{const s=t=>{typeof t=="function"&&t()};e instanceof Promise?e.then(s):s(e)},Zt=e=>{const s=Dt.useNew({}),t=Q.useRef(0),i=Q.useRef(null),u=s.state.useValue(),a=Q.useRef(u);return Q.useEffect(()=>{u==="isIdle"&&a.current==="isSucceeded"&&Xt(i.current),a.current=u},[u]),Q.useEffect(()=>e.subscribe({formState:{errors:!0},callback:({isSubmitted:l=!1,isSubmitSuccessful:w=!1,submitCount:x=0,errors:g})=>{if(x===0&&t.current>0&&(t.current=0),t.current!==x&&(t.current=x,l))if(w)s.state.onSucceeded();else{const F=l&&g&&Object.entries(g).length>0?g:void 0;s.state.onFailed(F)}}}),[e.subscribe]),{action:s,registerSubmitResult:l=>{Rt(l)?(s.state.onAsyncStart(),l.then(w=>{i.current=w})):i.current=l}}},er=e=>be.jsx("form",{...e});function tr(e){const{form:s,children:t,onSubmit:i,formComponent:u=er,isReadOnly:a,ref:c,...l}=e,[w,x]=Q.useState(!!a),g=Q.useId(),F=Q.useMemo(()=>u,[g]),v=Q.useRef(null),G=a||w,{action:N,registerSubmitResult:D}=Zt(s),P=q=>{const{isSubmitting:_,isValidating:C}=s.control._formState,V=q&&"nativeEvent"in q?q:void 0;if(V?.stopPropagation(),_||C){V?.preventDefault();return}return s.handleSubmit(I=>{x(!0);const $=i(I,V);return D($),$})(V).finally(()=>{x(!1)})};return be.jsx(Tt,{...s,children:be.jsx(Qt,{value:{form:s,id:g,isReadOnly:G,setReadOnly:x,submit:P,submitButtonRef:v,formActionModel:N},children:be.jsx(F,{...l,ref:c,id:g,onSubmit:P,children:t})})})}tr.__docgenInfo={description:"",methods:[],displayName:"Form",props:{form:{required:!0,tsType:{name:"UseFormReturn",elements:[{name:"F"}],raw:"UseFormReturn<F>"},description:""},onSubmit:{required:!0,tsType:{name:"SubmitHandler",elements:[{name:"F"}],raw:"SubmitHandler<F>"},description:""},formComponent:{required:!1,tsType:{name:"FC",elements:[{name:"Omit",elements:[{name:"FC",elements:[{name:"PropsWithChildren",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  onSubmit?: FormEventHandler | FormOnSubmitHandler<never>;
  ref?: Ref<HTMLFormElement>;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"onSubmit",value:{name:"union",raw:"FormEventHandler | FormOnSubmitHandler<never>",elements:[{name:"FormEventHandler"},{name:"SubmitHandler",elements:[{name:"never"}],raw:"SubmitHandler<F>"}],required:!1}},{key:"ref",value:{name:"Ref",elements:[{name:"HTMLFormElement"}],raw:"Ref<HTMLFormElement>",required:!1}}]}}],raw:`PropsWithChildren<{
  id: string;
  onSubmit?: FormEventHandler | FormOnSubmitHandler<never>;
  ref?: Ref<HTMLFormElement>;
}>`}],raw:`FC<
  PropsWithChildren<{
    id: string;
    onSubmit?: FormEventHandler | FormOnSubmitHandler<never>;
    ref?: Ref<HTMLFormElement>;
  }>
>`},{name:"literal",value:'"ref"'}],raw:'Omit<FormComponentType, "ref">'}],raw:'FC<Omit<FormComponentType, "ref">>'},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["Omit","PropsWithChildren"]};export{tr as F,lr as a,ur as b,Mt as c,or as u};
