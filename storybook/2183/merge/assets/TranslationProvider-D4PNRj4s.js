import{r as m,R as L,j as S}from"./iframe-CN4G8qqm.js";import{c as we}from"./clsx-B-dksMZM.js";import{O as Ge}from"./OverlayContextProvider-HOHtpdM6.js";import{L as Ue}from"./LoadingSpinner-D2A4fUcq.js";import{t as Ke,f as Ze,v as ve,O as B,m as be,a as ne,b as Xe}from"./PropsContextProvider-4OAE62jj.js";import{a as Qe}from"./ariaLive-BjvyJtUO.js";import"./Activity-BEbOvIp9.js";import{T as Ye}from"./Text-0Ubm83r2.js";import"./IconChevronDown-oGa76fM6.js";import{u as et}from"./useOverlayController-CzXHiyE9.js";import{$ as tt,c as xe,b as Se,d as st}from"./utils-DbmEdXKf.js";import{a as nt,b as it,c as rt,d as ot,e as K,f as at,g as ie,h as $e,i as lt,j as ct,k as ut}from"./context-CQHW5bQg.js";import{a as Ee,$ as Z,b as ht}from"./mergeRefs-B9PoHYFQ.js";import{$ as Oe}from"./filterDOMProps-i7L6S0l1.js";import{$ as re,a as ft}from"./SelectionIndicator-D0PPGfWn.js";import{r as Te}from"./index-SBtdq8jY.js";import{D as oe,a as dt}from"./luxon-CkcISRbr.js";function q(...n){return Ke(pt,n)}function pt(n,e){let t={};for(let[s,r]of Object.entries(n))t[s]=e(r,s,n);return t}let x=typeof document<"u"&&window.visualViewport;function gt(){let n=Ee(),[e,t]=m.useState(()=>n?{width:0,height:0}:ae());return m.useEffect(()=>{let s=()=>{x&&x.scale>1||t(o=>{let a=ae();return a.width===o.width&&a.height===o.height?o:a})},r,i=o=>{x&&x.scale>1||re(o.target)&&(r=requestAnimationFrame(()=>{(!document.activeElement||!re(document.activeElement))&&t(a=>{let l={width:window.innerWidth,height:window.innerHeight};return l.width===a.width&&l.height===a.height?a:l})}))};return window.addEventListener("blur",i,!0),x?x.addEventListener("resize",s):window.addEventListener("resize",s),()=>{cancelAnimationFrame(r),window.removeEventListener("blur",i,!0),x?x.removeEventListener("resize",s):window.removeEventListener("resize",s)}},[]),e}function ae(){return{width:x?x.width*x.scale:window.innerWidth,height:x?x.height*x.scale:window.innerHeight}}function mt(n,e,t){let{overlayProps:s,underlayProps:r}=nt({...n,isOpen:e.isOpen,onClose:e.close},t);return it({isDisabled:!e.isOpen}),rt(),m.useEffect(()=>{if(e.isOpen&&t.current)return ot([t.current],{shouldUseInert:!0})},[e.isOpen,t]),{modalProps:Z(s),underlayProps:r}}const yt=m.createContext(null),X=m.createContext(null),wt=m.forwardRef(function(e,t){if(m.useContext(X))return L.createElement(le,{...e,modalRef:t},e.children);let{isDismissable:r,isKeyboardDismissDisabled:i,isOpen:o,defaultOpen:a,onOpenChange:l,children:c,isEntering:u,isExiting:f,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:d,...g}=e;return L.createElement(Le,{isDismissable:r,isKeyboardDismissDisabled:i,isOpen:o,defaultOpen:a,onOpenChange:l,isEntering:u,isExiting:f,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:d},L.createElement(le,{...g,modalRef:t},c))});function vt(n,e){[n,e]=tt(n,e,yt);let t=m.useContext(K),s=at(n),r=n.isOpen!=null||n.defaultOpen!=null||!t?s:t,i=xe(e),o=m.useRef(null),a=ie(i,r.isOpen),l=ie(o,r.isOpen),c=a||l||n.isExiting||!1,u=Ee();return!r.isOpen&&!c||u?null:L.createElement(bt,{...n,state:r,isExiting:c,overlayRef:i,modalRef:o})}const Le=m.forwardRef(vt);function bt({UNSTABLE_portalContainer:n,...e}){let t=e.modalRef,{state:s}=e,{modalProps:r,underlayProps:i}=mt(e,s,t),o=$e(e.overlayRef)||e.isEntering||!1,a=Se({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:o,isExiting:e.isExiting,state:s}}),l=gt(),c;if(typeof document<"u"){let f=ft(document.body)?document.body:document.scrollingElement||document.documentElement,h=f.getBoundingClientRect().height%1;c=f.scrollHeight-h}let u={...a.style,"--visual-viewport-height":l.height+"px","--page-height":c!==void 0?c+"px":void 0};return L.createElement(ct,{isExiting:e.isExiting,portalContainer:n},L.createElement("div",{...Z(Oe(e,{global:!0}),i),...a,style:u,ref:e.overlayRef,"data-entering":o||void 0,"data-exiting":e.isExiting||void 0},L.createElement(st,{values:[[X,{modalProps:r,modalRef:t,isExiting:e.isExiting,isDismissable:e.isDismissable}],[K,s]]},a.children)))}function le(n){let{modalProps:e,modalRef:t,isExiting:s,isDismissable:r}=m.useContext(X),i=m.useContext(K),o=m.useMemo(()=>ht(n.modalRef,t),[n.modalRef,t]),a=xe(o),l=$e(a),c=Se({...n,defaultClassName:"react-aria-Modal",values:{isEntering:l,isExiting:s,state:i}});return L.createElement("div",{...Z(Oe(n,{global:!0}),e),...c,ref:a,"data-entering":l||void 0,"data-exiting":s||void 0},r&&L.createElement(lt,{onDismiss:i.close}),c.children)}const xt="flow--field-description",St={fieldDescription:xt},$t=Ze("FieldDescription",n=>{const{children:e,className:t,ref:s,...r}=n,i=we(St.fieldDescription,t);return S.jsx(Ye,{slot:"description",...r,className:i,ref:s,children:e})});$t.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"FieldDescription"};const Et="flow--overlay",Re={overlay:Et},Q=m.memo(n=>{const e=m.useContext(ve).LoadingSpinner??Ue;return S.jsx(e,{...n})});Q.displayName="LoadingSpinnerView";Q.__docgenInfo={description:"",methods:[],displayName:"LoadingSpinnerView"};const Ce=()=>(Qe(),S.jsx(Q,{color:"dark"}));Ce.__docgenInfo={description:"",methods:[],displayName:"OverlaySuspenseFallback"};const Me=n=>{const{children:e,className:t,...s}=n,[r,i]=m.useState(!1),o=()=>(m.useLayoutEffect(()=>(i(!0),()=>i(!1)),[i]),S.jsx(Ce,{...s})),a=r?Re.overlay:t;return S.jsx(Le,{...s,className:a,children:S.jsx(wt,{children:S.jsx(m.Suspense,{fallback:S.jsx(o,{}),children:S.jsx(ut,{children:e})})})})};Me.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const Y=m.memo(n=>{const e=m.useContext(ve).OverlayContent??Me;return S.jsx(e,{...n})});Y.displayName="OverlayContentView";Y.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const Ot=n=>{const{controller:e,children:t,isDismissable:s=!0,className:r,overlayType:i="Modal",isOpen:o,ref:a}=n,l=et(i,{reuseControllerFromContext:!0}),c=e??l,u=o??c.useIsOpen(),f=we(Re.overlay,r);return S.jsx(Y,{onOpenChange:h=>c.setOpen(h),isOpen:u,ref:a,isDismissable:s,className:f,children:S.jsx(Ge,{type:"Modal",controller:c,children:u&&t})})};Ot.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};function Tt(n){return typeof n=="function"}function _(n,...e){return Tt(n)?n(...e):n}var Lt=Object.assign;function Rt(n,e){var t;return(t=_(n))!==null&&t!==void 0?t:_(e)}function Ct(n,e){if(!n)throw e instanceof String?e.valueOf():new Error(e&&_(e))}const Mt="Not inside of a running context.",J=Symbol();function Pt(n){let e=J;return{run:function(r,i){const o=s()?t():J;e=r;const a=i();return e=o,a},use:t,useX:function(r){return Ct(s(),Rt(r,Mt)),e}};function t(){return s()?e:n}function s(){return e!==J}}function Pe(n){const e=Pt();return{bind:function(s,r){return function(...i){return t(s,(function(){return r(...i)}))}},run:t,use:e.use,useX:e.useX};function t(s,r){var i;const o=e.use(),a=Lt({},o||{},(i=_(n,s,o))!==null&&i!==void 0?i:s);return e.run(Object.freeze(a),r)}}Pe();const Ne=(n,e,t)=>{const s=n instanceof RegExp?ce(n,t):n,r=e instanceof RegExp?ce(e,t):e,i=s!==null&&r!=null&&Nt(s,r,t);return i&&{start:i[0],end:i[1],pre:t.slice(0,i[0]),body:t.slice(i[0]+s.length,i[1]),post:t.slice(i[1]+r.length)}},ce=(n,e)=>{const t=e.match(n);return t?t[0]:null},Nt=(n,e,t)=>{let s,r,i,o,a,l=t.indexOf(n),c=t.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(n===e)return[l,c];for(s=[],i=t.length;u>=0&&!a;){if(u===l)s.push(u),l=t.indexOf(n,u+1);else if(s.length===1){const f=s.pop();f!==void 0&&(a=[f,c])}else r=s.pop(),r!==void 0&&r<i&&(i=r,o=c),c=t.indexOf(e,u+1);u=l<c&&l>=0?l:c}s.length&&o!==void 0&&(a=[i,o])}return a},je="\0SLASH"+Math.random()+"\0",De="\0OPEN"+Math.random()+"\0",ee="\0CLOSE"+Math.random()+"\0",Ve="\0COMMA"+Math.random()+"\0",We="\0PERIOD"+Math.random()+"\0",jt=new RegExp(je,"g"),Dt=new RegExp(De,"g"),Vt=new RegExp(ee,"g"),Wt=new RegExp(Ve,"g"),At=new RegExp(We,"g"),kt=/\\\\/g,zt=/\\{/g,It=/\\}/g,Bt=/\\,/g,qt=/\\./g;function H(n){return isNaN(n)?n.charCodeAt(0):parseInt(n,10)}function _t(n){return n.replace(kt,je).replace(zt,De).replace(It,ee).replace(Bt,Ve).replace(qt,We)}function Ft(n){return n.replace(jt,"\\").replace(Dt,"{").replace(Vt,"}").replace(Wt,",").replace(At,".")}function Ae(n){if(!n)return[""];const e=[],t=Ne("{","}",n);if(!t)return n.split(",");const{pre:s,body:r,post:i}=t,o=s.split(",");o[o.length-1]+="{"+r+"}";const a=Ae(i);return i.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Jt(n){return n?(n.slice(0,2)==="{}"&&(n="\\{\\}"+n.slice(2)),j(_t(n),!0).map(Ft)):[]}function Ht(n){return"{"+n+"}"}function Gt(n){return/^-?0\d/.test(n)}function Ut(n,e){return n<=e}function Kt(n,e){return n>=e}function j(n,e){const t=[],s=Ne("{","}",n);if(!s)return[n];const r=s.pre,i=s.post.length?j(s.post,!1):[""];if(/\$$/.test(s.pre))for(let o=0;o<i.length;o++){const a=r+"{"+s.body+"}"+i[o];t.push(a)}else{const o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),l=o||a,c=s.body.indexOf(",")>=0;if(!l&&!c)return s.post.match(/,(?!,).*\}/)?(n=s.pre+"{"+s.body+ee+s.post,j(n)):[n];let u;if(l)u=s.body.split(/\.\./);else if(u=Ae(s.body),u.length===1&&u[0]!==void 0&&(u=j(u[0],!1).map(Ht),u.length===1))return i.map(h=>s.pre+u[0]+h);let f;if(l&&u[0]!==void 0&&u[1]!==void 0){const h=H(u[0]),d=H(u[1]),g=Math.max(u[0].length,u[1].length);let p=u.length===3&&u[2]!==void 0?Math.abs(H(u[2])):1,b=Ut;d<h&&(p*=-1,b=Kt);const M=u.some(Gt);f=[];for(let $=h;b($,d);$+=p){let y;if(a)y=String.fromCharCode($),y==="\\"&&(y="");else if(y=String($),M){const P=g-y.length;if(P>0){const A=new Array(P+1).join("0");$<0?y="-"+A+y.slice(1):y=A+y}}f.push(y)}}else{f=[];for(let h=0;h<u.length;h++)f.push.apply(f,j(u[h],!1))}for(let h=0;h<f.length;h++)for(let d=0;d<i.length;d++){const g=r+f[h]+i[d];(!e||l||g)&&t.push(g)}}return t}const Zt=1024*64,F=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>Zt)throw new TypeError("pattern is too long")},Xt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},N=n=>n.replace(/[[\]\\-]/g,"\\$&"),Qt=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ue=n=>n.join(""),Yt=(n,e)=>{const t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");const s=[],r=[];let i=t+1,o=!1,a=!1,l=!1,c=!1,u=t,f="";e:for(;i<n.length;){const p=n.charAt(i);if((p==="!"||p==="^")&&i===t+1){c=!0,i++;continue}if(p==="]"&&o&&!l){u=i+1;break}if(o=!0,p==="\\"&&!l){l=!0,i++;continue}if(p==="["&&!l){for(const[b,[R,M,$]]of Object.entries(Xt))if(n.startsWith(b,i)){if(f)return["$.",!1,n.length-t,!0];i+=b.length,$?r.push(R):s.push(R),a=a||M;continue e}}if(l=!1,f){p>f?s.push(N(f)+"-"+N(p)):p===f&&s.push(N(p)),f="",i++;continue}if(n.startsWith("-]",i+1)){s.push(N(p+"-")),i+=2;continue}if(n.startsWith("-",i+1)){f=p,i+=2;continue}s.push(N(p)),i++}if(u<i)return["",!1,0,!1];if(!s.length&&!r.length)return["$.",!1,n.length-t,!0];if(r.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!c){const p=s[0].length===2?s[0].slice(-1):s[0];return[Qt(p),!1,u-t,!1]}const h="["+(c?"^":"")+ue(s)+"]",d="["+(c?"":"^")+ue(r)+"]";return[s.length&&r.length?"("+h+"|"+d+")":s.length?h:d,a,u-t,!0]},D=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!0}={})=>t?e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?n.replace(/\[([^\/\\{}])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1"),es=new Set(["!","?","+","*","@"]),he=n=>es.has(n),ts="(?!(?:^|/)\\.\\.?(?:$|/))",k="(?!\\.)",ss=new Set(["[","."]),ns=new Set(["..","."]),is=new Set("().*{}+?[]^$\\!"),rs=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),te="[^/]",fe=te+"*?",de=te+"+?";class w{type;#s;#n;#r=!1;#e=[];#t;#o;#l;#a=!1;#i;#c;#h=!1;constructor(e,t,s={}){this.type=e,e&&(this.#n=!0),this.#t=t,this.#s=this.#t?this.#t.#s:this,this.#i=this.#s===this?s:this.#s.#i,this.#l=this.#s===this?[]:this.#s.#l,e==="!"&&!this.#s.#a&&this.#l.push(this),this.#o=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(const e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#c=this.#e.map(e=>String(e)).join("")}#d(){if(this!==this.#s)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let t=e,s=t.#t;for(;s;){for(let r=t.#o+1;!s.type&&r<s.#e.length;r++)for(const i of e.#e){if(typeof i=="string")throw new Error("string part in extglob AST??");i.copyIn(s.#e[r])}t=s,s=t.#t}}return this}push(...e){for(const t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof w&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){const e=this.type===null?this.#e.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#e.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#s||this.#s.#a&&this.#t?.type==="!")&&e.push({}),e}isStart(){if(this.#s===this)return!0;if(!this.#t?.isStart())return!1;if(this.#o===0)return!0;const e=this.#t;for(let t=0;t<this.#o;t++){const s=e.#e[t];if(!(s instanceof w&&s.type==="!"))return!1}return!0}isEnd(){if(this.#s===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();const e=this.#t?this.#t.#e.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const t=new w(this.type,e);for(const s of this.#e)t.copyIn(s);return t}static#u(e,t,s,r){let i=!1,o=!1,a=-1,l=!1;if(t.type===null){let d=s,g="";for(;d<e.length;){const p=e.charAt(d++);if(i||p==="\\"){i=!i,g+=p;continue}if(o){d===a+1?(p==="^"||p==="!")&&(l=!0):p==="]"&&!(d===a+2&&l)&&(o=!1),g+=p;continue}else if(p==="["){o=!0,a=d,l=!1,g+=p;continue}if(!r.noext&&he(p)&&e.charAt(d)==="("){t.push(g),g="";const b=new w(p,t);d=w.#u(e,b,d,r),t.push(b);continue}g+=p}return t.push(g),d}let c=s+1,u=new w(null,t);const f=[];let h="";for(;c<e.length;){const d=e.charAt(c++);if(i||d==="\\"){i=!i,h+=d;continue}if(o){c===a+1?(d==="^"||d==="!")&&(l=!0):d==="]"&&!(c===a+2&&l)&&(o=!1),h+=d;continue}else if(d==="["){o=!0,a=c,l=!1,h+=d;continue}if(he(d)&&e.charAt(c)==="("){u.push(h),h="";const g=new w(d,u);u.push(g),c=w.#u(e,g,c,r);continue}if(d==="|"){u.push(h),h="",f.push(u),u=new w(null,t);continue}if(d===")")return h===""&&t.#e.length===0&&(t.#h=!0),u.push(h),h="",t.push(...f,u),c;h+=d}return t.type=null,t.#n=void 0,t.#e=[e.substring(s-1)],c}static fromGlob(e,t={}){const s=new w(null,void 0,t);return w.#u(e,s,0,t),s}toMMPattern(){if(this!==this.#s)return this.#s.toMMPattern();const e=this.toString(),[t,s,r,i]=this.toRegExpSource();if(!(r||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return s;const a=(this.#i.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){const t=e??!!this.#i.dot;if(this.#s===this&&this.#d(),!this.type){const l=this.isStart()&&this.isEnd()&&!this.#e.some(d=>typeof d!="string"),c=this.#e.map(d=>{const[g,p,b,R]=typeof d=="string"?w.#p(d,this.#n,l):d.toRegExpSource(e);return this.#n=this.#n||b,this.#r=this.#r||R,g}).join("");let u="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&ns.has(this.#e[0]))){const g=ss,p=t&&g.has(c.charAt(0))||c.startsWith("\\.")&&g.has(c.charAt(2))||c.startsWith("\\.\\.")&&g.has(c.charAt(4)),b=!t&&!e&&g.has(c.charAt(0));u=p?ts:b?k:""}let f="";return this.isEnd()&&this.#s.#a&&this.#t?.type==="!"&&(f="(?:$|\\/)"),[u+c+f,D(c),this.#n=!!this.#n,this.#r]}const s=this.type==="*"||this.type==="+",r=this.type==="!"?"(?:(?!(?:":"(?:";let i=this.#f(t);if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){const l=this.toString();return this.#e=[l],this.type=null,this.#n=void 0,[l,D(this.toString()),!1,!1]}let o=!s||e||t||!k?"":this.#f(!0);o===i&&(o=""),o&&(i=`(?:${i})(?:${o})*?`);let a="";if(this.type==="!"&&this.#h)a=(this.isStart()&&!t?k:"")+de;else{const l=this.type==="!"?"))"+(this.isStart()&&!t&&!e?k:"")+fe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=r+i+l}return[a,D(i),this.#n=!!this.#n,this.#r]}#f(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");const[s,r,i,o]=t.toRegExpSource(e);return this.#r=this.#r||o,s}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#p(e,t,s=!1){let r=!1,i="",o=!1;for(let a=0;a<e.length;a++){const l=e.charAt(a);if(r){r=!1,i+=(is.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?i+="\\\\":r=!0;continue}if(l==="["){const[c,u,f,h]=Yt(e,a);if(f){i+=c,o=o||u,a+=f-1,t=t||h;continue}}if(l==="*"){i+=s&&e==="*"?de:fe,t=!0;continue}if(l==="?"){i+=te,t=!0;continue}i+=rs(l)}return[i,D(e),!!t,o]}}const os=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!1}={})=>t?e?n.replace(/[?*()[\]{}]/g,"[$&]"):n.replace(/[?*()[\]\\{}]/g,"\\$&"):e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var G={};const v=(n,e,t={})=>(F(e),!t.nocomment&&e.charAt(0)==="#"?!1:new W(e,t).match(n)),as=/^\*+([^+@!?\*\[\(]*)$/,ls=n=>e=>!e.startsWith(".")&&e.endsWith(n),cs=n=>e=>e.endsWith(n),us=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),hs=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),fs=/^\*+\.\*+$/,ds=n=>!n.startsWith(".")&&n.includes("."),ps=n=>n!=="."&&n!==".."&&n.includes("."),gs=/^\.\*+$/,ms=n=>n!=="."&&n!==".."&&n.startsWith("."),ys=/^\*+$/,ws=n=>n.length!==0&&!n.startsWith("."),vs=n=>n.length!==0&&n!=="."&&n!=="..",bs=/^\?+([^+@!?\*\[\(]*)?$/,xs=([n,e=""])=>{const t=ke([n]);return e?(e=e.toLowerCase(),s=>t(s)&&s.toLowerCase().endsWith(e)):t},Ss=([n,e=""])=>{const t=ze([n]);return e?(e=e.toLowerCase(),s=>t(s)&&s.toLowerCase().endsWith(e)):t},$s=([n,e=""])=>{const t=ze([n]);return e?s=>t(s)&&s.endsWith(e):t},Es=([n,e=""])=>{const t=ke([n]);return e?s=>t(s)&&s.endsWith(e):t},ke=([n])=>{const e=n.length;return t=>t.length===e&&!t.startsWith(".")},ze=([n])=>{const e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},Ie=typeof process=="object"&&process?typeof G=="object"&&G&&G.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",pe={win32:{sep:"\\"},posix:{sep:"/"}},Os=Ie==="win32"?pe.win32.sep:pe.posix.sep;v.sep=Os;const O=Symbol("globstar **");v.GLOBSTAR=O;const Ts="[^/]",Ls=Ts+"*?",Rs="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Cs="(?:(?!(?:\\/|^)\\.).)*?",Ms=(n,e={})=>t=>v(t,n,e);v.filter=Ms;const E=(n,e={})=>Object.assign({},n,e),Ps=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return v;const e=v;return Object.assign((s,r,i={})=>e(s,r,E(n,i)),{Minimatch:class extends e.Minimatch{constructor(r,i={}){super(r,E(n,i))}static defaults(r){return e.defaults(E(n,r)).Minimatch}},AST:class extends e.AST{constructor(r,i,o={}){super(r,i,E(n,o))}static fromGlob(r,i={}){return e.AST.fromGlob(r,E(n,i))}},unescape:(s,r={})=>e.unescape(s,E(n,r)),escape:(s,r={})=>e.escape(s,E(n,r)),filter:(s,r={})=>e.filter(s,E(n,r)),defaults:s=>e.defaults(E(n,s)),makeRe:(s,r={})=>e.makeRe(s,E(n,r)),braceExpand:(s,r={})=>e.braceExpand(s,E(n,r)),match:(s,r,i={})=>e.match(s,r,E(n,i)),sep:e.sep,GLOBSTAR:O})};v.defaults=Ps;const Be=(n,e={})=>(F(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Jt(n));v.braceExpand=Be;const Ns=(n,e={})=>new W(n,e).makeRe();v.makeRe=Ns;const js=(n,e,t={})=>{const s=new W(e,t);return n=n.filter(r=>s.match(r)),s.options.nonull&&!n.length&&n.push(e),n};v.match=js;const ge=/[?*]|[+@!]\(.*?\)|\[|\]/,Ds=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class W{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){F(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||Ie,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,this.globSet);const s=this.globSet.map(i=>this.slashSplit(i));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let r=this.globParts.map((i,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){const l=i[0]===""&&i[1]===""&&(i[2]==="?"||!ge.test(i[2]))&&!ge.test(i[3]),c=/^[a-z]:/i.test(i[0]);if(l)return[...i.slice(0,4),...i.slice(4).map(u=>this.parse(u))];if(c)return[i[0],...i.slice(1).map(u=>this.parse(u))]}return i.map(l=>this.parse(l))});if(this.debug(this.pattern,r),this.set=r.filter(i=>i.indexOf(!1)===-1),this.isWindows)for(let i=0;i<this.set.length;i++){const o=this.set[i];o[0]===""&&o[1]===""&&this.globParts[i][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let s=0;s<e.length;s++)for(let r=0;r<e[s].length;r++)e[s][r]==="**"&&(e[s][r]="*");const{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let s=-1;for(;(s=t.indexOf("**",s+1))!==-1;){let r=s;for(;t[r+1]==="**";)r++;r!==s&&t.splice(s,r-s)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((s,r)=>{const i=s[s.length-1];return r==="**"&&i==="**"?s:r===".."&&i&&i!==".."&&i!=="."&&i!=="**"?(s.pop(),s):(s.push(r),s)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let r=1;r<e.length-1;r++){const i=e[r];r===1&&i===""&&e[0]===""||(i==="."||i==="")&&(t=!0,e.splice(r,1),r--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let s=0;for(;(s=e.indexOf("..",s+1))!==-1;){const r=e[s-1];r&&r!=="."&&r!==".."&&r!=="**"&&(t=!0,e.splice(s-1,2),s-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let s of e){let r=-1;for(;(r=s.indexOf("**",r+1))!==-1;){let o=r;for(;s[o+1]==="**";)o++;o>r&&s.splice(r+1,o-r);let a=s[r+1];const l=s[r+2],c=s[r+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;t=!0,s.splice(r,1);const u=s.slice(0);u[r]="**",e.push(u),r--}if(!this.preserveMultipleSlashes){for(let o=1;o<s.length-1;o++){const a=s[o];o===1&&a===""&&s[0]===""||(a==="."||a==="")&&(t=!0,s.splice(o,1),o--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(t=!0,s.pop())}let i=0;for(;(i=s.indexOf("..",i+1))!==-1;){const o=s[i-1];if(o&&o!=="."&&o!==".."&&o!=="**"){t=!0;const l=i===1&&s[i+1]==="**"?["."]:[];s.splice(i-1,2,...l),s.length===0&&s.push(""),i-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let s=t+1;s<e.length;s++){const r=this.partsMatch(e[t],e[s],!this.preserveMultipleSlashes);if(r){e[t]=[],e[s]=r;break}}return e.filter(t=>t.length)}partsMatch(e,t,s=!1){let r=0,i=0,o=[],a="";for(;r<e.length&&i<t.length;)if(e[r]===t[i])o.push(a==="b"?t[i]:e[r]),r++,i++;else if(s&&e[r]==="**"&&t[i]===e[r+1])o.push(e[r]),r++;else if(s&&t[i]==="**"&&e[r]===t[i+1])o.push(t[i]),i++;else if(e[r]==="*"&&t[i]&&(this.options.dot||!t[i].startsWith("."))&&t[i]!=="**"){if(a==="b")return!1;a="a",o.push(e[r]),r++,i++}else if(t[i]==="*"&&e[r]&&(this.options.dot||!e[r].startsWith("."))&&e[r]!=="**"){if(a==="a")return!1;a="b",o.push(t[i]),r++,i++}else return!1;return e.length===t.length&&o}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=!1,s=0;for(let r=0;r<e.length&&e.charAt(r)==="!";r++)t=!t,s++;s&&(this.pattern=e.slice(s)),this.negate=t}matchOne(e,t,s=!1){const r=this.options;if(this.isWindows){const p=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),b=!p&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),R=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),M=!R&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),$=b?3:p?0:void 0,y=M?3:R?0:void 0;if(typeof $=="number"&&typeof y=="number"){const[P,A]=[e[$],t[y]];P.toLowerCase()===A.toLowerCase()&&(t[y]=P,y>$?t=t.slice(y):$>y&&(e=e.slice($)))}}const{optimizationLevel:i=1}=this.options;i>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,a=0,l=e.length,c=t.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=t[a],f=e[o];if(this.debug(t,u,f),u===!1)return!1;if(u===O){this.debug("GLOBSTAR",[t,u,f]);var h=o,d=a+1;if(d===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!r.dot&&e[o].charAt(0)===".")return!1;return!0}for(;h<l;){var g=e[h];if(this.debug(`
globstar while`,e,h,t,d,g),this.matchOne(e.slice(h),t.slice(d),s))return this.debug("globstar found match!",h,l,g),!0;if(g==="."||g===".."||!r.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,h,t,d);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(s&&(this.debug(`
>>> no match, partial?`,e,h,t,d),h===l))}let p;if(typeof u=="string"?(p=f===u,this.debug("string match",u,f,p)):(p=u.test(f),this.debug("pattern match",u,f,p)),!p)return!1}if(o===l&&a===c)return!0;if(o===l)return s;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return Be(this.pattern,this.options)}parse(e){F(e);const t=this.options;if(e==="**")return O;if(e==="")return"";let s,r=null;(s=e.match(ys))?r=t.dot?vs:ws:(s=e.match(as))?r=(t.nocase?t.dot?hs:us:t.dot?cs:ls)(s[1]):(s=e.match(bs))?r=(t.nocase?t.dot?Ss:xs:t.dot?$s:Es)(s):(s=e.match(fs))?r=t.dot?ps:ds:(s=e.match(gs))&&(r=ms);const i=w.fromGlob(e,this.options).toMMPattern();return r&&typeof i=="object"&&Reflect.defineProperty(i,"test",{value:r}),i}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,s=t.noglobstar?Ls:t.dot?Rs:Cs,r=new Set(t.nocase?["i"]:[]);let i=e.map(l=>{const c=l.map(f=>{if(f instanceof RegExp)for(const h of f.flags.split(""))r.add(h);return typeof f=="string"?Ds(f):f===O?O:f._src});c.forEach((f,h)=>{const d=c[h+1],g=c[h-1];f!==O||g===O||(g===void 0?d!==void 0&&d!==O?c[h+1]="(?:\\/|"+s+"\\/)?"+d:c[h]=s:d===void 0?c[h-1]=g+"(?:\\/|\\/"+s+")?":d!==O&&(c[h-1]=g+"(?:\\/|\\/"+s+"\\/)"+d,c[h+1]=O))});const u=c.filter(f=>f!==O);if(this.partial&&u.length>=1){const f=[];for(let h=1;h<=u.length;h++)f.push(u.slice(0,h).join("/"));return"(?:"+f.join("|")+")"}return u.join("/")}).join("|");const[o,a]=e.length>1?["(?:",")"]:["",""];i="^"+o+i+a+"$",this.partial&&(i="^(?:\\/|"+o+i.slice(1,-1)+a+")$"),this.negate&&(i="^(?!"+i+").+$");try{this.regexp=new RegExp(i,[...r].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;const s=this.options;this.isWindows&&(e=e.split("\\").join("/"));const r=this.slashSplit(e);this.debug(this.pattern,"split",r);const i=this.set;this.debug(this.pattern,"set",i);let o=r[r.length-1];if(!o)for(let a=r.length-2;!o&&a>=0;a--)o=r[a];for(let a=0;a<i.length;a++){const l=i[a];let c=r;if(s.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,t))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(e){return v.defaults(e).Minimatch}}v.AST=w;v.Minimatch=W;v.escape=os;v.unescape=D;class qe{tags;scopedTags=new Map;constructor(e=[]){this.tags=Object.freeze([...e]),e.filter(Vs).forEach(([t,s])=>{this.scopedTags.set(t,s)})}matching(e){const t=me(e),s=new W(t?e:e[1]),r=i=>{const o=me(i);if(t&&o)return s.match(i);if(!t&&!o){const a=e[0],l=i[0];return a===l&&s.match(i[1])}return!1};return this.tags.some(r)}getByScope(e){return this.scopedTags.get(e)}}function me(n){return typeof n=="string"}function Vs(n){return Array.isArray(n)}class Ws{entries=new Map;constructor(){}getOrSet(e,t,s={}){const{tags:r=[]}=s,i=this.entries.get(e);if(i)return i.data;const o=t();return this.entries.set(e,{data:o,tags:new qe(r)}),o}set(e,t,s={}){this.getOrSet(e,t,s)}get(e){return this.entries.get(e)?.data}findBy(e){return this.getAll().filter(e)}getAll(e){const t=Array.from(this.entries.values());return e===void 0?t.map(s=>s.data):t.filter(s=>s.tags.matching(e)).map(s=>s.data)}clear(){this.entries.clear()}}const As=new Ws,ks=n=>Te(n).toString();class zs{callback;startTime;timeoutMillis=new Set;runningTimeout;constructor(e){this.startTime=oe.now(),this.callback=e}start(){this.startTime=oe.now(),this.startNextTimeout()}clear(){this.runningTimeout&&(clearTimeout(this.runningTimeout),this.runningTimeout=void 0)}addTimeout(e){const t=dt.fromDurationLike(e).toMillis();return this.timeoutMillis.add(t),this.startNextTimeout(),()=>{this.timeoutMillis.delete(t),this.startNextTimeout()}}startNextTimeout(){if(this.clear(),this.timeoutMillis.size===0)return;const e=Math.min(...this.timeoutMillis),t=this.startTime.diffNow().negate().toMillis(),s=e-t;s<=0?this.callback():this.runningTimeout=setTimeout(()=>this.callback(),s)}}const z=n=>Object.freeze({isSet:!0,value:n}),T=Object.freeze({isSet:!1});class I{value;observers=new Set;constructor(e){this.value=e}notifyObservers(e){this.observers.forEach(t=>t(e))}get observerCount(){return this.observers.size}observe(e){return this.observers.add(e),()=>this.observers.delete(e)}updateValue(e){this.value!==e&&(this.value=e,this.notifyObservers(e))}}const U=n=>{const e=m.useRef(n),[t,s]=m.useState(n.value);return m.useEffect(()=>(e.current=n,s(n.value),n.observe(s)),[n]),e.current!==n?n.value:t};var _e=typeof window<"u"&&typeof window.document<"u";typeof process<"u"&&process.versions!=null&&process.versions.node!=null;typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&"userAgent"in navigator&&typeof navigator.userAgent=="string"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";typeof process<"u"&&process.versions!=null&&process.versions.bun!=null;const Is=(n,e)=>{m.useEffect(()=>{if(_e)return document.addEventListener("visibilitychange",()=>n(!document.hidden)),()=>{document.removeEventListener("visibilitychange",()=>n(!document.hidden))}},e)},Bs=(n,e)=>{m.useEffect(()=>{if(_e)return window.addEventListener("focus",n),()=>{window.removeEventListener("focus",n)}},e)},qs=(n,e={})=>{const{keepValueWhileLoading:t=!0,useSuspense:s=!0,refreshOnWindowFocus:r=!1,refreshOnDocumentVisibilityChange:i=r,autoRefresh:o}=e,a=U(s&&t?n.valueWithCache:n.value),l=U(n.error),c=m.useMemo(()=>({current:a}),[n]);if(m.useEffect(()=>n.onRefresh(()=>{n.load()}),[n]),m.useEffect(()=>{if(o)return n.addTTL(o)},[n,Te(o)]),Bs(()=>{r&&n.refresh()},[n,r]),Is(u=>{i&&u&&n.refresh()},[n,i]),n.load(),n.syncValue.isSet)return s?n.syncValue.value:Object.freeze({maybeValue:n.syncValue.value,value:n.syncValue.value,hasValue:!0,isLoading:!1});if(n.syncError.isSet)throw n.syncError.value;if(a.isSet)return c.current=a,s?a.value:Object.freeze({maybeValue:a.value,value:a.value,hasValue:!0,isLoading:!1});if(t&&c.current.isSet)return s?c.current.value:Object.freeze({maybeValue:c.current.value,value:c.current.value,hasValue:!0,isLoading:!0});if(l.isSet)throw l.value;if(s)throw n.suspensePromise===void 0?new Error("Invariant violation: Unexpected state"):n.suspensePromise;return Object.freeze({maybeValue:void 0,hasValue:!1,isLoading:!0})},_s=Pe();class C{loader;meta;loaderPromise;suspensePromise;resolveSuspensePromise=()=>{throw new Error("Resolving initial suspense promise is not supported")};loaderPromiseVersion=0;autoRefreshTimeout;value=new I(T);valueWithCache=new I(T);error=new I(T);syncValue=T;syncError=T;state=new I("void");onRefreshListeners=new Set;static onBeforeRefreshListeners=new Set;static onLoadListeners=new Set;static voidInstance=new C(()=>Promise.resolve(void 0));constructor(e,t={}){this.loader=this.buildLoaderWithContext(e),this.meta=t,this.autoRefreshTimeout=new zs(()=>this.refresh()),this.resetPromises()}buildLoaderWithContext(e){return _s.bind({asyncResource:this},e)}updateLoader(e){this.loader=this.buildLoaderWithContext(e)}refresh(){this.callListeners(C.onBeforeRefreshListeners),this.loaderPromiseVersion++,this.resetPromises(),this.value.updateValue(T),this.error.updateValue(T),this.state.updateValue("void"),this.callListeners(this.onRefreshListeners)}callListeners(e){e.forEach(t=>t(this))}onRefresh(e){return this.onRefreshListeners.add(e),()=>{this.onRefreshListeners.delete(e)}}static onBeforeRefresh(e){return this.onBeforeRefreshListeners.add(e),()=>{this.onBeforeRefreshListeners.delete(e)}}static onLoad(e){return this.onLoadListeners.add(e),()=>{this.onLoadListeners.delete(e)}}addTTL(e){return this.autoRefreshTimeout.addTimeout(e)}load(){if(!(this.value.value.isSet||this.error.value.isSet)&&this.loaderPromise===void 0){const e=this.handleLoading();e instanceof Promise&&(this.loaderPromise=e)}}resetPromises(){this.suspensePromise=new Promise(e=>{this.resolveSuspensePromise=e}),this.loaderPromise=void 0}isMatchingError(e){return this.error.value.isSet?e===!0||this.error.value.value===e:!1}handleLoading(){try{const e=this.loader();if(e instanceof Promise)return this.syncValue=T,this.syncError=T,this.handleAsyncLoading(e);this.syncValue=z(e)}catch(e){this.syncError=z(e)}this.callListeners(C.onLoadListeners),this.autoRefreshTimeout.start()}async handleAsyncLoading(e){const t=++this.loaderPromiseVersion;let s=T,r=T;this.state.updateValue("loading");try{const i=await e;s=z(i)}catch(i){r=z(i)}this.resolveSuspensePromise(),this.loaderPromiseVersion===t&&(this.resetPromises(),s.isSet?(this.valueWithCache.updateValue(s),this.value.updateValue(s),this.state.updateValue("loaded")):r.isSet&&(this.error.updateValue(r),this.state.updateValue("error")),this.callListeners(C.onLoadListeners),this.autoRefreshTimeout.start())}use(e={}){return qs(this,e)}watchState(){return U(this.state)}}function Fs(n,e,t={}){const{loaderId:s,tags:r}=t;if(e===null)return C.voidInstance;const i=ks({asyncFn:n,parameters:e,loaderId:s}),o=()=>n(...e),a=()=>new C(o,{tags:new qe(r)}),l=As.getOrSet(i,a,{tags:r});return l.updateLoader(o),l}const Fe=n=>Object.fromEntries(n.entries());class V{settings;constructor(e=new B){this.settings=e,be(this)}set(e,t,s){this.settings.set(e,t.parse(ne(s)))}get(e,t){return t.parse(ne(this.settings.get(e)))}clear(e){this.settings.delete(e)}get asJson(){return q(Fe(this.settings),e=>JSON.stringify(e))}static fromJson(e){return new V(new B(q(e,t=>typeof t=="string"?JSON.parse(t):t)))}}class se{componentSettings;constructor(e=new B){this.componentSettings=e,be(this)}set(e,t,s,r){const i=this.componentSettings.get(e)??new V;i.set(t,s,r),this.componentSettings.set(e,i)}get(e,t,s){return(this.componentSettings.get(e)??new V).get(t,s)}clear(e,t){this.componentSettings.get(e)?.clear(t)}get asJson(){return q(Fe(this.componentSettings),e=>e.asJson)}static fromJson(e){const t=q(e,s=>V.fromJson(s));return new se(new B(t))}}const ye=typeof localStorage<"u";class Js{storageKey;constructor(e){this.storageKey=e}async load(){if(!ye)return{};const e=localStorage.getItem(this.storageKey);return e===null?{}:JSON.parse(e)}async store(e){ye&&localStorage.setItem(this.storageKey,JSON.stringify(e))}}const Hs=n=>{switch(n.type){case"custom":return n.store;case"localStorage":return new Js(n.storageKey)}throw new Error(`Unsupported setting backend: ${n}`)},Je=m.createContext(void 0),gn=()=>m.useContext(Je),Gs=n=>{const{children:e,id:t,...s}=n,r=Hs(s),i=Fs(()=>r.load(),[],{loaderId:t}),o=i.use(),a=m.useRef(Promise.resolve()),l=m.useMemo(()=>se.fromJson(o),[t]),c=()=>{const u=l.asJson;a.current=a.current.then(async()=>{await r.store(u),i.refresh()})};return m.useEffect(()=>Xe(c),[t]),S.jsx(Je.Provider,{value:l,children:e})};Gs.__docgenInfo={description:"",methods:[],displayName:"SettingsProvider",props:{id:{required:!1,tsType:{name:"string"},description:""}}};const He=m.createContext({}),mn=()=>m.useContext(He),Us=n=>{const{children:e,translations:t}=n;return S.jsx(He.Provider,{value:m.useMemo(()=>t,[t]),children:e})};Us.__docgenInfo={description:"",methods:[],displayName:"TranslationProvider",props:{translations:{required:!0,tsType:{name:"Translations"},description:""}}};export{$t as F,Q as L,Ot as O,Gs as S,Us as T,mn as a,Fs as g,gn as u};
