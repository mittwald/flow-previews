import{r as b,j as Et}from"./iframe-C0Xzz6Xl.js";import{t as xt,O as D,h as ot,i as H,b as Ot}from"./flowComponent-Ds2Zpckn.js";import{r as at}from"./index-SBtdq8jY.js";import{D as Z,a as Lt}from"./luxon-CkcISRbr.js";function z(...n){return xt(Tt,n)}function Tt(n,t){let e={};for(let[s,r]of Object.entries(n))e[s]=t(r,s,n);return e}function Rt(n){return typeof n=="function"}function B(n,...t){return Rt(n)?n(...t):n}var Mt=Object.assign;function Pt(n,t){var e;return(e=B(n))!==null&&e!==void 0?e:B(t)}function Nt(n,t){if(!n)throw t instanceof String?t.valueOf():new Error(t&&B(t))}const $t="Not inside of a running context.",J=Symbol();function jt(n){let t=J;return{run:function(r,i){const o=s()?e():J;t=r;const a=i();return t=o,a},use:e,useX:function(r){return Nt(s(),Pt(r,$t)),t}};function e(){return s()?t:n}function s(){return t!==J}}function Ct(n){const t=jt();return{bind:function(s,r){return function(...i){return e(s,(function(){return r(...i)}))}},run:e,use:t.use,useX:t.useX};function e(s,r){var i;const o=t.use(),a=Mt({},o||{},(i=B(n,s,o))!==null&&i!==void 0?i:s);return t.run(Object.freeze(a),r)}}const ct=(n,t,e)=>{const s=n instanceof RegExp?X(n,e):n,r=t instanceof RegExp?X(t,e):t,i=s!==null&&r!=null&&At(s,r,e);return i&&{start:i[0],end:i[1],pre:e.slice(0,i[0]),body:e.slice(i[0]+s.length,i[1]),post:e.slice(i[1]+r.length)}},X=(n,t)=>{const e=t.match(n);return e?e[0]:null},At=(n,t,e)=>{let s,r,i,o,a,c=e.indexOf(n),u=e.indexOf(t,c+1),h=c;if(c>=0&&u>0){if(n===t)return[c,u];for(s=[],i=e.length;h>=0&&!a;){if(h===c)s.push(h),c=e.indexOf(n,h+1);else if(s.length===1){const p=s.pop();p!==void 0&&(a=[p,u])}else r=s.pop(),r!==void 0&&r<i&&(i=r,o=u),u=e.indexOf(t,h+1);h=c<u&&c>=0?c:u}s.length&&o!==void 0&&(a=[i,o])}return a},ht="\0SLASH"+Math.random()+"\0",ut="\0OPEN"+Math.random()+"\0",U="\0CLOSE"+Math.random()+"\0",lt="\0COMMA"+Math.random()+"\0",ft="\0PERIOD"+Math.random()+"\0",Wt=new RegExp(ht,"g"),Vt=new RegExp(ut,"g"),kt=new RegExp(U,"g"),Dt=new RegExp(lt,"g"),zt=new RegExp(ft,"g"),Bt=/\\\\/g,It=/\\{/g,Jt=/\\}/g,qt=/\\,/g,Gt=/\\./g;function q(n){return isNaN(n)?n.charCodeAt(0):parseInt(n,10)}function Kt(n){return n.replace(Bt,ht).replace(It,ut).replace(Jt,U).replace(qt,lt).replace(Gt,ft)}function Ut(n){return n.replace(Wt,"\\").replace(Vt,"{").replace(kt,"}").replace(Dt,",").replace(zt,".")}function pt(n){if(!n)return[""];const t=[],e=ct("{","}",n);if(!e)return n.split(",");const{pre:s,body:r,post:i}=e,o=s.split(",");o[o.length-1]+="{"+r+"}";const a=pt(i);return i.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),t.push.apply(t,o),t}function Ft(n){return n?(n.slice(0,2)==="{}"&&(n="\\{\\}"+n.slice(2)),N(Kt(n),!0).map(Ut)):[]}function _t(n){return"{"+n+"}"}function Ht(n){return/^-?0\d/.test(n)}function Zt(n,t){return n<=t}function Xt(n,t){return n>=t}function N(n,t){const e=[],s=ct("{","}",n);if(!s)return[n];const r=s.pre,i=s.post.length?N(s.post,!1):[""];if(/\$$/.test(s.pre))for(let o=0;o<i.length;o++){const a=r+"{"+s.body+"}"+i[o];e.push(a)}else{const o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),c=o||a,u=s.body.indexOf(",")>=0;if(!c&&!u)return s.post.match(/,(?!,).*\}/)?(n=s.pre+"{"+s.body+U+s.post,N(n)):[n];let h;if(c)h=s.body.split(/\.\./);else if(h=pt(s.body),h.length===1&&h[0]!==void 0&&(h=N(h[0],!1).map(_t),h.length===1))return i.map(l=>s.pre+h[0]+l);let p;if(c&&h[0]!==void 0&&h[1]!==void 0){const l=q(h[0]),f=q(h[1]),g=Math.max(h[0].length,h[1].length);let d=h.length===3&&h[2]!==void 0?Math.abs(q(h[2])):1,S=Zt;f<l&&(d*=-1,S=Xt);const R=h.some(Ht);p=[];for(let v=l;S(v,f);v+=d){let m;if(a)m=String.fromCharCode(v),m==="\\"&&(m="");else if(m=String(v),R){const M=g-m.length;if(M>0){const A=new Array(M+1).join("0");v<0?m="-"+A+m.slice(1):m=A+m}}p.push(m)}}else{p=[];for(let l=0;l<h.length;l++)p.push.apply(p,N(h[l],!1))}for(let l=0;l<p.length;l++)for(let f=0;f<i.length;f++){const g=r+p[l]+i[f];(!t||c||g)&&e.push(g)}}return e}const Qt=1024*64,I=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>Qt)throw new TypeError("pattern is too long")},Yt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},P=n=>n.replace(/[[\]\\-]/g,"\\$&"),te=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Q=n=>n.join(""),ee=(n,t)=>{const e=t;if(n.charAt(e)!=="[")throw new Error("not in a brace expression");const s=[],r=[];let i=e+1,o=!1,a=!1,c=!1,u=!1,h=e,p="";t:for(;i<n.length;){const d=n.charAt(i);if((d==="!"||d==="^")&&i===e+1){u=!0,i++;continue}if(d==="]"&&o&&!c){h=i+1;break}if(o=!0,d==="\\"&&!c){c=!0,i++;continue}if(d==="["&&!c){for(const[S,[L,R,v]]of Object.entries(Yt))if(n.startsWith(S,i)){if(p)return["$.",!1,n.length-e,!0];i+=S.length,v?r.push(L):s.push(L),a=a||R;continue t}}if(c=!1,p){d>p?s.push(P(p)+"-"+P(d)):d===p&&s.push(P(d)),p="",i++;continue}if(n.startsWith("-]",i+1)){s.push(P(d+"-")),i+=2;continue}if(n.startsWith("-",i+1)){p=d,i+=2;continue}s.push(P(d)),i++}if(h<i)return["",!1,0,!1];if(!s.length&&!r.length)return["$.",!1,n.length-e,!0];if(r.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!u){const d=s[0].length===2?s[0].slice(-1):s[0];return[te(d),!1,h-e,!1]}const l="["+(u?"^":"")+Q(s)+"]",f="["+(u?"":"^")+Q(r)+"]";return[s.length&&r.length?"("+l+"|"+f+")":s.length?l:f,a,h-e,!0]},$=(n,{windowsPathsNoEscape:t=!1,magicalBraces:e=!0}={})=>e?t?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):t?n.replace(/\[([^\/\\{}])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1"),se=new Set(["!","?","+","*","@"]),Y=n=>se.has(n),ne="(?!(?:^|/)\\.\\.?(?:$|/))",W="(?!\\.)",ie=new Set(["[","."]),re=new Set(["..","."]),oe=new Set("().*{}+?[]^$\\!"),ae=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),F="[^/]",tt=F+"*?",et=F+"+?";class w{type;#s;#n;#r=!1;#t=[];#e;#o;#c;#a=!1;#i;#h;#l=!1;constructor(t,e,s={}){this.type=t,t&&(this.#n=!0),this.#e=e,this.#s=this.#e?this.#e.#s:this,this.#i=this.#s===this?s:this.#s.#i,this.#c=this.#s===this?[]:this.#s.#c,t==="!"&&!this.#s.#a&&this.#c.push(this),this.#o=this.#e?this.#e.#t.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(const t of this.#t)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#h!==void 0?this.#h:this.type?this.#h=this.type+"("+this.#t.map(t=>String(t)).join("|")+")":this.#h=this.#t.map(t=>String(t)).join("")}#p(){if(this!==this.#s)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let t;for(;t=this.#c.pop();){if(t.type!=="!")continue;let e=t,s=e.#e;for(;s;){for(let r=e.#o+1;!s.type&&r<s.#t.length;r++)for(const i of t.#t){if(typeof i=="string")throw new Error("string part in extglob AST??");i.copyIn(s.#t[r])}e=s,s=e.#e}}return this}push(...t){for(const e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof w&&e.#e===this))throw new Error("invalid part: "+e);this.#t.push(e)}}toJSON(){const t=this.type===null?this.#t.slice().map(e=>typeof e=="string"?e:e.toJSON()):[this.type,...this.#t.map(e=>e.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#s||this.#s.#a&&this.#e?.type==="!")&&t.push({}),t}isStart(){if(this.#s===this)return!0;if(!this.#e?.isStart())return!1;if(this.#o===0)return!0;const t=this.#e;for(let e=0;e<this.#o;e++){const s=t.#t[e];if(!(s instanceof w&&s.type==="!"))return!1}return!0}isEnd(){if(this.#s===this||this.#e?.type==="!")return!0;if(!this.#e?.isEnd())return!1;if(!this.type)return this.#e?.isEnd();const t=this.#e?this.#e.#t.length:0;return this.#o===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){const e=new w(this.type,t);for(const s of this.#t)e.copyIn(s);return e}static#u(t,e,s,r){let i=!1,o=!1,a=-1,c=!1;if(e.type===null){let f=s,g="";for(;f<t.length;){const d=t.charAt(f++);if(i||d==="\\"){i=!i,g+=d;continue}if(o){f===a+1?(d==="^"||d==="!")&&(c=!0):d==="]"&&!(f===a+2&&c)&&(o=!1),g+=d;continue}else if(d==="["){o=!0,a=f,c=!1,g+=d;continue}if(!r.noext&&Y(d)&&t.charAt(f)==="("){e.push(g),g="";const S=new w(d,e);f=w.#u(t,S,f,r),e.push(S);continue}g+=d}return e.push(g),f}let u=s+1,h=new w(null,e);const p=[];let l="";for(;u<t.length;){const f=t.charAt(u++);if(i||f==="\\"){i=!i,l+=f;continue}if(o){u===a+1?(f==="^"||f==="!")&&(c=!0):f==="]"&&!(u===a+2&&c)&&(o=!1),l+=f;continue}else if(f==="["){o=!0,a=u,c=!1,l+=f;continue}if(Y(f)&&t.charAt(u)==="("){h.push(l),l="";const g=new w(f,h);h.push(g),u=w.#u(t,g,u,r);continue}if(f==="|"){h.push(l),l="",p.push(h),h=new w(null,e);continue}if(f===")")return l===""&&e.#t.length===0&&(e.#l=!0),h.push(l),l="",e.push(...p,h),u;l+=f}return e.type=null,e.#n=void 0,e.#t=[t.substring(s-1)],u}static fromGlob(t,e={}){const s=new w(null,void 0,e);return w.#u(t,s,0,e),s}toMMPattern(){if(this!==this.#s)return this.#s.toMMPattern();const t=this.toString(),[e,s,r,i]=this.toRegExpSource();if(!(r||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return s;const a=(this.#i.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}get options(){return this.#i}toRegExpSource(t){const e=t??!!this.#i.dot;if(this.#s===this&&this.#p(),!this.type){const c=this.isStart()&&this.isEnd()&&!this.#t.some(f=>typeof f!="string"),u=this.#t.map(f=>{const[g,d,S,L]=typeof f=="string"?w.#d(f,this.#n,c):f.toRegExpSource(t);return this.#n=this.#n||S,this.#r=this.#r||L,g}).join("");let h="";if(this.isStart()&&typeof this.#t[0]=="string"&&!(this.#t.length===1&&re.has(this.#t[0]))){const g=ie,d=e&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),S=!e&&!t&&g.has(u.charAt(0));h=d?ne:S?W:""}let p="";return this.isEnd()&&this.#s.#a&&this.#e?.type==="!"&&(p="(?:$|\\/)"),[h+u+p,$(u),this.#n=!!this.#n,this.#r]}const s=this.type==="*"||this.type==="+",r=this.type==="!"?"(?:(?!(?:":"(?:";let i=this.#f(e);if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){const c=this.toString();return this.#t=[c],this.type=null,this.#n=void 0,[c,$(this.toString()),!1,!1]}let o=!s||t||e||!W?"":this.#f(!0);o===i&&(o=""),o&&(i=`(?:${i})(?:${o})*?`);let a="";if(this.type==="!"&&this.#l)a=(this.isStart()&&!e?W:"")+et;else{const c=this.type==="!"?"))"+(this.isStart()&&!e&&!t?W:"")+tt+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=r+i+c}return[a,$(i),this.#n=!!this.#n,this.#r]}#f(t){return this.#t.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");const[s,r,i,o]=e.toRegExpSource(t);return this.#r=this.#r||o,s}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#d(t,e,s=!1){let r=!1,i="",o=!1;for(let a=0;a<t.length;a++){const c=t.charAt(a);if(r){r=!1,i+=(oe.has(c)?"\\":"")+c;continue}if(c==="\\"){a===t.length-1?i+="\\\\":r=!0;continue}if(c==="["){const[u,h,p,l]=ee(t,a);if(p){i+=u,o=o||h,a+=p-1,e=e||l;continue}}if(c==="*"){i+=s&&t==="*"?et:tt,e=!0;continue}if(c==="?"){i+=F,e=!0;continue}i+=ae(c)}return[i,$(t),!!e,o]}}const ce=(n,{windowsPathsNoEscape:t=!1,magicalBraces:e=!1}={})=>e?t?n.replace(/[?*()[\]{}]/g,"[$&]"):n.replace(/[?*()[\]\\{}]/g,"\\$&"):t?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var G={};const y=(n,t,e={})=>(I(t),!e.nocomment&&t.charAt(0)==="#"?!1:new C(t,e).match(n)),he=/^\*+([^+@!?\*\[\(]*)$/,ue=n=>t=>!t.startsWith(".")&&t.endsWith(n),le=n=>t=>t.endsWith(n),fe=n=>(n=n.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(n)),pe=n=>(n=n.toLowerCase(),t=>t.toLowerCase().endsWith(n)),de=/^\*+\.\*+$/,ge=n=>!n.startsWith(".")&&n.includes("."),me=n=>n!=="."&&n!==".."&&n.includes("."),we=/^\.\*+$/,ye=n=>n!=="."&&n!==".."&&n.startsWith("."),Se=/^\*+$/,ve=n=>n.length!==0&&!n.startsWith("."),be=n=>n.length!==0&&n!=="."&&n!=="..",Ee=/^\?+([^+@!?\*\[\(]*)?$/,xe=([n,t=""])=>{const e=dt([n]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},Oe=([n,t=""])=>{const e=gt([n]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},Le=([n,t=""])=>{const e=gt([n]);return t?s=>e(s)&&s.endsWith(t):e},Te=([n,t=""])=>{const e=dt([n]);return t?s=>e(s)&&s.endsWith(t):e},dt=([n])=>{const t=n.length;return e=>e.length===t&&!e.startsWith(".")},gt=([n])=>{const t=n.length;return e=>e.length===t&&e!=="."&&e!==".."},mt=typeof process=="object"&&process?typeof G=="object"&&G&&G.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",st={win32:{sep:"\\"},posix:{sep:"/"}},Re=mt==="win32"?st.win32.sep:st.posix.sep;y.sep=Re;const x=Symbol("globstar **");y.GLOBSTAR=x;const Me="[^/]",Pe=Me+"*?",Ne="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",$e="(?:(?!(?:\\/|^)\\.).)*?",je=(n,t={})=>e=>y(e,n,t);y.filter=je;const E=(n,t={})=>Object.assign({},n,t),Ce=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return y;const t=y;return Object.assign((s,r,i={})=>t(s,r,E(n,i)),{Minimatch:class extends t.Minimatch{constructor(r,i={}){super(r,E(n,i))}static defaults(r){return t.defaults(E(n,r)).Minimatch}},AST:class extends t.AST{constructor(r,i,o={}){super(r,i,E(n,o))}static fromGlob(r,i={}){return t.AST.fromGlob(r,E(n,i))}},unescape:(s,r={})=>t.unescape(s,E(n,r)),escape:(s,r={})=>t.escape(s,E(n,r)),filter:(s,r={})=>t.filter(s,E(n,r)),defaults:s=>t.defaults(E(n,s)),makeRe:(s,r={})=>t.makeRe(s,E(n,r)),braceExpand:(s,r={})=>t.braceExpand(s,E(n,r)),match:(s,r,i={})=>t.match(s,r,E(n,i)),sep:t.sep,GLOBSTAR:x})};y.defaults=Ce;const wt=(n,t={})=>(I(n),t.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Ft(n));y.braceExpand=wt;const Ae=(n,t={})=>new C(n,t).makeRe();y.makeRe=Ae;const We=(n,t,e={})=>{const s=new C(t,e);return n=n.filter(r=>s.match(r)),s.options.nonull&&!n.length&&n.push(t),n};y.match=We;const nt=/[?*]|[+@!]\(.*?\)|\[|\]/,Ve=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class C{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){I(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||mt,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,this.globSet);const s=this.globSet.map(i=>this.slashSplit(i));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let r=this.globParts.map((i,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){const c=i[0]===""&&i[1]===""&&(i[2]==="?"||!nt.test(i[2]))&&!nt.test(i[3]),u=/^[a-z]:/i.test(i[0]);if(c)return[...i.slice(0,4),...i.slice(4).map(h=>this.parse(h))];if(u)return[i[0],...i.slice(1).map(h=>this.parse(h))]}return i.map(c=>this.parse(c))});if(this.debug(this.pattern,r),this.set=r.filter(i=>i.indexOf(!1)===-1),this.isWindows)for(let i=0;i<this.set.length;i++){const o=this.set[i];o[0]===""&&o[1]===""&&this.globParts[i][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let s=0;s<t.length;s++)for(let r=0;r<t[s].length;r++)t[s][r]==="**"&&(t[s][r]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let s=-1;for(;(s=e.indexOf("**",s+1))!==-1;){let r=s;for(;e[r+1]==="**";)r++;r!==s&&e.splice(s,r-s)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((s,r)=>{const i=s[s.length-1];return r==="**"&&i==="**"?s:r===".."&&i&&i!==".."&&i!=="."&&i!=="**"?(s.pop(),s):(s.push(r),s)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let r=1;r<t.length-1;r++){const i=t[r];r===1&&i===""&&t[0]===""||(i==="."||i==="")&&(e=!0,t.splice(r,1),r--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let s=0;for(;(s=t.indexOf("..",s+1))!==-1;){const r=t[s-1];r&&r!=="."&&r!==".."&&r!=="**"&&(e=!0,t.splice(s-1,2),s-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let s of t){let r=-1;for(;(r=s.indexOf("**",r+1))!==-1;){let o=r;for(;s[o+1]==="**";)o++;o>r&&s.splice(r+1,o-r);let a=s[r+1];const c=s[r+2],u=s[r+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;e=!0,s.splice(r,1);const h=s.slice(0);h[r]="**",t.push(h),r--}if(!this.preserveMultipleSlashes){for(let o=1;o<s.length-1;o++){const a=s[o];o===1&&a===""&&s[0]===""||(a==="."||a==="")&&(e=!0,s.splice(o,1),o--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(e=!0,s.pop())}let i=0;for(;(i=s.indexOf("..",i+1))!==-1;){const o=s[i-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;const c=i===1&&s[i+1]==="**"?["."]:[];s.splice(i-1,2,...c),s.length===0&&s.push(""),i-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let s=e+1;s<t.length;s++){const r=this.partsMatch(t[e],t[s],!this.preserveMultipleSlashes);if(r){t[e]=[],t[s]=r;break}}return t.filter(e=>e.length)}partsMatch(t,e,s=!1){let r=0,i=0,o=[],a="";for(;r<t.length&&i<e.length;)if(t[r]===e[i])o.push(a==="b"?e[i]:t[r]),r++,i++;else if(s&&t[r]==="**"&&e[i]===t[r+1])o.push(t[r]),r++;else if(s&&e[i]==="**"&&t[r]===e[i+1])o.push(e[i]),i++;else if(t[r]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="b")return!1;a="a",o.push(t[r]),r++,i++}else if(e[i]==="*"&&t[r]&&(this.options.dot||!t[r].startsWith("."))&&t[r]!=="**"){if(a==="a")return!1;a="b",o.push(e[i]),r++,i++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,s=0;for(let r=0;r<t.length&&t.charAt(r)==="!";r++)e=!e,s++;s&&(this.pattern=t.slice(s)),this.negate=e}matchOne(t,e,s=!1){const r=this.options;if(this.isWindows){const d=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),S=!d&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),L=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),R=!L&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),v=S?3:d?0:void 0,m=R?3:L?0:void 0;if(typeof v=="number"&&typeof m=="number"){const[M,A]=[t[v],e[m]];M.toLowerCase()===A.toLowerCase()&&(e[m]=M,m>v?e=e.slice(m):v>m&&(t=t.slice(v)))}}const{optimizationLevel:i=1}=this.options;i>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,a=0,c=t.length,u=e.length;o<c&&a<u;o++,a++){this.debug("matchOne loop");var h=e[a],p=t[o];if(this.debug(e,h,p),h===!1)return!1;if(h===x){this.debug("GLOBSTAR",[e,h,p]);var l=o,f=a+1;if(f===u){for(this.debug("** at the end");o<c;o++)if(t[o]==="."||t[o]===".."||!r.dot&&t[o].charAt(0)===".")return!1;return!0}for(;l<c;){var g=t[l];if(this.debug(`
globstar while`,t,l,e,f,g),this.matchOne(t.slice(l),e.slice(f),s))return this.debug("globstar found match!",l,c,g),!0;if(g==="."||g===".."||!r.dot&&g.charAt(0)==="."){this.debug("dot detected!",t,l,e,f);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(s&&(this.debug(`
>>> no match, partial?`,t,l,e,f),l===c))}let d;if(typeof h=="string"?(d=p===h,this.debug("string match",h,p,d)):(d=h.test(p),this.debug("pattern match",h,p,d)),!d)return!1}if(o===c&&a===u)return!0;if(o===c)return s;if(a===u)return o===c-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return wt(this.pattern,this.options)}parse(t){I(t);const e=this.options;if(t==="**")return x;if(t==="")return"";let s,r=null;(s=t.match(Se))?r=e.dot?be:ve:(s=t.match(he))?r=(e.nocase?e.dot?pe:fe:e.dot?le:ue)(s[1]):(s=t.match(Ee))?r=(e.nocase?e.dot?Oe:xe:e.dot?Le:Te)(s):(s=t.match(de))?r=e.dot?me:ge:(s=t.match(we))&&(r=ye);const i=w.fromGlob(t,this.options).toMMPattern();return r&&typeof i=="object"&&Reflect.defineProperty(i,"test",{value:r}),i}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,s=e.noglobstar?Pe:e.dot?Ne:$e,r=new Set(e.nocase?["i"]:[]);let i=t.map(c=>{const u=c.map(p=>{if(p instanceof RegExp)for(const l of p.flags.split(""))r.add(l);return typeof p=="string"?Ve(p):p===x?x:p._src});u.forEach((p,l)=>{const f=u[l+1],g=u[l-1];p!==x||g===x||(g===void 0?f!==void 0&&f!==x?u[l+1]="(?:\\/|"+s+"\\/)?"+f:u[l]=s:f===void 0?u[l-1]=g+"(?:\\/|\\/"+s+")?":f!==x&&(u[l-1]=g+"(?:\\/|\\/"+s+"\\/)"+f,u[l+1]=x))});const h=u.filter(p=>p!==x);if(this.partial&&h.length>=1){const p=[];for(let l=1;l<=h.length;l++)p.push(h.slice(0,l).join("/"));return"(?:"+p.join("|")+")"}return h.join("/")}).join("|");const[o,a]=t.length>1?["(?:",")"]:["",""];i="^"+o+i+a+"$",this.partial&&(i="^(?:\\/|"+o+i.slice(1,-1)+a+")$"),this.negate&&(i="^(?!"+i+").+$");try{this.regexp=new RegExp(i,[...r].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;const s=this.options;this.isWindows&&(t=t.split("\\").join("/"));const r=this.slashSplit(t);this.debug(this.pattern,"split",r);const i=this.set;this.debug(this.pattern,"set",i);let o=r[r.length-1];if(!o)for(let a=r.length-2;!o&&a>=0;a--)o=r[a];for(let a=0;a<i.length;a++){const c=i[a];let u=r;if(s.matchBase&&c.length===1&&(u=[o]),this.matchOne(u,c,e))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(t){return y.defaults(t).Minimatch}}y.AST=w;y.Minimatch=C;y.escape=ce;y.unescape=$;class yt{tags;scopedTags=new Map;constructor(t=[]){this.tags=Object.freeze([...t]),t.filter(ke).forEach(([e,s])=>{this.scopedTags.set(e,s)})}matching(t){const e=it(t),s=new C(e?t:t[1]),r=i=>{const o=it(i);if(e&&o)return s.match(i);if(!e&&!o){const a=t[0],c=i[0];return a===c&&s.match(i[1])}return!1};return this.tags.some(r)}getByScope(t){return this.scopedTags.get(t)}}function it(n){return typeof n=="string"}function ke(n){return Array.isArray(n)}class De{entries=new Map;constructor(){}getOrSet(t,e,s={}){const{tags:r=[]}=s,i=this.entries.get(t);if(i)return i.data;const o=e();return this.entries.set(t,{data:o,tags:new yt(r)}),o}set(t,e,s={}){this.getOrSet(t,e,s)}get(t){return this.entries.get(t)?.data}findBy(t){return this.getAll().filter(t)}getAll(t){const e=Array.from(this.entries.values());return t===void 0?e.map(s=>s.data):e.filter(s=>s.tags.matching(t)).map(s=>s.data)}clear(){this.entries.clear()}}const ze=new De,Be=n=>at(n).toString();class Ie{callback;startTime;timeoutMillis=new Set;runningTimeout;constructor(t){this.startTime=Z.now(),this.callback=t}start(){this.startTime=Z.now(),this.startNextTimeout()}clear(){this.runningTimeout&&(clearTimeout(this.runningTimeout),this.runningTimeout=void 0)}addTimeout(t){const e=Lt.fromDurationLike(t).toMillis();return this.timeoutMillis.add(e),this.startNextTimeout(),()=>{this.timeoutMillis.delete(e),this.startNextTimeout()}}startNextTimeout(){if(this.clear(),this.timeoutMillis.size===0)return;const t=Math.min(...this.timeoutMillis),e=this.startTime.diffNow().negate().toMillis(),s=t-e;s<=0?this.callback():this.runningTimeout=setTimeout(()=>this.callback(),s)}}const V=n=>Object.freeze({isSet:!0,value:n}),O=Object.freeze({isSet:!1});class k{value;observers=new Set;constructor(t){this.value=t}notifyObservers(t){this.observers.forEach(e=>e(t))}get observerCount(){return this.observers.size}observe(t){return this.observers.add(t),()=>this.observers.delete(t)}updateValue(t){this.value!==t&&(this.value=t,this.notifyObservers(t))}}const K=n=>{const t=b.useRef(n),[e,s]=b.useState(n.value);return b.useEffect(()=>(t.current=n,s(n.value),n.observe(s)),[n]),t.current!==n?n.value:e};var St=typeof window<"u"&&typeof window.document<"u";typeof process<"u"&&process.versions!=null&&process.versions.node!=null;typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&"userAgent"in navigator&&typeof navigator.userAgent=="string"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";typeof process<"u"&&process.versions!=null&&process.versions.bun!=null;const Je=(n,t)=>{b.useEffect(()=>{if(St)return document.addEventListener("visibilitychange",()=>n(!document.hidden)),()=>{document.removeEventListener("visibilitychange",()=>n(!document.hidden))}},t)},qe=(n,t)=>{b.useEffect(()=>{if(St)return window.addEventListener("focus",n),()=>{window.removeEventListener("focus",n)}},t)},Ge=(n,t={})=>{const{keepValueWhileLoading:e=!0,useSuspense:s=!0,refreshOnWindowFocus:r=!1,refreshOnDocumentVisibilityChange:i=r,autoRefresh:o}=t,a=K(s&&e?n.valueWithCache:n.value),c=K(n.error),u=b.useMemo(()=>({current:a}),[n]);if(b.useEffect(()=>n.onRefresh(()=>{n.load()}),[n]),b.useEffect(()=>{if(o)return n.addTTL(o)},[n,at(o)]),qe(()=>{r&&n.refresh()},[n,r]),Je(h=>{i&&h&&n.refresh()},[n,i]),n.load(),n.syncValue.isSet)return s?n.syncValue.value:Object.freeze({maybeValue:n.syncValue.value,value:n.syncValue.value,hasValue:!0,isLoading:!1});if(n.syncError.isSet)throw n.syncError.value;if(a.isSet)return u.current=a,s?a.value:Object.freeze({maybeValue:a.value,value:a.value,hasValue:!0,isLoading:!1});if(e&&u.current.isSet)return s?u.current.value:Object.freeze({maybeValue:u.current.value,value:u.current.value,hasValue:!0,isLoading:!0});if(c.isSet)throw c.value;if(s)throw n.suspensePromise===void 0?new Error("Invariant violation: Unexpected state"):n.suspensePromise;return Object.freeze({maybeValue:void 0,hasValue:!1,isLoading:!0})},Ke=Ct();class T{loader;meta;loaderPromise;suspensePromise;resolveSuspensePromise=()=>{throw new Error("Resolving initial suspense promise is not supported")};loaderPromiseVersion=0;autoRefreshTimeout;value=new k(O);valueWithCache=new k(O);error=new k(O);syncValue=O;syncError=O;state=new k("void");onRefreshListeners=new Set;static onBeforeRefreshListeners=new Set;static onLoadListeners=new Set;static voidInstance=new T(()=>Promise.resolve(void 0));constructor(t,e={}){this.loader=this.buildLoaderWithContext(t),this.meta=e,this.autoRefreshTimeout=new Ie(()=>this.refresh()),this.resetPromises()}buildLoaderWithContext(t){return Ke.bind({asyncResource:this},t)}updateLoader(t){this.loader=this.buildLoaderWithContext(t)}refresh(){this.callListeners(T.onBeforeRefreshListeners),this.loaderPromiseVersion++,this.resetPromises(),this.value.updateValue(O),this.error.updateValue(O),this.state.updateValue("void"),this.callListeners(this.onRefreshListeners)}callListeners(t){t.forEach(e=>e(this))}onRefresh(t){return this.onRefreshListeners.add(t),()=>{this.onRefreshListeners.delete(t)}}static onBeforeRefresh(t){return this.onBeforeRefreshListeners.add(t),()=>{this.onBeforeRefreshListeners.delete(t)}}static onLoad(t){return this.onLoadListeners.add(t),()=>{this.onLoadListeners.delete(t)}}addTTL(t){return this.autoRefreshTimeout.addTimeout(t)}load(){if(!(this.value.value.isSet||this.error.value.isSet)&&this.loaderPromise===void 0){const t=this.handleLoading();t instanceof Promise&&(this.loaderPromise=t)}}resetPromises(){this.suspensePromise=new Promise(t=>{this.resolveSuspensePromise=t}),this.loaderPromise=void 0}isMatchingError(t){return this.error.value.isSet?t===!0||this.error.value.value===t:!1}handleLoading(){try{const t=this.loader();if(t instanceof Promise)return this.syncValue=O,this.syncError=O,this.handleAsyncLoading(t);this.syncValue=V(t)}catch(t){this.syncError=V(t)}this.callListeners(T.onLoadListeners),this.autoRefreshTimeout.start()}async handleAsyncLoading(t){const e=++this.loaderPromiseVersion;let s=O,r=O;this.state.updateValue("loading");try{const i=await t;s=V(i)}catch(i){r=V(i)}this.resolveSuspensePromise(),this.loaderPromiseVersion===e&&(this.resetPromises(),s.isSet?(this.valueWithCache.updateValue(s),this.value.updateValue(s),this.state.updateValue("loaded")):r.isSet&&(this.error.updateValue(r),this.state.updateValue("error")),this.callListeners(T.onLoadListeners),this.autoRefreshTimeout.start())}use(t={}){return Ge(this,t)}watchState(){return K(this.state)}}function Ue(n,t,e={}){const{loaderId:s,tags:r}=e;if(t===null)return T.voidInstance;const i=Be({asyncFn:n,parameters:t,loaderId:s}),o=()=>n(...t),a=()=>new T(o,{tags:new yt(r)}),c=ze.getOrSet(i,a,{tags:r});return c.updateLoader(o),c}const vt=n=>Object.fromEntries(n.entries());class j{settings;constructor(t=new D){this.settings=t,ot(this)}set(t,e,s){this.settings.set(t,e.parse(H(s)))}get(t,e){return e.parse(H(this.settings.get(t)))}clear(t){this.settings.delete(t)}get asJson(){return z(vt(this.settings),t=>JSON.stringify(t))}static fromJson(t){return new j(new D(z(t,e=>typeof e=="string"?JSON.parse(e):e)))}}class _{componentSettings;constructor(t=new D){this.componentSettings=t,ot(this)}set(t,e,s,r){const i=this.componentSettings.get(t)??new j;i.set(e,s,r),this.componentSettings.set(t,i)}get(t,e,s){return(this.componentSettings.get(t)??new j).get(e,s)}clear(t,e){this.componentSettings.get(t)?.clear(e)}get asJson(){return z(vt(this.componentSettings),t=>t.asJson)}static fromJson(t){const e=z(t,s=>j.fromJson(s));return new _(new D(e))}}const rt=typeof localStorage<"u";class Fe{storageKey;constructor(t){this.storageKey=t}async load(){if(!rt)return{};const t=localStorage.getItem(this.storageKey);return t===null?{}:JSON.parse(t)}async store(t){rt&&localStorage.setItem(this.storageKey,JSON.stringify(t))}}const _e=n=>{switch(n.type){case"custom":return n.store;case"localStorage":return new Fe(n.storageKey)}throw new Error(`Unsupported setting backend: ${n}`)},bt=b.createContext(void 0),ss=()=>b.useContext(bt),He=n=>{const{children:t,id:e,...s}=n,r=_e(s),i=Ue(()=>r.load(),[],{loaderId:e}),o=i.use(),a=b.useRef(Promise.resolve()),c=b.useMemo(()=>_.fromJson(o),[e]),u=()=>{const h=c.asJson;a.current=a.current.then(async()=>{await r.store(h),i.refresh()})};return b.useEffect(()=>Ot(u),[e]),Et.jsx(bt.Provider,{value:c,children:t})};He.__docgenInfo={description:"",methods:[],displayName:"SettingsProvider",props:{id:{required:!1,tsType:{name:"string"},description:""}}};export{He as S,Ue as g,ss as u};
