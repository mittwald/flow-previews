import{r as $,R as a}from"./index-Cs7sjTYM.js";import{P as j}from"./PropsContextProvider-CE2pl7GD.js";import{f as h,F as L}from"./FormField.module-DNby2qWh.js";import{c as I}from"./clsx-B-dksMZM.js";import"./IconApp-BvR14QOm.js";import{a as G}from"./IconWarning-DvIm1kNF.js";import{f as M,P as J,O as Q}from"./flowComponent-DojWstBP.js";import{P as X}from"./PopoverTrigger-BG2gHMpH.js";import{h as Y,k as Z,u as k,O as ee}from"./OverlayTrigger-Bdr7_DCO.js";import{$ as te,a as le,b as oe,c as ae}from"./ListBox-CC1USgtZ.js";import{a as re,$ as se}from"./Button-BebB4Pfr.js";import{$ as q,e as V,d as ie,f as ne,b as T,g as de}from"./utils-BwYH5X3X.js";import{a as ce,b as fe,$ as ue,e as $e,f as be}from"./Form-CqlMkRPm.js";import{$ as me}from"./intlStrings-ZMTSFH_M.js";import{a as pe}from"./Label-z8V7EdU9.js";import{a as z}from"./Text-Dd84vsje.js";import{c as ve}from"./CollectionBuilder-DDU0oj1o.js";import{$ as K}from"./filterDOMProps-CeZl_uWj.js";import{a as ge,d as ye}from"./OverlayArrow-DTpAwzOr.js";import{$ as xe}from"./useSingleSelectListState-BD6GXQWM.js";import{h as Pe,n as he,c as Fe}from"./useFocusRing-if03xCoO.js";import{a as _,d as Ce,f as Se}from"./index-DKTAOSvX.js";import{d as De,e as Ee}from"./SelectionManager-DZzKvQeJ.js";import{$ as Re}from"./useCollator-lO_wuqqx.js";import{b as Ie}from"./useMenuTrigger-NmqfniOV.js";import{$ as Ke}from"./useFormReset-B-nkSQHj.js";import{a as we}from"./VisuallyHidden-BWHYRTKp.js";import{$ as Oe}from"./useLocalizedStringFormatter-A1OcE67O.js";const H=new WeakMap;function _e(e,t,r){let{keyboardDelegate:s,isDisabled:l,isRequired:n,name:i,validationBehavior:o="aria"}=e,c=Re({usage:"search",sensitivity:"base"}),f=$.useMemo(()=>s||new De(t.collection,t.disabledKeys,null,c),[s,t.collection,t.disabledKeys,c]),{menuTriggerProps:d,menuProps:b}=Ie({isDisabled:l,type:"listbox"},t,r),u=m=>{switch(m.key){case"ArrowLeft":{m.preventDefault();let y=t.selectedKey!=null?f.getKeyAbove(t.selectedKey):f.getFirstKey();y&&t.setSelectedKey(y);break}case"ArrowRight":{m.preventDefault();let y=t.selectedKey!=null?f.getKeyBelow(t.selectedKey):f.getFirstKey();y&&t.setSelectedKey(y);break}}},{typeSelectProps:p}=Ee({keyboardDelegate:f,selectionManager:t.selectionManager,onTypeSelect(m){t.setSelectedKey(m)}}),{isInvalid:v,validationErrors:F,validationDetails:S}=t.displayValidation,{labelProps:D,fieldProps:P,descriptionProps:x,errorMessageProps:E}=ce({...e,labelElementType:"span",isInvalid:v,errorMessage:e.errorMessage||F});p.onKeyDown=p.onKeyDownCapture,delete p.onKeyDownCapture;let R=K(e,{labelable:!0}),g=_(p,d,P),C=Ce();return H.set(t,{isDisabled:l,isRequired:n,name:i,validationBehavior:o}),{labelProps:{...D,onClick:()=>{e.isDisabled||(r.current.focus(),Pe("keyboard"))}},triggerProps:_(R,{...g,isDisabled:l,onKeyDown:Se(g.onKeyDown,u,e.onKeyDown),onKeyUp:e.onKeyUp,"aria-labelledby":[C,g["aria-labelledby"],g["aria-label"]&&!g["aria-labelledby"]?g.id:null].filter(Boolean).join(" "),onFocus(m){t.isFocused||(e.onFocus&&e.onFocus(m),e.onFocusChange&&e.onFocusChange(!0),t.setFocused(!0))},onBlur(m){t.isOpen||(e.onBlur&&e.onBlur(m),e.onFocusChange&&e.onFocusChange(!1),t.setFocused(!1))}}),valueProps:{id:C},menuProps:{...b,autoFocus:t.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",onBlur:m=>{m.currentTarget.contains(m.relatedTarget)||(e.onBlur&&e.onBlur(m),e.onFocusChange&&e.onFocusChange(!1),t.setFocused(!1))},"aria-labelledby":[P["aria-labelledby"],g["aria-label"]&&!P["aria-labelledby"]?g.id:null].filter(Boolean).join(" ")},descriptionProps:x,errorMessageProps:E,isInvalid:v,validationErrors:F,validationDetails:S}}function Be(e,t,r){let s=H.get(t)||{},{autoComplete:l,name:n=s.name,isDisabled:i=s.isDisabled}=e,{validationBehavior:o,isRequired:c}=s,f=he(),{visuallyHiddenProps:d}=we();Ke(e.selectRef,t.selectedKey,t.setSelectedKey),fe({validationBehavior:o,focus:()=>r.current.focus()},t,e.selectRef);var b;return{containerProps:{...d,"aria-hidden":!0,"data-react-aria-prevent-focus":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{type:"text",tabIndex:f==null||t.isFocused||t.isOpen?-1:0,style:{fontSize:16},onFocus:()=>r.current.focus(),disabled:i},selectProps:{tabIndex:-1,autoComplete:l,disabled:i,required:o==="native"&&c,name:n,value:(b=t.selectedKey)!==null&&b!==void 0?b:"",onChange:u=>t.setSelectedKey(u.target.value)}}}function Ne(e){let{state:t,triggerRef:r,label:s,name:l,isDisabled:n}=e,i=$.useRef(null),{containerProps:o,inputProps:c,selectProps:f}=Be({...e,selectRef:i},t,r);var d;return t.collection.size<=300?a.createElement("div",{...o,"data-testid":"hidden-select-container"},a.createElement("input",c),a.createElement("label",null,s,a.createElement("select",{...f,ref:i},a.createElement("option",null),[...t.collection.getKeys()].map(b=>{let u=t.collection.getItem(b);if(u.type==="item")return a.createElement("option",{key:u.key,value:u.key},u.textValue)})))):l?a.createElement("input",{type:"hidden",autoComplete:f.autoComplete,name:l,disabled:n,value:(d=t.selectedKey)!==null&&d!==void 0?d:""}):null}function Me(e){let t=ge(e),[r,s]=$.useState(null),l=xe({...e,onSelectionChange:c=>{e.onSelectionChange!=null&&e.onSelectionChange(c),t.close(),n.commitValidation()}}),n=ue({...e,value:l.selectedKey}),[i,o]=$.useState(!1);return{...n,...l,...t,focusStrategy:r,open(c=null){l.collection.size!==0&&(s(c),t.open())},toggle(c=null){l.collection.size!==0&&(s(c),t.toggle())},isFocused:i,setFocused:o}}function ke(e){return e&&e.__esModule?e.default:e}const w=$.createContext(null),W=$.createContext(null);function qe(e,t){[e,t]=q(e,t,w);let{children:r,isDisabled:s=!1,isInvalid:l=!1,isRequired:n=!1}=e,i=$.useMemo(()=>typeof r=="function"?r({isOpen:!1,isDisabled:s,isInvalid:l,isRequired:n,isFocused:!1,isFocusVisible:!1,defaultChildren:null}):r,[r,s,l,n]);return a.createElement(ve,{content:i},o=>a.createElement(Ve,{props:e,collection:o,selectRef:t}))}function Ve({props:e,selectRef:t,collection:r}){let{validationBehavior:s}=V($e)||{};var l,n;let i=(n=(l=e.validationBehavior)!==null&&l!==void 0?l:s)!==null&&n!==void 0?n:"native",o=Me({...e,collection:r,children:void 0,validationBehavior:i}),{isFocusVisible:c,focusProps:f}=Fe({within:!0}),d=$.useRef(null),[b,u]=ie(),{labelProps:p,triggerProps:v,valueProps:F,menuProps:S,descriptionProps:D,errorMessageProps:P,...x}=_e({...ne(e),label:u,validationBehavior:i},o,d),[E,R]=$.useState(null),g=$.useCallback(()=>{d.current&&R(d.current.offsetWidth+"px")},[d]);ye({ref:d,onResize:g});let C=$.useMemo(()=>({isOpen:o.isOpen,isFocused:o.isFocused,isFocusVisible:c,isDisabled:e.isDisabled||!1,isInvalid:x.isInvalid||!1,isRequired:e.isRequired||!1}),[o.isOpen,o.isFocused,c,e.isDisabled,x.isInvalid,e.isRequired]),m=T({...e,values:C,defaultClassName:"react-aria-Select"}),y=K(e);delete y.id;let O=$.useRef(null);return a.createElement(de,{values:[[w,e],[W,o],[A,F],[pe,{...p,ref:b,elementType:"span"}],[re,{...v,ref:d,isPressed:o.isOpen}],[Y,o],[Z,{trigger:"Select",triggerRef:d,scrollRef:O,placement:"bottom start",style:{"--trigger-width":E}}],[te,{...S,ref:O}],[le,o],[z,{slots:{description:D,errorMessage:P}}],[be,x]]},a.createElement("div",{...y,...m,...f,ref:t,slot:e.slot||void 0,"data-focused":o.isFocused||void 0,"data-focus-visible":c||void 0,"data-open":o.isOpen||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":x.isInvalid||void 0,"data-required":e.isRequired||void 0}),a.createElement(Ne,{state:o,triggerRef:d,label:u,name:e.name,isDisabled:e.isDisabled}))}const Te=$.forwardRef(qe),A=$.createContext(null);function ze(e,t){var r,s;[e,t]=q(e,t,A);let l=$.useContext(W),{placeholder:n}=V(w),i=l.selectedKey!=null?l.collection.getItem(l.selectedKey):null,o=i==null?void 0:i.props.children;typeof o=="function"&&(o=o({isHovered:!1,isPressed:!1,isSelected:!1,isFocused:!1,isFocusVisible:!1,isDisabled:!1,selectionMode:"single",selectionBehavior:"toggle"}));let c=Oe(ke(me),"react-aria-components");var f,d,b;let u=T({...e,defaultChildren:(f=o??n)!==null&&f!==void 0?f:c.format("selectPlaceholder"),defaultClassName:"react-aria-SelectValue",values:{selectedItem:(d=(r=l.selectedItem)===null||r===void 0?void 0:r.value)!==null&&d!==void 0?d:null,selectedText:(b=(s=l.selectedItem)===null||s===void 0?void 0:s.textValue)!==null&&b!==void 0?b:null,isPlaceholder:!i}}),p=K(e);return a.createElement("span",{ref:t,...p,...u,"data-placeholder":!i||void 0},a.createElement(z.Provider,{value:void 0},u.children))}const He=$.forwardRef(ze),We="flow--select",Ae="flow--select--toggle",B={select:We,toggle:Ae},Ue="flow--select--options--popover",je="flow--select--options",N={popover:Ue,options:je},U=e=>{const{className:t,children:r,...s}=e,l=I(N.options,t),n=k("Select");return a.createElement(X,{className:N.popover,controller:n},a.createElement(oe,{className:l,...s},r))};U.__docgenInfo={description:"",methods:[],displayName:"Options"};const Le=M("Select",e=>{const{children:t,className:r,onChange:s=()=>{},onSelectionChange:l=()=>{},controller:n,refProp:i,...o}=e,c=I(B.select,h.formField,r),f={Label:{className:h.label,optional:!e.isRequired},FieldDescription:{className:h.fieldDescription},FieldError:{className:h.customFieldError},Option:{tunnelId:"options"}},d=v=>{s(String(v)),l(v)},b=k("Select",{reuseControllerFromContext:!0}),u=n??b,p=u.useIsOpen();return a.createElement(Te,{...o,className:c,ref:i,onSelectionChange:d,onOpenChange:v=>u.setOpen(v),isOpen:p},a.createElement(ee,{type:"Select",controller:u},a.createElement(j,{props:f},a.createElement(J,null,a.createElement(se,{className:B.toggle},a.createElement(He,null),a.createElement(G,null)),t,a.createElement(U,null,a.createElement(Q,{id:"options"})),a.createElement(L,{className:h.fieldError})))))});Le.__docgenInfo={description:"",methods:[],displayName:"Select"};const Ge="flow--select--option",Je="flow--select--option--icon",Qe="flow--select--option--text",Xe="flow--select--option--control-icon",Ye={option:Ge,icon:Je,text:Qe,controlIcon:Xe},Ze=M("Option",e=>{const{className:t,children:r,value:s,refProp:l,...n}=e,i=I(Ye.option,t);return a.createElement(ae,{className:i,ref:l,...n,id:s},r)});Ze.__docgenInfo={description:"",methods:[],displayName:"Option"};export{Ze as O,Le as S};
