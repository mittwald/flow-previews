var y=Object.defineProperty;var v=(t,e,r)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var p=(t,e,r)=>v(t,typeof e!="symbol"?e+"":e,r);import{r as m,R as i}from"./index-uCp2LrAq.js";import{$ as F}from"./Input-CR20gog_.js";import{$ as g}from"./filterDOMProps-CeZl_uWj.js";import{b as w}from"./utils-CRveUs4Q.js";import{$ as x}from"./PressResponder-CvugjgZN.js";import{m as R,o as E,b as d}from"./flowComponent-d9koHm8X.js";import{u as T}from"./useSelector-BUIORffs.js";function S(t,e){let{onSelect:r,acceptedFileTypes:l,allowsMultiple:a,defaultCamera:o,children:f,acceptDirectory:c,...$}=t,n=w(e),h=g($);return i.createElement(i.Fragment,null,i.createElement(x,{onPress:()=>{var s,u;!((s=n.current)===null||s===void 0)&&s.value&&(n.current.value=""),(u=n.current)===null||u===void 0||u.click()}},f),i.createElement(F,{...h,type:"file",ref:n,style:{display:"none"},accept:l==null?void 0:l.toString(),onChange:s=>r==null?void 0:r(s.target.files),capture:o,multiple:a,webkitdirectory:c?"":void 0}))}const _=m.forwardRef(S),k=t=>{const{controller:e,children:r,...l}=t;return i.createElement(i.Fragment,null,i.createElement(_,{...l,onSelect:a=>e.selectFile(a,t.allowsMultiple)},r))};k.__docgenInfo={description:"",methods:[],displayName:"FileTrigger",props:{className:{required:!1,tsType:{name:"string"},description:""},controller:{required:!0,tsType:{name:"FileController"},description:""}}};class b{constructor(){p(this,"files",new Map);p(this,"id",0);R(this,{files:E.shallow,add:d.bound,clear:d.bound,dropFile:d.bound,selectFile:d.bound})}static useNew(){return m.useRef(new b).current}useFiles(){return T(()=>Array.from(this.files.values()))}add(e){const r=this.id++;this.files.set(r,e)}clear(){this.files.clear()}async dropFile(e,r,l){e.items.filter(o=>o.kind==="file").map(async(o,f)=>{const c=await o.getFile();if(r&&!r.includes(c.type)){alert("files of this type are not allowed");return}if(!l&&f>0){alert("multiple files are not allowed");return}l||this.clear(),this.add(c)})}selectFile(e,r){(e?Array.from(e):[]).map(a=>{r||this.clear(),this.add(a)})}}export{b as F,k as a};
