import{r as m,R as l}from"./index-Cs7sjTYM.js";import{P as L}from"./PropsContextProvider-C-7PaZ52.js";import{f as h,F as G}from"./FormField.module-3Dd9Gcnj.js";import{c as R}from"./clsx-B-dksMZM.js";import"./IconApp-BUZKcXPP.js";import{I as J}from"./IconWarning-BHhVudlO.js";import{f as q,M as Q,P as X}from"./flowComponent-S4fYrZHa.js";import{P as Y}from"./PopoverTrigger-DazYzOz-.js";import{h as Z,k as ee,u as V,O as te}from"./OverlayTrigger-D5LrxbZh.js";import{$ as ae,a as oe,b as le,c as re}from"./ListBox-DOUCZjhP.js";import{a as se,$ as ne}from"./Button-DrQgql3X.js";import{g as ie,d as de}from"./Collection-DR5xXegF.js";import{a as T,d as z,e as ce,f as fe,c as H,l as ue,g as _}from"./utils-Cy-A-nlV.js";import{a as $e,b as be,$ as me,e as pe,f as ve}from"./Form-BsdqCRI5.js";import{$ as ge}from"./intlStrings-ZMTSFH_M.js";import{a as ye}from"./Label-8PgMpAzA.js";import{a as W}from"./Text-Dh5WnJTs.js";import{$ as O}from"./filterDOMProps-CeZl_uWj.js";import{a as xe,d as Pe}from"./OverlayArrow-BBlidXZz.js";import{$ as he}from"./useSingleSelectListState-BpO7BPB3.js";import{h as Fe,p as Ce,c as Se}from"./useFocusable-OFlS-6qe.js";import{a as N,b as De,f as Ee}from"./index-Dy0c0dcE.js";import{d as Ke,e as Ie,f as we}from"./SelectionManager-Dy9tah2i.js";import{b as Re}from"./useMenuTrigger-D4xBCXDE.js";import{$ as Oe}from"./useFormReset-DRCqKyTt.js";import{a as Be}from"./VisuallyHidden-D76woJCP.js";import{a as _e}from"./useLocalizedStringFormatter-Ccpl5Mb8.js";const A=new WeakMap;function Ne(e,t,s){let{keyboardDelegate:r,isDisabled:o,isRequired:c,name:n,validationBehavior:f="aria"}=e,a=Ke({usage:"search",sensitivity:"base"}),d=m.useMemo(()=>r||new Ie(t.collection,t.disabledKeys,null,a),[r,t.collection,t.disabledKeys,a]),{menuTriggerProps:$,menuProps:i}=Re({isDisabled:o,type:"listbox"},t,s),u=b=>{switch(b.key){case"ArrowLeft":{b.preventDefault();let y=t.selectedKey!=null?d.getKeyAbove(t.selectedKey):d.getFirstKey();y&&t.setSelectedKey(y);break}case"ArrowRight":{b.preventDefault();let y=t.selectedKey!=null?d.getKeyBelow(t.selectedKey):d.getFirstKey();y&&t.setSelectedKey(y);break}}},{typeSelectProps:p}=we({keyboardDelegate:d,selectionManager:t.selectionManager,onTypeSelect(b){t.setSelectedKey(b)}}),{isInvalid:g,validationErrors:F,validationDetails:D}=t.displayValidation,{labelProps:E,fieldProps:P,descriptionProps:K,errorMessageProps:x}=$e({...e,labelElementType:"span",isInvalid:g,errorMessage:e.errorMessage||F});p.onKeyDown=p.onKeyDownCapture,delete p.onKeyDownCapture;let I=O(e,{labelable:!0}),v=N(p,$,P),C=De();return A.set(t,{isDisabled:o,isRequired:c,name:n,validationBehavior:f}),{labelProps:{...E,onClick:()=>{e.isDisabled||(s.current.focus(),Fe("keyboard"))}},triggerProps:N(I,{...v,isDisabled:o,onKeyDown:Ee(v.onKeyDown,u,e.onKeyDown),onKeyUp:e.onKeyUp,"aria-labelledby":[C,v["aria-labelledby"],v["aria-label"]&&!v["aria-labelledby"]?v.id:null].filter(Boolean).join(" "),onFocus(b){t.isFocused||(e.onFocus&&e.onFocus(b),e.onFocusChange&&e.onFocusChange(!0),t.setFocused(!0))},onBlur(b){t.isOpen||(e.onBlur&&e.onBlur(b),e.onFocusChange&&e.onFocusChange(!1),t.setFocused(!1))}}),valueProps:{id:C},menuProps:{...i,autoFocus:t.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",onBlur:b=>{b.currentTarget.contains(b.relatedTarget)||(e.onBlur&&e.onBlur(b),e.onFocusChange&&e.onFocusChange(!1),t.setFocused(!1))},"aria-labelledby":[P["aria-labelledby"],v["aria-label"]&&!P["aria-labelledby"]?v.id:null].filter(Boolean).join(" ")},descriptionProps:K,errorMessageProps:x,isInvalid:g,validationErrors:F,validationDetails:D}}function Me(e,t,s){let r=A.get(t)||{},{autoComplete:o,name:c=r.name,isDisabled:n=r.isDisabled}=e,{validationBehavior:f,isRequired:a}=r,d=Ce(),{visuallyHiddenProps:$}=Be();Oe(e.selectRef,t.selectedKey,t.setSelectedKey),be({validationBehavior:f,focus:()=>s.current.focus()},t,e.selectRef);var i;return{containerProps:{...$,"aria-hidden":!0,"data-react-aria-prevent-focus":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{type:"text",tabIndex:d==null||t.isFocused||t.isOpen?-1:0,style:{fontSize:16},onFocus:()=>s.current.focus(),disabled:n},selectProps:{tabIndex:-1,autoComplete:o,disabled:n,required:f==="native"&&a,name:c,value:(i=t.selectedKey)!==null&&i!==void 0?i:"",onChange:u=>t.setSelectedKey(u.target.value)}}}function ke(e){let{state:t,triggerRef:s,label:r,name:o,isDisabled:c}=e,n=m.useRef(null),{containerProps:f,inputProps:a,selectProps:d}=Me({...e,selectRef:n},t,s);var $;return t.collection.size<=300?l.createElement("div",{...f,"data-testid":"hidden-select-container"},l.createElement("input",a),l.createElement("label",null,r,l.createElement("select",{...d,ref:n},l.createElement("option",null),[...t.collection.getKeys()].map(i=>{let u=t.collection.getItem(i);if(u.type==="item")return l.createElement("option",{key:u.key,value:u.key},u.textValue)})))):o?l.createElement("input",{type:"hidden",autoComplete:d.autoComplete,name:o,disabled:c,value:($=t.selectedKey)!==null&&$!==void 0?$:""}):null}function qe(e){let t=xe(e),[s,r]=m.useState(null),o=he({...e,onSelectionChange:a=>{e.onSelectionChange!=null&&e.onSelectionChange(a),t.close(),c.commitValidation()}}),c=me({...e,value:o.selectedKey}),[n,f]=m.useState(!1);return{...c,...o,...t,focusStrategy:s,open(a=null){o.collection.size!==0&&(r(a),t.open())},toggle(a=null){o.collection.size!==0&&(r(a),t.toggle())},isFocused:n,setFocused:f}}function Ve(e){return e&&e.__esModule?e.default:e}const S=m.createContext(null),w=m.createContext(null);function Te(e,t){[e,t]=T(e,t,S);let{validationBehavior:s}=z(pe)||{};var r,o;let c=(o=(r=e.validationBehavior)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:"native",{collection:n,document:f}=ie(),a=qe({...e,collection:n,children:void 0,validationBehavior:c}),{isFocusVisible:d,focusProps:$}=Se({within:!0}),i=m.useRef(null),[u,p]=ce(),{labelProps:g,triggerProps:F,valueProps:D,menuProps:E,descriptionProps:P,errorMessageProps:K,...x}=Ne({...fe(e),label:p,validationBehavior:c},a,i),[I,v]=m.useState(null),C=m.useCallback(()=>{i.current&&v(i.current.offsetWidth+"px")},[i]);Pe({ref:i,onResize:C});let b=m.useMemo(()=>({isOpen:a.isOpen,isFocused:a.isFocused,isFocusVisible:d,isDisabled:e.isDisabled||!1,isInvalid:x.isInvalid||!1,isRequired:e.isRequired||!1}),[a.isOpen,a.isFocused,d,e.isDisabled,x.isInvalid,e.isRequired]),y=H({...e,values:b,defaultClassName:"react-aria-Select"}),B=O(e);return delete B.id,l.createElement(l.Fragment,null,l.createElement(ue,null,l.createElement(_,{values:[[S,e],[w,a],[de,f]]},y.children)),l.createElement(_,{values:[[S,e],[w,a],[U,D],[ye,{...g,ref:u,elementType:"span"}],[se,{...F,ref:i,isPressed:a.isOpen}],[Z,a],[ee,{trigger:"Select",triggerRef:i,placement:"bottom start",style:{"--trigger-width":I}}],[ae,E],[oe,a],[W,{slots:{description:P,errorMessage:K}}],[ve,x]]},l.createElement("div",{...B,...y,...$,ref:t,slot:e.slot||void 0,"data-focused":a.isFocused||void 0,"data-focus-visible":d||void 0,"data-open":a.isOpen||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":x.isInvalid||void 0,"data-required":e.isRequired||void 0}),l.createElement(ke,{state:a,triggerRef:i,label:p,name:e.name,isDisabled:e.isDisabled})))}const ze=m.forwardRef(Te),U=m.createContext(null);function He(e,t){var s,r;[e,t]=T(e,t,U);let o=m.useContext(w),{placeholder:c}=z(S),n=o.selectedKey!=null?o.collection.getItem(o.selectedKey):null,f=n==null?void 0:n.rendered;typeof f=="function"&&(f=f({isHovered:!1,isPressed:!1,isSelected:!1,isFocused:!1,isFocusVisible:!1,isDisabled:!1,selectionMode:"single",selectionBehavior:"toggle"}));let a=_e(Ve(ge),"react-aria-components");var d,$;let i=H({...e,defaultChildren:f||c||a.format("selectPlaceholder"),defaultClassName:"react-aria-SelectValue",values:{selectedItem:(d=(s=o.selectedItem)===null||s===void 0?void 0:s.value)!==null&&d!==void 0?d:null,selectedText:($=(r=o.selectedItem)===null||r===void 0?void 0:r.textValue)!==null&&$!==void 0?$:null,isPlaceholder:!n}}),u=O(e);return l.createElement("span",{ref:t,...u,...i,"data-placeholder":!n||void 0},l.createElement(W.Provider,{value:void 0},i.children))}const We=m.forwardRef(He),Ae="flow--select",Ue="flow--select--toggle",M={select:Ae,toggle:Ue},je="flow--select--options--popover",Le="flow--select--options",k={popover:je,options:Le},j=e=>{const{className:t,children:s,...r}=e,o=R(k.options,t),c=V("Select");return l.createElement(Y,{className:k.popover,controller:c},l.createElement(le,{className:o,...r},s))};j.__docgenInfo={description:"",methods:[],displayName:"Options"};const Ge=q("Select",e=>{const{children:t,className:s,onChange:r=()=>{},onSelectionChange:o=()=>{},controller:c,refProp:n,...f}=e,a=R(M.select,h.formField,s),d={Label:{className:h.label,optional:!e.isRequired},FieldDescription:{className:h.fieldDescription},FieldError:{className:h.customFieldError},Option:{tunnelId:"options"}},$=g=>{r(String(g)),o(g)},i=V("Select",{reuseControllerFromContext:!0}),u=c??i,p=u.useIsOpen();return l.createElement(ze,{...f,className:a,ref:n,onSelectionChange:$,onOpenChange:g=>u.setOpen(g),isOpen:p},l.createElement(te,{type:"Select",controller:u},l.createElement(L,{props:d},l.createElement(Q,null,l.createElement(ne,{className:M.toggle},l.createElement(We,null),l.createElement(J,null)),t,l.createElement(j,null,l.createElement(X,{id:"options"})),l.createElement(G,{className:h.fieldError})))))});Ge.__docgenInfo={description:"",methods:[],displayName:"Select"};const Je="flow--select--option",Qe="flow--select--option--icon",Xe="flow--select--option--text",Ye="flow--select--option--control-icon",Ze={option:Je,icon:Qe,text:Xe,controlIcon:Ye},et=q("Option",e=>{const{className:t,children:s,value:r,refProp:o,...c}=e,n=R(Ze.option,t);return l.createElement(re,{className:n,ref:o,...c,id:r},s)});et.__docgenInfo={description:"",methods:[],displayName:"Option"};export{et as O,Ge as S};
