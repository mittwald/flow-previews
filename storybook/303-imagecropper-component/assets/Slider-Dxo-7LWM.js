import{r as p,R as D}from"./index-Cs7sjTYM.js";import{f as $e}from"./flowComponent-BttIposY.js";import{c as Te}from"./clsx-B-dksMZM.js";import{P as we}from"./PropsContextProvider-C-7PaZ52.js";import{B as ne}from"./Button-m5USM9JU.js";import"./IconApp-CyHi4WPz.js";import{B as Pe,a as ye}from"./IconWarning-DZJaqlYL.js";import{$ as ue,a as De}from"./useLocalizedStringFormatter-Ccpl5Mb8.js";import{a as Q,e as de,c as O,g as se,d as xe}from"./utils-Cy-A-nlV.js";import{a as ce}from"./Label-8PgMpAzA.js";import{c as ae,a as A}from"./index-Dy0c0dcE.js";import{$ as fe}from"./filterDOMProps-CeZl_uWj.js";import{$ as Me}from"./useNumberFormatter-CckdFgkV.js";import{$ as Ve}from"./useControlledState-B7K2eYzO.js";import{$ as Z,a as q}from"./number-nHrFdSb-.js";import{e as _,f as ke,g as Ee}from"./usePress-CTrgc7uI.js";import{h as Ke,n as Re,o as Se,d as Fe,b as me,c as Ie}from"./useFocusable-OFlS-6qe.js";import{$ as be}from"./useLabel-B-9ggeSA.js";import{$ as Ce}from"./useFormReset-DRCqKyTt.js";import{$ as Le}from"./VisuallyHidden-D76woJCP.js";function pe(n){let{onMoveStart:t,onMove:e,onMoveEnd:c}=n,o=p.useRef({didMove:!1,lastPosition:null,id:null}),{addGlobalListener:l,removeGlobalListener:f}=_(),v=ae((u,h,g,i)=>{g===0&&i===0||(o.current.didMove||(o.current.didMove=!0,t==null||t({type:"movestart",pointerType:h,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey})),e==null||e({type:"move",pointerType:h,deltaX:g,deltaY:i,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey}))}),T=ae((u,h)=>{ke(),o.current.didMove&&(c==null||c({type:"moveend",pointerType:h,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey}))});return{moveProps:p.useMemo(()=>{let u={},h=()=>{Ee(),o.current.didMove=!1};if(typeof PointerEvent>"u"){let i=r=>{if(r.button===0){var m,b,$,y;v(r,"mouse",r.pageX-(($=(m=o.current.lastPosition)===null||m===void 0?void 0:m.pageX)!==null&&$!==void 0?$:0),r.pageY-((y=(b=o.current.lastPosition)===null||b===void 0?void 0:b.pageY)!==null&&y!==void 0?y:0)),o.current.lastPosition={pageX:r.pageX,pageY:r.pageY}}},x=r=>{r.button===0&&(T(r,"mouse"),f(window,"mousemove",i,!1),f(window,"mouseup",x,!1))};u.onMouseDown=r=>{r.button===0&&(h(),r.stopPropagation(),r.preventDefault(),o.current.lastPosition={pageX:r.pageX,pageY:r.pageY},l(window,"mousemove",i,!1),l(window,"mouseup",x,!1))};let s=r=>{let m=[...r.changedTouches].findIndex(({identifier:E})=>E===o.current.id);if(m>=0){var b,$;let{pageX:E,pageY:L}=r.changedTouches[m];var y,M;v(r,"touch",E-((y=(b=o.current.lastPosition)===null||b===void 0?void 0:b.pageX)!==null&&y!==void 0?y:0),L-((M=($=o.current.lastPosition)===null||$===void 0?void 0:$.pageY)!==null&&M!==void 0?M:0)),o.current.lastPosition={pageX:E,pageY:L}}},w=r=>{[...r.changedTouches].findIndex(({identifier:b})=>b===o.current.id)>=0&&(T(r,"touch"),o.current.id=null,f(window,"touchmove",s),f(window,"touchend",w),f(window,"touchcancel",w))};u.onTouchStart=r=>{if(r.changedTouches.length===0||o.current.id!=null)return;let{pageX:m,pageY:b,identifier:$}=r.changedTouches[0];h(),r.stopPropagation(),r.preventDefault(),o.current.lastPosition={pageX:m,pageY:b},o.current.id=$,l(window,"touchmove",s,!1),l(window,"touchend",w,!1),l(window,"touchcancel",w,!1)}}else{let i=s=>{if(s.pointerId===o.current.id){var w,r;let $=s.pointerType||"mouse";var m,b;v(s,$,s.pageX-((m=(w=o.current.lastPosition)===null||w===void 0?void 0:w.pageX)!==null&&m!==void 0?m:0),s.pageY-((b=(r=o.current.lastPosition)===null||r===void 0?void 0:r.pageY)!==null&&b!==void 0?b:0)),o.current.lastPosition={pageX:s.pageX,pageY:s.pageY}}},x=s=>{if(s.pointerId===o.current.id){let w=s.pointerType||"mouse";T(s,w),o.current.id=null,f(window,"pointermove",i,!1),f(window,"pointerup",x,!1),f(window,"pointercancel",x,!1)}};u.onPointerDown=s=>{s.button===0&&o.current.id==null&&(h(),s.stopPropagation(),s.preventDefault(),o.current.lastPosition={pageX:s.pageX,pageY:s.pageY},o.current.id=s.pointerId,l(window,"pointermove",i,!1),l(window,"pointerup",x,!1),l(window,"pointercancel",x,!1))}}let g=(i,x,s)=>{h(),v(i,"keyboard",x,s),T(i,"keyboard")};return u.onKeyDown=i=>{switch(i.key){case"Left":case"ArrowLeft":i.preventDefault(),i.stopPropagation(),g(i,-1,0);break;case"Right":case"ArrowRight":i.preventDefault(),i.stopPropagation(),g(i,1,0);break;case"Up":case"ArrowUp":i.preventDefault(),i.stopPropagation(),g(i,0,-1);break;case"Down":case"ArrowDown":i.preventDefault(),i.stopPropagation(),g(i,0,1);break}},u},[o,l,f,v,T])}}const ee=new WeakMap;function J(n,t){let e=ee.get(n);if(!e)throw new Error("Unknown slider state");return`${e.id}-${t}`}function Ne(n,t,e){let{labelProps:c,fieldProps:o}=be(n),l=n.orientation==="vertical";var f;ee.set(t,{id:(f=c.id)!==null&&f!==void 0?f:o.id,"aria-describedby":n["aria-describedby"],"aria-details":n["aria-details"]});let{direction:v}=ue(),{addGlobalListener:T,removeGlobalListener:k}=_();const u=p.useRef(null),h=v==="rtl",g=p.useRef(null),{moveProps:i}=pe({onMoveStart(){g.current=null},onMove({deltaX:r,deltaY:m}){let{height:b,width:$}=e.current.getBoundingClientRect(),y=l?b:$;g.current==null&&(g.current=t.getThumbPercent(u.current)*y);let M=l?m:r;if((l||h)&&(M=-M),g.current+=M,u.current!=null&&e.current){const E=Z(g.current/y,0,1);t.setThumbPercent(u.current,E)}},onMoveEnd(){u.current!=null&&(t.setThumbDragging(u.current,!1),u.current=null)}});let x=p.useRef(void 0),s=(r,m,b,$)=>{if(e.current&&!n.isDisabled&&t.values.every((y,M)=>!t.isThumbDragging(M))){let{height:y,width:M,top:E,left:L}=e.current.getBoundingClientRect(),H=l?y:M,K=((l?$:b)-(l?E:L))/H;(v==="rtl"||l)&&(K=1-K);let I=t.getPercentValue(K),R,d=t.values.findIndex(S=>I-S<0);if(d===0)R=d;else if(d===-1)R=t.values.length-1;else{let S=t.values[d-1],F=t.values[d];Math.abs(S-I)<Math.abs(F-I)?R=d-1:R=d}R>=0&&t.isThumbEditable(R)?(r.preventDefault(),u.current=R,t.setFocusedThumb(R),x.current=m,t.setThumbDragging(u.current,!0),t.setThumbValue(R,I),T(window,"mouseup",w,!1),T(window,"touchend",w,!1),T(window,"pointerup",w,!1)):u.current=null}},w=r=>{var m,b;((b=r.pointerId)!==null&&b!==void 0?b:(m=r.changedTouches)===null||m===void 0?void 0:m[0].identifier)===x.current&&(u.current!=null&&(t.setThumbDragging(u.current,!1),u.current=null),k(window,"mouseup",w,!1),k(window,"touchend",w,!1),k(window,"pointerup",w,!1))};return"htmlFor"in c&&c.htmlFor&&(delete c.htmlFor,c.onClick=()=>{var r;(r=document.getElementById(J(t,0)))===null||r===void 0||r.focus(),Ke("keyboard")}),{labelProps:c,groupProps:{role:"group",...o},trackProps:A({onMouseDown(r){r.button!==0||r.altKey||r.ctrlKey||r.metaKey||s(r,void 0,r.clientX,r.clientY)},onPointerDown(r){r.pointerType==="mouse"&&(r.button!==0||r.altKey||r.ctrlKey||r.metaKey)||s(r,r.pointerId,r.clientX,r.clientY)},onTouchStart(r){s(r,r.changedTouches[0].identifier,r.changedTouches[0].clientX,r.changedTouches[0].clientY)},style:{position:"relative",touchAction:"none"}},i),outputProps:{htmlFor:t.values.map((r,m)=>J(t,m)).join(" "),"aria-live":"off"}}}function Xe(n,t){let{index:e=0,isRequired:c,validationState:o,isInvalid:l,trackRef:f,inputRef:v,orientation:T=t.orientation,name:k}=n,u=n.isDisabled||t.isDisabled,h=T==="vertical",{direction:g}=ue(),{addGlobalListener:i,removeGlobalListener:x}=_(),s=ee.get(t);var w;const{labelProps:r,fieldProps:m}=be({...n,id:J(t,e),"aria-labelledby":`${s.id} ${(w=n["aria-labelledby"])!==null&&w!==void 0?w:""}`.trim()}),b=t.values[e],$=p.useCallback(()=>{v.current&&Re(v.current)},[v]),y=t.focusedThumb===e;p.useEffect(()=>{y&&$()},[y,$]);let M=g==="rtl",E=p.useRef(null),{keyboardProps:L}=Se({onKeyDown(d){let{getThumbMaxValue:S,getThumbMinValue:F,decrementThumb:X,incrementThumb:G,setThumbValue:a,setThumbDragging:P,pageSize:V}=t;if(!/^(PageUp|PageDown|Home|End)$/.test(d.key)){d.continuePropagation();return}switch(d.preventDefault(),P(e,!0),d.key){case"PageUp":G(e,V);break;case"PageDown":X(e,V);break;case"Home":a(e,F(e));break;case"End":a(e,S(e));break}P(e,!1)}}),{moveProps:H}=pe({onMoveStart(){E.current=null,t.setThumbDragging(e,!0)},onMove({deltaX:d,deltaY:S,pointerType:F,shiftKey:X}){const{getThumbPercent:G,setThumbPercent:a,decrementThumb:P,incrementThumb:V,step:U,pageSize:B}=t;let{width:ge,height:ve}=f.current.getBoundingClientRect(),re=h?ve:ge;if(E.current==null&&(E.current=G(e)*re),F==="keyboard")d>0&&M||d<0&&!M||S>0?P(e,X?B:U):V(e,X?B:U);else{let j=h?S:d;(h||M)&&(j=-j),E.current+=j,a(e,Z(E.current/re,0,1))}},onMoveEnd(){t.setThumbDragging(e,!1)}});t.setThumbEditable(e,!u);const{focusableProps:z}=Fe(A(n,{onFocus:()=>t.setFocusedThumb(e),onBlur:()=>t.setFocusedThumb(void 0)}),v);let N=p.useRef(void 0),Y=d=>{$(),N.current=d,t.setThumbDragging(e,!0),i(window,"mouseup",K,!1),i(window,"touchend",K,!1),i(window,"pointerup",K,!1)},K=d=>{var S,F;((F=d.pointerId)!==null&&F!==void 0?F:(S=d.changedTouches)===null||S===void 0?void 0:S[0].identifier)===N.current&&($(),t.setThumbDragging(e,!1),x(window,"mouseup",K,!1),x(window,"touchend",K,!1),x(window,"pointerup",K,!1))},I=t.getThumbPercent(e);(h||g==="rtl")&&(I=1-I);let R=u?{}:A(L,H,{onMouseDown:d=>{d.button!==0||d.altKey||d.ctrlKey||d.metaKey||Y()},onPointerDown:d=>{d.button!==0||d.altKey||d.ctrlKey||d.metaKey||Y(d.pointerId)},onTouchStart:d=>{Y(d.changedTouches[0].identifier)}});return Ce(v,b,d=>{t.setThumbValue(e,d)}),{inputProps:A(z,m,{type:"range",tabIndex:u?void 0:0,min:t.getThumbMinValue(e),max:t.getThumbMaxValue(e),step:t.step,value:b,name:k,disabled:u,"aria-orientation":T,"aria-valuetext":t.getThumbValueLabel(e),"aria-required":c||void 0,"aria-invalid":l||o==="invalid"||void 0,"aria-errormessage":n["aria-errormessage"],"aria-describedby":[s["aria-describedby"],n["aria-describedby"]].filter(Boolean).join(" "),"aria-details":[s["aria-details"],n["aria-details"]].filter(Boolean).join(" "),onChange:d=>{t.setThumbValue(e,parseFloat(d.target.value))}}),thumbProps:{...R,style:{position:"absolute",[h?"top":"left"]:`${I*100}%`,transform:"translate(-50%, -50%)",touchAction:"none"}},labelProps:r,isDragging:t.isThumbDragging(e),isDisabled:u,isFocused:y}}const Ae=0,He=100,Ye=1;function Ue(n){const{isDisabled:t=!1,minValue:e=Ae,maxValue:c=He,numberFormatter:o,step:l=Ye,orientation:f="horizontal"}=n;let v=p.useMemo(()=>{let a=(c-e)/10;return a=q(a,0,a+l,l),Math.max(a,l)},[l,c,e]),T=p.useCallback(a=>a==null?void 0:a.map((P,V)=>{let U=V===0?e:P[V-1],B=V===a.length-1?c:P[V+1];return q(P,U,B,l)}),[e,c,l]),k=p.useMemo(()=>T(ie(n.value)),[n.value]),u=p.useMemo(()=>{var a;return T((a=ie(n.defaultValue))!==null&&a!==void 0?a:[e])},[n.defaultValue,e]),h=le(n.value,n.defaultValue,n.onChange),g=le(n.value,n.defaultValue,n.onChangeEnd);const[i,x]=Ve(k,u,h),[s,w]=p.useState(new Array(i.length).fill(!1)),r=p.useRef(new Array(i.length).fill(!0)),[m,b]=p.useState(void 0),$=p.useRef(i),y=p.useRef(s);let M=a=>{$.current=a,x(a)},E=a=>{y.current=a,w(a)};function L(a){return(a-e)/(c-e)}function H(a){return a===0?e:i[a-1]}function z(a){return a===i.length-1?c:i[a+1]}function N(a){return r.current[a]}function Y(a,P){r.current[a]=P}function K(a,P){if(t||!N(a))return;const V=H(a),U=z(a);P=q(P,V,U,l);let B=oe($.current,a,P);M(B)}function I(a,P){if(t||!N(a))return;P&&($.current=i);const V=y.current[a];y.current=oe(y.current,a,P),E(y.current),g&&V&&!y.current.some(Boolean)&&g($.current)}function R(a){return o.format(a)}function d(a,P){K(a,F(P))}function S(a){return Math.round((a-e)/l)*l+e}function F(a){const P=a*(c-e)+e;return Z(S(P),e,c)}function X(a,P=1){let V=Math.max(P,l);K(a,q(i[a]+V,e,c,l))}function G(a,P=1){let V=Math.max(P,l);K(a,q(i[a]-V,e,c,l))}return{values:i,getThumbValue:a=>i[a],setThumbValue:K,setThumbPercent:d,isThumbDragging:a=>s[a],setThumbDragging:I,focusedThumb:m,setFocusedThumb:b,getThumbPercent:a=>L(i[a]),getValuePercent:L,getThumbValueLabel:a=>R(i[a]),getFormattedValue:R,getThumbMinValue:H,getThumbMaxValue:z,getPercentValue:F,isThumbEditable:N,setThumbEditable:Y,incrementThumb:X,decrementThumb:G,step:l,pageSize:v,orientation:f,isDisabled:t}}function oe(n,t,e){return n[t]===e?n:[...n.slice(0,t),e,...n.slice(t+1)]}function ie(n){if(n!=null)return Array.isArray(n)?n:[n]}function le(n,t,e){return c=>{typeof n=="number"||typeof t=="number"?e==null||e(c[0]):e==null||e(c)}}const Be=p.createContext(null),W=p.createContext(null),te=p.createContext(null),he=p.createContext(null);function ze(n,t){[n,t]=Q(n,t,Be);let e=p.useRef(null),c=Me(n.formatOptions),o=Ue({...n,numberFormatter:c}),[l,f]=de(),{groupProps:v,trackProps:T,labelProps:k,outputProps:u}=Ne({...n,label:f},o,e),h=O({...n,values:{orientation:o.orientation,isDisabled:o.isDisabled,state:o},defaultClassName:"react-aria-Slider"}),g=fe(n);return delete g.id,D.createElement(se,{values:[[W,o],[te,{...T,ref:e}],[he,u],[ce,{...k,ref:l}]]},D.createElement("div",{...g,...v,...h,ref:t,slot:n.slot||void 0,"data-orientation":o.orientation,"data-disabled":o.isDisabled||void 0}))}const Ge=p.forwardRef(ze);function qe(n,t){[n,t]=Q(n,t,he);let{children:e,style:c,className:o,...l}=n,f=p.useContext(W),v=O({className:o,style:c,children:e,defaultChildren:f.getThumbValueLabel(0),defaultClassName:"react-aria-SliderOutput",values:{orientation:f.orientation,isDisabled:f.isDisabled,state:f}});return D.createElement("output",{...l,...v,ref:t,"data-orientation":f.orientation||void 0,"data-disabled":f.isDisabled||void 0})}const Oe=p.forwardRef(qe);function We(n,t){[n,t]=Q(n,t,te);let e=p.useContext(W),{onHoverStart:c,onHoverEnd:o,onHoverChange:l,...f}=n,{hoverProps:v,isHovered:T}=me({onHoverStart:c,onHoverEnd:o,onHoverChange:l}),k=O({...n,defaultClassName:"react-aria-SliderTrack",values:{orientation:e.orientation,isDisabled:e.isDisabled,isHovered:T,state:e}});return D.createElement("div",{...A(f,v),...k,ref:t,"data-hovered":T||void 0,"data-orientation":e.orientation||void 0,"data-disabled":e.isDisabled||void 0})}const je=p.forwardRef(We);function Je(n,t){let e=p.useContext(W),{ref:c}=xe(te),{index:o=0}=n,l=p.useRef(null),[f,v]=de(),{thumbProps:T,inputProps:k,labelProps:u,isDragging:h,isFocused:g,isDisabled:i}=Xe({...n,index:o,trackRef:c,inputRef:l,label:v},e),{focusProps:x,isFocusVisible:s}=Ie(),{hoverProps:w,isHovered:r}=me(n),m=O({...n,defaultClassName:"react-aria-SliderThumb",values:{state:e,isHovered:r,isDragging:h,isFocused:g,isFocusVisible:s,isDisabled:i}}),b=fe(n);return delete b.id,D.createElement("div",{...A(b,T,w),...m,ref:t,style:{...T.style,...m.style},"data-hovered":r||void 0,"data-dragging":h||void 0,"data-focused":g||void 0,"data-focus-visible":s||void 0,"data-disabled":i||void 0},D.createElement(Le,null,D.createElement("input",{ref:l,...A(k,x)})),D.createElement(se,{values:[[ce,{...u,ref:f}]]},m.children))}const Qe=p.forwardRef(Je),Ze="flow--slider",_e="flow--slider--text",et="flow--slider--value",tt="flow--slider--track",rt="flow--slider--fill",nt="flow--slider--initial-marker",at="flow--slider--thumb",ot="flow--slider--increment",it="flow--slider--decrement",lt="flow--slider--disabled",C={slider:Ze,text:_e,value:et,track:tt,fill:rt,initialMarker:nt,thumb:at,increment:ot,decrement:it,disabled:lt},ut={"de-DE":{"slider.decrement":"Wert verkleinern","slider.increment":"Wert erhöhen"},"en-EN":{"slider.decrement":"Decrement value","slider.increment":"Increment value"}},dt=$e("Slider",n=>{const{className:t,children:e,name:c,isDisabled:o,defaultValue:l,showInitialMarker:f,showButtonControls:v,showValue:T,...k}=n,u=Te(C.slider,o&&C.disabled,t),h=De(ut),g={Label:{unstyled:!0}};return D.createElement(Ge,{className:u,isDisabled:o,defaultValue:l,...k},T&&D.createElement("div",{className:C.text},D.createElement(Oe,{className:C.value}),D.createElement(we,{props:g},e)),D.createElement(je,{className:C.track},({state:i})=>D.createElement(D.Fragment,null,v&&D.createElement(D.Fragment,null,D.createElement(ne,{onPress:()=>i.decrementThumb(0),"aria-label":h.format("slider.decrement"),size:"s",variant:"plain",className:C.decrement,isDisabled:o},D.createElement(Pe,null)),D.createElement(ne,{onPress:()=>i.incrementThumb(0),"aria-label":h.format("slider.increment"),size:"s",variant:"plain",className:C.increment,isDisabled:o},D.createElement(ye,null))),D.createElement("div",{className:C.fill,style:{width:i.getThumbPercent(0)*100+"%"}}),f&&l&&typeof l=="number"&&D.createElement("div",{className:C.initialMarker,style:{left:`calc(${i.getValuePercent(l)*100}% - 2px)`}}),D.createElement(Qe,{name:c,className:C.thumb}))))});dt.__docgenInfo={description:"",methods:[],displayName:"Slider",props:{tunnelId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"@internal"},wrapWith:{required:!1,tsType:{name:"ReactElement"},description:""},showInitialMarker:{required:!1,tsType:{name:"boolean"},description:""},showButtonControls:{required:!1,tsType:{name:"boolean"},description:""},showValue:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","Pick"]};export{dt as S};
