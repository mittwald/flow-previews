import{r as o,R as s}from"./index-uCp2LrAq.js";import{c as M}from"./clsx-B-dksMZM.js";import{u as E,O as h,A as I}from"./Action-BYLt5q-x.js";import{a as L,g as O,i as p,j as y,b as C,f as T,h as _}from"./utils-DZgOXw50.js";import{b as z,c as A,d as B,e as F,f as u,g as U,h as K,i as V}from"./Dialog-CDIqkoPK.js";import{$ as w,b as x}from"./index-CFQDndEx.js";import{$ as R}from"./filterDOMProps-CeZl_uWj.js";import{$ as W}from"./OverlayArrow-CvHeNTZs.js";import{P as j}from"./flowComponent-CNW7-kvN.js";let d=typeof document<"u"&&window.visualViewport;function q(){let t=w(),[e,r]=o.useState(()=>t?{width:0,height:0}:v());return o.useEffect(()=>{let a=()=>{r(n=>{let i=v();return i.width===n.width&&i.height===n.height?n:i})};return d?d.addEventListener("resize",a):window.addEventListener("resize",a),()=>{d?d.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function v(){return{width:d&&(d==null?void 0:d.width)||window.innerWidth,height:d&&(d==null?void 0:d.height)||window.innerHeight}}function H(t,e,r){let{overlayProps:a,underlayProps:n}=z({...t,isOpen:e.isOpen,onClose:e.close},r);return A({isDisabled:!e.isOpen}),B(),o.useEffect(()=>{if(e.isOpen)return F([r.current])},[e.isOpen,r]),{modalProps:x(a),underlayProps:n}}const k=o.createContext(null),b=o.createContext(null);function G(t,e){if(o.useContext(b))return s.createElement(g,{...t,modalRef:e},t.children);let{isDismissable:a,isKeyboardDismissDisabled:n,isOpen:i,defaultOpen:f,onOpenChange:l,children:c,isEntering:$,isExiting:m,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:S,...N}=t;return s.createElement(P,{isDismissable:a,isKeyboardDismissDisabled:n,isOpen:i,defaultOpen:f,onOpenChange:l,isEntering:$,isExiting:m,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:S},s.createElement(g,{...N,modalRef:e},c))}const J=o.forwardRef(G);function Q(t,e){[t,e]=L(t,e,k);let r=o.useContext(u),a=W(t),n=t.isOpen!=null||t.defaultOpen!=null||!r?a:r,i=O(e),f=o.useRef(null),l=p(i,n.isOpen),c=p(f,n.isOpen),$=l||c||t.isExiting||!1,m=w();return!n.isOpen&&!$||m?null:s.createElement(X,{...t,state:n,isExiting:$,overlayRef:i,modalRef:f})}const P=o.forwardRef(Q);function X({UNSTABLE_portalContainer:t,...e}){let r=e.modalRef,{state:a}=e,{modalProps:n,underlayProps:i}=H(e,a,r),f=y(e.overlayRef)||e.isEntering||!1,l=C({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:f,isExiting:e.isExiting,state:a}}),c=q(),$={...l.style,"--visual-viewport-height":c.height+"px"};return s.createElement(U,{isExiting:e.isExiting,portalContainer:t},s.createElement("div",{...x(R(e),i),...l,style:$,ref:e.overlayRef,"data-entering":f||void 0,"data-exiting":e.isExiting||void 0},s.createElement(T,{values:[[b,{modalProps:n,modalRef:r,isExiting:e.isExiting,isDismissable:e.isDismissable}],[u,a]]},l.children)))}function g(t){let{modalProps:e,modalRef:r,isExiting:a,isDismissable:n}=o.useContext(b),i=o.useContext(u),f=o.useMemo(()=>_(t.modalRef,r),[t.modalRef,r]),l=O(f),c=y(l),$=C({...t,defaultClassName:"react-aria-Modal",values:{isEntering:c,isExiting:a,state:i}});return s.createElement("div",{...x(R(t),e),...$,ref:l,"data-entering":c||void 0,"data-exiting":a||void 0},n&&s.createElement(K,{onDismiss:i.close}),$.children)}const Y="flow--overlay",Z={overlay:Y,"overlay-fade":"flow--overlay--overlay-fade"},ee=t=>{const{controller:e,children:r,className:a}=t,n=E({reuseControllerFromContext:!0}),i=e??n,f=i.useIsOpen(),l=M(Z.overlay,a);return s.createElement(P,{className:l,isDismissable:!0,isOpen:f,onOpenChange:c=>i.setOpen(c)},s.createElement(J,null,s.createElement(V,null,s.createElement(h,{value:i},r))))};ee.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const te=t=>{const e=E(),r={Button:{render:(a,n)=>s.createElement(I,{openOverlay:e},s.createElement(a,{...n}))}};return s.createElement(h,{value:e},s.createElement(j,{props:r},t.children))};te.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger"};export{te as O,ee as a};
