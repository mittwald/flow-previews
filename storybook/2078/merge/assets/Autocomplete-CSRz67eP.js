import{r as o,R as De,j as x}from"./iframe-DW8JgK09.js";import{f as Te,P as we,R as Be}from"./flowComponent-DVStQUuA.js";import{u as Ne}from"./useOverlayController-I2I_tOTO.js";import{b as Ve}from"./Option-N2Y5Tdtt.js";import{T as Ke}from"./Text-DqrSOA-D.js";import{e as je}from"./ReactAriaControlledValueFix-BQTQsIsB.js";import{$ as j}from"./useLocalizedStringFormatter-Dqx84O-E.js";import{$ as Ue}from"./useFilter-R-xLyJ1-.js";import{c as Oe}from"./useFocusRing-GKfEZ5du.js";import{i as He}from"./OverlayArrow-Cbixw9Yo.js";import{b as Me,a as ze}from"./RSPContexts-DSsYPi0N.js";import{b as We,c as qe,g as Ge,d as Je}from"./utils-qQbsMKok.js";import{f as Ze,d as L,a as Qe,$ as U}from"./index-SxHndKnJ.js";import{x as Xe,o as Ye,B as _e,b as w,a as et}from"./useFocus-BeoGO6Gw.js";import{$ as tt}from"./Label-CI_LuAln.js";import{$ as ot}from"./useEvent-DPuiGjqT.js";import{j as B,k as rt,l as at,m as N,n as V,o as lt,p as nt}from"./SelectionManager-BpH8C0of.js";import{$ as ct}from"./useControlledState-BE2AOUIF.js";var O={};O={collectionLabel:"مقترحات"};var H={};H={collectionLabel:"Предложения"};var M={};M={collectionLabel:"Návrhy"};var z={};z={collectionLabel:"Forslag"};var W={};W={collectionLabel:"Empfehlungen"};var q={};q={collectionLabel:"Προτάσεις"};var G={};G={collectionLabel:"Suggestions"};var J={};J={collectionLabel:"Sugerencias"};var Z={};Z={collectionLabel:"Soovitused"};var Q={};Q={collectionLabel:"Ehdotukset"};var X={};X={collectionLabel:"Suggestions"};var Y={};Y={collectionLabel:"הצעות"};var _={};_={collectionLabel:"Prijedlozi"};var ee={};ee={collectionLabel:"Javaslatok"};var te={};te={collectionLabel:"Suggerimenti"};var oe={};oe={collectionLabel:"候補"};var re={};re={collectionLabel:"제안"};var ae={};ae={collectionLabel:"Pasiūlymai"};var le={};le={collectionLabel:"Ieteikumi"};var ne={};ne={collectionLabel:"Forslag"};var ce={};ce={collectionLabel:"Suggesties"};var ue={};ue={collectionLabel:"Sugestie"};var se={};se={collectionLabel:"Sugestões"};var ie={};ie={collectionLabel:"Sugestões"};var fe={};fe={collectionLabel:"Sugestii"};var de={};de={collectionLabel:"Предложения"};var pe={};pe={collectionLabel:"Návrhy"};var $e={};$e={collectionLabel:"Predlogi"};var be={};be={collectionLabel:"Predlozi"};var ve={};ve={collectionLabel:"Förslag"};var me={};me={collectionLabel:"Öneriler"};var xe={};xe={collectionLabel:"Пропозиції"};var ge={};ge={collectionLabel:"建议"};var Ee={};Ee={collectionLabel:"建議"};var Fe={};Fe={"ar-AE":O,"bg-BG":H,"cs-CZ":M,"da-DK":z,"de-DE":W,"el-GR":q,"en-US":G,"es-ES":J,"et-EE":Z,"fi-FI":Q,"fr-FR":X,"he-IL":Y,"hr-HR":_,"hu-HU":ee,"it-IT":te,"ja-JP":oe,"ko-KR":re,"lt-LT":ae,"lv-LV":le,"nb-NO":ne,"nl-NL":ce,"pl-PL":ue,"pt-BR":se,"pt-PT":ie,"ro-RO":fe,"ru-RU":de,"sk-SK":pe,"sl-SI":$e,"sr-SP":be,"sv-SE":ve,"tr-TR":me,"uk-UA":xe,"zh-CN":ge,"zh-TW":Ee};function ut(r){return r&&r.__esModule?r.default:r}function st(r,n){let{inputRef:s,collectionRef:a,filter:i,disableAutoFocusFirst:$=!1,disableVirtualFocus:b=!1}=r,u=Ze(),d=o.useRef(void 0),f=o.useRef(!1),l=o.useRef(null),F=o.useRef(null),C=Xe()==="virtual"&&(Ye()||_e()),[g,v]=o.useState(!C&&!b),[h,S]=o.useState(!1);o.useEffect(()=>()=>clearTimeout(d.current),[]);let y=L(e=>{!e.isTrusted&&g&&s.current&&w(et(s.current))!==s.current&&s.current.focus();let t=e.target;e.isTrusted||!t||l.current===t.id||(clearTimeout(d.current),t!==a.current?f.current?(l.current=t.id,d.current=setTimeout(()=>{n.setFocusedNodeId(t.id)},500)):(l.current=t.id,n.setFocusedNodeId(t.id)):l.current&&!document.getElementById(l.current)&&(l.current=null,n.setFocusedNodeId(null)),f.current=!1)}),k=o.useCallback(e=>{if(e!=null){var t;(t=F.current)===null||t===void 0||t.removeEventListener("focusin",y),F.current=e,e.addEventListener("focusin",y),e.getAttribute("tabindex")!=null&&v(!1),S(!0)}else{var c;(c=F.current)===null||c===void 0||c.removeEventListener("focusin",y),S(!1)}},[y]),he=We(o.useMemo(()=>Qe(a,k),[a,k])),ye=L(()=>{var e;f.current=!0,(e=a.current)===null||e===void 0||e.dispatchEvent(new CustomEvent(B,{cancelable:!0,bubbles:!0,detail:{focusStrategy:"first"}}))}),D=L(e=>{var t;rt(w()),l.current=null,n.setFocusedNodeId(null);let c=new CustomEvent(at,{cancelable:!0,bubbles:!0,detail:{clearFocusKey:e}});clearTimeout(d.current),f.current=!1,(t=a.current)===null||t===void 0||t.dispatchEvent(c)}),E=o.useRef("");ot(s,"input",e=>{let{inputType:t}=e;E.current=t});let Le=e=>{E.current==="insertText"&&!$?ye():E.current&&(E.current.includes("insert")||E.current.includes("delete")||E.current.includes("history"))&&(D(!0),nt(document)===s.current&&V(s.current,null)),n.setInputValue(e)},T=o.useRef(null),Ce=e=>{if(T.current=e.target,e.nativeEvent.isComposing)return;let t=l.current;switch(e.key){case"a":if(lt(e))return;break;case"Escape":if(e.isDefaultPrevented())return;break;case" ":return;case"Tab":"continuePropagation"in e&&e.continuePropagation();return;case"Home":case"End":case"PageDown":case"PageUp":case"ArrowUp":case"ArrowDown":{var c;if((e.key==="Home"||e.key==="End")&&t==null&&e.shiftKey)return;e.preventDefault();let p=new CustomEvent(B,{cancelable:!0,bubbles:!0});(c=a.current)===null||c===void 0||c.dispatchEvent(p);break}}e.isPropagationStopped()||e.stopPropagation();let m=!0;if(a.current!==null){var A;if(t==null)m=((A=a.current)===null||A===void 0?void 0:A.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1;else{let p=document.getElementById(t);p&&(m=(p==null?void 0:p.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1)}}if(m)switch(e.key){case"ArrowLeft":case"ArrowRight":D();break;case"Enter":if(t!=null){let p=document.getElementById(t);p==null||p.click()}break}else e.preventDefault()},I=L(e=>{if(e.target===T.current){var t;e.stopImmediatePropagation();let c=l.current;if(c==null)(t=a.current)===null||t===void 0||t.dispatchEvent(new KeyboardEvent(e.type,e));else{let m=document.getElementById(c);m==null||m.dispatchEvent(new KeyboardEvent(e.type,e))}}});o.useEffect(()=>(document.addEventListener("keyup",I,!0),()=>{document.removeEventListener("keyup",I,!0)}),[I]);let Ie=j(ut(Fe),"@react-aria/autocomplete"),Re=tt({id:u,"aria-label":Ie.format("collectionLabel")}),Pe=o.useCallback((e,t)=>i?i(e,n.inputValue,t):!0,[n.inputValue,i]),Ae=e=>{if(!e.isTrusted)return;let t=l.current?document.getElementById(l.current):null;t&&N(t,e.relatedTarget)},Se=e=>{if(!e.isTrusted)return;if(l.current?document.getElementById(l.current):null){let c=e.target;queueMicrotask(()=>{N(c,a.current),V(a.current,c)})}},R={value:n.inputValue,onChange:Le};var P;let ke={onKeyDown:Ce,"aria-activedescendant":(P=n.focusedNodeId)!==null&&P!==void 0?P:void 0,onBlur:Ae,onFocus:Se};return h&&(R={...R,...g&&ke,enterKeyHint:"go","aria-controls":u,"aria-autocomplete":"list",autoCorrect:"off",spellCheck:"false",autoComplete:"off"}),{inputProps:R,collectionProps:U(Re,{shouldUseVirtualFocus:g,disallowTypeAhead:g}),collectionRef:he,filter:i!=null?Pe:void 0}}function it(r){let{onInputChange:n,inputValue:s,defaultInputValue:a=""}=r,i=f=>{n&&n(f)},[$,b]=o.useState(null),[u,d]=ct(s,a,i);return{inputValue:u,setInputValue:d,focusedNodeId:$,setFocusedNodeId:b}}const ft=o.createContext(null),dt=o.createContext(null);function pt(r){let n=qe(ft,r.slot);r=U(n,r);let{filter:s,disableAutoFocusFirst:a}=r,i=it(r),$=o.useRef(null),b=o.useRef(null),{inputProps:u,collectionProps:d,collectionRef:f,filter:l}=st({...Ge(r),filter:s,disableAutoFocusFirst:a,inputRef:$,collectionRef:b},i);return De.createElement(Je,{values:[[dt,i],[Me,{...u,ref:$}],[ze,{...d,filter:l,ref:f}]]},r.children)}const $t={"de-DE":{"autocomplete.empty":"Keine passenden Einträge"},"en-US":{"autocomplete.empty":"No matching entries"}},bt="flow--autocomplete--popover",vt="flow--autocomplete--empty",K={popover:bt,empty:vt},mt=Te("Autocomplete",r=>{const{children:n,...s}=r,{contains:a}=Ue({sensitivity:"base"}),i=j($t),$=o.useRef(null),b=o.useRef(null),u=Ne("Popover",{reuseControllerFromContext:!1}),d=Oe({onBlurWithin:u.close}),f={onKeyDown:v=>{v.key==="Enter"&&u.isOpen&&v.preventDefault()},ref:b},l=()=>x.jsx(Ke,{className:K.empty,children:i.format("autocomplete.empty")}),F={SearchField:f,TextField:f,Option:{tunnelId:"options"},Popover:{className:K.popover}},C=v=>{v?u.isOpen||u.open():u.close()},g=v=>{const h=b.current;h&&je(h,String(v)),u.close()};return x.jsx(we,{props:F,children:x.jsx("div",{...d.focusWithinProps,ref:$,children:x.jsx(He,{getContainer:()=>$.current,children:x.jsxs(pt,{onInputChange:C,filter:a,disableAutoFocusFirst:!0,...s,children:[n,x.jsx(Ve,{onAction:g,triggerRef:b,controller:u,renderEmptyState:l,isNonModal:!0,placement:"bottom start",children:x.jsx(Be,{id:"options"})})]})})})})});mt.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Autocomplete"};export{mt as A};
