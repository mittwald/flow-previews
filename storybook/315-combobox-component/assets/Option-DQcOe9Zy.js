import{r as p,R as n}from"./index-uCp2LrAq.js";import{P as Z}from"./PopoverTrigger-DfcoxKbn.js";import{c as K}from"./clsx-B-dksMZM.js";import{f as ee}from"./flowComponent-Cgwf_8Pz.js";import{b as oe,c as te,d as re,a as ae,e as W}from"./Collection-RpYJwiSj.js";import{a as ie,k as le,b as N,f as j,d as ne,h as de,g as q}from"./utils-VMHz66w6.js";import{$ as T,a as se,b as ce}from"./useDragAndDrop-Ddpx_AkE.js";import{$ as pe,a as ue,b as fe}from"./Header-CyVwCXR-.js";import{$ as $e,a as be}from"./Separator-BfUCqNhO.js";import{a as ve}from"./Text-CV99Jc8q.js";import{a as G,b as I,e as L,f as ge}from"./index-CFQDndEx.js";import{$ as M}from"./filterDOMProps-CeZl_uWj.js";import{$ as me}from"./useSingleSelectListState-Cl5wlzc0.js";import{$ as he}from"./useLocalizedStringFormatter-CHReNXSI.js";import{c as xe,d as Pe,e as ye}from"./SelectionManager-1UU5Js-l.js";import{$ as De,l as Se,h as we,a as J,j as z,b as ke}from"./useFocusable-BnMUMntI.js";import{$ as Ee}from"./useLabel-D9TuMkUI.js";import{b as Fe}from"./usePress-BwUp6-ib.js";import{a as _e}from"./FocusScope-CWd9kKtL.js";const U=new WeakMap;function Ie(e){return typeof e=="string"?e.replace(/\s*/g,""):""+e}function He(e,o){let i=U.get(e);if(!i)throw new Error("Unknown list");return`${i.id}-option-${Ie(o)}`}function Be(e,o,i){let t=M(e,{labelable:!0}),r=e.selectionBehavior||"toggle",l=e.linkBehavior||(r==="replace"?"action":"override");r==="toggle"&&l==="action"&&(l="override");let{listProps:a}=pe({...e,ref:i,selectionManager:o.selectionManager,collection:o.collection,disabledKeys:o.disabledKeys,linkBehavior:l}),{focusWithinProps:$}=De({onFocusWithin:e.onFocus,onBlurWithin:e.onBlur,onFocusWithinChange:e.onFocusChange}),d=G(e.id);U.set(o,{id:d,shouldUseVirtualFocus:e.shouldUseVirtualFocus,shouldSelectOnPressUp:e.shouldSelectOnPressUp,shouldFocusOnHover:e.shouldFocusOnHover,isVirtualized:e.isVirtualized,onAction:e.onAction,linkBehavior:l});let{labelProps:f,fieldProps:s}=Ee({...e,id:d,labelElementType:"span"});return{labelProps:f,listBoxProps:I(t,$,o.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...I(s,a)})}}function Ce(e,o,i){var t,r;let{key:l}=e,a=U.get(o);var $;let d=($=e.isDisabled)!==null&&$!==void 0?$:o.selectionManager.isDisabled(l);var f;let s=(f=e.isSelected)!==null&&f!==void 0?f:o.selectionManager.isSelected(l);var h;let b=(h=e.shouldSelectOnPressUp)!==null&&h!==void 0?h:a==null?void 0:a.shouldSelectOnPressUp;var v;let u=(v=e.shouldFocusOnHover)!==null&&v!==void 0?v:a==null?void 0:a.shouldFocusOnHover;var P;let w=(P=e.shouldUseVirtualFocus)!==null&&P!==void 0?P:a==null?void 0:a.shouldUseVirtualFocus;var y;let S=(y=e.isVirtualized)!==null&&y!==void 0?y:a==null?void 0:a.isVirtualized,D=L(),x=L(),g={role:"option","aria-disabled":d||void 0,"aria-selected":o.selectionManager.selectionMode!=="none"?s:void 0};Se()&&we()||(g["aria-label"]=e["aria-label"],g["aria-labelledby"]=D,g["aria-describedby"]=x);let c=o.collection.getItem(l);if(S){let k=Number(c==null?void 0:c.index);g["aria-posinset"]=Number.isNaN(k)?void 0:k+1,g["aria-setsize"]=ue(o.collection)}let E=a!=null&&a.onAction?()=>{var k;return a==null||(k=a.onAction)===null||k===void 0?void 0:k.call(a,l)}:void 0,{itemProps:H,isPressed:V,isFocused:F,hasAction:B,allowsSelection:C}=xe({selectionManager:o.selectionManager,key:l,ref:i,shouldSelectOnPressUp:b,allowsDifferentPressOrigin:b&&u,isVirtualized:S,shouldUseVirtualFocus:w,isDisabled:d,onAction:E||!(c==null||(t=c.props)===null||t===void 0)&&t.onAction?ge(c==null||(r=c.props)===null||r===void 0?void 0:r.onAction,E):void 0,linkBehavior:a==null?void 0:a.linkBehavior}),{hoverProps:A}=J({isDisabled:d||!u,onHoverStart(){z()||(o.selectionManager.setFocused(!0),o.selectionManager.setFocusedKey(l))}}),_=M(c==null?void 0:c.props);delete _.id;let m=Fe(c==null?void 0:c.props);return{optionProps:{...g,...I(_,H,A,m),id:He(o,l)},labelProps:{id:D},descriptionProps:{id:x},isFocused:F,isFocusVisible:F&&z(),isSelected:s,isDisabled:d,isPressed:V,allowsSelection:C,hasAction:B}}function Me(e){let{heading:o,"aria-label":i}=e,t=G();return{itemProps:{role:"presentation"},headingProps:o?{id:t,role:"presentation"}:{},groupProps:{role:"group","aria-label":i,"aria-labelledby":o?t:void 0}}}const Q=p.createContext(null),O=p.createContext(null);function Oe(e,o){[e,o]=ie(e,o,Q);let i=p.useContext(le),t=p.useContext(O);return p.useContext(te)?n.createElement(re,e):t?i?null:n.createElement(X,{state:t,props:e,listBoxRef:o}):n.createElement(Ve,{props:e,listBoxRef:o})}function Ve({props:e,listBoxRef:o}){let{portal:i,collection:t}=ae(e);e={...e,collection:t,children:null,items:null};let r=me(e);return n.createElement(n.Fragment,null,i,n.createElement(X,{state:r,props:e,listBoxRef:o}))}const Ae=p.forwardRef(Oe);function X({state:e,props:o,listBoxRef:i}){let{dragAndDropHooks:t,layout:r="stack",orientation:l="vertical"}=o,{collection:a,selectionManager:$}=e,d=!!(t!=null&&t.useDraggableCollectionState),f=!!(t!=null&&t.useDroppableCollectionState),{direction:s}=he(),{disabledBehavior:h,disabledKeys:b}=$,v=Pe({usage:"search",sensitivity:"base"}),u=p.useMemo(()=>o.keyboardDelegate||new ye({collection:a,collator:v,ref:i,disabledKeys:b,disabledBehavior:h,layout:r,orientation:l,direction:s}),[a,v,i,h,b,l,s,o.keyboardDelegate,r]),{listBoxProps:P}=Be({...o,shouldSelectOnPressUp:d||o.shouldSelectOnPressUp,keyboardDelegate:u},e,i),w=W({items:a,children:m=>{switch(m.type){case"section":return n.createElement(Ne,{section:m});case"separator":return n.createElement($e,m.props);case"item":return n.createElement(Y,{item:m});default:throw new Error("Unsupported node type in Menu: "+m.type)}}}),y=p.useRef(d),S=p.useRef(f);p.useEffect(()=>{y.current!==d&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),S.current!==f&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[d,f]);let D,x,g,c=!1,E=null,H=p.useRef(null);if(d&&t){D=t.useDraggableCollectionState({collection:a,selectionManager:$,preview:t.renderDragPreview?H:void 0}),t.useDraggableCollection({},D,i);let m=t.DragPreview;E=t.renderDragPreview?n.createElement(m,{ref:H},t.renderDragPreview):null}if(f&&t){x=t.useDroppableCollectionState({collection:a,selectionManager:$});let m=t.dropTargetDelegate||new t.ListDropTargetDelegate(a,i,{orientation:l,layout:r,direction:s});g=t.useDroppableCollection({keyboardDelegate:u,dropTargetDelegate:m},x,i),c=x.isDropTarget({type:"root"})}let{focusProps:V,isFocused:F,isFocusVisible:B}=ke(),C={isDropTarget:c,isEmpty:e.collection.size===0,isFocused:F,isFocusVisible:B,layout:o.layout||"stack",state:e},A=N({className:o.className,style:o.style,defaultClassName:"react-aria-ListBox",values:C}),_=null;return e.collection.size===0&&o.renderEmptyState&&(_=n.createElement("div",{role:"option",style:{display:"contents"}},o.renderEmptyState(C))),n.createElement(_e,null,n.createElement("div",{...M(o),...I(P,V,g==null?void 0:g.collectionProps),...A,ref:i,slot:o.slot||void 0,onScroll:o.onScroll,"data-drop-target":c||void 0,"data-empty":e.collection.size===0||void 0,"data-focused":F||void 0,"data-focus-visible":B||void 0,"data-layout":o.layout||"stack","data-orientation":o.orientation||"vertical"},n.createElement(j,{values:[[Q,o],[O,e],[T,{dragAndDropHooks:t,dragState:D,dropState:x}],[be,{elementType:"div"}],[se,{render:ze}]]},w),_,E))}function Ne({section:e,className:o,style:i}){var t,r;let l=p.useContext(O),[a,$]=ne();var d;let{headingProps:f,groupProps:s}=Me({heading:$,"aria-label":(d=e.props["aria-label"])!==null&&d!==void 0?d:void 0}),h=W({items:l.collection.getChildren(e.key),children:b=>{switch(b.type){case"header":return n.createElement(Te,{item:b,headingProps:f,headingRef:a});case"item":return n.createElement(Y,{item:b});default:throw new Error("Unsupported element type in Section: "+b.type)}}});return n.createElement("section",{...M(e.props),...s,className:o||((t=e.props)===null||t===void 0?void 0:t.className)||"react-aria-Section",style:i||((r=e.props)===null||r===void 0?void 0:r.style),ref:e.props.ref},h)}function Te({item:e,headingProps:o,headingRef:i}){let{ref:t,...r}=e.props;return n.createElement(fe,{...o,...r,ref:de(i,t)},e.rendered)}function Ue(e,o){return oe("item",e,o,e.children)}const Le=p.forwardRef(Ue);function Y({item:e}){var o;let i=q(e.props.ref),t=p.useContext(O),{dragAndDropHooks:r,dragState:l,dropState:a}=p.useContext(T),{optionProps:$,labelProps:d,descriptionProps:f,...s}=Ce({key:e.key,"aria-label":(o=e.props)===null||o===void 0?void 0:o["aria-label"]},t,i),{hoverProps:h,isHovered:b}=J({isDisabled:!s.allowsSelection&&!s.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),v=null;l&&r&&(v=r.useDraggableItem({key:e.key},l));let u=null;a&&r&&(u=r.useDroppableItem({target:{type:"item",key:e.key,dropPosition:"on"}},a,i));let P=e.props,w=l&&l.isDragging(e.key),y=N({...P,id:void 0,children:e.rendered,defaultClassName:"react-aria-ListBoxItem",values:{...s,isHovered:b,selectionMode:t.selectionManager.selectionMode,selectionBehavior:t.selectionManager.selectionBehavior,allowsDragging:!!l,isDragging:w,isDropTarget:u==null?void 0:u.isDropTarget}}),S=(r==null?void 0:r.renderDropIndicator)||(x=>n.createElement(ce,{target:x}));p.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <ListBoxItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]);let D=P.href?"a":"div";return n.createElement(n.Fragment,null,(r==null?void 0:r.useDropIndicator)&&S({type:"item",key:e.key,dropPosition:"before"}),n.createElement(D,{...I($,h,v==null?void 0:v.dragProps,u==null?void 0:u.dropProps),...y,ref:i,"data-allows-dragging":!!l||void 0,"data-selected":s.isSelected||void 0,"data-disabled":s.isDisabled||void 0,"data-hovered":b||void 0,"data-focused":s.isFocused||void 0,"data-focus-visible":s.isFocusVisible||void 0,"data-pressed":s.isPressed||void 0,"data-dragging":w||void 0,"data-drop-target":(u==null?void 0:u.isDropTarget)||void 0,"data-selection-mode":t.selectionManager.selectionMode==="none"?void 0:t.selectionManager.selectionMode},n.createElement(j,{values:[[ve,{slots:{label:d,description:f}}]]},y.children)),(r==null?void 0:r.useDropIndicator)&&t.collection.getKeyAfter(e.key)==null&&S({type:"item",key:e.key,dropPosition:"after"}))}function ze(e,o){o=q(o);let{dragAndDropHooks:i,dropState:t}=p.useContext(T),{dropIndicatorProps:r,isHidden:l,isDropTarget:a}=i.useDropIndicator(e,t,o);return l?null:n.createElement(Ke,{...e,dropIndicatorProps:r,isDropTarget:a,ref:o})}function Re(e,o){let{dropIndicatorProps:i,isDropTarget:t,...r}=e,l=N({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:t}});return n.createElement("div",{...i,...l,role:"option",ref:o,"data-drop-target":t||void 0})}const Ke=p.forwardRef(Re),We="flow--options--popover",je="flow--options",R={popover:We,options:je},qe=e=>{const{className:o,children:i,...t}=e,r=K(R.options,o);return n.createElement(Z,{className:R.popover},n.createElement(Ae,{className:r,...t},i))};qe.__docgenInfo={description:"",methods:[],displayName:"Options"};const Ge="flow--options--option",Je="flow--options--option--icon",Qe="flow--options--option--text",Xe="flow--options--option--control-icon",Ye={option:Ge,icon:Je,text:Qe,controlIcon:Xe},Ze=ee("Option",e=>{const{className:o,children:i,value:t,refProp:r,...l}=e,a=K(Ye.option,o);return n.createElement(Le,{className:a,ref:r,...l,id:t},i)});Ze.__docgenInfo={description:"",methods:[],displayName:"Option"};export{Q as $,Ze as O,O as a,qe as b,U as c,He as d};
