import{r as d,R as l}from"./index-uCp2LrAq.js";import{P as ee}from"./Popover-DHpMNNyD.js";import{c as K}from"./clsx-B-dksMZM.js";import{f as oe}from"./flowComponent-CVx7Nq_O.js";import{b as te,c as re,d as ae,a as ie,e as W}from"./Collection-bm5IiiHI.js";import{a as ne,k as le,b as N,f as j,d as de,h as se,g as q}from"./utils-VMHz66w6.js";import{c as ce,d as pe,e as ue,f as fe,g as $e,h as be}from"./Header-DRa9GF5F.js";import{$ as ve,a as ge}from"./Separator-BVYhIw4u.js";import{a as me}from"./Text-CV99Jc8q.js";import{a as G,b as _,e as L,f as he}from"./index-CFQDndEx.js";import{$ as M}from"./filterDOMProps-CeZl_uWj.js";import{$ as xe}from"./useSingleSelectListState-DJuH32pj.js";import{$ as Pe}from"./useLocalizedStringFormatter-CHReNXSI.js";import{$ as ye,l as De,h as Se,c as J,j as R,b as we}from"./useFocusable-6uy--nFO.js";import{$ as ke}from"./useLabel-D9TuMkUI.js";import{b as Ee}from"./usePress-DI1g9pTm.js";import{$ as Fe}from"./FocusScope-Bl0UA8jw.js";const T=new WeakMap;function Ie(e){return typeof e=="string"?e.replace(/\s*/g,""):""+e}function _e(e,o){let i=T.get(e);if(!i)throw new Error("Unknown list");return`${i.id}-option-${Ie(o)}`}function Ce(e,o,i){let t=M(e,{labelable:!0}),r=e.selectionBehavior||"toggle",n=e.linkBehavior||(r==="replace"?"action":"override");r==="toggle"&&n==="action"&&(n="override");let{listProps:a}=ce({...e,ref:i,selectionManager:o.selectionManager,collection:o.collection,disabledKeys:o.disabledKeys,linkBehavior:n}),{focusWithinProps:$}=ye({onFocusWithin:e.onFocus,onBlurWithin:e.onBlur,onFocusWithinChange:e.onFocusChange}),s=G(e.id);T.set(o,{id:s,shouldUseVirtualFocus:e.shouldUseVirtualFocus,shouldSelectOnPressUp:e.shouldSelectOnPressUp,shouldFocusOnHover:e.shouldFocusOnHover,isVirtualized:e.isVirtualized,onAction:e.onAction,linkBehavior:n});let{labelProps:f,fieldProps:c}=ke({...e,id:s,labelElementType:"span"});return{labelProps:f,listBoxProps:_(t,$,o.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",..._(c,a)})}}function He(e,o,i){var t,r;let{key:n}=e,a=T.get(o);var $;let s=($=e.isDisabled)!==null&&$!==void 0?$:o.selectionManager.isDisabled(n);var f;let c=(f=e.isSelected)!==null&&f!==void 0?f:o.selectionManager.isSelected(n);var h;let b=(h=e.shouldSelectOnPressUp)!==null&&h!==void 0?h:a==null?void 0:a.shouldSelectOnPressUp;var v;let u=(v=e.shouldFocusOnHover)!==null&&v!==void 0?v:a==null?void 0:a.shouldFocusOnHover;var P;let w=(P=e.shouldUseVirtualFocus)!==null&&P!==void 0?P:a==null?void 0:a.shouldUseVirtualFocus;var y;let S=(y=e.isVirtualized)!==null&&y!==void 0?y:a==null?void 0:a.isVirtualized,D=L(),x=L(),g={role:"option","aria-disabled":s||void 0,"aria-selected":o.selectionManager.selectionMode!=="none"?c:void 0};De()&&Se()||(g["aria-label"]=e["aria-label"],g["aria-labelledby"]=D,g["aria-describedby"]=x);let p=o.collection.getItem(n);if(S){let k=Number(p==null?void 0:p.index);g["aria-posinset"]=Number.isNaN(k)?void 0:k+1,g["aria-setsize"]=pe(o.collection)}let E=a!=null&&a.onAction?()=>{var k;return a==null||(k=a.onAction)===null||k===void 0?void 0:k.call(a,n)}:void 0,{itemProps:C,isPressed:V,isFocused:F,hasAction:H,allowsSelection:B}=ue({selectionManager:o.selectionManager,key:n,ref:i,shouldSelectOnPressUp:b,allowsDifferentPressOrigin:b&&u,isVirtualized:S,shouldUseVirtualFocus:w,isDisabled:s,onAction:E||!(p==null||(t=p.props)===null||t===void 0)&&t.onAction?he(p==null||(r=p.props)===null||r===void 0?void 0:r.onAction,E):void 0,linkBehavior:a==null?void 0:a.linkBehavior}),{hoverProps:A}=J({isDisabled:s||!u,onHoverStart(){R()||(o.selectionManager.setFocused(!0),o.selectionManager.setFocusedKey(n))}}),I=M(p==null?void 0:p.props);delete I.id;let m=Ee(p==null?void 0:p.props);return{optionProps:{...g,..._(I,C,A,m),id:_e(o,n)},labelProps:{id:D},descriptionProps:{id:x},isFocused:F,isFocusVisible:F&&R(),isSelected:c,isDisabled:s,isPressed:V,allowsSelection:B,hasAction:H}}function Be(e){let{heading:o,"aria-label":i}=e,t=G();return{itemProps:{role:"presentation"},headingProps:o?{id:t,role:"presentation"}:{},groupProps:{role:"group","aria-label":i,"aria-labelledby":o?t:void 0}}}const Q=d.createContext(null);function Me(e,o){let{render:i}=d.useContext(Q);return l.createElement(l.Fragment,null,i(e,o))}const Oe=d.forwardRef(Me),U=d.createContext({}),X=d.createContext(null),O=d.createContext(null);function Ve(e,o){[e,o]=ne(e,o,X);let i=d.useContext(le),t=d.useContext(O);return d.useContext(re)?l.createElement(ae,e):t?i?null:l.createElement(Y,{state:t,props:e,listBoxRef:o}):l.createElement(Ae,{props:e,listBoxRef:o})}function Ae({props:e,listBoxRef:o}){let{portal:i,collection:t}=ie(e);e={...e,collection:t,children:null,items:null};let r=xe(e);return l.createElement(l.Fragment,null,i,l.createElement(Y,{state:r,props:e,listBoxRef:o}))}const Ne=d.forwardRef(Ve);function Y({state:e,props:o,listBoxRef:i}){let{dragAndDropHooks:t,layout:r="stack",orientation:n="vertical"}=o,{collection:a,selectionManager:$}=e,s=!!(t!=null&&t.useDraggableCollectionState),f=!!(t!=null&&t.useDroppableCollectionState),{direction:c}=Pe(),{disabledBehavior:h,disabledKeys:b}=$,v=fe({usage:"search",sensitivity:"base"}),u=d.useMemo(()=>o.keyboardDelegate||new $e({collection:a,collator:v,ref:i,disabledKeys:b,disabledBehavior:h,layout:r,orientation:n,direction:c}),[a,v,i,h,b,n,c,o.keyboardDelegate,r]),{listBoxProps:P}=Ce({...o,shouldSelectOnPressUp:s||o.shouldSelectOnPressUp,keyboardDelegate:u},e,i),w=W({items:a,children:m=>{switch(m.type){case"section":return l.createElement(Te,{section:m});case"separator":return l.createElement(ve,m.props);case"item":return l.createElement(Z,{item:m});default:throw new Error("Unsupported node type in Menu: "+m.type)}}}),y=d.useRef(s),S=d.useRef(f);d.useEffect(()=>{y.current!==s&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),S.current!==f&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[s,f]);let D,x,g,p=!1,E=null,C=d.useRef(null);if(s&&t){D=t.useDraggableCollectionState({collection:a,selectionManager:$,preview:t.renderDragPreview?C:void 0}),t.useDraggableCollection({},D,i);let m=t.DragPreview;E=t.renderDragPreview?l.createElement(m,{ref:C},t.renderDragPreview):null}if(f&&t){x=t.useDroppableCollectionState({collection:a,selectionManager:$});let m=t.dropTargetDelegate||new t.ListDropTargetDelegate(a,i,{orientation:n,layout:r,direction:c});g=t.useDroppableCollection({keyboardDelegate:u,dropTargetDelegate:m},x,i),p=x.isDropTarget({type:"root"})}let{focusProps:V,isFocused:F,isFocusVisible:H}=we(),B={isDropTarget:p,isEmpty:e.collection.size===0,isFocused:F,isFocusVisible:H,layout:o.layout||"stack",state:e},A=N({className:o.className,style:o.style,defaultClassName:"react-aria-ListBox",values:B}),I=null;return e.collection.size===0&&o.renderEmptyState&&(I=l.createElement("div",{role:"option",style:{display:"contents"}},o.renderEmptyState(B))),l.createElement(Fe,null,l.createElement("div",{...M(o),..._(P,V,g==null?void 0:g.collectionProps),...A,ref:i,slot:o.slot||void 0,onScroll:o.onScroll,"data-drop-target":p||void 0,"data-empty":e.collection.size===0||void 0,"data-focused":F||void 0,"data-focus-visible":H||void 0,"data-layout":o.layout||"stack","data-orientation":o.orientation||"vertical"},l.createElement(j,{values:[[X,o],[O,e],[U,{dragAndDropHooks:t,dragState:D,dropState:x}],[ge,{elementType:"div"}],[Q,{render:ze}]]},w),I,E))}function Te({section:e,className:o,style:i}){var t,r;let n=d.useContext(O),[a,$]=de();var s;let{headingProps:f,groupProps:c}=Be({heading:$,"aria-label":(s=e.props["aria-label"])!==null&&s!==void 0?s:void 0}),h=W({items:n.collection.getChildren(e.key),children:b=>{switch(b.type){case"header":return l.createElement(Ue,{item:b,headingProps:f,headingRef:a});case"item":return l.createElement(Z,{item:b});default:throw new Error("Unsupported element type in Section: "+b.type)}}});return l.createElement("section",{...M(e.props),...c,className:o||((t=e.props)===null||t===void 0?void 0:t.className)||"react-aria-Section",style:i||((r=e.props)===null||r===void 0?void 0:r.style),ref:e.props.ref},h)}function Ue({item:e,headingProps:o,headingRef:i}){let{ref:t,...r}=e.props;return l.createElement(be,{...o,...r,ref:se(i,t)},e.rendered)}function Le(e,o){return te("item",e,o,e.children)}const Re=d.forwardRef(Le);function Z({item:e}){var o;let i=q(e.props.ref),t=d.useContext(O),{dragAndDropHooks:r,dragState:n,dropState:a}=d.useContext(U),{optionProps:$,labelProps:s,descriptionProps:f,...c}=He({key:e.key,"aria-label":(o=e.props)===null||o===void 0?void 0:o["aria-label"]},t,i),{hoverProps:h,isHovered:b}=J({isDisabled:!c.allowsSelection&&!c.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),v=null;n&&r&&(v=r.useDraggableItem({key:e.key},n));let u=null;a&&r&&(u=r.useDroppableItem({target:{type:"item",key:e.key,dropPosition:"on"}},a,i));let P=e.props,w=n&&n.isDragging(e.key),y=N({...P,id:void 0,children:e.rendered,defaultClassName:"react-aria-ListBoxItem",values:{...c,isHovered:b,selectionMode:t.selectionManager.selectionMode,selectionBehavior:t.selectionManager.selectionBehavior,allowsDragging:!!n,isDragging:w,isDropTarget:u==null?void 0:u.isDropTarget}}),S=(r==null?void 0:r.renderDropIndicator)||(x=>l.createElement(Oe,{target:x}));d.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <ListBoxItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]);let D=P.href?"a":"div";return l.createElement(l.Fragment,null,(r==null?void 0:r.useDropIndicator)&&S({type:"item",key:e.key,dropPosition:"before"}),l.createElement(D,{..._($,h,v==null?void 0:v.dragProps,u==null?void 0:u.dropProps),...y,ref:i,"data-allows-dragging":!!n||void 0,"data-selected":c.isSelected||void 0,"data-disabled":c.isDisabled||void 0,"data-hovered":b||void 0,"data-focused":c.isFocused||void 0,"data-focus-visible":c.isFocusVisible||void 0,"data-pressed":c.isPressed||void 0,"data-dragging":w||void 0,"data-drop-target":(u==null?void 0:u.isDropTarget)||void 0,"data-selection-mode":t.selectionManager.selectionMode==="none"?void 0:t.selectionManager.selectionMode},l.createElement(j,{values:[[me,{slots:{label:s,description:f}}]]},y.children)),(r==null?void 0:r.useDropIndicator)&&t.collection.getKeyAfter(e.key)==null&&S({type:"item",key:e.key,dropPosition:"after"}))}function ze(e,o){o=q(o);let{dragAndDropHooks:i,dropState:t}=d.useContext(U),{dropIndicatorProps:r,isHidden:n,isDropTarget:a}=i.useDropIndicator(e,t,o);return n?null:l.createElement(We,{...e,dropIndicatorProps:r,isDropTarget:a,ref:o})}function Ke(e,o){let{dropIndicatorProps:i,isDropTarget:t,...r}=e,n=N({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:t}});return l.createElement("div",{...i,...n,role:"option",ref:o,"data-drop-target":t||void 0})}const We=d.forwardRef(Ke),je="flow--options--popover",qe="flow--options",z={popover:je,options:qe},Ge=e=>{const{className:o,children:i,...t}=e,r=K(z.options,o);return l.createElement(ee,{className:z.popover},l.createElement(Ne,{className:r,...t},i))};Ge.__docgenInfo={description:"",methods:[],displayName:"Options"};const Je="flow--options--option",Qe="flow--options--option--icon",Xe="flow--options--option--text",Ye="flow--options--option--control-icon",Ze={option:Je,icon:Qe,text:Xe,controlIcon:Ye},eo=oe("Option",e=>{const{className:o,children:i,value:t,refProp:r,...n}=e,a=K(Ze.option,o);return l.createElement(Re,{className:a,ref:r,...n,id:t},i)});eo.__docgenInfo={description:"",methods:[],displayName:"Option"};export{X as $,eo as O,O as a,Ge as b,T as c,_e as d};
