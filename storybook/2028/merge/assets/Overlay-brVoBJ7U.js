import{r as o,R as m,j as $}from"./iframe-CP2gb4h4.js";import{c as L}from"./clsx-B-dksMZM.js";import{u as S}from"./useOverlayController-BHsxb3JP.js";import{O as q}from"./OverlayContextProvider-BzrNIylh.js";import{$ as I,b as O,a as E,d as V}from"./utils-D_s8y5un.js";import{d as W,e as z,f as _,g as H,h as x,i as F,j as B,k}from"./Dialog-BATijwiU.js";import{c as w,$ as v,a as U}from"./index-BSCJfbqF.js";import{$ as R}from"./filterDOMProps-CghfNOdR.js";import{c as A,d as y,e as P}from"./OverlayArrow-DcwP4WPp.js";import{v as K}from"./flowComponent-BPf_B31n.js";import{C as G}from"./ClearPropsContextView-YbrwDHkX.js";let c=typeof document<"u"&&window.visualViewport;function J(){let t=w(),[e,r]=o.useState(()=>t?{width:0,height:0}:g());return o.useEffect(()=>{let n=()=>{r(a=>{let i=g();return i.width===a.width&&i.height===a.height?a:i})};return c?c.addEventListener("resize",n):window.addEventListener("resize",n),()=>{c?c.removeEventListener("resize",n):window.removeEventListener("resize",n)}},[]),e}function g(){return{width:c&&(c==null?void 0:c.width)||window.innerWidth,height:c&&(c==null?void 0:c.height)||window.innerHeight}}function Q(t,e,r){let{overlayProps:n,underlayProps:a}=W({...t,isOpen:e.isOpen,onClose:e.close},r);return z({isDisabled:!e.isOpen}),_(),o.useEffect(()=>{if(e.isOpen&&r.current)return H([r.current],{shouldUseInert:!0})},[e.isOpen,r]),{modalProps:v(n),underlayProps:a}}const X=o.createContext(null),b=o.createContext(null),Y=o.forwardRef(function(e,r){if(o.useContext(b))return m.createElement(C,{...e,modalRef:r},e.children);let{isDismissable:a,isKeyboardDismissDisabled:i,isOpen:f,defaultOpen:s,onOpenChange:l,children:d,isEntering:u,isExiting:p,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:N,...j}=e;return m.createElement(M,{isDismissable:a,isKeyboardDismissDisabled:i,isOpen:f,defaultOpen:s,onOpenChange:l,isEntering:u,isExiting:p,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:N},m.createElement(C,{...j,modalRef:r},d))});function Z(t,e){[t,e]=I(t,e,X);let r=o.useContext(x),n=A(t),a=t.isOpen!=null||t.defaultOpen!=null||!r?n:r,i=O(e),f=o.useRef(null),s=y(i,a.isOpen),l=y(f,a.isOpen),d=s||l||t.isExiting||!1,u=w();return!a.isOpen&&!d||u?null:m.createElement(ee,{...t,state:a,isExiting:d,overlayRef:i,modalRef:f})}const M=o.forwardRef(Z);function ee({UNSTABLE_portalContainer:t,...e}){let r=e.modalRef,{state:n}=e,{modalProps:a,underlayProps:i}=Q(e,n,r),f=P(e.overlayRef)||e.isEntering||!1,s=E({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:f,isExiting:e.isExiting,state:n}}),l=J(),d={...s.style,"--visual-viewport-height":l.height+"px"};return m.createElement(B,{isExiting:e.isExiting,portalContainer:t},m.createElement("div",{...v(R(e,{global:!0}),i),...s,style:d,ref:e.overlayRef,"data-entering":f||void 0,"data-exiting":e.isExiting||void 0},m.createElement(V,{values:[[b,{modalProps:a,modalRef:r,isExiting:e.isExiting,isDismissable:e.isDismissable}],[x,n]]},s.children)))}function C(t){let{modalProps:e,modalRef:r,isExiting:n,isDismissable:a}=o.useContext(b),i=o.useContext(x),f=o.useMemo(()=>U(t.modalRef,r),[t.modalRef,r]),s=O(f),l=P(s),d=E({...t,defaultClassName:"react-aria-Modal",values:{isEntering:l,isExiting:n,state:i}});return m.createElement("div",{...v(R(t,{global:!0}),e),...d,ref:s,"data-entering":l||void 0,"data-exiting":n||void 0},a&&m.createElement(F,{onDismiss:i.close}),d.children)}const te="flow--overlay",re={overlay:te},T=t=>{const{children:e,...r}=t;return $.jsx(M,{...r,children:$.jsx(Y,{children:$.jsx(k,{children:e})})})};T.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const h=o.memo(t=>{const e=o.useContext(K).OverlayContent??T;return $.jsx(e,{...t})});h.displayName="OverlayContentView";h.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const ne=t=>{const{controller:e,children:r,isDismissable:n=!0,className:a,overlayType:i="Modal",ref:f}=t,s=S(i,{reuseControllerFromContext:!0}),l=e??s,d=l.useIsOpen(),u=L(re.overlay,a);return $.jsx(G,{children:$.jsx(h,{onOpenChange:p=>l.setOpen(p),isOpen:d,ref:f,isDismissable:n,className:u,children:$.jsx(q,{type:"Modal",controller:l,children:d&&r})})})};ne.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."}},composes:["PropsWithChildren","PropsWithClassName"]};export{ne as O};
