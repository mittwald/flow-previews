import{r as h,R as V,j as P}from"./iframe-BvCo0Jms.js";import{B as A,C as J,D as K}from"./IconWarning-DF-Lhcnu.js";import{f as L,P as Q}from"./flowComponent-D-_a8eO4.js";import{c as k}from"./clsx-B-dksMZM.js";import{$ as U,u as X}from"./useFieldComponent-h58tn8zy.js";import{$ as q,c as S,f as Y,a as E,d as Z,b as _,g as M}from"./utils-Cw2xzcbV.js";import{u as ee}from"./useMakeFocusable-I3KvykiR.js";import{c as ae}from"./RSPContexts-DqErA_gH.js";import{$ as ie,a as F}from"./Form-DLKKw6GK.js";import{$ as de}from"./Label-DMgJ6fuj.js";import{a as le}from"./Text-BvqGhHlZ.js";import{$ as I,a as te}from"./index-DAXCiU9B.js";import{$ as D}from"./filterDOMProps-i7L6S0l1.js";import{$ as p,a as ne,b as w,c as se,d as oe}from"./useFormValidation-DFmu6UDs.js";import{$ as re}from"./useControlledState-C0Hm7DMH.js";import{c as ce,a as fe,$ as ue}from"./useFocusRing-D8FCXLiH.js";import{$ as be}from"./usePress-BZrRujBy.js";import{$ as ve,a as N}from"./useToggleState-CHglrmuU.js";import{$ as $e}from"./VisuallyHidden-ch7dD1y0.js";function j(a,e,d){let r=p({...a,value:e.isSelected}),{isInvalid:c,validationErrors:f,validationDetails:n}=r.displayValidation,{labelProps:l,inputProps:s,isSelected:t,isPressed:u,isDisabled:i,isReadOnly:o}=ve({...a,isInvalid:c},e,d);ne(a,r,d);let{isIndeterminate:b,isRequired:$,validationBehavior:v="aria"}=a;h.useEffect(()=>{d.current&&(d.current.indeterminate=!!b)});let{pressProps:x}=be({isDisabled:i||o,onPress(){let{[w]:m}=a,{commitValidation:y}=m||r;y()}});return{labelProps:I(l,x,h.useMemo(()=>({onMouseDown:m=>m.preventDefault()}),[])),inputProps:{...s,checked:t,"aria-required":$&&v==="aria"||void 0,required:$&&v==="native"},isSelected:t,isPressed:u,isDisabled:i,isReadOnly:o,isInvalid:c,validationErrors:f,validationDetails:n}}const W=new WeakMap;function me(a,e){let{isDisabled:d,name:r,form:c,validationBehavior:f="aria"}=a,{isInvalid:n,validationErrors:l,validationDetails:s}=e.displayValidation,{labelProps:t,fieldProps:u,descriptionProps:i,errorMessageProps:o}=ie({...a,labelElementType:"span",isInvalid:n,errorMessage:a.errorMessage||l});W.set(e,{name:r,form:c,descriptionId:i.id,errorMessageId:o.id,validationBehavior:f});let b=D(a,{labelable:!0}),{focusWithinProps:$}=ce({onBlurWithin:a.onBlur,onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange});return{groupProps:I(b,{role:"group","aria-disabled":d||void 0,...u,...$}),labelProps:t,descriptionProps:i,errorMessageProps:o,isInvalid:n,validationErrors:l,validationDetails:s}}function he(a,e,d){const r=N({isReadOnly:a.isReadOnly||e.isReadOnly,isSelected:e.isSelected(a.value),defaultSelected:e.defaultValue.includes(a.value),onChange(m){m?e.addValue(a.value):e.removeValue(a.value),a.onChange&&a.onChange(m)}});let{name:c,form:f,descriptionId:n,errorMessageId:l,validationBehavior:s}=W.get(e);var t;s=(t=a.validationBehavior)!==null&&t!==void 0?t:s;let{realtimeValidation:u}=p({...a,value:r.isSelected,name:void 0,validationBehavior:"aria"}),i=h.useRef(se),o=()=>{e.setInvalid(a.value,u.isInvalid?u:i.current)};h.useEffect(o);let b=e.realtimeValidation.isInvalid?e.realtimeValidation:u,$=s==="native"?e.displayValidation:b;var v;let x=j({...a,isReadOnly:a.isReadOnly||e.isReadOnly,isDisabled:a.isDisabled||e.isDisabled,name:a.name||c,form:a.form||f,isRequired:(v=a.isRequired)!==null&&v!==void 0?v:e.isRequired,validationBehavior:s,[w]:{realtimeValidation:b,displayValidation:$,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(m){i.current=m,o()}}},r,d);return{...x,inputProps:{...x.inputProps,"aria-describedby":[a["aria-describedby"],e.isInvalid?l:null,n].filter(Boolean).join(" ")||void 0}}}function xe(a={}){let[e,d]=re(a.value,a.defaultValue||[],a.onChange),[r]=h.useState(e),c=!!a.isRequired&&e.length===0,f=h.useRef(new Map),n=p({...a,value:e}),l=n.displayValidation.isInvalid;var s,t;return{...n,value:e,defaultValue:(s=a.defaultValue)!==null&&s!==void 0?s:r,setValue(i){a.isReadOnly||a.isDisabled||d(i)},isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isSelected(i){return e.includes(i)},addValue(i){a.isReadOnly||a.isDisabled||e.includes(i)||(e=e.concat(i),d(e))},removeValue(i){a.isReadOnly||a.isDisabled||e.includes(i)&&d(e.filter(o=>o!==i))},toggleValue(i){a.isReadOnly||a.isDisabled||(e.includes(i)?d(e.filter(o=>o!==i)):d(e.concat(i)))},setInvalid(i,o){let b=new Map(f.current);o.isInvalid?b.set(i,o):b.delete(i),f.current=b,n.updateValidation(oe(...b.values()))},validationState:(t=a.validationState)!==null&&t!==void 0?t:l?"invalid":null,isInvalid:l,isRequired:c}}const Pe=h.createContext(null),H=h.createContext(null),ze=h.forwardRef(function(e,d){[e,d]=q(e,d,Pe);let{validationBehavior:r}=S(F)||{};var c,f;let n=(f=(c=e.validationBehavior)!==null&&c!==void 0?c:r)!==null&&f!==void 0?f:"native",l=xe({...e,validationBehavior:n}),[s,t]=Y(!e["aria-label"]&&!e["aria-labelledby"]),{groupProps:u,labelProps:i,descriptionProps:o,errorMessageProps:b,...$}=me({...e,label:t,validationBehavior:n},l),v=E({...e,values:{isDisabled:l.isDisabled,isReadOnly:l.isReadOnly,isRequired:e.isRequired||!1,isInvalid:l.isInvalid,state:l},defaultClassName:"react-aria-CheckboxGroup"}),x=D(e,{global:!0});return V.createElement("div",{...I(x,v,u),ref:d,slot:e.slot||void 0,"data-readonly":l.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":l.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},V.createElement(Z,{values:[[H,l],[de,{...i,ref:s,elementType:"span"}],[le,{slots:{description:o,errorMessage:b}}],[U,$]]},v.children))}),Re=h.forwardRef(function(e,d){let{inputRef:r=null,...c}=e;[e,d]=q(c,d,ae);let{validationBehavior:f}=S(F)||{};var n,l;let s=(l=(n=e.validationBehavior)!==null&&n!==void 0?n:f)!==null&&l!==void 0?l:"native",t=h.useContext(H),u=_(h.useMemo(()=>te(r,e.inputRef!==void 0?e.inputRef:null),[r,e.inputRef])),{labelProps:i,inputProps:o,isSelected:b,isDisabled:$,isReadOnly:v,isPressed:x,isInvalid:m}=t?he({...M(e),value:e.value,children:typeof e.children=="function"?!0:e.children},t,u):j({...M(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:s},N(e),u),{isFocused:y,isFocusVisible:C,focusProps:T}=fe(),G=$||v,{hoverProps:z,isHovered:B}=ue({...e,isDisabled:G}),O=E({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:b,isIndeterminate:e.isIndeterminate||!1,isPressed:x,isHovered:B,isFocused:y,isFocusVisible:C,isDisabled:$,isReadOnly:v,isInvalid:m,isRequired:e.isRequired||!1}}),g=D(e,{global:!0});return delete g.id,delete g.onClick,V.createElement("label",{...I(g,i,z,O),ref:d,slot:e.slot||void 0,"data-selected":b||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":x||void 0,"data-hovered":B||void 0,"data-focused":y||void 0,"data-focus-visible":C||void 0,"data-disabled":$||void 0,"data-readonly":v||void 0,"data-invalid":m||void 0,"data-required":e.isRequired||void 0},V.createElement($e,{elementType:"span"},V.createElement("input",{...I(o,T),ref:u})),O.children)}),Ve="flow--checkbox",Ie="flow--checkbox--input",ye="flow--checkbox--icon",R={checkbox:Ve,input:Ie,icon:ye},ge=L("Checkbox",a=>{const{children:e,className:d,ref:r,inputClassName:c,...f}=a,{FieldErrorView:n,fieldPropsContext:l,fieldProps:s}=X(a),t=_(r);return ee(t),P.jsxs("div",{...s,className:k(R.checkbox,d,s.className),ref:t,children:[P.jsx(Re,{...f,className:k(c,R.input),children:({isSelected:u,isIndeterminate:i})=>P.jsxs(Q,{props:l,children:[u?P.jsx(A,{className:R.icon}):i?P.jsx(J,{className:R.icon}):P.jsx(K,{className:R.icon}),e]})}),P.jsx(n,{})]})});ge.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Checkbox"};export{ze as $,ge as C};
