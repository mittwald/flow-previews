import{h as te}from"./useFocusable-DLPCeG8s.js";import{$ as Y}from"./number-nHrFdSb-.js";import{r as C,R as oe}from"./index-BwDkhjyp.js";import{e as y}from"./flowComponent-Dglj5cqB.js";import{$ as le}from"./useLocalizedStringFormatter-m5PKJKvJ.js";import{$ as re}from"./useControlledState-C0C-dzuH.js";import{$ as ne,b as ae}from"./utils-DDqfTkhb.js";function ie(){return typeof window.ResizeObserver<"u"}function ce(t){const{ref:e,onResize:o}=t;C.useEffect(()=>{let r=e==null?void 0:e.current;if(r)if(ie()){const l=new window.ResizeObserver(a=>{a.length&&o()});return l.observe(r),()=>{r&&l.unobserve(r)}}else return window.addEventListener("resize",o,!1),()=>{window.removeEventListener("resize",o,!1)}},[o,e])}const S={top:"top",bottom:"top",left:"left",right:"left"},O={top:"bottom",bottom:"top",left:"right",right:"left"},se={top:"left",left:"top"},X={top:"height",left:"width"},q={width:"totalWidth",height:"totalHeight"},M={};let E=typeof document<"u"&&window.visualViewport;function Z(t){let e=0,o=0,r=0,l=0,a=0,i=0,n={},d=(E==null?void 0:E.scale)>1;if(t.tagName==="BODY"){let $=document.documentElement;r=$.clientWidth,l=$.clientHeight;var c;e=(c=E==null?void 0:E.width)!==null&&c!==void 0?c:r;var p;o=(p=E==null?void 0:E.height)!==null&&p!==void 0?p:l,n.top=$.scrollTop||t.scrollTop,n.left=$.scrollLeft||t.scrollLeft,E&&(a=E.offsetTop,i=E.offsetLeft)}else({width:e,height:o,top:a,left:i}=z(t)),n.top=t.scrollTop,n.left=t.scrollLeft,r=e,l=o;return te()&&(t.tagName==="BODY"||t.tagName==="HTML")&&d&&(n.top=0,n.left=0,a=E.pageTop,i=E.pageLeft),{width:e,height:o,totalWidth:r,totalHeight:l,scroll:n,top:a,left:i}}function fe(t){return{top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}}function j(t,e,o,r,l,a,i){let n=l.scroll[t],d=r[X[t]],c=r.scroll[S[t]]+a,p=d+r.scroll[S[t]]-a,$=e-n+i[t]-r[S[t]],h=e-n+o+i[t]-r[S[t]];return $<c?c-$:h>p?Math.max(p-h,c-$):0}function pe(t){let e=window.getComputedStyle(t);return{top:parseInt(e.marginTop,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0,right:parseInt(e.marginRight,10)||0}}function U(t){if(M[t])return M[t];let[e,o]=t.split(" "),r=S[e]||"right",l=se[r];S[o]||(o="center");let a=X[r],i=X[l];return M[t]={placement:e,crossPlacement:o,axis:r,crossAxis:l,size:a,crossSize:i},M[t]}function F(t,e,o,r,l,a,i,n,d,c){let{placement:p,crossPlacement:$,axis:h,crossAxis:s,size:v,crossSize:g}=r,f={};f[s]=t[s],$==="center"?f[s]+=(t[g]-o[g])/2:$!==s&&(f[s]+=t[g]-o[g]),f[s]+=a;const L=t[s]-o[g]+d+c,u=t[s]+t[g]-d-c;if(f[s]=Y(f[s],L,u),p===h){const b=n?i[v]:e[q[v]];f[O[h]]=Math.floor(b-t[h]+l)}else f[h]=Math.floor(t[h]+t[v]+l);return f}function de(t,e,o,r,l,a,i,n){const d=r?o.height:e[q.height];let c=t.top!=null?o.top+t.top:o.top+(d-t.bottom-i),p=n!=="top"?Math.max(0,e.height+e.top+e.scroll.top-c-(l.top+l.bottom+a)):Math.max(0,c+i-(e.top+e.scroll.top)-(l.top+l.bottom+a));return Math.min(e.height-a*2,p)}function B(t,e,o,r,l,a){let{placement:i,axis:n,size:d}=a;return i===n?Math.max(0,o[n]-t[n]-t.scroll[n]+e[n]-r[n]-r[O[n]]-l):Math.max(0,t[d]+t[n]+t.scroll[n]-e[n]-o[n]-o[d]-r[n]-r[O[n]]-l)}function ue(t,e,o,r,l,a,i,n,d,c,p,$,h,s,v,g){let f=U(t),{size:L,crossAxis:u,crossSize:b,placement:R,crossPlacement:T}=f,w=F(e,n,o,f,p,$,c,h,v,g),H=p,P=B(n,c,e,l,a+p,f);if(i&&r[L]>P){let N=U(`${O[R]} ${T}`),ee=F(e,n,o,N,p,$,c,h,v,g);B(n,c,e,l,a+p,N)>P&&(f=N,w=ee,H=p)}let x="bottom";f.axis==="top"?f.placement==="top"?x="top":f.placement==="bottom"&&(x="bottom"):f.crossAxis==="top"&&(f.crossPlacement==="top"?x="bottom":f.crossPlacement==="bottom"&&(x="top"));let I=j(u,w[u],o[b],n,d,a,c);w[u]+=I;let A=de(w,n,c,h,l,a,o.height,x);s&&s<A&&(A=s),o.height=Math.min(o.height,A),w=F(e,n,o,f,H,$,c,h,v,g),I=j(u,w[u],o[b],n,d,a,c),w[u]+=I;let k={},J=e[u]+.5*e[b]-o[u];const K=v/2+g,Q=o[b]-v/2-g,W=e[u]-o[u]+v/2,_=e[u]+e[b]-o[u]-v/2,D=Y(J,W,_);return k[u]=Y(D,K,Q),{position:w,maxHeight:A,arrowOffsetLeft:k.left,arrowOffsetTop:k.top,placement:f.placement}}function me(t){let{placement:e,targetNode:o,overlayNode:r,scrollNode:l,padding:a,shouldFlip:i,boundaryElement:n,offset:d,crossOffset:c,maxHeight:p,arrowSize:$=0,arrowBoundaryOffset:h=0}=t,s=r instanceof HTMLElement?$e(r):document.documentElement,v=s===document.documentElement;const g=window.getComputedStyle(s).position;let f=!!g&&g!=="static",L=v?z(o):G(o,s);if(!v){let{marginTop:P,marginLeft:x}=window.getComputedStyle(o);L.top+=parseInt(P,10)||0,L.left+=parseInt(x,10)||0}let u=z(r),b=pe(r);u.width+=b.left+b.right,u.height+=b.top+b.bottom;let R=fe(l),T=Z(n),w=Z(s),H=n.tagName==="BODY"?z(s):G(s,n);return s.tagName==="HTML"&&n.tagName==="BODY"&&(w.scroll.top=0,w.scroll.left=0),ue(e,L,u,R,b,a,i,T,w,H,d,c,f,p,$,h)}function z(t){let{top:e,left:o,width:r,height:l}=t.getBoundingClientRect(),{scrollTop:a,scrollLeft:i,clientTop:n,clientLeft:d}=document.documentElement;return{top:e+a-n,left:o+i-d,width:r,height:l}}function G(t,e){let o=window.getComputedStyle(t),r;if(o.position==="fixed"){let{top:l,left:a,width:i,height:n}=t.getBoundingClientRect();r={top:l,left:a,width:i,height:n}}else{r=z(t);let l=z(e),a=window.getComputedStyle(e);l.top+=(parseInt(a.borderTopWidth,10)||0)-e.scrollTop,l.left+=(parseInt(a.borderLeftWidth,10)||0)-e.scrollLeft,r.top-=l.top,r.left-=l.left}return r.top-=parseInt(o.marginTop,10)||0,r.left-=parseInt(o.marginLeft,10)||0,r}function $e(t){let e=t.offsetParent;if(e&&e===document.body&&window.getComputedStyle(e).position==="static"&&!V(e)&&(e=document.documentElement),e==null)for(e=t.parentElement;e&&!V(e);)e=e.parentElement;return e||document.documentElement}function V(t){let e=window.getComputedStyle(t);return e.transform!=="none"||/transform|perspective/.test(e.willChange)||e.filter!=="none"||e.contain==="paint"||"backdropFilter"in e&&e.backdropFilter!=="none"||"WebkitBackdropFilter"in e&&e.WebkitBackdropFilter!=="none"}const ge=new WeakMap;function he(t){let{triggerRef:e,isOpen:o,onClose:r}=t;C.useEffect(()=>{if(!o||r===null)return;let l=a=>{let i=a.target;if(!e.current||i instanceof Node&&!i.contains(e.current))return;let n=r||ge.get(e.current);n&&n()};return window.addEventListener("scroll",l,!0),()=>{window.removeEventListener("scroll",l,!0)}},[o,r,e])}let m=typeof document<"u"&&window.visualViewport;function Se(t){let{direction:e}=le(),{arrowSize:o=0,targetRef:r,overlayRef:l,scrollRef:a=l,placement:i="bottom",containerPadding:n=12,shouldFlip:d=!0,boundaryElement:c=typeof document<"u"?document.body:null,offset:p=0,crossOffset:$=0,shouldUpdatePosition:h=!0,isOpen:s=!0,onClose:v,maxHeight:g,arrowBoundaryOffset:f=0}=t,[L,u]=C.useState({position:{},arrowOffsetLeft:void 0,arrowOffsetTop:void 0,maxHeight:void 0,placement:void 0}),b=[h,i,l.current,r.current,a.current,n,d,c,p,$,s,e,g,f,o],R=C.useRef(m==null?void 0:m.scale);C.useEffect(()=>{s&&(R.current=m==null?void 0:m.scale)},[s]);let T=C.useCallback(()=>{if(h===!1||!s||!l.current||!r.current||!a.current||!c||(m==null?void 0:m.scale)!==R.current)return;!g&&l.current&&(l.current.style.maxHeight="none");let P=me({placement:we(i,e),overlayNode:l.current,targetNode:r.current,scrollNode:a.current,padding:n,shouldFlip:d,boundaryElement:c,offset:p,crossOffset:$,maxHeight:g,arrowSize:o,arrowBoundaryOffset:f});Object.keys(P.position).forEach(x=>l.current.style[x]=P.position[x]+"px"),l.current.style.maxHeight=P.maxHeight!=null?P.maxHeight+"px":void 0,u(P)},b);y(T,b),ve(T),ce({ref:l,onResize:T});let w=C.useRef(!1);y(()=>{let P,x=()=>{w.current=!0,clearTimeout(P),P=setTimeout(()=>{w.current=!1},500),T()},I=()=>{w.current&&x()};return m==null||m.addEventListener("resize",x),m==null||m.addEventListener("scroll",I),()=>{m==null||m.removeEventListener("resize",x),m==null||m.removeEventListener("scroll",I)}},[T]);let H=C.useCallback(()=>{w.current||v()},[v,w]);return he({triggerRef:r,isOpen:s,onClose:v&&H}),{overlayProps:{style:{position:"absolute",zIndex:1e5,...L.position,maxHeight:L.maxHeight}},placement:L.placement,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:L.arrowOffsetLeft,top:L.arrowOffsetTop}},updatePosition:T}}function ve(t){y(()=>(window.addEventListener("resize",t,!1),()=>{window.removeEventListener("resize",t,!1)}),[t])}function we(t,e){return e==="rtl"?t.replace("start","right").replace("end","left"):t.replace("start","left").replace("end","right")}function ze(t){let[e,o]=re(t.isOpen,t.defaultOpen||!1,t.onOpenChange);const r=C.useCallback(()=>{o(!0)},[o]),l=C.useCallback(()=>{o(!1)},[o]),a=C.useCallback(()=>{o(!e)},[o,e]);return{isOpen:e,setOpen:o,open:r,close:l,toggle:a}}const be=C.createContext({placement:"bottom"});function xe(t,e){[t,e]=ne(t,e,be);let o=t.placement,r={position:"absolute",[o]:"100%",transform:o==="top"||o==="bottom"?"translateX(-50%)":"translateY(-50%)"},l=ae({...t,defaultClassName:"react-aria-OverlayArrow",values:{placement:o}});return l.style&&Object.keys(l.style).forEach(a=>l.style[a]===void 0&&delete l.style[a]),oe.createElement("div",{...t,...l,style:{...r,...l.style},ref:e,"data-placement":o})}const Ae=C.forwardRef(xe);export{ze as $,Se as a,be as b,Ae as c,ce as d,ge as e};
