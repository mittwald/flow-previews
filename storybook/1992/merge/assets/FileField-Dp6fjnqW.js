import{j as t}from"./iframe-BmaCy5vn.js";import{f as c}from"./FormField.module-CqWyJNQI.js";import{a as F,c as P}from"./Form-JYTBzchK.js";import{$ as w}from"./FieldError-DrLNSIg1.js";import{b as I,$ as j}from"./Group-BQQ9lk60.js";import{b as v}from"./utils-BTcDldbE.js";import{P as b,f as R}from"./PropsContextProvider-Cdtu9ZvQ.js";import"./browser-CHe_8eCl.js";const f="mittwald.flow-core.file.awaitedArrayBuffer";function C(e){return f in e&&e[f]instanceof ArrayBuffer&&!e[f].detached}const B=async e=>{if(C(e))return e;const s=await e.arrayBuffer();return Object.assign(e,{[f]:s}),e},q="flow--file-field--trigger",A={trigger:q},h=e=>{const{children:s,isDisabled:l,onChange:r,isReadOnly:p,ref:m}=e,a=v(m),d=()=>{var i,n;(i=a.current)!=null&&i.value&&(a.current.value="",r==null||r(null)),(n=a.current)==null||n.click()},o=i=>{r==null||r(i.target.files)},u={Button:{onPress:d,className:A.trigger,isDisabled:l,isReadOnly:p}};return t.jsxs(b,{props:u,mergeInParentContext:!0,children:[s,t.jsx(I,{style:{display:"none"},type:"file",ref:a,onChange:o})]})};h.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren"]};const N=R("FileField",e=>{const{children:s,ref:l,isRequired:r,isInvalid:p,isDisabled:m,validationBehavior:a,onChange:d,isReadOnly:o,...u}=e,i=v(l),n=F({value:void 0,validationBehavior:a,isInvalid:p});P({validationBehavior:a},n,i);const x={...u,ref:i,"aria-invalid":n.displayValidation.isInvalid,value:void 0},g={Label:{className:c.label,optional:!e.isRequired},FieldDescription:{className:c.fieldDescription},FieldError:{className:c.customFieldError}},$=y=>{y&&d&&Promise.all(Array.from(y).map(B)).then(()=>d(y))};return t.jsx(j.Provider,{value:x,children:t.jsx(w.Provider,{value:n.displayValidation,children:t.jsx(b,{props:g,children:t.jsx("div",{"data-readonly":o,"data-required":!!r||void 0,"data-invalid":n.displayValidation.isInvalid||void 0,className:c.formField,children:t.jsx(h,{ref:l,isReadOnly:o,onChange:o?void 0:$,isDisabled:m,children:s})})})})})});N.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"FileField"};export{N as F,B as a};
