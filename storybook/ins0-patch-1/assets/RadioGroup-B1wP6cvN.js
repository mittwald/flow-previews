import{$ as q,f as O,e as w,a as B,c as E,d as k,b as _}from"./utils-CNUJJGcD.js";import{$ as L}from"./FieldError-Dhym38A1.js";import{b as N,a as T,$ as W,c as G}from"./Form-CXVBffIi.js";import{$ as A}from"./Label-DsLtIi5U.js";import{a as H}from"./Text-BJ9sUP_l.js";import{$ as y,d as K,b as j}from"./mergeRefs-f9wmNE8z.js";import{$ as F}from"./filterDOMProps-CeZl_uWj.js";import{r as h,R as D}from"./index-BdpSHsi2.js";import{$ as U}from"./useFormReset-Tdit5Ane.js";import{$ as M}from"./usePress-DWaDT6O_.js";import{$ as z}from"./useFocusable-CxpMFfxV.js";import{$ as J}from"./FocusScope-BN4baDIG.js";import{b as Q,a as X,$ as Y}from"./useFocusRing-BmK03SYd.js";import{a as Z}from"./context-B2NjtFkN.js";import{$ as ee}from"./VisuallyHidden-QAya5EjI.js";import{$ as ae}from"./useControlledState-rjpdN6qd.js";const S=new WeakMap;function ie(a,e,d){let{value:r,children:u,"aria-label":l,"aria-labelledby":s}=a;const i=a.isDisabled||e.isDisabled;let c=e.selectedValue===r,f=o=>{o.stopPropagation(),e.setSelectedValue(r)},{pressProps:n,isPressed:m}=M({isDisabled:i}),{pressProps:P,isPressed:x}=M({isDisabled:i,onPress(){var o;e.setSelectedValue(r),(o=d.current)===null||o===void 0||o.focus()}}),{focusableProps:R}=z(y(a,{onFocus:()=>e.setLastFocusedValue(r)}),d),b=y(n,R),I=F(a,{labelable:!0}),v=-1;e.selectedValue!=null?e.selectedValue===r&&(v=0):(e.lastFocusedValue===r||e.lastFocusedValue==null)&&(v=0),i&&(v=void 0);let{name:V,descriptionId:g,errorMessageId:$,validationBehavior:t}=S.get(e);return U(d,e.selectedValue,e.setSelectedValue),N({validationBehavior:t},e,d),{labelProps:y(P,{onClick:o=>o.preventDefault()}),inputProps:y(I,{...b,type:"radio",name:V,tabIndex:v,disabled:i,required:e.isRequired&&t==="native",checked:c,value:r,onChange:f,"aria-describedby":[a["aria-describedby"],e.isInvalid?$:null,g].filter(Boolean).join(" ")||void 0}),isDisabled:i,isSelected:c,isPressed:m||x}}function de(a,e){let{name:d,isReadOnly:r,isRequired:u,isDisabled:l,orientation:s="vertical",validationBehavior:i="aria"}=a,{direction:c}=Z(),{isInvalid:f,validationErrors:n,validationDetails:m}=e.displayValidation,{labelProps:P,fieldProps:x,descriptionProps:R,errorMessageProps:b}=T({...a,labelElementType:"span",isInvalid:e.isInvalid,errorMessage:a.errorMessage||n}),I=F(a,{labelable:!0}),{focusWithinProps:v}=Q({onBlurWithin($){var t;(t=a.onBlur)===null||t===void 0||t.call(a,$),e.selectedValue||e.setLastFocusedValue(null)},onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange}),V=$=>{let t;switch($.key){case"ArrowRight":c==="rtl"&&s!=="vertical"?t="prev":t="next";break;case"ArrowLeft":c==="rtl"&&s!=="vertical"?t="next":t="prev";break;case"ArrowDown":t="next";break;case"ArrowUp":t="prev";break;default:return}$.preventDefault();let o=J($.currentTarget,{from:$.target}),p;t==="next"?(p=o.nextNode(),p||(o.currentNode=$.currentTarget,p=o.firstChild())):(p=o.previousNode(),p||(o.currentNode=$.currentTarget,p=o.lastChild())),p&&(p.focus(),e.setSelectedValue(p.value))},g=K(d);return S.set(e,{name:g,descriptionId:R.id,errorMessageId:b.id,validationBehavior:i}),{radioGroupProps:y(I,{role:"radiogroup",onKeyDown:V,"aria-invalid":e.isInvalid||void 0,"aria-errormessage":a["aria-errormessage"],"aria-readonly":r||void 0,"aria-required":u||void 0,"aria-disabled":l||void 0,"aria-orientation":s,...x,...v}),labelProps:P,descriptionProps:R,errorMessageProps:b,isInvalid:f,validationErrors:n,validationDetails:m}}let re=Math.round(Math.random()*1e10),le=0;function te(a){let e=h.useMemo(()=>a.name||`radio-group-${re}-${++le}`,[a.name]);var d;let[r,u]=ae(a.value,(d=a.defaultValue)!==null&&d!==void 0?d:null,a.onChange),[l,s]=h.useState(null),i=W({...a,value:r}),c=n=>{!a.isReadOnly&&!a.isDisabled&&(u(n),i.commitValidation())},f=i.displayValidation.isInvalid;return{...i,name:e,selectedValue:r,setSelectedValue:c,lastFocusedValue:l,setLastFocusedValue:s,isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isRequired:a.isRequired||!1,validationState:a.validationState||(f?"invalid":null),isInvalid:f}}const oe=h.createContext(null),se=h.createContext(null),C=h.createContext(null),De=h.forwardRef(function(e,d){[e,d]=q(e,d,oe);let{validationBehavior:r}=E(G)||{};var u,l;let s=(l=(u=e.validationBehavior)!==null&&u!==void 0?u:r)!==null&&l!==void 0?l:"native",i=te({...e,validationBehavior:s}),[c,f]=k(!e["aria-label"]&&!e["aria-labelledby"]),{radioGroupProps:n,labelProps:m,descriptionProps:P,errorMessageProps:x,...R}=de({...e,label:f,validationBehavior:s},i),b=B({...e,values:{orientation:e.orientation||"vertical",isDisabled:i.isDisabled,isReadOnly:i.isReadOnly,isRequired:i.isRequired,isInvalid:i.isInvalid,state:i},defaultClassName:"react-aria-RadioGroup"});return D.createElement("div",{...n,...b,ref:d,slot:e.slot||void 0,"data-orientation":e.orientation||"vertical","data-invalid":i.isInvalid||void 0,"data-disabled":i.isDisabled||void 0,"data-readonly":i.isReadOnly||void 0,"data-required":i.isRequired||void 0},D.createElement(_,{values:[[C,i],[A,{...m,ref:c,elementType:"span"}],[H,{slots:{description:P,errorMessage:x}}],[L,R]]},b.children))}),Ie=h.forwardRef(function(e,d){let{inputRef:r=null,...u}=e;[e,d]=q(u,d,se);let l=D.useContext(C),s=O(h.useMemo(()=>j(r,e.inputRef!==void 0?e.inputRef:null),[r,e.inputRef])),{labelProps:i,inputProps:c,isSelected:f,isDisabled:n,isPressed:m}=ie({...w(e),children:typeof e.children=="function"?!0:e.children},l,s),{isFocused:P,isFocusVisible:x,focusProps:R}=X(),b=n||l.isReadOnly,{hoverProps:I,isHovered:v}=Y({...e,isDisabled:b}),V=B({...e,defaultClassName:"react-aria-Radio",values:{isSelected:f,isPressed:m,isHovered:v,isFocused:P,isFocusVisible:x,isDisabled:n,isReadOnly:l.isReadOnly,isInvalid:l.isInvalid,isRequired:l.isRequired}}),g=F(e);return delete g.id,D.createElement("label",{...y(g,i,I,V),ref:d,"data-selected":f||void 0,"data-pressed":m||void 0,"data-hovered":v||void 0,"data-focused":P||void 0,"data-focus-visible":x||void 0,"data-disabled":n||void 0,"data-readonly":l.isReadOnly||void 0,"data-invalid":l.isInvalid||void 0,"data-required":l.isRequired||void 0},D.createElement(ee,{elementType:"span"},D.createElement("input",{...y(c,R),ref:s})),V.children)});export{De as $,Ie as a};
