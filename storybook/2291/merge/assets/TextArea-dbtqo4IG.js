import{r as f,j as n}from"./iframe-CGL3Ztd8.js";import{f as V,P as S}from"./flowComponent-WiCTTjdG.js";import{b as U}from"./utils-BPLHaINM.js";import{u as _}from"./useFieldComponent-CHIggLRE.js";import{c as k}from"./clsx-B-dksMZM.js";import{u as I}from"./useControlledHostValueProps-DHO1n_5T.js";import{F as Z}from"./FieldDescription-DTkn5Gpa.js";import{$ as q}from"./useLocalizedStringFormatter-BjebV3sn.js";import{$ as B,a as G}from"./TextField-Cye5nWIo.js";const J="flow--text-area--input",K="flow--text-area--horizontal-resize",O="flow--text-area--vertical-resize",Q="flow--text-area--resize",c={input:J,horizontalResize:K,verticalResize:O,resize:Q},W={"de-DE":{"textArea.characters":(e,a)=>`${a.select({0:()=>`${e.count}`,other:()=>`${e.count}/${e.maxCount}`},e.maxCount)} Zeichen`},"en-US":{"textArea.characters":(e,a)=>`${a.select({0:()=>`${e.count}`,other:()=>`${e.count}/${e.maxCount}`},e.maxCount)} characters`}},X=V("TextArea",e=>{const{children:a,placeholder:v,rows:s=5,autoResizeMaxRows:h=s,ref:$,allowVerticalResize:g,allowHorizontalResize:R,showCharacterCount:d,className:b,...H}=I(e),[E,j]=f.useState(e.defaultValue?.length??e.value?.length??0),{FieldErrorView:y,FieldErrorCaptureContext:L,fieldPropsContext:A,fieldProps:m}=_(e);let{allowResize:o}=e;g?o="vertical":R&&(o="horizontal");const N=k(typeof o=="boolean"&&o?c.resize:null,o==="horizontal"?c.horizontalResize:o==="vertical"?c.verticalResize:null,m.className,b),P=t=>{d&&j(t.length),e.onChange&&e.onChange(t)},F=q(W).format("textArea.characters",{count:E,maxCount:e.maxLength??0}),r=U($),x=t=>`calc(var(--line-height--m) * ${t} + (var(--form-control--padding-y) * 2))`,[l,M]=f.useState(!1),u=s!==h,w=o&&(!u||u&&l);f.useEffect(()=>{const t=r.current;if(!t)return;const T=t.offsetHeight;let i=!1;const z=()=>{i=!0},p=()=>{if(!i||l)return;t.offsetHeight!==T&&(M(!0),i=!1)},C=()=>{i=!1};return window.addEventListener("mousedown",z),window.addEventListener("mousemove",p),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousedown",z),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",C)}},[l]);const D=()=>{if(r.current&&u&&!w){r.current.style.height="0px";const t=r.current.scrollHeight;r.current.style.height=t+2+"px"}};return n.jsx(B,{...H,...m,className:N,onChange:P,children:n.jsxs(S,{props:A,children:[n.jsx(L,{children:a}),n.jsx(G,{rows:s,"aria-hidden":e["aria-hidden"],placeholder:v,className:c.input,ref:r,onChange:D,style:{minHeight:x(s),maxHeight:w?void 0:x(h)}}),d&&n.jsx(Z,{children:F}),n.jsx(y,{})]})})});X.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TextArea"};export{X as T};
