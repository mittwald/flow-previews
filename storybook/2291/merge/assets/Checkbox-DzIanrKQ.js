import{r as x,R as V,j as P}from"./iframe-BIoFjWpr.js";import{r as z,K as A,s as J}from"./IconWarning-EC1k16Yv.js";import{f as L,P as Q}from"./flowComponent-scX312by.js";import{c as k}from"./clsx-B-dksMZM.js";import{u as U}from"./useFieldComponent-DpF862rt.js";import{$ as E,c as M,f as X,a as S,d as Y,b as _,g as q}from"./utils-DZ7CVsEQ.js";import{c as Z}from"./RSPContexts-TtAa_5CI.js";import{$ as ee}from"./FieldError-3U-LgGLS.js";import{a as ae,$ as F}from"./Form-BlXCmAsm.js";import{$ as ie}from"./Label-CY_Zdhv-.js";import{a as de}from"./Text-DporVAh2.js";import{$ as I,a as le}from"./index-BNUHznNp.js";import{$ as g}from"./filterDOMProps-BNnC3YgW.js";import{$ as D,a as te,b as j,c as ne,d as re}from"./useFormValidation-5Xewoqko.js";import{$ as oe}from"./useControlledState-A9PECuda.js";import{c as se,a as ce,$ as fe}from"./useFocusRing-C05eNqGk.js";import{$ as ue}from"./usePress-Uox4pFjd.js";import{$ as be,a as w}from"./useToggleState-Cq-zvn-S.js";import{$ as ve}from"./VisuallyHidden-iLNm3MD9.js";function N(a,e,l){let s=D({...a,value:e.isSelected}),{isInvalid:c,validationErrors:f,validationDetails:r}=s.displayValidation,{labelProps:t,inputProps:o,isSelected:n,isPressed:u,isDisabled:i,isReadOnly:d}=be({...a,isInvalid:c},e,l);te(a,s,l);let{isIndeterminate:b,isRequired:$,validationBehavior:v="aria"}=a;x.useEffect(()=>{l.current&&(l.current.indeterminate=!!b)});let{pressProps:h}=ue({isDisabled:i||d,onPress(){let{[j]:m}=a,{commitValidation:y}=m||s;y()}});return{labelProps:I(t,h,x.useMemo(()=>({onMouseDown:m=>m.preventDefault()}),[])),inputProps:{...o,checked:n,"aria-required":$&&v==="aria"||void 0,required:$&&v==="native"},isSelected:n,isPressed:u,isDisabled:i,isReadOnly:d,isInvalid:c,validationErrors:f,validationDetails:r}}const W=new WeakMap;function $e(a,e){let{isDisabled:l,name:s,form:c,validationBehavior:f="aria"}=a,{isInvalid:r,validationErrors:t,validationDetails:o}=e.displayValidation,{labelProps:n,fieldProps:u,descriptionProps:i,errorMessageProps:d}=ae({...a,labelElementType:"span",isInvalid:r,errorMessage:a.errorMessage||t});W.set(e,{name:s,form:c,descriptionId:i.id,errorMessageId:d.id,validationBehavior:f});let b=g(a,{labelable:!0}),{focusWithinProps:$}=se({onBlurWithin:a.onBlur,onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange});return{groupProps:I(b,{role:"group","aria-disabled":l||void 0,...u,...$}),labelProps:n,descriptionProps:i,errorMessageProps:d,isInvalid:r,validationErrors:t,validationDetails:o}}function me(a,e,l){const s=w({isReadOnly:a.isReadOnly||e.isReadOnly,isSelected:e.isSelected(a.value),defaultSelected:e.defaultValue.includes(a.value),onChange(m){m?e.addValue(a.value):e.removeValue(a.value),a.onChange&&a.onChange(m)}});let{name:c,form:f,descriptionId:r,errorMessageId:t,validationBehavior:o}=W.get(e);var n;o=(n=a.validationBehavior)!==null&&n!==void 0?n:o;let{realtimeValidation:u}=D({...a,value:s.isSelected,name:void 0,validationBehavior:"aria"}),i=x.useRef(ne),d=()=>{e.setInvalid(a.value,u.isInvalid?u:i.current)};x.useEffect(d);let b=e.realtimeValidation.isInvalid?e.realtimeValidation:u,$=o==="native"?e.displayValidation:b;var v;let h=N({...a,isReadOnly:a.isReadOnly||e.isReadOnly,isDisabled:a.isDisabled||e.isDisabled,name:a.name||c,form:a.form||f,isRequired:(v=a.isRequired)!==null&&v!==void 0?v:e.isRequired,validationBehavior:o,[j]:{realtimeValidation:b,displayValidation:$,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(m){i.current=m,d()}}},s,l);return{...h,inputProps:{...h.inputProps,"aria-describedby":[a["aria-describedby"],e.isInvalid?t:null,r].filter(Boolean).join(" ")||void 0}}}function xe(a={}){let[e,l]=oe(a.value,a.defaultValue||[],a.onChange),[s]=x.useState(e),c=!!a.isRequired&&e.length===0,f=x.useRef(new Map),r=D({...a,value:e}),t=r.displayValidation.isInvalid;var o,n;return{...r,value:e,defaultValue:(o=a.defaultValue)!==null&&o!==void 0?o:s,setValue(i){a.isReadOnly||a.isDisabled||l(i)},isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isSelected(i){return e.includes(i)},addValue(i){a.isReadOnly||a.isDisabled||l(d=>d.includes(i)?d:d.concat(i))},removeValue(i){a.isReadOnly||a.isDisabled||e.includes(i)&&l(e.filter(d=>d!==i))},toggleValue(i){a.isReadOnly||a.isDisabled||(e.includes(i)?l(e.filter(d=>d!==i)):l(e.concat(i)))},setInvalid(i,d){let b=new Map(f.current);d.isInvalid?b.set(i,d):b.delete(i),f.current=b,r.updateValidation(re(...b.values()))},validationState:(n=a.validationState)!==null&&n!==void 0?n:t?"invalid":null,isInvalid:t,isRequired:c}}const he=x.createContext(null),H=x.createContext(null),Ge=x.forwardRef(function(e,l){[e,l]=E(e,l,he);let{validationBehavior:s}=M(F)||{};var c,f;let r=(f=(c=e.validationBehavior)!==null&&c!==void 0?c:s)!==null&&f!==void 0?f:"native",t=xe({...e,validationBehavior:r}),[o,n]=X(!e["aria-label"]&&!e["aria-labelledby"]),{groupProps:u,labelProps:i,descriptionProps:d,errorMessageProps:b,...$}=$e({...e,label:n,validationBehavior:r},t),v=S({...e,values:{isDisabled:t.isDisabled,isReadOnly:t.isReadOnly,isRequired:e.isRequired||!1,isInvalid:t.isInvalid,state:t},defaultClassName:"react-aria-CheckboxGroup"}),h=g(e,{global:!0});return V.createElement("div",{...I(h,v,u),ref:l,slot:e.slot||void 0,"data-readonly":t.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":t.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},V.createElement(Y,{values:[[H,t],[ie,{...i,ref:o,elementType:"span"}],[de,{slots:{description:d,errorMessage:b}}],[ee,$]]},v.children))}),Pe=x.forwardRef(function(e,l){let{inputRef:s=null,...c}=e;[e,l]=E(c,l,Z);let{validationBehavior:f}=M(F)||{};var r,t;let o=(t=(r=e.validationBehavior)!==null&&r!==void 0?r:f)!==null&&t!==void 0?t:"native",n=x.useContext(H),u=_(x.useMemo(()=>le(s,e.inputRef!==void 0?e.inputRef:null),[s,e.inputRef])),{labelProps:i,inputProps:d,isSelected:b,isDisabled:$,isReadOnly:v,isPressed:h,isInvalid:m}=n?me({...q(e),value:e.value,children:typeof e.children=="function"?!0:e.children},n,u):N({...q(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:o},w(e),u),{isFocused:y,isFocusVisible:C,focusProps:T}=ce(),G=$||v,{hoverProps:K,isHovered:B}=fe({...e,isDisabled:G}),O=S({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:b,isIndeterminate:e.isIndeterminate||!1,isPressed:h,isHovered:B,isFocused:y,isFocusVisible:C,isDisabled:$,isReadOnly:v,isInvalid:m,isRequired:e.isRequired||!1}}),p=g(e,{global:!0});return delete p.id,delete p.onClick,V.createElement("label",{...I(p,i,K,O),ref:l,slot:e.slot||void 0,"data-selected":b||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":h||void 0,"data-hovered":B||void 0,"data-focused":y||void 0,"data-focus-visible":C||void 0,"data-disabled":$||void 0,"data-readonly":v||void 0,"data-invalid":m||void 0,"data-required":e.isRequired||void 0},V.createElement(ve,{elementType:"span"},V.createElement("input",{...I(d,T),ref:u})),O.children)}),Re="flow--checkbox",Ve="flow--checkbox--input",Ie="flow--checkbox--icon",R={checkbox:Re,input:Ve,icon:Ie},ye=L("Checkbox",a=>{const{children:e,className:l,ref:s,inputClassName:c,...f}=a,{FieldErrorView:r,FieldErrorCaptureContext:t,fieldPropsContext:o,fieldProps:n}=U(a),u=_(s);return P.jsxs("div",{...n,className:k(R.checkbox,l,n.className),children:[P.jsx(t,{children:P.jsx(Pe,{...f,inputRef:u,className:k(c,R.input),children:({isSelected:i,isIndeterminate:d})=>P.jsxs(Q,{props:o,children:[i?P.jsx(z,{className:R.icon}):d?P.jsx(A,{className:R.icon}):P.jsx(J,{className:R.icon}),e]})})}),P.jsx(r,{})]})});ye.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Checkbox"};export{Ge as $,ye as C};
