import{r as o,R as s}from"./index-uCp2LrAq.js";import{c as I}from"./clsx-B-dksMZM.js";import{u as E,O as y,A as M}from"./index-BrRq-0fr.js";import{a as L,g as h,i as b,j as O,b as C,f as z,h as A}from"./utils-CHnd_qWz.js";import{b as B,c as q,d as F,e as U,f as u,g as W,h as K,i as V}from"./Dialog-CmqFKjmg.js";import{b as w,a as p}from"./index-7Bm5Bt6L.js";import{$ as R}from"./filterDOMProps-CeZl_uWj.js";import{$ as j}from"./OverlayArrow-DMphC9df.js";import{P as H}from"./flowComponent-C3iYbsVA.js";let d=typeof document<"u"&&window.visualViewport;function k(){let t=w(),[e,n]=o.useState(()=>t?{width:0,height:0}:v());return o.useEffect(()=>{let a=()=>{n(r=>{let i=v();return i.width===r.width&&i.height===r.height?r:i})};return d?d.addEventListener("resize",a):window.addEventListener("resize",a),()=>{d?d.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function v(){return{width:d&&(d==null?void 0:d.width)||window.innerWidth,height:d&&(d==null?void 0:d.height)||window.innerHeight}}function G(t,e,n){let{overlayProps:a,underlayProps:r}=B({...t,isOpen:e.isOpen,onClose:e.close},n);return q({isDisabled:!e.isOpen}),F(),o.useEffect(()=>{if(e.isOpen)return U([n.current])},[e.isOpen,n]),{modalProps:p(a),underlayProps:r}}const J=o.createContext(null),x=o.createContext(null);function Q(t,e){if(o.useContext(x))return s.createElement(g,{...t,modalRef:e},t.children);let{isDismissable:a,isKeyboardDismissDisabled:r,isOpen:i,defaultOpen:c,onOpenChange:l,children:f,isEntering:$,isExiting:m,UNSTABLE_portalContainer:S,shouldCloseOnInteractOutside:_,...T}=t;return s.createElement(P,{isDismissable:a,isKeyboardDismissDisabled:r,isOpen:i,defaultOpen:c,onOpenChange:l,isEntering:$,isExiting:m,UNSTABLE_portalContainer:S,shouldCloseOnInteractOutside:_},s.createElement(g,{...T,modalRef:e},f))}const X=o.forwardRef(Q);function Y(t,e){[t,e]=L(t,e,J);let n=o.useContext(u),a=j(t),r=t.isOpen!=null||t.defaultOpen!=null||!n?a:n,i=h(e),c=o.useRef(null),l=b(i,r.isOpen),f=b(c,r.isOpen),$=l||f||t.isExiting||!1,m=w();return!r.isOpen&&!$||m?null:s.createElement(Z,{...t,state:r,isExiting:$,overlayRef:i,modalRef:c})}const P=o.forwardRef(Y);function Z({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:a}=e,{modalProps:r,underlayProps:i}=G(e,a,n),c=O(e.overlayRef)||e.isEntering||!1,l=C({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:c,isExiting:e.isExiting,state:a}}),f=k(),$={...l.style,"--visual-viewport-height":f.height+"px"};return s.createElement(W,{isExiting:e.isExiting,portalContainer:t},s.createElement("div",{...p(R(e),i),...l,style:$,ref:e.overlayRef,"data-entering":c||void 0,"data-exiting":e.isExiting||void 0},s.createElement(z,{values:[[x,{modalProps:r,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[u,a]]},l.children)))}function g(t){let{modalProps:e,modalRef:n,isExiting:a,isDismissable:r}=o.useContext(x),i=o.useContext(u),c=o.useMemo(()=>A(t.modalRef,n),[t.modalRef,n]),l=h(c),f=O(l),$=C({...t,defaultClassName:"react-aria-Modal",values:{isEntering:f,isExiting:a,state:i}});return s.createElement("div",{...p(R(t),e),...$,ref:l,"data-entering":f||void 0,"data-exiting":a||void 0},r&&s.createElement(K,{onDismiss:i.close}),$.children)}const ee="flow--overlay",te={overlay:ee,"overlay-fade":"flow--overlay--overlay-fade"},D=t=>{const{controller:e,children:n,className:a}=t,r=E({reuseControllerFromContext:!0}),i=e??r,c=i.useIsOpen(),l=I(te.overlay,a);return s.createElement(P,{className:l,isDismissable:!0,isOpen:c,onOpenChange:f=>i.setOpen(f)},s.createElement(X,null,s.createElement(V,null,s.createElement(y,{value:i},n))))};D.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const N=t=>{const e=E(),n={Button:{render:(a,r)=>s.createElement(M,{openOverlay:e},s.createElement(a,{...r}))}};return s.createElement(y,{value:e},s.createElement(H,{props:n},t.children))};N.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger"};N.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger"};D.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};export{N as O,D as a};
