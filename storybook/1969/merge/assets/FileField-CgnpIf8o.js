import{j as i}from"./iframe-DE1y3h6K.js";import{f as c}from"./FormField.module-CqWyJNQI.js";import{a as g,c as w}from"./Form-BpLNV-sf.js";import{$ as P}from"./FieldError-DorlsVNp.js";import{b as I,$ as j}from"./Group-BoarCDIk.js";import{b as v}from"./utils-BuwGAin4.js";import{P as x,f as C}from"./PropsContextProvider-BpZWWW7m.js";import"./browser-Ts-qWG1Z.js";import{c as B}from"./clsx-B-dksMZM.js";const p="mittwald.flow-core.file.awaitedArrayBuffer";function R(e){return p in e&&e[p]instanceof ArrayBuffer&&!e[p].detached}const A=async e=>{if(R(e))return e;const n=await e.arrayBuffer();return Object.assign(e,{[p]:n}),e},N="flow--file-field--trigger",q={trigger:N},h=e=>{const{children:n,isDisabled:o,onChange:r,ref:m}=e,a=v(m),l=()=>{var t,s;(t=a.current)!=null&&t.value&&(a.current.value="",r==null||r(null)),(s=a.current)==null||s.click()},d=t=>{r==null||r(t.target.files)},u={Button:{onPress:l,className:q.trigger,isDisabled:o}};return i.jsxs(x,{props:u,mergeInParentContext:!0,children:[n,i.jsx(I,{style:{display:"none"},type:"file",ref:a,onChange:d})]})};h.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""}},composes:["PropsWithChildren"]};const D="flow--file-field",E={fileField:D},T=C("FileField",e=>{const{children:n,ref:o,isRequired:r,isInvalid:m,isDisabled:a,validationBehavior:l,onChange:d,isReadOnly:u,...t}=e,s=v(o),f=g({value:void 0,validationBehavior:l,isInvalid:m});w({validationBehavior:l},f,s);const F={...t,ref:s,"aria-invalid":f.displayValidation.isInvalid,value:void 0},$={Label:{className:c.label,optional:!e.isRequired},FieldDescription:{className:c.fieldDescription},FieldError:{className:c.customFieldError}},b=y=>{y&&d&&Promise.all(Array.from(y).map(A)).then(()=>d(y))};return i.jsx(j.Provider,{value:F,children:i.jsx(P.Provider,{value:f.displayValidation,children:i.jsx(x,{props:$,children:i.jsx("div",{"data-readOnly":u,"data-required":!!r||void 0,"data-invalid":f.displayValidation.isInvalid||void 0,className:B(c.formField,E.fileField),children:i.jsx(h,{ref:o,onChange:b,isDisabled:a,children:n})})})})})});T.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"FileField"};export{T as F,A as a};
