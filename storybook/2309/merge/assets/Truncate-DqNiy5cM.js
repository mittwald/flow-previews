import{r as a,j as g}from"./iframe--WfF81Kk.js";import{c as W}from"./clsx-B-dksMZM.js";import{e as k}from"./remote-BYVMC2eP.js";import{e as z}from"./index-CYxiP9KI.js";const B="flow--truncate",F="flow--truncate--ellipsis",j={truncate:B,ellipsis:F};function M(){var r=a.useRef(null);if(r.current)return r.current;var t=document.createElement("canvas");return r.current=t.getContext("2d"),r.current}function O(r){var t=r.text,v=r.width,n=v===void 0?0:v,u=r.offset,i=u===void 0?8:u,f=r.ellipsis,m=f===void 0?"...":f,h=a.useState(0),T=h[0],E=h[1],C=a.useState(!1),_=C[0],N=C[1],y=a.useState(!1),R=y[0],$=y[1],c=a.useRef(null),o=M(),S=a.useCallback(function(){if(c.current){var e=window.getComputedStyle(c.current),s=[e["font-weight"],e["font-style"],e["font-size"],e["font-family"]].join(" ");o.font=s}},[o]),p=a.useCallback(function(){var e,s;n?s=n:s=(e=c.current)===null||e===void 0?void 0:e.getBoundingClientRect().width,E(s);var l=o.measureText(t).width;N(s<l),$(!0)},[o,t,n]);a.useEffect(function(){S(),p()},[p,S]),a.useEffect(function(){var e=new ResizeObserver(function(s){s.length>0&&p()});return c.current&&e.observe(c.current),function(){e.disconnect()}},[p]);var b=a.useMemo(function(){if(!_)return t;for(var e=t.length,s=t.slice(e-i,e),l,x=e-i,d=0;d<x-1;){var w=Math.floor((x-d)/2+d);l=t.slice(0,w),o.measureText(l+m+s).width<T?d=w:x=w}return l=t.slice(0,d||1),l+m+s},[o,m,i,_,T,t]);return a.createElement("div",{ref:c,style:{width:n||"100%",whiteSpace:"nowrap"}},b)}const P=r=>{const{children:t,className:v,title:n,offset:u,ellipsis:i}=r,f=W(j.truncate,v);if(!z()&&(u||i)){const h=k(t)??"";return g.jsx("span",{title:n,className:f,children:g.jsx(O,{offset:u,ellipsis:i,text:h})})}return g.jsx("span",{title:n,className:W(f,j.ellipsis),children:t})};P.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Truncate",props:{title:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren","PropsWithClassName","Omit"]};export{P as T};
