import{r as l,R as i}from"./index-uCp2LrAq.js";import{c as I}from"./clsx-B-dksMZM.js";import{u as E,O as h,A as M}from"./Action-DB0haMi_.js";import{a as T,g as y,i as p,j as O,b as C,f as L,h as _}from"./utils-DZgOXw50.js";import{b as z,c as A,d as B,e as F,f as u,g as U,h as q,i as K}from"./Dialog-DmW6zZF1.js";import{$ as w,b as x}from"./index-CFQDndEx.js";import{$ as R}from"./filterDOMProps-CeZl_uWj.js";import{a as V}from"./OverlayArrow-BDeolAmD.js";import{P as W}from"./PropsContextProvider-v92cY4my.js";let f=typeof document<"u"&&window.visualViewport;function j(){let t=w(),[e,r]=l.useState(()=>t?{width:0,height:0}:v());return l.useEffect(()=>{let a=()=>{r(n=>{let s=v();return s.width===n.width&&s.height===n.height?n:s})};return f?f.addEventListener("resize",a):window.addEventListener("resize",a),()=>{f?f.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function v(){return{width:f&&(f==null?void 0:f.width)||window.innerWidth,height:f&&(f==null?void 0:f.height)||window.innerHeight}}function H(t,e,r){let{overlayProps:a,underlayProps:n}=z({...t,isOpen:e.isOpen,onClose:e.close},r);return A({isDisabled:!e.isOpen}),B(),l.useEffect(()=>{if(e.isOpen)return F([r.current])},[e.isOpen,r]),{modalProps:x(a),underlayProps:n}}const k=l.createContext(null),b=l.createContext(null);function G(t,e){if(l.useContext(b))return i.createElement(g,{...t,modalRef:e},t.children);let{isDismissable:a,isKeyboardDismissDisabled:n,isOpen:s,defaultOpen:o,onOpenChange:d,children:$,isEntering:c,isExiting:m,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:S,...N}=t;return i.createElement(P,{isDismissable:a,isKeyboardDismissDisabled:n,isOpen:s,defaultOpen:o,onOpenChange:d,isEntering:c,isExiting:m,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:S},i.createElement(g,{...N,modalRef:e},$))}const J=l.forwardRef(G);function Q(t,e){[t,e]=T(t,e,k);let r=l.useContext(u),a=V(t),n=t.isOpen!=null||t.defaultOpen!=null||!r?a:r,s=y(e),o=l.useRef(null),d=p(s,n.isOpen),$=p(o,n.isOpen),c=d||$||t.isExiting||!1,m=w();return!n.isOpen&&!c||m?null:i.createElement(X,{...t,state:n,isExiting:c,overlayRef:s,modalRef:o})}const P=l.forwardRef(Q);function X({UNSTABLE_portalContainer:t,...e}){let r=e.modalRef,{state:a}=e,{modalProps:n,underlayProps:s}=H(e,a,r),o=O(e.overlayRef)||e.isEntering||!1,d=C({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:o,isExiting:e.isExiting,state:a}}),$=j(),c={...d.style,"--visual-viewport-height":$.height+"px"};return i.createElement(U,{isExiting:e.isExiting,portalContainer:t},i.createElement("div",{...x(R(e),s),...d,style:c,ref:e.overlayRef,"data-entering":o||void 0,"data-exiting":e.isExiting||void 0},i.createElement(L,{values:[[b,{modalProps:n,modalRef:r,isExiting:e.isExiting,isDismissable:e.isDismissable}],[u,a]]},d.children)))}function g(t){let{modalProps:e,modalRef:r,isExiting:a,isDismissable:n}=l.useContext(b),s=l.useContext(u),o=l.useMemo(()=>_(t.modalRef,r),[t.modalRef,r]),d=y(o),$=O(d),c=C({...t,defaultClassName:"react-aria-Modal",values:{isEntering:$,isExiting:a,state:s}});return i.createElement("div",{...x(R(t),e),...c,ref:d,"data-entering":$||void 0,"data-exiting":a||void 0},n&&i.createElement(q,{onDismiss:s.close}),c.children)}const Y="flow--overlay",Z={overlay:Y,"overlay-fade":"flow--overlay--overlay-fade"},ee=t=>{const{controller:e,children:r,isDismissable:a=!0,className:n}=t,s=E({reuseControllerFromContext:!0}),o=e??s,d=o.useIsOpen(),$=I(Z.overlay,n);return i.createElement(P,{className:$,isDismissable:a,isOpen:d,onOpenChange:c=>o.setOpen(c)},i.createElement(J,null,i.createElement(K,null,i.createElement(h,{value:o},r))))};ee.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const te=t=>{const e=E(),r={Button:{render:(a,n)=>i.createElement(M,{openOverlay:e},i.createElement(a,{...n}))}};return i.createElement(h,{value:e},i.createElement(W,{props:r,mergeInParentContext:!0},t.children))};te.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger"};export{te as O,ee as a};
