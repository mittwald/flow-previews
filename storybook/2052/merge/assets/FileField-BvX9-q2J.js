import{j as r}from"./iframe-BziZnbbf.js";import{$ as w,b as I}from"./useFormValidation-CTvaA84d.js";import{u as P,$ as R}from"./useFieldComponent-yHiwdZcU.js";import{a as B,$ as A}from"./Input-Diy1RLsK.js";import{b as v}from"./utils-C0RTyIHD.js";import{P as g,f as q}from"./flowComponent-JHIQPa02.js";import"./browser-BTvp61GS.js";import{u as T}from"./useMakeFocusable-BDpn2_Dk.js";const l="mittwald.flow-core.file.awaitedArrayBuffer";function E(e){return l in e&&e[l]instanceof ArrayBuffer&&!e[l].detached}const O=async e=>{if(E(e))return e;const n=await e.arrayBuffer();return Object.assign(e,{[l]:n}),e},V="flow--file-field--file-input",N="flow--file-field--trigger",y={FileInput:V,trigger:N},x=e=>{const{children:n,isDisabled:d,onChange:t,isReadOnly:f,ref:c}=e,i=v(c),s=()=>{i.current?.value&&(i.current.value="",t?.(null)),i.current?.click()},a=u=>{t?.(u.target.files)},p={Button:{onPress:s,className:y.trigger,isDisabled:d,isReadOnly:f}};return r.jsxs(g,{props:p,children:[n,r.jsx(B,{className:y.FileInput,type:"file",ref:i,onChange:a})]})};x.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren"]};const _=q("FileField",e=>{const{children:n,ref:d,isRequired:t,isInvalid:f,isDisabled:c,validationBehavior:i,onChange:s,isReadOnly:a,...p}=e,{FieldErrorView:u,FieldErrorResetContext:$,fieldProps:b,fieldPropsContext:F}=P(e),m=v(d),o=w({value:void 0,validationBehavior:i,isInvalid:f});I({validationBehavior:i},o,m);const C={...p,"aria-invalid":o.displayValidation.isInvalid,value:void 0},j=h=>{h&&s&&Promise.all(Array.from(h).map(O)).then(()=>s(h))};return T(m),r.jsx("div",{...b,children:r.jsx(A.Provider,{value:C,children:r.jsxs(R.Provider,{value:o.displayValidation,children:[r.jsx($,{children:r.jsx(g,{props:F,children:r.jsx("div",{"data-readonly":a,"data-required":!!t||void 0,"data-invalid":o.displayValidation.isInvalid||void 0,children:r.jsx(x,{ref:m,isReadOnly:a,onChange:a?void 0:j,isDisabled:c,children:n})})})}),r.jsx(u,{})]})})})});_.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"FileField"};export{_ as F,O as a};
