import{j as t}from"./iframe-hiH37hms.js";import{$ as I,f as d}from"./FormField.module-CapR5K3V.js";import{$ as w,b as P}from"./useFormValidation-DybUzXH7.js";import{a as j,$ as R}from"./Input-DYBCaGaK.js";import{b}from"./utils-JHWv327y.js";import{P as F,f as B}from"./flowComponent-00c8POVD.js";import"./browser-BuBe5AKm.js";import{u as C}from"./useMakeFocusable-CTKbAYTu.js";const f="mittwald.flow-core.file.awaitedArrayBuffer";function N(e){return f in e&&e[f]instanceof ArrayBuffer&&!e[f].detached}const q=async e=>{if(N(e))return e;const s=await e.arrayBuffer();return Object.assign(e,{[f]:s}),e},A="flow--file-field--file-input",T="flow--file-field--trigger",v={FileInput:A,trigger:T},$=e=>{const{children:s,isDisabled:c,onChange:i,isReadOnly:p,ref:u}=e,a=b(u),l=()=>{var r,n;(r=a.current)!=null&&r.value&&(a.current.value="",i==null||i(null)),(n=a.current)==null||n.click()},o=r=>{i==null||i(r.target.files)},m={Button:{onPress:l,className:v.trigger,isDisabled:c,isReadOnly:p}};return t.jsxs(F,{props:m,children:[s,t.jsx(j,{className:v.FileInput,type:"file",ref:a,onChange:o})]})};$.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren"]};const D=B("FileField",e=>{const{children:s,ref:c,isRequired:i,isInvalid:p,isDisabled:u,validationBehavior:a,onChange:l,isReadOnly:o,...m}=e,r=b(c),n=w({value:void 0,validationBehavior:a,isInvalid:p});P({validationBehavior:a},n,r);const h={...m,"aria-invalid":n.displayValidation.isInvalid,value:void 0},g={Label:{className:d.label,optional:!e.isRequired},FieldDescription:{className:d.fieldDescription},FieldError:{className:d.customFieldError}},x=y=>{y&&l&&Promise.all(Array.from(y).map(q)).then(()=>l(y))};return C(r),t.jsx(R.Provider,{value:h,children:t.jsx(I.Provider,{value:n.displayValidation,children:t.jsx(F,{props:g,children:t.jsx("div",{"data-readonly":o,"data-required":!!i||void 0,"data-invalid":n.displayValidation.isInvalid||void 0,className:d.formField,children:t.jsx($,{ref:r,isReadOnly:o,onChange:o?void 0:x,isDisabled:u,children:s})})})})})});D.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"FileField"};export{D as F,q as a};
