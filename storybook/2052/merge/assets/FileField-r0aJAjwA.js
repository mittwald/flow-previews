import{j as r}from"./iframe-CBVsO-nV.js";import{$ as I,b as P}from"./useFormValidation-DWnxi1QZ.js";import{u as C,$ as R}from"./useFieldComponent-BL--pJL1.js";import{a as B,$ as A}from"./Input-Bo67AZIS.js";import{b as x}from"./utils-BP7SriO_.js";import{P as $,f as q}from"./flowComponent-DToNFNtJ.js";import"./browser-C8nzMZsV.js";import{u as T}from"./useMakeFocusable-D1yavyON.js";const f="mittwald.flow-core.file.awaitedArrayBuffer";function E(e){return f in e&&e[f]instanceof ArrayBuffer&&!e[f].detached}const O=async e=>{if(E(e))return e;const t=await e.arrayBuffer();return Object.assign(e,{[f]:t}),e},V="flow--file-field--file-input",N="flow--file-field--trigger",h={FileInput:V,trigger:N},b=e=>{const{children:t,isDisabled:c,onChange:i,isReadOnly:p,ref:u}=e,n=x(u),o=()=>{var a,l;(a=n.current)!=null&&a.value&&(n.current.value="",i==null||i(null)),(l=n.current)==null||l.click()},s=a=>{i==null||i(a.target.files)},m={Button:{onPress:o,className:h.trigger,isDisabled:c,isReadOnly:p}};return r.jsxs($,{props:m,children:[t,r.jsx(B,{className:h.FileInput,type:"file",ref:n,onChange:s})]})};b.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren"]};const _=q("FileField",e=>{const{children:t,ref:c,isRequired:i,isInvalid:p,isDisabled:u,validationBehavior:n,onChange:o,isReadOnly:s,...m}=e,{FieldErrorView:a,FieldErrorResetContext:l,fieldProps:F,fieldPropsContext:g}=C(e),y=x(c),d=I({value:void 0,validationBehavior:n,isInvalid:p});P({validationBehavior:n},d,y);const j={...m,"aria-invalid":d.displayValidation.isInvalid,value:void 0},w=v=>{v&&o&&Promise.all(Array.from(v).map(O)).then(()=>o(v))};return T(y),r.jsx("div",{...F,children:r.jsx(A.Provider,{value:j,children:r.jsxs(R.Provider,{value:d.displayValidation,children:[r.jsx(l,{children:r.jsx($,{props:g,children:r.jsx("div",{"data-readonly":s,"data-required":!!i||void 0,"data-invalid":d.displayValidation.isInvalid||void 0,children:r.jsx(b,{ref:y,isReadOnly:s,onChange:s?void 0:w,isDisabled:u,children:t})})})}),r.jsx(a,{})]})})})});_.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"FileField"};export{_ as F,O as a};
