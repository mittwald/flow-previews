import{r,R as Ae,j as x}from"./iframe-hiH37hms.js";import{f as ke,P as De,A as Se}from"./flowComponent-00c8POVD.js";import{u as Te}from"./useOverlayController-DvRmJzEO.js";import{b as we}from"./Option-D0yhE7IF.js";import{T as Ne}from"./Text-CsOmTVyE.js";import{e as Be}from"./ReactAriaControlledValueFix-BfvPjJZR.js";import{$ as B}from"./useLocalizedStringFormatter-BRvamSQ7.js";import{$ as Ve}from"./useFilter-BCPz-iN5.js";import{c as Ke}from"./useFocusRing-WUR2BD9e.js";import{i as je}from"./OverlayArrow-CEJUr9iX.js";import{a as Oe,$ as Ue}from"./context-BuwG6neX.js";import{b as Me,c as He,g as ze,d as We}from"./utils-JHWv327y.js";import{g as qe,d as y,a as Ge,$ as V}from"./index-CTy9APi5.js";import{x as Je,o as Ze,B as Qe,b as D,a as Xe}from"./useFocus-B9-o-MIg.js";import{$ as Ye}from"./Label-C0jnYKOc.js";import{$ as _e}from"./useEvent-CS-uDTBx.js";import{i as S,j as et,k as tt,l as T,m as w,n as ot,o as rt}from"./SelectionManager-CSTWFJsn.js";import{$ as lt}from"./useControlledState-BFPCb-Qt.js";var K={};K={collectionLabel:"مقترحات"};var j={};j={collectionLabel:"Предложения"};var O={};O={collectionLabel:"Návrhy"};var U={};U={collectionLabel:"Forslag"};var M={};M={collectionLabel:"Empfehlungen"};var H={};H={collectionLabel:"Προτάσεις"};var z={};z={collectionLabel:"Suggestions"};var W={};W={collectionLabel:"Sugerencias"};var q={};q={collectionLabel:"Soovitused"};var G={};G={collectionLabel:"Ehdotukset"};var J={};J={collectionLabel:"Suggestions"};var Z={};Z={collectionLabel:"הצעות"};var Q={};Q={collectionLabel:"Prijedlozi"};var X={};X={collectionLabel:"Javaslatok"};var Y={};Y={collectionLabel:"Suggerimenti"};var _={};_={collectionLabel:"候補"};var ee={};ee={collectionLabel:"제안"};var te={};te={collectionLabel:"Pasiūlymai"};var oe={};oe={collectionLabel:"Ieteikumi"};var re={};re={collectionLabel:"Forslag"};var le={};le={collectionLabel:"Suggesties"};var ae={};ae={collectionLabel:"Sugestie"};var ne={};ne={collectionLabel:"Sugestões"};var ce={};ce={collectionLabel:"Sugestões"};var ue={};ue={collectionLabel:"Sugestii"};var se={};se={collectionLabel:"Предложения"};var ie={};ie={collectionLabel:"Návrhy"};var fe={};fe={collectionLabel:"Predlogi"};var de={};de={collectionLabel:"Predlozi"};var pe={};pe={collectionLabel:"Förslag"};var $e={};$e={collectionLabel:"Öneriler"};var be={};be={collectionLabel:"Пропозиції"};var ve={};ve={collectionLabel:"建议"};var me={};me={collectionLabel:"建議"};var xe={};xe={"ar-AE":K,"bg-BG":j,"cs-CZ":O,"da-DK":U,"de-DE":M,"el-GR":H,"en-US":z,"es-ES":W,"et-EE":q,"fi-FI":G,"fr-FR":J,"he-IL":Z,"hr-HR":Q,"hu-HU":X,"it-IT":Y,"ja-JP":_,"ko-KR":ee,"lt-LT":te,"lv-LV":oe,"nb-NO":re,"nl-NL":le,"pl-PL":ae,"pt-BR":ne,"pt-PT":ce,"ro-RO":ue,"ru-RU":se,"sk-SK":ie,"sl-SI":fe,"sr-SP":de,"sv-SE":pe,"tr-TR":$e,"uk-UA":be,"zh-CN":ve,"zh-TW":me};function at(o){return o&&o.__esModule?o.default:o}function nt(o,l){let{inputRef:s,collectionRef:a,filter:i,disableAutoFocusFirst:$=!1,disableVirtualFocus:b=!1}=o,n=qe(),p=r.useRef(void 0),f=r.useRef(!1),c=r.useRef(null),g=r.useRef(null),E=!(Je()==="virtual"&&(Ze()||Qe()))&&!b;r.useEffect(()=>()=>clearTimeout(p.current),[]);let d=y(e=>{!e.isTrusted&&E&&s.current&&D(Xe(s.current))!==s.current&&s.current.focus();let t=e.target;e.isTrusted||!t||c.current===t.id||(clearTimeout(p.current),t!==a.current?f.current?(c.current=t.id,p.current=setTimeout(()=>{l.setFocusedNodeId(t.id)},500)):(c.current=t.id,l.setFocusedNodeId(t.id)):(c.current=null,l.setFocusedNodeId(null)),f.current=!1)}),F=r.useCallback(e=>{var t;if(e!=null){var u;(u=g.current)===null||u===void 0||u.removeEventListener("focusin",d),g.current=e,e.addEventListener("focusin",d)}else(t=g.current)===null||t===void 0||t.removeEventListener("focusin",d)},[d]),ge=Me(r.useMemo(()=>Ge(a,F),[a,F])),Ee=y(()=>{var e;f.current=!0,(e=a.current)===null||e===void 0||e.dispatchEvent(new CustomEvent(S,{cancelable:!0,bubbles:!0,detail:{focusStrategy:"first"}}))}),A=y(e=>{var t;et(D()),c.current=null,l.setFocusedNodeId(null);let u=new CustomEvent(tt,{cancelable:!0,bubbles:!0,detail:{clearFocusKey:e}});clearTimeout(p.current),f.current=!1,(t=a.current)===null||t===void 0||t.dispatchEvent(u)}),h=r.useRef("");_e(s,"input",e=>{let{inputType:t}=e;h.current=t});let Fe=e=>{h.current==="insertText"&&!$?Ee():(h.current.includes("insert")||h.current.includes("delete")||h.current.includes("history"))&&(A(!0),rt(document)===s.current&&w(s.current,null)),l.setInputValue(e)},k=r.useRef(null),he=e=>{if(k.current=e.target,e.nativeEvent.isComposing)return;let t=c.current;switch(e.key){case"a":if(ot(e))return;break;case"Escape":if(e.isDefaultPrevented())return;break;case" ":return;case"Tab":"continuePropagation"in e&&e.continuePropagation();return;case"Home":case"End":case"PageDown":case"PageUp":case"ArrowUp":case"ArrowDown":{var u;if((e.key==="Home"||e.key==="End")&&t==null&&e.shiftKey)return;e.preventDefault();let v=new CustomEvent(S,{cancelable:!0,bubbles:!0});(u=a.current)===null||u===void 0||u.dispatchEvent(v);break}}e.isPropagationStopped()||e.stopPropagation();let m=!0;if(a.current!==null){var R;if(t==null)m=((R=a.current)===null||R===void 0?void 0:R.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1;else{let v=document.getElementById(t);m=(v==null?void 0:v.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1}}if(m)switch(e.key){case"ArrowLeft":case"ArrowRight":A();break;case"Enter":if(t!=null){let v=document.getElementById(t);v==null||v.click()}break}else e.preventDefault()},L=y(e=>{if(e.target===k.current){var t;e.stopImmediatePropagation();let u=c.current;if(u==null)(t=a.current)===null||t===void 0||t.dispatchEvent(new KeyboardEvent(e.type,e));else{let m=document.getElementById(u);m==null||m.dispatchEvent(new KeyboardEvent(e.type,e))}}});r.useEffect(()=>(document.addEventListener("keyup",L,!0),()=>{document.removeEventListener("keyup",L,!0)}),[L]);let ye=B(at(xe),"@react-aria/autocomplete"),Le=Ye({id:n,"aria-label":ye.format("collectionLabel")}),Ce=r.useCallback((e,t)=>i?i(e,l.inputValue,t):!0,[l.inputValue,i]),Ie=e=>{if(!e.isTrusted)return;let t=c.current?document.getElementById(c.current):null;t&&T(t,e.relatedTarget)},Re=e=>{if(!e.isTrusted)return;let t=c.current?document.getElementById(c.current):null;if(t){let u=e.target;queueMicrotask(()=>{T(u,t),w(t,u)})}},C={value:l.inputValue,onChange:Fe};var I;let Pe={onKeyDown:he,"aria-activedescendant":(I=l.focusedNodeId)!==null&&I!==void 0?I:void 0,onBlur:Ie,onFocus:Re};return n&&(C={...C,...E&&Pe,enterKeyHint:"go","aria-controls":n,"aria-autocomplete":"list",autoCorrect:"off",spellCheck:"false",autoComplete:"off"}),{inputProps:C,collectionProps:V(Le,{shouldUseVirtualFocus:E,disallowTypeAhead:!0}),collectionRef:ge,filter:i!=null?Ce:void 0}}function ct(o){let{onInputChange:l,inputValue:s,defaultInputValue:a=""}=o,i=f=>{l&&l(f)},[$,b]=r.useState(null),[n,p]=lt(s,a,i);return{inputValue:n,setInputValue:p,focusedNodeId:$,setFocusedNodeId:b}}const ut=r.createContext(null),st=r.createContext(null);function it(o){let l=He(ut,o.slot);o=V(l,o);let{filter:s,disableAutoFocusFirst:a}=o,i=ct(o),$=r.useRef(null),b=r.useRef(null),{inputProps:n,collectionProps:p,collectionRef:f,filter:c}=nt({...ze(o),filter:s,disableAutoFocusFirst:a,inputRef:$,collectionRef:b},i);return Ae.createElement(We,{values:[[st,i],[Oe,{...n,ref:$}],[Ue,{...p,filter:c,ref:f}]]},o.children)}const ft={"de-DE":{"autocomplete.empty":"Keine passenden Einträge"},"en-US":{"autocomplete.empty":"No matching entries"}},dt="flow--autocomplete--popover",pt="flow--autocomplete--empty",N={popover:dt,empty:pt},$t=ke("Autocomplete",o=>{const{children:l,...s}=o,{contains:a}=Ve({sensitivity:"base"}),i=B(ft),$=r.useRef(null),b=r.useRef(null),n=Te("Popover",{reuseControllerFromContext:!1}),p=Ke({onBlurWithin:n.close}),f={onKeyDown:d=>{d.key==="Enter"&&n.isOpen&&d.preventDefault()},ref:b},c=()=>x.jsx(Ne,{className:N.empty,children:i.format("autocomplete.empty")}),g={SearchField:f,TextField:f,Option:{tunnelId:"options"},Popover:{className:N.popover}},P=d=>{d?n.isOpen||n.open():n.close()},E=d=>{const F=b.current;F&&Be(F,String(d)),n.close()};return x.jsx(De,{props:g,children:x.jsx("div",{...p.focusWithinProps,ref:$,children:x.jsx(je,{getContainer:()=>$.current,children:x.jsxs(it,{onInputChange:P,filter:a,disableAutoFocusFirst:!0,...s,children:[l,x.jsx(we,{onAction:E,triggerRef:b,controller:n,renderEmptyState:c,isNonModal:!0,placement:"bottom start",children:x.jsx(Se,{id:"options"})})]})})})})});$t.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Autocomplete"};export{$t as A};
