import{r as u,R as I}from"./index-BwDkhjyp.js";import{d as j,c as Z,$ as ee,b as A}from"./index-DVe9vSxq.js";import{g as te}from"./utils-CcQIssJO.js";const m=e=>{var r;return(r=e==null?void 0:e.ownerDocument)!==null&&r!==void 0?r:document},v=e=>e&&"window"in e&&e.window===e?e:m(e).defaultView||window;function O(e){if(re())e.focus({preventScroll:!0});else{let r=ne(e);e.focus(),oe(r)}}let P=null;function re(){if(P==null){P=!1;try{document.createElement("div").focus({get preventScroll(){return P=!0,!0}})}catch{}}return P}function ne(e){let r=e.parentNode,t=[],n=document.scrollingElement||document.documentElement;for(;r instanceof HTMLElement&&r!==n;)(r.offsetHeight<r.scrollHeight||r.offsetWidth<r.scrollWidth)&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),r=r.parentNode;return n instanceof HTMLElement&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),t}function oe(e){for(let{element:r,scrollTop:t,scrollLeft:n}of e)r.scrollTop=t,r.scrollLeft=n}function S(e){var r;return typeof window>"u"||window.navigator==null?!1:((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function B(e){var r;return typeof window<"u"&&window.navigator!=null?e.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function K(){return B(/^Mac/i)}function ae(){return B(/^iPhone/i)}function ie(){return B(/^iPad/i)||K()&&navigator.maxTouchPoints>1}function se(){return ae()||ie()}function Se(){return K()||se()}function Me(){return S(/AppleWebKit/i)&&!ue()}function ue(){return S(/Chrome/i)}function N(){return S(/Android/i)}function Ce(){return S(/Firefox/i)}let E=new Map,D=new Set;function V(){if(typeof window>"u")return;function e(n){return"propertyName"in n}let r=n=>{if(!e(n)||!n.target)return;let o=E.get(n.target);o||(o=new Set,E.set(n.target,o),n.target.addEventListener("transitioncancel",t,{once:!0})),o.add(n.propertyName)},t=n=>{if(!e(n)||!n.target)return;let o=E.get(n.target);if(o&&(o.delete(n.propertyName),o.size===0&&(n.target.removeEventListener("transitioncancel",t),E.delete(n.target)),E.size===0)){for(let s of D)s();D.clear()}};document.body.addEventListener("transitionrun",r),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?V():document.addEventListener("DOMContentLoaded",V));function ce(e){requestAnimationFrame(()=>{E.size===0?e():D.add(e)})}function de(e,r){j(()=>{if(e&&e.ref&&r)return e.ref.current=r.current,()=>{e.ref&&(e.ref.current=null)}})}function fe(e){return e.mozInputSource===0&&e.isTrusted?!0:N()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function De(e){return!N()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}class le{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(r,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=r}}function z(e){let r=u.useRef({isFocused:!1,observer:null});j(()=>{const n=r.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let t=Z(n=>{e==null||e(n)});return u.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){r.current.isFocused=!0;let o=n.target,s=c=>{r.current.isFocused=!1,o.disabled&&t(new le("blur",c)),r.current.observer&&(r.current.observer.disconnect(),r.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),r.current.observer=new MutationObserver(()=>{if(r.current.isFocused&&o.disabled){var c;(c=r.current.observer)===null||c===void 0||c.disconnect();let a=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),r.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function G(e){let{isDisabled:r,onFocus:t,onBlur:n,onFocusChange:o}=e;const s=u.useCallback(d=>{if(d.target===d.currentTarget)return n&&n(d),o&&o(!1),!0},[n,o]),c=z(s),a=u.useCallback(d=>{const f=m(d.target);d.target===d.currentTarget&&f.activeElement===d.target&&(t&&t(d),o&&o(!0),c(d))},[o,t,c]);return{focusProps:{onFocus:!r&&(t||o||n)?a:void 0,onBlur:!r&&(n||o)?s:void 0}}}let b=null,T=new Set,y=new Map,p=!1,k=!1;const be={Tab:!0,Escape:!0};function M(e,r){for(let t of T)t(e,r)}function $e(e){return!(e.metaKey||!K()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function F(e){p=!0,$e(e)&&(b="keyboard",M("keyboard",e))}function l(e){b="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(p=!0,M("pointer",e))}function U(e){fe(e)&&(p=!0,b="virtual")}function q(e){e.target===window||e.target===document||(!p&&!k&&(b="virtual",M("virtual",e)),p=!1,k=!1)}function Y(){p=!1,k=!0}function x(e){if(typeof window>"u"||y.get(v(e)))return;const r=v(e),t=m(e);let n=r.HTMLElement.prototype.focus;r.HTMLElement.prototype.focus=function(){p=!0,n.apply(this,arguments)},t.addEventListener("keydown",F,!0),t.addEventListener("keyup",F,!0),t.addEventListener("click",U,!0),r.addEventListener("focus",q,!0),r.addEventListener("blur",Y,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",l,!0),t.addEventListener("pointermove",l,!0),t.addEventListener("pointerup",l,!0)):(t.addEventListener("mousedown",l,!0),t.addEventListener("mousemove",l,!0),t.addEventListener("mouseup",l,!0)),r.addEventListener("beforeunload",()=>{J(e)},{once:!0}),y.set(r,{focus:n})}const J=(e,r)=>{const t=v(e),n=m(e);r&&n.removeEventListener("DOMContentLoaded",r),y.has(t)&&(t.HTMLElement.prototype.focus=y.get(t).focus,n.removeEventListener("keydown",F,!0),n.removeEventListener("keyup",F,!0),n.removeEventListener("click",U,!0),t.removeEventListener("focus",q,!0),t.removeEventListener("blur",Y,!1),typeof PointerEvent<"u"?(n.removeEventListener("pointerdown",l,!0),n.removeEventListener("pointermove",l,!0),n.removeEventListener("pointerup",l,!0)):(n.removeEventListener("mousedown",l,!0),n.removeEventListener("mousemove",l,!0),n.removeEventListener("mouseup",l,!0)),y.delete(t))};function ve(e){const r=m(e);let t;return r.readyState!=="loading"?x(e):(t=()=>{x(e)},r.addEventListener("DOMContentLoaded",t)),()=>J(e,t)}typeof document<"u"&&ve();function Q(){return b!=="pointer"}function pe(){return b}function ke(e){b=e,M(e,null)}function We(){x();let[e,r]=u.useState(b);return u.useEffect(()=>{let t=()=>{r(b)};return T.add(t),()=>{T.delete(t)}},[]),ee()?null:e}const ge=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Ee(e,r,t){var n;const o=typeof window<"u"?v(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?v(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,c=typeof window<"u"?v(t==null?void 0:t.target).HTMLElement:HTMLElement,a=typeof window<"u"?v(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof o&&!ge.has(t==null||(n=t.target)===null||n===void 0?void 0:n.type)||(t==null?void 0:t.target)instanceof s||(t==null?void 0:t.target)instanceof c&&(t==null?void 0:t.target.isContentEditable),!(e&&r==="keyboard"&&t instanceof a&&!be[t.key])}function me(e,r,t){x(),u.useEffect(()=>{let n=(o,s)=>{Ee(!!(t!=null&&t.isTextInput),o,s)&&e(Q())};return T.add(n),()=>{T.delete(n)}},r)}function he(e){let{isDisabled:r,onBlurWithin:t,onFocusWithin:n,onFocusWithinChange:o}=e,s=u.useRef({isFocusWithin:!1}),c=u.useCallback(f=>{s.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(s.current.isFocusWithin=!1,t&&t(f),o&&o(!1))},[t,o,s]),a=z(c),d=u.useCallback(f=>{!s.current.isFocusWithin&&document.activeElement===f.target&&(n&&n(f),o&&o(!0),s.current.isFocusWithin=!0,a(f))},[n,o,a]);return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:c}}}let H=!1,C=0;function W(){H=!0,setTimeout(()=>{H=!1},50)}function R(e){e.pointerType==="touch"&&W()}function we(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",R):document.addEventListener("touchend",W),C++,()=>{C--,!(C>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",R):document.removeEventListener("touchend",W))}}function Ie(e){let{onHoverStart:r,onHoverChange:t,onHoverEnd:n,isDisabled:o}=e,[s,c]=u.useState(!1),a=u.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;u.useEffect(we,[]);let{hoverProps:d,triggerHoverEnd:f}=u.useMemo(()=>{let h=(i,g)=>{if(a.pointerType=g,o||g==="touch"||a.isHovered||!i.currentTarget.contains(i.target))return;a.isHovered=!0;let L=i.currentTarget;a.target=L,r&&r({type:"hoverstart",target:L,pointerType:g}),t&&t(!0),c(!0)},w=(i,g)=>{if(a.pointerType="",a.target=null,g==="touch"||!a.isHovered)return;a.isHovered=!1;let L=i.currentTarget;n&&n({type:"hoverend",target:L,pointerType:g}),t&&t(!1),c(!1)},$={};return typeof PointerEvent<"u"?($.onPointerEnter=i=>{H&&i.pointerType==="mouse"||h(i,i.pointerType)},$.onPointerLeave=i=>{!o&&i.currentTarget.contains(i.target)&&w(i,i.pointerType)}):($.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},$.onMouseEnter=i=>{!a.ignoreEmulatedMouseEvents&&!H&&h(i,"mouse"),a.ignoreEmulatedMouseEvents=!1},$.onMouseLeave=i=>{!o&&i.currentTarget.contains(i.target)&&w(i,"mouse")}),{hoverProps:$,triggerHoverEnd:w}},[r,t,n,o,a]);return u.useEffect(()=>{o&&f({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:d,isHovered:s}}function _(e){if(!e)return;let r=!0;return t=>{let n={...t,preventDefault(){t.preventDefault()},isDefaultPrevented(){return t.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){r=!1}};e(n),r&&t.stopPropagation()}}function ye(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:_(e.onKeyDown),onKeyUp:_(e.onKeyUp)}}}function Te(e){const r=m(e);if(pe()==="virtual"){let t=r.activeElement;ce(()=>{r.activeElement===t&&e.isConnected&&O(e)})}else O(e)}function Be(e={}){let{autoFocus:r=!1,isTextInput:t,within:n}=e,o=u.useRef({isFocused:!1,isFocusVisible:r||Q()}),[s,c]=u.useState(!1),[a,d]=u.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=u.useCallback(()=>d(o.current.isFocused&&o.current.isFocusVisible),[]),h=u.useCallback(i=>{o.current.isFocused=i,c(i),f()},[f]);me(i=>{o.current.isFocusVisible=i,f()},[],{isTextInput:t});let{focusProps:w}=G({isDisabled:n,onFocusChange:h}),{focusWithinProps:$}=he({isDisabled:!n,onFocusWithinChange:h});return{isFocused:s,isFocusVisible:a,focusProps:n?$:w}}let X=I.createContext(null);function Le(e){let r=u.useContext(X)||{};de(r,e);let{ref:t,...n}=r;return n}function Pe(e,r){let{children:t,...n}=e,o=te(r),s={...n,ref:o};return I.createElement(X.Provider,{value:s},t)}let Ke=I.forwardRef(Pe);function Ae(e,r){let{focusProps:t}=G(e),{keyboardProps:n}=ye(e),o=A(t,n),s=Le(r),c=e.isDisabled?{}:s,a=u.useRef(e.autoFocus);return u.useEffect(()=>{a.current&&r.current&&Te(r.current),a.current=!1},[r]),{focusableProps:A({...o,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},c)}}export{he as $,Ae as a,Be as b,Ie as c,v as d,m as e,Te as f,ke as g,K as h,Me as i,Q as j,pe as k,Ke as l,O as m,ye as n,Ce as o,ie as p,se as q,ce as r,De as s,fe as t,de as u,Se as v,G as w,We as x,N as y,ae as z};
