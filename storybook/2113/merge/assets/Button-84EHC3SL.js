import{$ as D,a as F}from"./utils-CqMmhAxq.js";import{b as I}from"./ProgressBar-_bs3wo-c.js";import{b as N}from"./Hidden-BnByJu4s.js";import{$ as x,f as L}from"./index-Cd_u2pV_.js";import{$ as T}from"./filterDOMProps-i7L6S0l1.js";import{r as y,R as E}from"./iframe-D4AGuMnx.js";import{$ as O,e as V,d as w}from"./useFocusRing-B0_rzNcg.js";import{$ as M}from"./useFocusable-qdXI3c9W.js";const A=7e3;let d=null;function C(t,e="assertive",i=A){d?d.announce(t,e,i):(d=new R,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?d.announce(t,e,i):setTimeout(()=>{d?.isAttached()&&d?.announce(t,e,i)},100))}function J(t){d&&d.clear(t)}class R{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let i=document.createElement("div");return i.setAttribute("role","log"),i.setAttribute("aria-live",e),i.setAttribute("aria-relevant","additions"),i}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,i="assertive",s=A){var a,n;if(!this.node)return;let r=document.createElement("div");typeof e=="object"?(r.setAttribute("role","img"),r.setAttribute("aria-labelledby",e["aria-labelledby"])):r.textContent=e,i==="assertive"?(a=this.assertiveLog)===null||a===void 0||a.appendChild(r):(n=this.politeLog)===null||n===void 0||n.appendChild(r),e!==""&&setTimeout(()=>{r.remove()},s)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}function S(t,e){let{elementType:i="button",isDisabled:s,onPress:a,onPressStart:n,onPressEnd:r,onPressUp:m,onPressChange:l,preventFocusOnPress:$,allowFocusWhenDisabled:g,onClick:h,href:v,target:P,rel:c,type:u="button"}=t,o;i==="button"?o={type:u,disabled:s,form:t.form,formAction:t.formAction,formEncType:t.formEncType,formMethod:t.formMethod,formNoValidate:t.formNoValidate,formTarget:t.formTarget,name:t.name,value:t.value}:o={role:"button",href:i==="a"&&!s?v:void 0,target:i==="a"?P:void 0,type:i==="input"?u:void 0,disabled:i==="input"?s:void 0,"aria-disabled":!s||i==="input"?void 0:s,rel:i==="a"?c:void 0};let{pressProps:b,isPressed:p}=O({onPressStart:n,onPressEnd:r,onPressChange:l,onPress:a,onPressUp:m,onClick:h,isDisabled:s,preventFocusOnPress:$,ref:e}),{focusableProps:f}=M(t,e);g&&(f.tabIndex=s?-1:f.tabIndex);let _=x(f,b,T(t,{labelable:!0}));return{isPressed:p,buttonProps:x(o,_,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],"aria-current":t["aria-current"],"aria-disabled":t["aria-disabled"]})}}const k=y.createContext({}),K=N(function(e,i){[e,i]=D(e,i,k);let s=e,{isPending:a}=s,{buttonProps:n,isPressed:r}=S(e,i);n=H(n,a);let{focusProps:m,isFocused:l,isFocusVisible:$}=V(e),{hoverProps:g,isHovered:h}=w({...e,isDisabled:e.isDisabled||a}),v={isHovered:h,isPressed:(s.isPressed||r)&&!a,isFocused:l,isFocusVisible:$,isDisabled:e.isDisabled||!1,isPending:a??!1},P=F({...e,values:v,defaultClassName:"react-aria-Button"}),c=L(n.id),u=L(),o=n["aria-labelledby"];a&&(o?o=`${o} ${u}`:n["aria-label"]&&(o=`${c} ${u}`));let b=y.useRef(a);y.useEffect(()=>{let f={"aria-labelledby":o||c};(!b.current&&l&&a||b.current&&l&&!a)&&C(f,"assertive"),b.current=a},[a,l,o,c]);let p=T(e,{global:!0});return delete p.onClick,E.createElement("button",{...x(p,P,n,m,g),type:n.type==="submit"&&a?"button":n.type,id:c,ref:i,"aria-labelledby":o,slot:e.slot||void 0,"aria-disabled":a?"true":n["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":v.isPressed||void 0,"data-hovered":h||void 0,"data-focused":l||void 0,"data-pending":a||void 0,"data-focus-visible":$||void 0},E.createElement(I.Provider,{value:{id:u}},P.children))});function H(t,e){if(e){for(const i in t)i.startsWith("on")&&!(i.includes("Focus")||i.includes("Blur"))&&(t[i]=void 0);t.href=void 0,t.target=void 0}return t}export{k as $,C as a,K as b,J as c,S as d};
