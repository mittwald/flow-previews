import{r as i,R as p,j as m}from"./iframe-jPI25t47.js";import{c as V}from"./clsx-B-dksMZM.js";import{v as S}from"./flowComponent-NWkTmrxz.js";import{u as _}from"./useOverlayController-Cy5LcSUF.js";import{O as F}from"./OverlayContextProvider-BkQ_ixfe.js";import{L as W}from"./LoadingSpinner-DhHtGG23.js";import{u as k}from"./Button-CMdL10Ys.js";import{$ as z,b as L,a as T,d as A}from"./utils-DssEHlsW.js";import{h as B,i as U,j as K,k as G,l as b,m as J,n as Q,b as X}from"./Dialog-C4XHiXzR.js";import{e as P,$ as x,a as Y}from"./index-Cv1Y71KG.js";import{$ as D}from"./filterDOMProps-BNnC3YgW.js";import{a as Z}from"./useCollator-TV1MmAHK.js";import{$ as w}from"./SelectionManager-C-0YEkIp.js";import{d as ee,e as E,f as N}from"./OverlayArrow-2srpU7pW.js";let c=typeof document<"u"&&window.visualViewport;function te(){let t=P(),[e,n]=i.useState(()=>t?{width:0,height:0}:C());return i.useEffect(()=>{let a=()=>{c&&c.scale>1||n(s=>{let r=C();return r.width===s.width&&r.height===s.height?s:r})},o,l=s=>{c&&c.scale>1||w(s.target)&&(o=requestAnimationFrame(()=>{(!document.activeElement||!w(document.activeElement))&&n(r=>{let d={width:window.innerWidth,height:window.innerHeight};return d.width===r.width&&d.height===r.height?r:d})}))};return window.addEventListener("blur",l,!0),c?c.addEventListener("resize",a):window.addEventListener("resize",a),()=>{cancelAnimationFrame(o),window.removeEventListener("blur",l,!0),c?c.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function C(){return{width:c?c.width*c.scale:window.innerWidth,height:c?c.height*c.scale:window.innerHeight}}function ne(t,e,n){let{overlayProps:a,underlayProps:o}=B({...t,isOpen:e.isOpen,onClose:e.close},n);return U({isDisabled:!e.isOpen}),K(),i.useEffect(()=>{if(e.isOpen&&n.current)return G([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:x(a),underlayProps:o}}const re=i.createContext(null),y=i.createContext(null),ae=i.forwardRef(function(e,n){if(i.useContext(y))return p.createElement(R,{...e,modalRef:n},e.children);let{isDismissable:o,isKeyboardDismissDisabled:l,isOpen:s,defaultOpen:r,onOpenChange:d,children:f,isEntering:$,isExiting:u,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:v,...I}=e;return p.createElement(M,{isDismissable:o,isKeyboardDismissDisabled:l,isOpen:s,defaultOpen:r,onOpenChange:d,isEntering:$,isExiting:u,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:v},p.createElement(R,{...I,modalRef:n},f))});function ie(t,e){[t,e]=z(t,e,re);let n=i.useContext(b),a=ee(t),o=t.isOpen!=null||t.defaultOpen!=null||!n?a:n,l=L(e),s=i.useRef(null),r=E(l,o.isOpen),d=E(s,o.isOpen),f=r||d||t.isExiting||!1,$=P();return!o.isOpen&&!f||$?null:p.createElement(oe,{...t,state:o,isExiting:f,overlayRef:l,modalRef:s})}const M=i.forwardRef(ie);function oe({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:a}=e,{modalProps:o,underlayProps:l}=ne(e,a,n),s=N(e.overlayRef)||e.isEntering||!1,r=T({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:s,isExiting:e.isExiting,state:a}}),d=te(),f;if(typeof document<"u"){let u=Z(document.body)?document.body:document.scrollingElement||document.documentElement,h=u.getBoundingClientRect().height%1;f=u.scrollHeight-h}let $={...r.style,"--visual-viewport-height":d.height+"px","--page-height":f!==void 0?f+"px":void 0};return p.createElement(Q,{isExiting:e.isExiting,portalContainer:t},p.createElement("div",{...x(D(e,{global:!0}),l),...r,style:$,ref:e.overlayRef,"data-entering":s||void 0,"data-exiting":e.isExiting||void 0},p.createElement(A,{values:[[y,{modalProps:o,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[b,a]]},r.children)))}function R(t){let{modalProps:e,modalRef:n,isExiting:a,isDismissable:o}=i.useContext(y),l=i.useContext(b),s=i.useMemo(()=>Y(t.modalRef,n),[t.modalRef,n]),r=L(s),d=N(r),f=T({...t,defaultClassName:"react-aria-Modal",values:{isEntering:d,isExiting:a,state:l}});return p.createElement("div",{...x(D(t,{global:!0}),e),...f,ref:r,"data-entering":d||void 0,"data-exiting":a||void 0},o&&p.createElement(J,{onDismiss:l.close}),f.children)}const se="flow--overlay",j={overlay:se},g=i.memo(t=>{const e=i.useContext(S).LoadingSpinner??W;return m.jsx(e,{...t})});g.displayName="LoadingSpinnerView";g.__docgenInfo={description:"",methods:[],displayName:"LoadingSpinnerView"};const q=()=>(k(),m.jsx(g,{color:"dark"}));q.__docgenInfo={description:"",methods:[],displayName:"OverlaySuspenseFallback"};const H=t=>{const{children:e,className:n,...a}=t,[o,l]=i.useState(!1),s=()=>(i.useLayoutEffect(()=>(l(!0),()=>l(!1)),[l]),m.jsx(q,{...a})),r=o?j.overlay:n;return m.jsx(M,{...a,className:r,children:m.jsx(ae,{children:m.jsx(i.Suspense,{fallback:m.jsx(s,{}),children:m.jsx(X,{children:e})})})})};H.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const O=i.memo(t=>{const e=i.useContext(S).OverlayContent??H;return m.jsx(e,{...t})});O.displayName="OverlayContentView";O.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const le=t=>{const{controller:e,children:n,isDismissable:a=!0,className:o,overlayType:l="Modal",isDefaultOpen:s,isOpen:r,ref:d,...f}=t,$=_(l,{reuseControllerFromContext:!0,isDefaultOpen:s}),u=e??$;u.useUpdateOptions(f);const h=r??u.useIsOpen(),v=V(j.overlay,o);return m.jsx(O,{onOpenChange:u.setOpen,isOpen:h,ref:d,isDismissable:a,className:v,children:m.jsx(F,{type:"Modal",controller:u,children:n})})};le.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."},isOpen:{required:!1,tsType:{name:"boolean"},description:""},isDefaultOpen:{required:!1,tsType:{name:"boolean"},description:""},onOpen:{required:!1,tsType:{name:"OverlayOpenHandler"},description:""},onClose:{required:!1,tsType:{name:"OverlayCloseHandler"},description:""},onOpenChange:{required:!1,tsType:{name:"OverlayOpenStateHandler"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};export{g as L,le as O};
