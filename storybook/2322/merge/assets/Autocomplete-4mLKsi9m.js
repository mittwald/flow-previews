import{r as a,R as De,j as p}from"./iframe-jPI25t47.js";import{f as Te,P as Ve,a as Be}from"./flowComponent-NWkTmrxz.js";import{b as U,c as je,g as Ke,d as Oe}from"./utils-DssEHlsW.js";import{u as Ue}from"./useOverlayController-Cy5LcSUF.js";import{a as He}from"./Option-CFyAaQm_.js";import{T as Me}from"./Text-CzRKl4Rn.js";import{u as ze}from"./useFieldComponent-CHdLkU8r.js";import{$ as H}from"./useLocalizedStringFormatter-DiGz--zc.js";import{$ as We}from"./useFilter-C7MtcH3Z.js";import{b as T,c as qe}from"./useFocusRing-PgP7-E1A.js";import{i as Ge}from"./OverlayArrow-2srpU7pW.js";import{b as Je,a as Ze}from"./RSPContexts-COITpNJr.js";import{b as Qe,c as Xe,a as Ye,$ as M}from"./index-Cv1Y71KG.js";import{k as _e,e as et,C as tt,m as V,d as ot,K as rt}from"./useFocus-DZAeMhz-.js";import{$ as at}from"./useLabel-CJgKbpp_.js";import{$ as lt}from"./useEvent-DZfip6aA.js";import{n as B,o as nt,p as ct,q as j,r as K,s as ut,t as st}from"./SelectionManager-C-0YEkIp.js";import{$ as it}from"./useControlledState-CujVadxA.js";var z={};z={collectionLabel:"مقترحات"};var W={};W={collectionLabel:"Предложения"};var q={};q={collectionLabel:"Návrhy"};var G={};G={collectionLabel:"Forslag"};var J={};J={collectionLabel:"Empfehlungen"};var Z={};Z={collectionLabel:"Προτάσεις"};var Q={};Q={collectionLabel:"Suggestions"};var X={};X={collectionLabel:"Sugerencias"};var Y={};Y={collectionLabel:"Soovitused"};var _={};_={collectionLabel:"Ehdotukset"};var ee={};ee={collectionLabel:"Suggestions"};var te={};te={collectionLabel:"הצעות"};var oe={};oe={collectionLabel:"Prijedlozi"};var re={};re={collectionLabel:"Javaslatok"};var ae={};ae={collectionLabel:"Suggerimenti"};var le={};le={collectionLabel:"候補"};var ne={};ne={collectionLabel:"제안"};var ce={};ce={collectionLabel:"Pasiūlymai"};var ue={};ue={collectionLabel:"Ieteikumi"};var se={};se={collectionLabel:"Forslag"};var ie={};ie={collectionLabel:"Suggesties"};var fe={};fe={collectionLabel:"Sugestie"};var de={};de={collectionLabel:"Sugestões"};var pe={};pe={collectionLabel:"Sugestões"};var $e={};$e={collectionLabel:"Sugestii"};var be={};be={collectionLabel:"Предложения"};var ve={};ve={collectionLabel:"Návrhy"};var me={};me={collectionLabel:"Predlogi"};var xe={};xe={collectionLabel:"Predlozi"};var Ee={};Ee={collectionLabel:"Förslag"};var ge={};ge={collectionLabel:"Öneriler"};var he={};he={collectionLabel:"Пропозиції"};var Fe={};Fe={collectionLabel:"建议"};var ye={};ye={collectionLabel:"建議"};var Ce={};Ce={"ar-AE":z,"bg-BG":W,"cs-CZ":q,"da-DK":G,"de-DE":J,"el-GR":Z,"en-US":Q,"es-ES":X,"et-EE":Y,"fi-FI":_,"fr-FR":ee,"he-IL":te,"hr-HR":oe,"hu-HU":re,"it-IT":ae,"ja-JP":le,"ko-KR":ne,"lt-LT":ce,"lv-LV":ue,"nb-NO":se,"nl-NL":ie,"pl-PL":fe,"pt-BR":de,"pt-PT":pe,"ro-RO":$e,"ru-RU":be,"sk-SK":ve,"sl-SI":me,"sr-SP":xe,"sv-SE":Ee,"tr-TR":ge,"uk-UA":he,"zh-CN":Fe,"zh-TW":ye};function ft(o){return o&&o.__esModule?o.default:o}function dt(o,l){let{inputRef:c,collectionRef:r,filter:s,disableAutoFocusFirst:v=!1,disableVirtualFocus:x=!1}=o,$=Qe(),u=a.useRef(void 0),f=a.useRef(!1),n=a.useRef(null),L=_e()==="virtual"&&(et()||tt()),[g,F]=a.useState(!L&&!x),[I,y]=a.useState(!1);a.useEffect(()=>()=>clearTimeout(u.current),[]);let C=T(e=>{!e.isTrusted&&g&&c.current&&V(ot(c.current))!==c.current&&rt()!=="touch"&&c.current.focus();let t=e.target;e.isTrusted||!t||n.current===t.id||(clearTimeout(u.current),t!==r.current?f.current?(n.current=t.id,u.current=setTimeout(()=>{l.setFocusedNodeId(t.id)},500)):(n.current=t.id,l.setFocusedNodeId(t.id)):n.current&&!document.getElementById(n.current)&&(n.current=null,l.setFocusedNodeId(null)),f.current=!1)}),[m,P]=a.useState(null),b=a.useCallback(e=>{P(e),e!=null?(e.getAttribute("tabindex")!=null&&F(!1),y(!0)):y(!1)},[]);Xe(()=>(m?.addEventListener("focusin",C),()=>{m?.removeEventListener("focusin",C)}),[m]);let A=U(a.useMemo(()=>Ye(r,b),[r,b])),Le=a.useCallback(()=>{var e;f.current=!0,(e=r.current)===null||e===void 0||e.dispatchEvent(new CustomEvent(B,{cancelable:!0,bubbles:!0,detail:{focusStrategy:"first"}}))},[r]),w=a.useCallback(e=>{var t;nt(V()),n.current=null,l.setFocusedNodeId(null);let i=new CustomEvent(ct,{cancelable:!0,bubbles:!0,detail:{clearFocusKey:e}});clearTimeout(u.current),f.current=!1,(t=r.current)===null||t===void 0||t.dispatchEvent(i)},[r,l]),h=a.useRef("");lt(c,"input",e=>{let{inputType:t}=e;h.current=t});let Ie=e=>{h.current==="insertText"&&!v?Le():h.current&&(h.current.includes("insert")||h.current.includes("delete")||h.current.includes("history"))&&(w(!0),st(document)===c.current&&K(c.current,null)),l.setInputValue(e)},N=a.useRef(null),Pe=e=>{if(N.current=e.target,e.nativeEvent.isComposing)return;let t=n.current;switch(e.key){case"a":if(ut(e))return;break;case"Escape":if(e.isDefaultPrevented())return;break;case" ":return;case"Tab":"continuePropagation"in e&&e.continuePropagation();return;case"Home":case"End":case"PageDown":case"PageUp":case"ArrowUp":case"ArrowDown":{var i;if((e.key==="Home"||e.key==="End")&&t==null&&e.shiftKey)return;e.preventDefault();let d=new CustomEvent(B,{cancelable:!0,bubbles:!0});(i=r.current)===null||i===void 0||i.dispatchEvent(d);break}}e.isPropagationStopped()||e.stopPropagation();let E=!0;if(r.current!==null){var k;if(t==null)E=((k=r.current)===null||k===void 0?void 0:k.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1;else{let d=document.getElementById(t);d&&(E=d?.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent))||!1)}}if(E)switch(e.key){case"ArrowLeft":case"ArrowRight":w();break;case"Enter":if(t!=null){let d=document.getElementById(t);d?.dispatchEvent(new PointerEvent("click",e.nativeEvent))}break}else e.preventDefault()},D=T(e=>{if(e.target===N.current){var t;e.stopImmediatePropagation();let i=n.current;if(i==null)(t=r.current)===null||t===void 0||t.dispatchEvent(new KeyboardEvent(e.type,e));else{let E=document.getElementById(i);E?.dispatchEvent(new KeyboardEvent(e.type,e))}}});a.useEffect(()=>(document.addEventListener("keyup",D,!0),()=>{document.removeEventListener("keyup",D,!0)}),[]);let Ae=H(ft(Ce),"@react-aria/autocomplete"),Re=at({id:$,"aria-label":Ae.format("collectionLabel")}),Se=a.useCallback((e,t)=>s?s(e,l.inputValue,t):!0,[l.inputValue,s]),ke=e=>{if(!e.isTrusted)return;let t=n.current?document.getElementById(n.current):null;t&&j(t,e.relatedTarget)},we=e=>{if(!e.isTrusted)return;if(n.current?document.getElementById(n.current):null){let i=e.target;queueMicrotask(()=>{j(i,r.current),K(r.current,i)})}},R={value:l.inputValue,onChange:Ie};var S;let Ne={onKeyDown:Pe,"aria-activedescendant":(S=l.focusedNodeId)!==null&&S!==void 0?S:void 0,onBlur:ke,onFocus:we};return I&&(R={...R,...g&&Ne,enterKeyHint:"go","aria-controls":$,"aria-autocomplete":"list",autoCorrect:"off",spellCheck:"false",autoComplete:"off"}),{inputProps:R,collectionProps:M(Re,{shouldUseVirtualFocus:g,disallowTypeAhead:g}),collectionRef:A,filter:s!=null?Se:void 0}}function pt(o){let{onInputChange:l,inputValue:c,defaultInputValue:r=""}=o,s=f=>{l&&l(f)},[v,x]=a.useState(null),[$,u]=it(c,r,s);return{inputValue:$,setInputValue:u,focusedNodeId:v,setFocusedNodeId:x}}const $t=a.createContext(null),bt=a.createContext(null);function vt(o){let l=je($t,o.slot);o=M(l,o);let{filter:c,disableAutoFocusFirst:r}=o,s=pt(o),v=a.useRef(null),x=a.useRef(null),{inputProps:$,collectionProps:u,collectionRef:f,filter:n}=dt({...Ke(o),filter:c,disableAutoFocusFirst:r,inputRef:v,collectionRef:x},s);return De.createElement(Oe,{values:[[bt,s],[Je,{...$,ref:v}],[Ze,{...u,filter:n,ref:f}]]},o.children)}const mt={"de-DE":{"autocomplete.empty":"Keine passenden Einträge"},"en-US":{"autocomplete.empty":"No matching entries"}},xt="flow--autocomplete--popover",Et="flow--autocomplete--empty",O={popover:xt,empty:Et},gt=o=>o?.getAttribute("data-focused")==="true",ht=(o,l)=>{const c=new Event("change",{bubbles:!0});try{Object.getOwnPropertyDescriptor(Object.getPrototypeOf(o),"value")?.set?.call(o,l),o.dispatchEvent(c)}catch{if("value"in o)o.value=l,o.dispatchEvent(c);else throw Error("could not emit value update for element")}},Ft=Te("Autocomplete",o=>{const{children:l,ref:c,...r}=o,s=U(c),{contains:v}=We({sensitivity:"base"}),x=H(mt),$=a.useRef(null),u=Ue("Popover",{reuseControllerFromContext:!1}),f=qe({onBlurWithin:()=>u.close()}),n=()=>p.jsx(Me,{className:O.empty,children:x.format("autocomplete.empty")}),L=b=>{b===""?u.close():gt(s.current)&&u.open()},g=b=>{const A=String(b);s.current&&ht(s.current,A),u.close()},F={onKeyDown:b=>{b.key==="Enter"&&u.isOpen&&b.preventDefault()},ref:s,onChange:L},{FieldErrorView:I,FieldErrorCaptureContext:y,fieldPropsContext:C,fieldProps:m}=ze(o),P={SearchField:F,TextField:F,Option:{tunnelId:"options"},Popover:{className:O.popover},...C};return p.jsxs("div",{...m,children:[p.jsx(y,{children:p.jsx(Ve,{props:P,dependencies:[u],children:p.jsx("div",{...f.focusWithinProps,ref:$,children:p.jsx(Ge,{getContainer:()=>$.current,children:p.jsxs(vt,{filter:v,disableAutoFocusFirst:!0,...r,children:[l,p.jsx(He,{onAction:g,triggerRef:s,controller:u,renderEmptyState:n,isNonModal:!0,placement:"bottom start",children:p.jsx(Be,{id:"options"})})]})})})})}),p.jsx(I,{})]})});Ft.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Autocomplete"};export{Ft as A};
