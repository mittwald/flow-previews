import{r as f,R as m,j as d}from"./iframe-BipmDVic.js";import{a as I,f as _,I as U,N as T,P as G}from"./flowComponent-CqzOrDl2.js";import{u as J}from"./useRef-DY72xU_4.js";import{B as Q}from"./Button-BuQAY4x2.js";import{B as X}from"./IconWarning-CGnZi41_.js";import{c as P}from"./clsx-B-dksMZM.js";import{C as Y}from"./ContextMenuTriggerView-DDHtY5nu.js";import{C as Z}from"./ContextMenuView-C9wNTzAq.js";import{T as ee}from"./Text-D0LSWbFT.js";import{M as te}from"./MenuItem-Kv9-_7Wo.js";import{A as j}from"./Activity-DnIijIt3.js";import{$ as se,b as E,a as D,d as A,c as ae}from"./utils-BmvAbY6y.js";import{$ as R,c as ie,b as ne}from"./Collection-DZXXzgBW.js";import{$ as le,a as oe}from"./SelectionIndicator-DQakRxMT.js";import{$ as re,e as de,g as ce,f as fe}from"./CollectionBuilder-BRXbMuqB.js";import{$ as ue}from"./Hidden-CaQYrS-R.js";import{$ as y,b as be}from"./index-5IWmXg28.js";import{$ as K}from"./filterDOMProps-BNnC3YgW.js";import{$ as F}from"./inertValue-CTqI62E8.js";import{e as $e,f as me}from"./OverlayArrow-Crdn15eZ.js";import{a as pe}from"./useFocus-1VXHi-Mn.js";import{$ as xe}from"./useFocusable-CoJ_GBdx.js";import{e as he,b as ye}from"./SelectionManager-Bp4YXEPt.js";import{$ as L}from"./useLabel-DZFs0BX7.js";import{$ as ve}from"./useHasTabbableChild-55kyjNnm.js";import{$ as ge}from"./context-Br1o_Gsv.js";import{a as M,$ as Pe}from"./useFocusRing-B8DUU0zm.js";import{$ as Ke}from"./useSingleSelectListState-DeFwFkLw.js";const k=new WeakMap;function w(s,e,t){return s?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${k.get(s)}-${t}-${e}`):""}function Ce(s,e,t){let{key:a,isDisabled:i,shouldSelectOnPressUp:n}=s,{selectionManager:o,selectedKey:l}=e,r=a===l,c=i||e.isDisabled||e.selectionManager.isDisabled(a),{itemProps:u,isPressed:b}=he({selectionManager:o,key:a,ref:t,isDisabled:c,shouldSelectOnPressUp:n,linkBehavior:"selection"}),$=w(e,a,"tab"),x=w(e,a,"tabpanel"),{tabIndex:h}=u,p=e.collection.getItem(a),g=K(p?.props,{labelable:!0});delete g.id;let z=pe(p?.props),{focusableProps:q}=xe({isDisabled:c},t);return{tabProps:y(g,q,z,u,{id:$,"aria-selected":r,"aria-disabled":c||void 0,"aria-controls":r?x:void 0,tabIndex:c?void 0:h,role:"tab"}),isSelected:r,isDisabled:c,isPressed:b}}function Te(s,e,t){let a=ve(t)?void 0:0;var i;const n=w(e,(i=s.id)!==null&&i!==void 0?i:e?.selectedKey,"tabpanel"),o=L({...s,id:n,"aria-labelledby":w(e,e?.selectedKey,"tab")});return{tabPanelProps:y(o,{tabIndex:a,role:"tabpanel","aria-describedby":s["aria-describedby"],"aria-details":s["aria-details"]})}}class Se{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,a;return this.disabledKeys.has(e)||!!(!((a=this.collection.getItem(e))===null||a===void 0||(t=a.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let t=e;do t=this.collection.getKeyAfter(t),t==null&&(t=this.collection.getFirstKey());while(t!=null&&this.isDisabled(t));return t}getPreviousKey(e){let t=e;do t=this.collection.getKeyBefore(t),t==null&&(t=this.collection.getLastKey());while(t!=null&&this.isDisabled(t));return t}constructor(e,t,a,i=new Set){this.collection=e,this.flipDirection=t==="rtl"&&a==="horizontal",this.disabledKeys=i,this.tabDirection=a==="horizontal"}}function Ie(s,e,t){let{orientation:a="horizontal",keyboardActivation:i="automatic"}=s,{collection:n,selectionManager:o,disabledKeys:l}=e,{direction:r}=ge(),c=f.useMemo(()=>new Se(n,r,a,l),[n,l,a,r]),{collectionProps:u}=ye({ref:t,selectionManager:o,keyboardDelegate:c,selectOnFocus:i==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),b=be();k.set(e,b);let $=L({...s,id:b});return{tabListProps:{...y(u,$),role:"tablist","aria-orientation":a,tabIndex:void 0}}}function we(s){var e,t;let a=Ke({...s,onSelectionChange:s.onSelectionChange?r=>{var c;r!=null&&((c=s.onSelectionChange)===null||c===void 0||c.call(s,r))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=s.defaultSelectedKey)!==null&&e!==void 0?e:O(s.collection,s.disabledKeys?new Set(s.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:i,collection:n,selectedKey:o}=a,l=f.useRef(o);return f.useEffect(()=>{let r=o;s.selectedKey==null&&(i.isEmpty||r==null||!n.getItem(r))&&(r=O(n,a.disabledKeys),r!=null&&i.setSelectedKeys([r])),(r!=null&&i.focusedKey==null||!i.isFocused&&r!==l.current)&&i.setFocusedKey(r),l.current=r}),{...a,isDisabled:s.isDisabled||!1}}function O(s,e){let t=null;if(s){var a,i,n,o;for(t=s.getFirstKey();t!=null&&(e.has(t)||!((i=s.getItem(t))===null||i===void 0||(a=i.props)===null||a===void 0)&&a.isDisabled)&&t!==s.getLastKey();)t=s.getKeyAfter(t);t!=null&&(e.has(t)||!((o=s.getItem(t))===null||o===void 0||(n=o.props)===null||n===void 0)&&n.isDisabled)&&t===s.getLastKey()&&(t=s.getFirstKey())}return t}const N=f.createContext(null),v=f.createContext(null),De=f.forwardRef(function(e,t){[e,t]=se(e,t,N);let{children:a,orientation:i="horizontal"}=e;return a=f.useMemo(()=>typeof a=="function"?a({orientation:i,defaultChildren:null}):a,[a,i]),m.createElement(de,{content:a},n=>m.createElement(Ne,{props:e,collection:n,tabsRef:t}))});function Ne({props:s,tabsRef:e,collection:t}){let{orientation:a="horizontal"}=s,i=we({...s,collection:t,children:void 0}),{focusProps:n,isFocused:o,isFocusVisible:l}=M({within:!0}),r=f.useMemo(()=>({orientation:a,isFocusWithin:o,isFocusVisible:l}),[a,o,l]),c=D({...s,defaultClassName:"react-aria-Tabs",values:r}),u=K(s,{global:!0});return m.createElement("div",{...y(u,c,n),ref:e,slot:s.slot||void 0,"data-focused":o||void 0,"data-orientation":a,"data-focus-visible":l||void 0,"data-disabled":i.isDisabled||void 0},m.createElement(A,{values:[[N,s],[v,i]]},c.children))}const Ee=f.forwardRef(function(e,t){return f.useContext(v)?m.createElement(Me,{props:e,forwardedRef:t}):m.createElement(fe,e)});function Me({props:s,forwardedRef:e}){let t=f.useContext(v),{CollectionRoot:a}=f.useContext(R),{orientation:i="horizontal",keyboardActivation:n="automatic"}=ae(N),o=E(e),{tabListProps:l}=Ie({...s,orientation:i,keyboardActivation:n},t,o),r=D({...s,children:null,defaultClassName:"react-aria-TabList",values:{orientation:i,state:t}}),c=K(s,{global:!0});return delete c.id,m.createElement("div",{...y(c,r,l),ref:o,"data-orientation":i||void 0},m.createElement(oe,null,m.createElement(a,{collection:t.collection,persistedKeys:ne(t.selectionManager.focusedKey)})))}class V extends ce{}V.type="item";const je=re(V,(s,e,t)=>{let a=f.useContext(v),i=E(e),{tabProps:n,isSelected:o,isDisabled:l,isPressed:r}=Ce({key:t.key,...s},a,i),{focusProps:c,isFocused:u,isFocusVisible:b}=M(),{hoverProps:$,isHovered:x}=Pe({isDisabled:l,onHoverStart:s.onHoverStart,onHoverEnd:s.onHoverEnd,onHoverChange:s.onHoverChange}),h=D({...s,id:void 0,children:t.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:o,isDisabled:l,isFocused:u,isFocusVisible:b,isPressed:r,isHovered:x}}),p=t.props.href?"a":"div",g=K(s,{global:!0});return delete g.id,delete g.onClick,m.createElement(p,{...y(g,h,n,c,$),ref:i,"data-selected":o||void 0,"data-disabled":l||void 0,"data-focused":u||void 0,"data-focus-visible":b||void 0,"data-pressed":r||void 0,"data-hovered":x||void 0},m.createElement(le.Provider,{value:{isSelected:o}},h.children))}),Fe=ue(function(e,t){const a=f.useContext(v);let i=E(t),n=a.selectedKey===e.id,[o,l]=f.useState(a.selectedKey!=null?n:null);o==null&&a.selectedKey!=null?l(n):!n&&o&&l(!1);let r=$e(i,n);return!n&&!e.shouldForceMount&&!r?null:m.createElement(Oe,{...e,tabPanelRef:i,isInitiallySelected:o||!1,isExiting:r})});function Oe(s){let e=f.useContext(v),{id:t,tabPanelRef:a,isInitiallySelected:i,isExiting:n,...o}=s,{tabPanelProps:l}=Te(s,e,a),{focusProps:r,isFocused:c,isFocusVisible:u}=M(),b=e.selectedKey===s.id,$=me(a)&&!i,x=D({...s,defaultClassName:"react-aria-TabPanel",values:{isFocused:c,isFocusVisible:u,isInert:F(!b),isEntering:$,isExiting:n,state:e}}),h=K(o,{global:!0});delete h.id;let p=b?y(h,l,r,x):y(h,x);return m.createElement("div",{...p,ref:a,"data-focused":c||void 0,"data-focus-visible":u||void 0,inert:F(!b||s.inert),"data-inert":b?void 0:"true","data-entering":$||void 0,"data-exiting":n||void 0},m.createElement(A,{values:[[N,null],[v,null]]},m.createElement(R.Provider,{value:ie},x.children)))}const Ae="flow--tabs--tab-list",Re="flow--tabs--tab-list--context-menu-button",Le="flow--tabs--tab-list--titles",ke="flow--tabs--tab-list--collapsed",C={tabList:Ae,contextMenuButton:Re,titles:Le,collapsed:ke},Ve=()=>{const s=f.useRef(null),[e,t]=f.useState(!1),a=J(null,l=>{o(),n(l)}),i=([l])=>{l&&t(!l.isIntersecting)},n=(l=a.current)=>{if(l&&l instanceof Element){const r=new IntersectionObserver(i,{root:l.parentElement,threshold:1});s.current=r,r.observe(l)}},o=()=>{s.current?.disconnect()};return f.useEffect(()=>(n(),o),[s.current]),{ref:a,isOverflowing:e}},Be="flow--tabs--tab-title",We="flow--tabs--tab-title--text",He="flow--tabs--tab-title--menu-item",S={tabTitle:Be,text:We,menuItem:He},B=s=>{const{className:e,...t}=s,a=P(e,S.tabTitle);return d.jsx("div",{...t,className:a,"data-selected":!0,children:d.jsx(I,{id:"ActiveTitle"})})};B.__docgenInfo={description:"",methods:[],displayName:"TabTitleCollapsed",props:{id:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithClassName"]};const W=s=>{const{selection:e,disabledKeys:t,onContextMenuSelectionChange:a}=s,i=f.useId(),n=Ve(),o=n.isOverflowing,l=P(C.tabList,o&&C.collapsed),r=$=>{a($)},c=d.jsx(Ee,{className:C.titles,ref:n.ref,children:d.jsx(I,{id:"Titles"})}),u=o&&d.jsx(B,{id:i}),b=o&&d.jsxs(Y,{children:[d.jsx(Q,{variant:"soft",className:C.contextMenuButton,color:"secondary","aria-labelledby":i,children:d.jsx(X,{})}),d.jsx(Z,{disabledKeys:t,selectedKeys:e?[e]:void 0,selectionMode:"navigation",onAction:$=>r($),children:d.jsx(I,{id:"ContextMenuItems"})})]});return d.jsxs("div",{className:l,children:[c,u,b]})};W.__docgenInfo={description:"",methods:[],displayName:"TabList",props:{selection:{required:!0,tsType:{name:"union",raw:"Aria.Key | undefined",elements:[{name:"Aria.Key"},{name:"undefined"}]},description:""},onContextMenuSelectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Aria.Key) => void",signature:{arguments:[{type:{name:"Aria.Key"},name:"key"}],return:{name:"void"}}},description:""},disabledKeys:{required:!1,tsType:{name:"Iterable",elements:[{name:"Aria.Key"}],raw:"Iterable<Aria.Key>"},description:""}}};const ze="flow--tabs",qe={tabs:ze},_e=_("Tabs",s=>{const{children:e,className:t,defaultSelectedKey:a,selectedKey:i,disabledKeys:n,ref:o,onSelectionChange:l,...r}=s,c=P(qe.tabs,t),[u,b]=f.useState(i??a);return d.jsxs(U,{children:[e,d.jsxs(De,{slot:null,className:c,...r,selectedKey:u,onSelectionChange:$=>{b($),l&&l($)},disabledKeys:n,ref:o,children:[d.jsx(W,{selection:u,onContextMenuSelectionChange:$=>{b($),l&&l($)},disabledKeys:n}),d.jsx(I,{id:"Panels"})]})]})});_e.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tabs"};const H=f.createContext({id:"undefined"}),Ue=()=>f.useContext(H),Ge=H.Provider,Je=s=>{const{children:e,className:t,...a}=s,{id:i}=Ue(),n=P(S.tabTitle,t);return d.jsxs(d.Fragment,{children:[d.jsx(T,{id:"Titles",children:d.jsx(je,{...a,id:i,className:n,children:o=>d.jsxs(d.Fragment,{children:[d.jsx(ee,{emulateBoldWidth:!0,children:d.jsx("span",{className:S.text,children:e})}),d.jsx(T,{id:"ActiveTitle",children:o.isSelected&&e})]})})}),d.jsx(T,{id:"ContextMenuItems",children:d.jsx(te,{className:S.menuItem,id:i,children:e})})]})};Je.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TabTitle",composes:["Omit","PropsWithChildren"]};const Qe="flow--tabs--tab--tab-panel",Xe={tabPanel:Qe},Ye=s=>{const{children:e,className:t,id:a,...i}=s,n=P(Xe.tabPanel,t),o=f.useId(),l=a??o,r=c=>{const u=c.state.selectedKey===l,b={Content:{wrapWith:d.jsx(j,{isActive:u})},Section:{wrapWith:d.jsx(j,{isActive:u})}};return d.jsx(G,{props:b,dependencies:[u,e],children:e})};return d.jsx(T,{id:"Panels",children:d.jsx(Ge,{value:{id:l},children:d.jsx(Fe,{className:n,shouldForceMount:!0,id:l,...i,children:r})})})};Ye.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tab",composes:["Omit","PropsWithChildren"]};export{_e as T,Ye as a,Je as b};
