import{h as F,$ as L,i as W,e as m,a as x,c as G,d as E}from"./utils-BgD92WZP.js";import{r as c}from"./iframe-DwkHntCQ.js";function T(){let i=c.useRef(new Map),f=c.useCallback((e,t,n,o)=>{let a=o?.once?(...u)=>{i.current.delete(n),n(...u)}:n;i.current.set(n,{type:t,eventTarget:e,fn:a,options:o}),e.addEventListener(t,a,o)},[]),s=c.useCallback((e,t,n,o)=>{var a;let u=((a=i.current.get(n))===null||a===void 0?void 0:a.fn)||n;e.removeEventListener(t,u,o),i.current.delete(n)},[]),l=c.useCallback(()=>{i.current.forEach((e,t)=>{s(e.eventTarget,e.type,t,e.options)})},[s]);return c.useEffect(()=>l,[l]),{addGlobalListener:f,removeGlobalListener:s,removeAllGlobalListeners:l}}function B(i){let{isDisabled:f,onBlurWithin:s,onFocusWithin:l,onFocusWithinChange:e}=i,t=c.useRef({isFocusWithin:!1}),{addGlobalListener:n,removeAllGlobalListeners:o}=T(),a=c.useCallback(r=>{r.currentTarget.contains(r.target)&&t.current.isFocusWithin&&!r.currentTarget.contains(r.relatedTarget)&&(t.current.isFocusWithin=!1,o(),s&&s(r),e&&e(!1))},[s,e,t,o]),u=F(a),g=c.useCallback(r=>{if(!r.currentTarget.contains(r.target))return;const d=L(r.target),h=W(d);if(!t.current.isFocusWithin&&h===m(r.nativeEvent)){l&&l(r),e&&e(!0),t.current.isFocusWithin=!0,u(r);let b=r.currentTarget;n(d,"focus",$=>{if(t.current.isFocusWithin&&!x(b,$.target)){let v=new d.defaultView.FocusEvent("blur",{relatedTarget:$.target});G(v,b);let p=E(v);a(p)}},{capture:!0})}},[l,e,u,n,a]);return f?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:g,onBlur:a}}}export{T as $,B as a};
