import{b as O,c as _}from"./index-90CY5obj.js";import{g as u,$ as l,j as H,i as m,b as F,h as j,e as N}from"./utils-BgD92WZP.js";import{r as p}from"./iframe-DwkHntCQ.js";function g(e){var r;if(typeof window>"u"||window.navigator==null)return!1;let t=(r=window.navigator.userAgentData)===null||r===void 0?void 0:r.brands;return Array.isArray(t)&&t.some(n=>e.test(n.brand))||e.test(window.navigator.userAgent)}function k(e){var r;return typeof window<"u"&&window.navigator!=null?e.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function d(e){let r=null;return()=>(r==null&&(r=e()),r)}const M=d(function(){return k(/^Mac/i)}),W=d(function(){return k(/^iPhone/i)}),z=d(function(){return k(/^iPad/i)||M()&&navigator.maxTouchPoints>1}),U=d(function(){return W()||z()}),oe=d(function(){return M()||U()}),ie=d(function(){return g(/AppleWebKit/i)&&!q()}),q=d(function(){return g(/Chrome/i)}),D=d(function(){return g(/Android/i)}),de=d(function(){return g(/Firefox/i)});let f=new Map,h=new Set;function A(){if(typeof window>"u")return;function e(n){return"propertyName"in n}let r=n=>{if(!e(n)||!n.target)return;let a=f.get(n.target);a||(a=new Set,f.set(n.target,a),n.target.addEventListener("transitioncancel",t,{once:!0})),a.add(n.propertyName)},t=n=>{if(!e(n)||!n.target)return;let a=f.get(n.target);if(a&&(a.delete(n.propertyName),a.size===0&&(n.target.removeEventListener("transitioncancel",t),f.delete(n.target)),f.size===0)){for(let c of h)c();h.clear()}};document.body.addEventListener("transitionrun",r),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?A():document.addEventListener("DOMContentLoaded",A));function G(){for(const[e]of f)"isConnected"in e&&!e.isConnected&&f.delete(e)}function V(e){requestAnimationFrame(()=>{G(),f.size===0?e():h.add(e)})}function ce(e,r){O(()=>{if(e&&e.ref&&r)return e.ref.current=r.current,()=>{e.ref&&(e.ref.current=null)}})}function R(e){return e.pointerType===""&&e.isTrusted?!0:D()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function fe(e){return!D()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}let i=null,v=new Set,b=new Map,s=!1,T=!1;const Y={Tab:!0,Escape:!0};function L(e,r){for(let t of v)t(e,r)}function J(e){return!(e.metaKey||!M()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function y(e){s=!0,J(e)&&(i="keyboard",L("keyboard",e))}function $(e){i="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(s=!0,L("pointer",e))}function S(e){R(e)&&(s=!0,i="virtual")}function K(e){e.target===window||e.target===document||H||!e.isTrusted||(!s&&!T&&(i="virtual",L("virtual",e)),s=!1,T=!1)}function P(){H||(s=!1,T=!0)}function w(e){if(typeof window>"u"||typeof document>"u"||b.get(u(e)))return;const r=u(e),t=l(e);let n=r.HTMLElement.prototype.focus;r.HTMLElement.prototype.focus=function(){s=!0,n.apply(this,arguments)},t.addEventListener("keydown",y,!0),t.addEventListener("keyup",y,!0),t.addEventListener("click",S,!0),r.addEventListener("focus",K,!0),r.addEventListener("blur",P,!1),typeof PointerEvent<"u"&&(t.addEventListener("pointerdown",$,!0),t.addEventListener("pointermove",$,!0),t.addEventListener("pointerup",$,!0)),r.addEventListener("beforeunload",()=>{I(e)},{once:!0}),b.set(r,{focus:n})}const I=(e,r)=>{const t=u(e),n=l(e);r&&n.removeEventListener("DOMContentLoaded",r),b.has(t)&&(t.HTMLElement.prototype.focus=b.get(t).focus,n.removeEventListener("keydown",y,!0),n.removeEventListener("keyup",y,!0),n.removeEventListener("click",S,!0),t.removeEventListener("focus",K,!0),t.removeEventListener("blur",P,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",$,!0),n.removeEventListener("pointermove",$,!0),n.removeEventListener("pointerup",$,!0)),b.delete(t))};function Q(e){const r=l(e);let t;return r.readyState!=="loading"?w(e):(t=()=>{w(e)},r.addEventListener("DOMContentLoaded",t)),()=>I(e,t)}typeof document<"u"&&Q();function X(){return i!=="pointer"}function Z(){return i}function ue(e){i=e,L(e,null)}function se(){w();let[e,r]=p.useState(i);return p.useEffect(()=>{let t=()=>{r(i)};return v.add(t),()=>{v.delete(t)}},[]),_()?null:e}const ee=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function te(e,r,t){let n=l(t?.target);const a=typeof window<"u"?u(t?.target).HTMLInputElement:HTMLInputElement,c=typeof window<"u"?u(t?.target).HTMLTextAreaElement:HTMLTextAreaElement,E=typeof window<"u"?u(t?.target).HTMLElement:HTMLElement,x=typeof window<"u"?u(t?.target).KeyboardEvent:KeyboardEvent;return e=e||n.activeElement instanceof a&&!ee.has(n.activeElement.type)||n.activeElement instanceof c||n.activeElement instanceof E&&n.activeElement.isContentEditable,!(e&&r==="keyboard"&&t instanceof x&&!Y[t.key])}function $e(e,r,t){w(),p.useEffect(()=>{let n=(a,c)=>{te(!!t?.isTextInput,a,c)&&e(X())};return v.add(n),()=>{v.delete(n)}},r)}function le(e){const r=l(e),t=m(r);if(Z()==="virtual"){let n=t;V(()=>{m(r)===n&&e.isConnected&&F(e)})}else F(e)}function be(e){let{isDisabled:r,onFocus:t,onBlur:n,onFocusChange:a}=e;const c=p.useCallback(o=>{if(o.target===o.currentTarget)return n&&n(o),a&&a(!1),!0},[n,a]),E=j(c),x=p.useCallback(o=>{const C=l(o.target),B=C?m(C):m();o.target===o.currentTarget&&B===N(o.nativeEvent)&&(t&&t(o),a&&a(!0),E(o))},[a,t,E]);return{focusProps:{onFocus:!r&&(t||a||n)?x:void 0,onBlur:!r&&(n||a)?c:void 0}}}export{X as $,$e as a,be as b,de as c,ie as d,M as e,z as f,U as g,V as h,fe as i,ce as j,R as k,le as l,oe as m,Z as n,D as o,q as p,W as q,ue as r,se as s};
