import{$ as T,a as x}from"./utils-BgD92WZP.js";import{$ as P,a as y}from"./useFocusWithin-tqcFW1Po.js";import{r as o}from"./iframe-DwkHntCQ.js";import{$ as C,a as S,b as V}from"./useFocus-GoSUCcJ3.js";let F=!1,b=0;function G(){F=!0,setTimeout(()=>{F=!1},50)}function H(f){f.pointerType==="touch"&&G()}function I(){if(!(typeof document>"u"))return b===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",H),b++,()=>{b--,!(b>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",H)}}function k(f){let{onHoverStart:d,onHoverChange:i,onHoverEnd:n,isDisabled:r}=f,[v,l]=o.useState(!1),e=o.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;o.useEffect(I,[]);let{addGlobalListener:p,removeAllGlobalListeners:a}=P(),{hoverProps:$,triggerHoverEnd:g}=o.useMemo(()=>{let E=(t,u)=>{if(e.pointerType=u,r||u==="touch"||e.isHovered||!t.currentTarget.contains(t.target))return;e.isHovered=!0;let c=t.currentTarget;e.target=c,p(T(t.target),"pointerover",m=>{e.isHovered&&e.target&&!x(e.target,m.target)&&s(m,m.pointerType)},{capture:!0}),d&&d({type:"hoverstart",target:c,pointerType:u}),i&&i(!0),l(!0)},s=(t,u)=>{let c=e.target;e.pointerType="",e.target=null,!(u==="touch"||!e.isHovered||!c)&&(e.isHovered=!1,a(),n&&n({type:"hoverend",target:c,pointerType:u}),i&&i(!1),l(!1))},h={};return typeof PointerEvent<"u"&&(h.onPointerEnter=t=>{F&&t.pointerType==="mouse"||E(t,t.pointerType)},h.onPointerLeave=t=>{!r&&t.currentTarget.contains(t.target)&&s(t,t.pointerType)}),{hoverProps:h,triggerHoverEnd:s}},[d,i,n,r,e,p,a]);return o.useEffect(()=>{r&&g({currentTarget:e.target},e.pointerType)},[r]),{hoverProps:$,isHovered:v}}function w(f={}){let{autoFocus:d=!1,isTextInput:i,within:n}=f,r=o.useRef({isFocused:!1,isFocusVisible:d||C()}),[v,l]=o.useState(!1),[e,p]=o.useState(()=>r.current.isFocused&&r.current.isFocusVisible),a=o.useCallback(()=>p(r.current.isFocused&&r.current.isFocusVisible),[]),$=o.useCallback(s=>{r.current.isFocused=s,l(s),a()},[a]);S(s=>{r.current.isFocusVisible=s,a()},[],{isTextInput:i});let{focusProps:g}=V({isDisabled:n,onFocusChange:$}),{focusWithinProps:E}=y({isDisabled:!n,onFocusWithinChange:$});return{isFocused:v,isFocusVisible:e,focusProps:n?E:g}}export{k as $,w as a};
