import{b as w,d as L}from"./index-90CY5obj.js";import{r as $}from"./iframe-DwkHntCQ.js";const T=e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},m=e=>e&&"window"in e&&e.window===e?e:T(e).defaultView||window;function y(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function x(e){return y(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let g=!1,S=!1;function I(){return g}function u(){return S}function B(e,t){if(!u())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:x(n)?n=n.host:n=n.parentNode}return!1}const _=(e=document)=>{var t;if(!u())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function k(e){return u()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function p(e){if(M())e.focus({preventScroll:!0});else{let t=P(e);e.focus(),F(t)}}let d=null;function M(){if(d==null){d=!1;try{document.createElement("div").focus({get preventScroll(){return d=!0,!0}})}catch{}}return d}function P(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function F(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}const N=typeof Element<"u"&&"checkVisibility"in Element.prototype;function A(e){const t=m(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,o=n!=="none"&&r!=="hidden"&&r!=="collapse";if(o){const{getComputedStyle:s}=e.ownerDocument.defaultView;let{display:i,visibility:c}=s(e);o=i!=="none"&&c!=="hidden"&&c!=="collapse"}return o}function O(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function f(e,t){return N?e.checkVisibility({visibilityProperty:!0})&&!e.closest("[data-react-aria-prevent-focus]"):e.nodeName!=="#comment"&&A(e)&&O(e,t)&&(!e.parentElement||f(e.parentElement,e))}const b=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])',"permission"],H=b.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";b.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const R=b.join(':not([hidden]):not([tabindex="-1"]),');function V(e){return e.matches(H)&&f(e)&&!E(e)}function U(e){return e.matches(R)&&f(e)&&!E(e)}function E(e){let t=e;for(;t!=null;){if(t instanceof t.ownerDocument.defaultView.HTMLElement&&t.inert)return!0;t=t.parentElement}return!1}function D(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function G(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function W(e){let t=$.useRef({isFocused:!1,observer:null});w(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=L(r=>{e?.(r)});return $.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let o=r.target,s=i=>{if(t.current.isFocused=!1,o.disabled){let c=D(i);n(c)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&o.disabled){var i;(i=t.current.observer)===null||i===void 0||i.disconnect();let c=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:c})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:c}))}}),t.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let v=!1;function q(e){for(;e&&!V(e);)e=e.parentElement;let t=m(e),n=t.document.activeElement;if(!n||n===e)return;v=!0;let r=!1,o=a=>{(a.target===n||r)&&a.stopImmediatePropagation()},s=a=>{(a.target===n||r)&&(a.stopImmediatePropagation(),!e&&!r&&(r=!0,p(n),l()))},i=a=>{(a.target===e||r)&&a.stopImmediatePropagation()},c=a=>{(a.target===e||r)&&(a.stopImmediatePropagation(),r||(r=!0,p(n),l()))};t.addEventListener("blur",o,!0),t.addEventListener("focusout",s,!0),t.addEventListener("focusin",c,!0),t.addEventListener("focus",i,!0);let l=()=>{cancelAnimationFrame(h),t.removeEventListener("blur",o,!0),t.removeEventListener("focusout",s,!0),t.removeEventListener("focusin",c,!0),t.removeEventListener("focus",i,!0),v=!1,r=!1},h=requestAnimationFrame(l);return l}export{T as $,B as a,p as b,G as c,D as d,k as e,q as f,m as g,W as h,_ as i,v as j,u as k,U as l,V as m,I as n};
