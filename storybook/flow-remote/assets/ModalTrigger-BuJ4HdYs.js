import{r as c,R as o}from"./index-Cs7sjTYM.js";import{c as h}from"./clsx-B-dksMZM.js";import{P as S}from"./PropsContextProvider-DXo7lD_U.js";import{f as I,P as T,O as _}from"./flowComponent-Bg40pdZw.js";import{d as B,e as L,f as A,g as F,h as p,i as G,j as H,u as U,b as q,O as K,c as V,$ as W}from"./OverlayTrigger-Dk1assuB.js";import{$ as j,c as y,h as x,i as O,a as C,g as k,b as J}from"./utils-Cd8r7pc9.js";import{$ as w,a as g}from"./index-j_f0pOtZ.js";import{$ as R}from"./filterDOMProps-CeZl_uWj.js";import{a as Q}from"./OverlayArrow-Bm5GlnqX.js";import{H as X}from"./Header-dj3Po25X.js";import{A as Y}from"./Action-BPv-2HwL.js";import{B as Z}from"./Button-CE824h2d.js";import"./IconApp-CKfGrMYq.js";import{l as ee}from"./IconWarning-CfieAnFV.js";let m=typeof document<"u"&&window.visualViewport;function te(){let t=w(),[e,a]=c.useState(()=>t?{width:0,height:0}:v());return c.useEffect(()=>{let n=()=>{a(l=>{let r=v();return r.width===l.width&&r.height===l.height?l:r})};return m?m.addEventListener("resize",n):window.addEventListener("resize",n),()=>{m?m.removeEventListener("resize",n):window.removeEventListener("resize",n)}},[]),e}function v(){return{width:m&&(m==null?void 0:m.width)||window.innerWidth,height:m&&(m==null?void 0:m.height)||window.innerHeight}}function ae(t,e,a){let{overlayProps:n,underlayProps:l}=B({...t,isOpen:e.isOpen,onClose:e.close},a);return L({isDisabled:!e.isOpen}),A(),c.useEffect(()=>{if(e.isOpen)return F([a.current])},[e.isOpen,a]),{modalProps:g(n),underlayProps:l}}const oe=c.createContext(null),b=c.createContext(null);function ne(t,e){if(c.useContext(b))return o.createElement(E,{...t,modalRef:e},t.children);let{isDismissable:n,isKeyboardDismissDisabled:l,isOpen:r,defaultOpen:i,onOpenChange:s,children:f,isEntering:d,isExiting:u,UNSTABLE_portalContainer:N,shouldCloseOnInteractOutside:D,...z}=t;return o.createElement(P,{isDismissable:n,isKeyboardDismissDisabled:l,isOpen:r,defaultOpen:i,onOpenChange:s,isEntering:d,isExiting:u,UNSTABLE_portalContainer:N,shouldCloseOnInteractOutside:D},o.createElement(E,{...z,modalRef:e},f))}const le=c.forwardRef(ne);function re(t,e){[t,e]=j(t,e,oe);let a=c.useContext(p),n=Q(t),l=t.isOpen!=null||t.defaultOpen!=null||!a?n:a,r=y(e),i=c.useRef(null),s=x(r,l.isOpen),f=x(i,l.isOpen),d=s||f||t.isExiting||!1,u=w();return!l.isOpen&&!d||u?null:o.createElement(ie,{...t,state:l,isExiting:d,overlayRef:r,modalRef:i})}const P=c.forwardRef(re);function ie({UNSTABLE_portalContainer:t,...e}){let a=e.modalRef,{state:n}=e,{modalProps:l,underlayProps:r}=ae(e,n,a),i=O(e.overlayRef)||e.isEntering||!1,s=C({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:i,isExiting:e.isExiting,state:n}}),f=te(),d={...s.style,"--visual-viewport-height":f.height+"px"};return o.createElement(G,{isExiting:e.isExiting,portalContainer:t},o.createElement("div",{...g(R(e),r),...s,style:d,ref:e.overlayRef,"data-entering":i||void 0,"data-exiting":e.isExiting||void 0},o.createElement(k,{values:[[b,{modalProps:l,modalRef:a,isExiting:e.isExiting,isDismissable:e.isDismissable}],[p,n]]},s.children)))}function E(t){let{modalProps:e,modalRef:a,isExiting:n,isDismissable:l}=c.useContext(b),r=c.useContext(p),i=c.useMemo(()=>J(t.modalRef,a),[t.modalRef,a]),s=y(i),f=O(s),d=C({...t,defaultClassName:"react-aria-Modal",values:{isEntering:f,isExiting:n,state:r}});return o.createElement("div",{...g(R(t),e),...d,ref:s,"data-entering":f||void 0,"data-exiting":n||void 0},l&&o.createElement(H,{onDismiss:r.close}),d.children)}const se="flow--modal",de="flow--modal--off-canvas",ce="flow--modal--header",fe="flow--modal--content",me="flow--modal--action-group",$e="flow--modal--left",ue="flow--modal--close-button",$={modal:se,offCanvas:de,header:ce,content:fe,actionGroup:me,"size-s":"flow--modal--size-s","size-m":"flow--modal--size-m","modal-zoom":"flow--modal--modal-zoom","modal-slide-in-from-right":"flow--modal--modal-slide-in-from-right",left:$e,"modal-slide-in-from-left":"flow--modal--modal-slide-in-from-left","modal-slide-up":"flow--modal--modal-slide-up",closeButton:ue},pe="flow--modal-overlay--overlay",ge={overlay:pe,"overlay-fade":"flow--modal-overlay--overlay-fade"},M=t=>{const{controller:e,children:a,isDismissable:n=!0,className:l}=t,r=U("Modal",{reuseControllerFromContext:!0}),i=e??r,s=i.useIsOpen(),f=h(ge.overlay,l);return o.createElement(P,{className:f,isDismissable:n,isOpen:s,onOpenChange:d=>i.setOpen(d)},o.createElement(le,null,o.createElement(q,null,o.createElement(K,{type:"Modal",controller:i},a))))};M.__docgenInfo={description:"",methods:[],displayName:"ModalOverlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const be=I("Modal",t=>{const{size:e="s",offCanvas:a,controller:n,children:l,refProp:r,className:i,offCanvasOrientation:s="right",...f}=t,d=h(a?$.offCanvas:$.modal,$[`size-${e}`],$[s],i),u={Content:{className:$.content},Heading:{level:2,slot:"title",tunnelId:"heading"},ActionGroup:{className:$.actionGroup,spacing:"m"}};return o.createElement(M,{className:d,controller:n,...f},o.createElement(S,{props:u},o.createElement(T,null,o.createElement(X,{className:$.header},o.createElement(_,{id:"heading"}),a&&o.createElement(Y,{closeOverlay:"Modal"},o.createElement(Z,{variant:"plain",color:"secondary",className:$.closeButton},o.createElement(ee,null)))),l)))});be.__docgenInfo={description:"",methods:[],displayName:"Modal"};const xe=t=>{const{children:e,...a}=t;return o.createElement(V,{overlayType:"Modal",...a,component:W},e)};xe.__docgenInfo={description:"",methods:[],displayName:"ModalTrigger"};export{be as M,xe as a};
