import{r as o,R as m,j as $}from"./iframe-BmySKFCq.js";import{c as S}from"./clsx-B-dksMZM.js";import{u as j,a as q}from"./DialogTriggerView-MdBspzTk.js";import{$ as I,b as E,a as O,e as W}from"./utils-DoYwLUW3.js";import{d as z,e as _,f as V,g as H,h as v,i as F,j as B,k}from"./Dialog-BeGSh39F.js";import{f as C,$ as x,a as U}from"./mergeRefs-B6V94bK_.js";import{$ as w}from"./filterDOMProps-CghfNOdR.js";import{c as A,d as h,e as R}from"./OverlayArrow-RMxusYD6.js";import{v as K}from"./PropsContextProvider-BOmyjk4c.js";let c=typeof document<"u"&&window.visualViewport;function G(){let t=C(),[e,n]=o.useState(()=>t?{width:0,height:0}:y());return o.useEffect(()=>{let r=()=>{n(a=>{let i=y();return i.width===a.width&&i.height===a.height?a:i})};return c?c.addEventListener("resize",r):window.addEventListener("resize",r),()=>{c?c.removeEventListener("resize",r):window.removeEventListener("resize",r)}},[]),e}function y(){return{width:c&&(c==null?void 0:c.width)||window.innerWidth,height:c&&(c==null?void 0:c.height)||window.innerHeight}}function J(t,e,n){let{overlayProps:r,underlayProps:a}=z({...t,isOpen:e.isOpen,onClose:e.close},n);return _({isDisabled:!e.isOpen}),V(),o.useEffect(()=>{if(e.isOpen&&n.current)return H([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:x(r),underlayProps:a}}const Q=o.createContext(null),b=o.createContext(null),X=o.forwardRef(function(e,n){if(o.useContext(b))return m.createElement(g,{...e,modalRef:n},e.children);let{isDismissable:a,isKeyboardDismissDisabled:i,isOpen:f,defaultOpen:s,onOpenChange:l,children:d,isEntering:u,isExiting:p,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:L,...N}=e;return m.createElement(P,{isDismissable:a,isKeyboardDismissDisabled:i,isOpen:f,defaultOpen:s,onOpenChange:l,isEntering:u,isExiting:p,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:L},m.createElement(g,{...N,modalRef:n},d))});function Y(t,e){[t,e]=I(t,e,Q);let n=o.useContext(v),r=A(t),a=t.isOpen!=null||t.defaultOpen!=null||!n?r:n,i=E(e),f=o.useRef(null),s=h(i,a.isOpen),l=h(f,a.isOpen),d=s||l||t.isExiting||!1,u=C();return!a.isOpen&&!d||u?null:m.createElement(Z,{...t,state:a,isExiting:d,overlayRef:i,modalRef:f})}const P=o.forwardRef(Y);function Z({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:r}=e,{modalProps:a,underlayProps:i}=J(e,r,n),f=R(e.overlayRef)||e.isEntering||!1,s=O({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:f,isExiting:e.isExiting,state:r}}),l=G(),d={...s.style,"--visual-viewport-height":l.height+"px"};return m.createElement(B,{isExiting:e.isExiting,portalContainer:t},m.createElement("div",{...x(w(e,{global:!0}),i),...s,style:d,ref:e.overlayRef,"data-entering":f||void 0,"data-exiting":e.isExiting||void 0},m.createElement(W,{values:[[b,{modalProps:a,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[v,r]]},s.children)))}function g(t){let{modalProps:e,modalRef:n,isExiting:r,isDismissable:a}=o.useContext(b),i=o.useContext(v),f=o.useMemo(()=>U(t.modalRef,n),[t.modalRef,n]),s=E(f),l=R(s),d=O({...t,defaultClassName:"react-aria-Modal",values:{isEntering:l,isExiting:r,state:i}});return m.createElement("div",{...x(w(t,{global:!0}),e),...d,ref:s,"data-entering":l||void 0,"data-exiting":r||void 0},a&&m.createElement(F,{onDismiss:i.close}),d.children)}const ee="flow--overlay",te={overlay:ee},M=t=>{const{children:e,...n}=t;return $.jsx(P,{...n,children:$.jsx(X,{children:$.jsx(k,{children:e})})})};M.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const T=t=>{const e=o.useContext(K).OverlayContent??M;return $.jsx(e,{...t})};T.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const ne=t=>{const{controller:e,children:n,isDismissable:r=!0,className:a,overlayType:i="Modal",ref:f}=t,s=j(i,{reuseControllerFromContext:!0}),l=e??s,d=l.useIsOpen(),u=S(te.overlay,a);return $.jsx(T,{onOpenChange:p=>l.setOpen(p),isOpen:d,ref:f,isDismissable:r,className:u,children:$.jsx(q,{type:"Modal",controller:l,children:d&&n})})};ne.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."}},composes:["PropsWithChildren","PropsWithClassName"]};export{ne as O};
