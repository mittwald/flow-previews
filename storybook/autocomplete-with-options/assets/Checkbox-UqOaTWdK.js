import{j as x}from"./jsx-runtime-D_zvdyIk.js";import{r as m,R}from"./index-BdpSHsi2.js";import{T as G,U,V as z}from"./IconWarning-FAi_B4KI.js";import{f as A,C as J}from"./PropsContextProvider-DADx2ZcC.js";import{c as K}from"./clsx-B-dksMZM.js";import{a as L}from"./RSPContexts-Cbm9ZJUe.js";import{$ as q,c as k,f as Q,e as O,a as E,d as X,b as Y}from"./utils-CNUJJGcD.js";import{$ as Z}from"./FieldError-Dhym38A1.js";import{$ as g,b as ee,d as S,a as ae,e as ie,f as de,c as M}from"./Form-CXVBffIi.js";import{$ as le}from"./Label-DsLtIi5U.js";import{a as te}from"./Text-BJ9sUP_l.js";import{$ as V,b as ne}from"./mergeRefs-f9wmNE8z.js";import{$ as _}from"./filterDOMProps-CeZl_uWj.js";import{$ as se}from"./usePress-DWaDT6O_.js";import{$ as re,a as F}from"./useToggleState-2g6osGuI.js";import{b as oe,a as ce,$ as fe}from"./useFocusRing-BmK03SYd.js";import{$ as ue}from"./VisuallyHidden-QAya5EjI.js";import{$ as be}from"./useControlledState-rjpdN6qd.js";function j(a,e,l){let r=g({...a,value:e.isSelected}),{isInvalid:o,validationErrors:n,validationDetails:s}=r.displayValidation,{labelProps:d,inputProps:f,isSelected:i,isPressed:t,isDisabled:c,isReadOnly:v}=re({...a,isInvalid:o},e,l);ee(a,r,l);let{isIndeterminate:$,isRequired:u,validationBehavior:b="aria"}=a;m.useEffect(()=>{l.current&&(l.current.indeterminate=!!$)});let{pressProps:h}=se({isDisabled:c||v,onPress(){let{[S]:P}=a,{commitValidation:I}=P||r;I()}});return{labelProps:V(d,h),inputProps:{...f,checked:i,"aria-required":u&&b==="aria"||void 0,required:u&&b==="native"},isSelected:i,isPressed:t,isDisabled:c,isReadOnly:v,isInvalid:o,validationErrors:n,validationDetails:s}}const N=new WeakMap;function ve(a,e){let{isDisabled:l,name:r,validationBehavior:o="aria"}=a,{isInvalid:n,validationErrors:s,validationDetails:d}=e.displayValidation,{labelProps:f,fieldProps:i,descriptionProps:t,errorMessageProps:c}=ae({...a,labelElementType:"span",isInvalid:n,errorMessage:a.errorMessage||s});N.set(e,{name:r,descriptionId:t.id,errorMessageId:c.id,validationBehavior:o});let v=_(a,{labelable:!0}),{focusWithinProps:$}=oe({onBlurWithin:a.onBlur,onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange});return{groupProps:V(v,{role:"group","aria-disabled":l||void 0,...i,...$}),labelProps:f,descriptionProps:t,errorMessageProps:c,isInvalid:n,validationErrors:s,validationDetails:d}}function $e(a,e,l){const r=F({isReadOnly:a.isReadOnly||e.isReadOnly,isSelected:e.isSelected(a.value),onChange(h){h?e.addValue(a.value):e.removeValue(a.value),a.onChange&&a.onChange(h)}});let{name:o,descriptionId:n,errorMessageId:s,validationBehavior:d}=N.get(e);var f;d=(f=a.validationBehavior)!==null&&f!==void 0?f:d;let{realtimeValidation:i}=g({...a,value:r.isSelected,name:void 0,validationBehavior:"aria"}),t=m.useRef(ie),c=()=>{e.setInvalid(a.value,i.isInvalid?i:t.current)};m.useEffect(c);let v=e.realtimeValidation.isInvalid?e.realtimeValidation:i,$=d==="native"?e.displayValidation:v;var u;let b=j({...a,isReadOnly:a.isReadOnly||e.isReadOnly,isDisabled:a.isDisabled||e.isDisabled,name:a.name||o,isRequired:(u=a.isRequired)!==null&&u!==void 0?u:e.isRequired,validationBehavior:d,[S]:{realtimeValidation:v,displayValidation:$,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(h){t.current=h,c()}}},r,l);return{...b,inputProps:{...b.inputProps,"aria-describedby":[a["aria-describedby"],e.isInvalid?s:null,n].filter(Boolean).join(" ")||void 0}}}function me(a={}){let[e,l]=be(a.value,a.defaultValue||[],a.onChange),r=!!a.isRequired&&e.length===0,o=m.useRef(new Map),n=g({...a,value:e}),s=n.displayValidation.isInvalid;var d;return{...n,value:e,setValue(i){a.isReadOnly||a.isDisabled||l(i)},isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isSelected(i){return e.includes(i)},addValue(i){a.isReadOnly||a.isDisabled||e.includes(i)||l(e.concat(i))},removeValue(i){a.isReadOnly||a.isDisabled||e.includes(i)&&l(e.filter(t=>t!==i))},toggleValue(i){a.isReadOnly||a.isDisabled||(e.includes(i)?l(e.filter(t=>t!==i)):l(e.concat(i)))},setInvalid(i,t){let c=new Map(o.current);t.isInvalid?c.set(i,t):c.delete(i),o.current=c,n.updateValidation(de(...c.values()))},validationState:(d=a.validationState)!==null&&d!==void 0?d:s?"invalid":null,isInvalid:s,isRequired:r}}const he=m.createContext(null),w=m.createContext(null),We=m.forwardRef(function(e,l){[e,l]=q(e,l,he);let{validationBehavior:r}=k(M)||{};var o,n;let s=(n=(o=e.validationBehavior)!==null&&o!==void 0?o:r)!==null&&n!==void 0?n:"native",d=me({...e,validationBehavior:s}),[f,i]=X(!e["aria-label"]&&!e["aria-labelledby"]),{groupProps:t,labelProps:c,descriptionProps:v,errorMessageProps:$,...u}=ve({...e,label:i,validationBehavior:s},d),b=E({...e,values:{isDisabled:d.isDisabled,isReadOnly:d.isReadOnly,isRequired:e.isRequired||!1,isInvalid:d.isInvalid,state:d},defaultClassName:"react-aria-CheckboxGroup"});return R.createElement("div",{...t,...b,ref:l,slot:e.slot||void 0,"data-readonly":d.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":d.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},R.createElement(Y,{values:[[w,d],[le,{...c,ref:f,elementType:"span"}],[te,{slots:{description:v,errorMessage:$}}],[Z,u]]},b.children))}),xe=m.forwardRef(function(e,l){let{inputRef:r=null,...o}=e;[e,l]=q(o,l,L);let{validationBehavior:n}=k(M)||{};var s,d;let f=(d=(s=e.validationBehavior)!==null&&s!==void 0?s:n)!==null&&d!==void 0?d:"native",i=m.useContext(w),t=Q(m.useMemo(()=>ne(r,e.inputRef!==void 0?e.inputRef:null),[r,e.inputRef])),{labelProps:c,inputProps:v,isSelected:$,isDisabled:u,isReadOnly:b,isPressed:h,isInvalid:P}=i?$e({...O(e),value:e.value,children:typeof e.children=="function"?!0:e.children},i,t):j({...O(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:f},F(e),t),{isFocused:I,isFocusVisible:p,focusProps:W}=ce(),T=u||b,{hoverProps:H,isHovered:D}=fe({...e,isDisabled:T}),C=E({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:$,isIndeterminate:e.isIndeterminate||!1,isPressed:h,isHovered:D,isFocused:I,isFocusVisible:p,isDisabled:u,isReadOnly:b,isInvalid:P,isRequired:e.isRequired||!1}}),B=_(e);return delete B.id,R.createElement("label",{...V(B,c,H,C),ref:l,slot:e.slot||void 0,"data-selected":$||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":h||void 0,"data-hovered":D||void 0,"data-focused":I||void 0,"data-focus-visible":p||void 0,"data-disabled":u||void 0,"data-readonly":b||void 0,"data-invalid":P||void 0,"data-required":e.isRequired||void 0},R.createElement(ue,{elementType:"span"},R.createElement("input",{...V(v,W),ref:t})),C.children)}),Pe="flow--checkbox",Re="flow--checkbox--icon",y={checkbox:Pe,icon:Re},Ie=A("Checkbox",a=>{const{children:e,className:l,ref:r,...o}=a,n=K(y.checkbox,l);return x.jsx(J,{children:x.jsx(xe,{...o,className:n,ref:r,children:({isSelected:s,isIndeterminate:d})=>x.jsxs(x.Fragment,{children:[s?x.jsx(G,{className:y.icon}):d?x.jsx(U,{className:y.icon}):x.jsx(z,{className:y.icon}),e]})})})});Ie.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"Checkbox"};export{We as $,Ie as C};
