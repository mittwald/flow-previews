import{c as Y,r as ge}from"./index-BqwthJp6.js";import{r as w,R as re}from"./iframe-DFKQ2QsC.js";import{s as ve}from"./useFocus-BuPH9-PX.js";import{a as q}from"./ProgressBar-DQlWH-Q4.js";import{b as $e}from"./useFocusRing-Dltr6KPm.js";import{$ as he}from"./context-m8OE0ddO.js";import{$ as be}from"./useControlledState-DUrZ8j4h.js";import{$ as xe,a as Ee}from"./utils-BJXdD5he.js";import{$ as Ce}from"./filterDOMProps-BNnC3YgW.js";function Pe(){return typeof window.ResizeObserver<"u"}function D(t){const{ref:e,box:o,onResize:n}=t;let l=$e(n);w.useEffect(()=>{let r=e?.current;if(r)if(Pe()){const a=new window.ResizeObserver(s=>{s.length&&l()});return a.observe(r,{box:o}),()=>{r&&a.unobserve(r)}}else return window.addEventListener("resize",l,!1),()=>{window.removeEventListener("resize",l,!1)}},[e,o])}function qe(t,e=!0){let[o,n]=w.useState(!0),l=o&&e;return Y(()=>{if(l&&t.current&&"getAnimations"in t.current)for(let r of t.current.getAnimations())r instanceof CSSTransition&&r.cancel()},[t,l]),ie(t,l,w.useCallback(()=>n(!1),[])),l}function Je(t,e){let[o,n]=w.useState(e?"open":"closed");switch(o){case"open":e||n("exiting");break;case"closed":case"exiting":e&&n("open");break}let l=o==="exiting";return ie(t,l,w.useCallback(()=>{n(r=>r==="exiting"?"closed":r)},[])),l}function ie(t,e,o){Y(()=>{if(e&&t.current){if(!("getAnimations"in t.current)){o();return}let n=t.current.getAnimations();if(n.length===0){o();return}let l=!1;return Promise.all(n.map(r=>r.finished)).then(()=>{l||ge.flushSync(()=>{o()})}).catch(()=>{}),()=>{l=!0}}},[t,e,o])}const z={top:"top",bottom:"top",left:"left",right:"left"},G={top:"bottom",bottom:"top",left:"right",right:"left"},we={top:"left",left:"top"},J={top:"height",left:"width"},ae={width:"totalWidth",height:"totalHeight"},j={};let Te=()=>typeof document<"u"?window.visualViewport:null;function V(t,e){let o=0,n=0,l=0,r=0,a=0,s=0,u={};var f;let p=((f=e?.scale)!==null&&f!==void 0?f:1)>1;if(t.tagName==="BODY"||t.tagName==="HTML"){let $=document.documentElement;l=$.clientWidth,r=$.clientHeight;var h;o=(h=e?.width)!==null&&h!==void 0?h:l;var v;n=(v=e?.height)!==null&&v!==void 0?v:r,u.top=$.scrollTop||t.scrollTop,u.left=$.scrollLeft||t.scrollLeft,e&&(a=e.offsetTop,s=e.offsetLeft)}else({width:o,height:n,top:a,left:s}=Z(t,!1)),u.top=t.scrollTop,u.left=t.scrollLeft,l=o,r=n;if(ve()&&(t.tagName==="BODY"||t.tagName==="HTML")&&p){u.top=0,u.left=0;var m;a=(m=e?.pageTop)!==null&&m!==void 0?m:0;var c;s=(c=e?.pageLeft)!==null&&c!==void 0?c:0}return{width:o,height:n,totalWidth:l,totalHeight:r,scroll:u,top:a,left:s}}function Re(t){return{top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}}function ee(t,e,o,n,l,r,a){var s;let u=(s=l.scroll[t])!==null&&s!==void 0?s:0,f=n[J[t]],p=a[t]+n.scroll[z[t]]+r,h=a[t]+n.scroll[z[t]]+f-r,v=e-u+n.scroll[z[t]]+a[t]-n[z[t]],m=e-u+o+n.scroll[z[t]]+a[t]-n[z[t]];return v<p?p-v:m>h?Math.max(h-m,p-v):0}function Le(t){let e=window.getComputedStyle(t);return{top:parseInt(e.marginTop,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0,right:parseInt(e.marginRight,10)||0}}function te(t){if(j[t])return j[t];let[e,o]=t.split(" "),n=z[e]||"right",l=we[n];z[o]||(o="center");let r=J[n],a=J[l];return j[t]={placement:e,crossPlacement:o,axis:n,crossAxis:l,size:r,crossSize:a},j[t]}function B(t,e,o,n,l,r,a,s,u,f,p){let{placement:h,crossPlacement:v,axis:m,crossAxis:c,size:$,crossSize:x}=n,C={};var i;C[c]=(i=t[c])!==null&&i!==void 0?i:0;var L,d,b,g;v==="center"?C[c]+=(((L=t[x])!==null&&L!==void 0?L:0)-((d=o[x])!==null&&d!==void 0?d:0))/2:v!==c&&(C[c]+=((b=t[x])!==null&&b!==void 0?b:0)-((g=o[x])!==null&&g!==void 0?g:0)),C[c]+=r;const T=t[c]-o[x]+u+f,P=t[c]+t[x]-u-f;if(C[c]=q(C[c],T,P),h===m){let M=s?p[$]:p[ae[$]];C[G[m]]=Math.floor(M-t[m]+l)}else C[m]=Math.floor(t[m]+t[$]+l);return C}function _e(t,e,o,n,l,r,a,s,u,f,p){var h,v;let m=(t.top!=null?t.top:u[ae.height]-((h=t.bottom)!==null&&h!==void 0?h:0)-a)-((v=u.scroll.top)!==null&&v!==void 0?v:0),c=f?o.top:0;var $,x,C;let i={top:Math.max(e.top+c,(($=p?.offsetTop)!==null&&$!==void 0?$:e.top)+c),bottom:Math.min(e.top+e.height+c,((x=p?.offsetTop)!==null&&x!==void 0?x:0)+((C=p?.height)!==null&&C!==void 0?C:0))};var L,d,b,g;return s!=="top"?Math.max(0,i.bottom-m-(((L=l.top)!==null&&L!==void 0?L:0)+((d=l.bottom)!==null&&d!==void 0?d:0)+r)):Math.max(0,m+a-i.top-(((b=l.top)!==null&&b!==void 0?b:0)+((g=l.bottom)!==null&&g!==void 0?g:0)+r))}function oe(t,e,o,n,l,r,a,s){let{placement:u,axis:f,size:p}=r;var h,v;if(u===f)return Math.max(0,o[f]-((h=a.scroll[f])!==null&&h!==void 0?h:0)-(t[f]+(s?e[f]:0))-((v=n[f])!==null&&v!==void 0?v:0)-n[G[f]]-l);var m,c;return Math.max(0,t[p]+t[f]+(s?e[f]:0)-o[f]-o[p]+((m=a.scroll[f])!==null&&m!==void 0?m:0)-((c=n[f])!==null&&c!==void 0?c:0)-n[G[f]]-l)}function Se(t,e,o,n,l,r,a,s,u,f,p,h,v,m,c,$,x,C){let i=te(t),{size:L,crossAxis:d,crossSize:b,placement:g,crossPlacement:T}=i,P=B(e,s,o,i,p,h,f,v,c,$,u),M=p,F=oe(s,f,e,l,r+p,i,u,x);if(a&&o[L]>F){let W=te(`${G[g]} ${T}`),me=B(e,s,o,W,p,h,f,v,c,$,u);oe(s,f,e,l,r+p,W,u,x)>F&&(i=W,P=me,M=p)}let y="bottom";i.axis==="top"?i.placement==="top"?y="top":i.placement==="bottom"&&(y="bottom"):i.crossAxis==="top"&&(i.crossPlacement==="top"?y="bottom":i.crossPlacement==="bottom"&&(y="top"));let R=ee(d,P[d],o[b],s,u,r,f);P[d]+=R;let S=_e(P,s,f,v,l,r,o.height,y,u,x,C);m&&m<S&&(S=m),o.height=Math.min(o.height,S),P=B(e,s,o,i,M,h,f,v,c,$,u),R=ee(d,P[d],o[b],s,u,r,f),P[d]+=R;let A={},H=e[d]-P[d]-l[z[d]],I=H+.5*e[b];const X=c/2+$;var N,k,_,O;const U=z[d]==="left"?((N=l.left)!==null&&N!==void 0?N:0)+((k=l.right)!==null&&k!==void 0?k:0):((_=l.top)!==null&&_!==void 0?_:0)+((O=l.bottom)!==null&&O!==void 0?O:0),se=o[b]-U-c/2-$,fe=e[d]+c/2-(P[d]+l[z[d]]),de=e[d]+e[b]-c/2-(P[d]+l[z[d]]),ue=q(I,fe,de);A[d]=q(ue,X,se),{placement:g,crossPlacement:T}=i,c?H=A[d]:T==="right"?H+=e[b]:T==="center"&&(H+=e[b]/2);let Q=g==="left"||g==="top"?o[L]:0,pe={x:g==="top"||g==="bottom"?H:Q,y:g==="left"||g==="right"?H:Q};return{position:P,maxHeight:S,arrowOffsetLeft:A.left,arrowOffsetTop:A.top,placement:g,triggerAnchorPoint:pe}}function Ae(t){let{placement:e,targetNode:o,overlayNode:n,scrollNode:l,padding:r,shouldFlip:a,boundaryElement:s,offset:u,crossOffset:f,maxHeight:p,arrowSize:h=0,arrowBoundaryOffset:v=0}=t,m=Te(),c=n instanceof HTMLElement?He(n):document.documentElement,$=c===document.documentElement;const x=window.getComputedStyle(c).position;let C=!!x&&x!=="static",i=$?Z(o,!1):le(o,c,!1);if(!$){let{marginTop:A,marginLeft:H}=window.getComputedStyle(o);i.top+=parseInt(A,10)||0,i.left+=parseInt(H,10)||0}let L=Z(n,!0),d=Le(n);var b,g;L.width+=((b=d.left)!==null&&b!==void 0?b:0)+((g=d.right)!==null&&g!==void 0?g:0);var T,P;L.height+=((T=d.top)!==null&&T!==void 0?T:0)+((P=d.bottom)!==null&&P!==void 0?P:0);let M=Re(l),F=V(s,m),y=V(c,m),R=le(s,c,!1),S=s.contains(c);return Se(e,i,L,M,d,r,a,F,y,R,u,f,C,p,h,v,S,m)}function K(t,e){let{top:o,left:n,width:l,height:r}=t.getBoundingClientRect();return e&&t instanceof t.ownerDocument.defaultView.HTMLElement&&(l=t.offsetWidth,r=t.offsetHeight),{top:o,left:n,width:l,height:r}}function Z(t,e){let{top:o,left:n,width:l,height:r}=K(t,e),{scrollTop:a,scrollLeft:s,clientTop:u,clientLeft:f}=document.documentElement;return{top:o+a-u,left:n+s-f,width:l,height:r}}function le(t,e,o){let n=window.getComputedStyle(t),l;if(n.position==="fixed")l=K(t,o);else{l=Z(t,o);let r=Z(e,o),a=window.getComputedStyle(e);r.top+=(parseInt(a.borderTopWidth,10)||0)-e.scrollTop,r.left+=(parseInt(a.borderLeftWidth,10)||0)-e.scrollLeft,l.top-=r.top,l.left-=r.left}return l.top-=parseInt(n.marginTop,10)||0,l.left-=parseInt(n.marginLeft,10)||0,l}function He(t){let e=t.offsetParent;if(e&&e===document.body&&window.getComputedStyle(e).position==="static"&&!ne(e)&&(e=document.documentElement),e==null)for(e=t.parentElement;e&&!ne(e);)e=e.parentElement;return e||document.documentElement}function ne(t){let e=window.getComputedStyle(t);return e.transform!=="none"||/transform|perspective/.test(e.willChange)||e.filter!=="none"||e.contain==="paint"||"backdropFilter"in e&&e.backdropFilter!=="none"||"WebkitBackdropFilter"in e&&e.WebkitBackdropFilter!=="none"}const ze=new WeakMap;function ye(t){let{triggerRef:e,isOpen:o,onClose:n}=t;w.useEffect(()=>{if(!o||n===null)return;let l=r=>{let a=r.target;if(!e.current||a instanceof Node&&!a.contains(e.current)||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement)return;let s=n||ze.get(e.current);s&&s()};return window.addEventListener("scroll",l,!0),()=>{window.removeEventListener("scroll",l,!0)}},[o,n,e])}let E=typeof document<"u"?window.visualViewport:null;function Ke(t){let{direction:e}=he(),{arrowSize:o,targetRef:n,overlayRef:l,arrowRef:r,scrollRef:a=l,placement:s="bottom",containerPadding:u=12,shouldFlip:f=!0,boundaryElement:p=typeof document<"u"?document.body:null,offset:h=0,crossOffset:v=0,shouldUpdatePosition:m=!0,isOpen:c=!0,onClose:$,maxHeight:x,arrowBoundaryOffset:C=0}=t,[i,L]=w.useState(null),d=[m,s,l.current,n.current,r?.current,a.current,u,f,p,h,v,c,e,x,C,o],b=w.useRef(E?.scale);w.useEffect(()=>{c&&(b.current=E?.scale)},[c]);let g=w.useCallback(()=>{if(m===!1||!c||!l.current||!n.current||!p||E?.scale!==b.current)return;let R=null;if(a.current&&a.current.contains(document.activeElement)){var S;let _=(S=document.activeElement)===null||S===void 0?void 0:S.getBoundingClientRect(),O=a.current.getBoundingClientRect();var A;if(R={type:"top",offset:((A=_?.top)!==null&&A!==void 0?A:0)-O.top},R.offset>O.height/2){R.type="bottom";var H;R.offset=((H=_?.bottom)!==null&&H!==void 0?H:0)-O.bottom}}let I=l.current;if(!x&&l.current){var X;I.style.top="0px",I.style.bottom="";var N;I.style.maxHeight=((N=(X=window.visualViewport)===null||X===void 0?void 0:X.height)!==null&&N!==void 0?N:window.innerHeight)+"px"}let k=Ae({placement:Me(s,e),overlayNode:l.current,targetNode:n.current,scrollNode:a.current||l.current,padding:u,shouldFlip:f,boundaryElement:p,offset:h,crossOffset:v,maxHeight:x,arrowSize:o??(r?.current?K(r.current,!0).width:0),arrowBoundaryOffset:C});if(k.position){if(I.style.top="",I.style.bottom="",I.style.left="",I.style.right="",Object.keys(k.position).forEach(_=>I.style[_]=k.position[_]+"px"),I.style.maxHeight=k.maxHeight!=null?k.maxHeight+"px":"",R&&document.activeElement&&a.current){let _=document.activeElement.getBoundingClientRect(),O=a.current.getBoundingClientRect(),U=_[R.type]-O[R.type];a.current.scrollTop+=U-R.offset}L(k)}},d);Y(g,d),Ie(g),D({ref:l,onResize:g}),D({ref:n,onResize:g});let T=w.useRef(!1);Y(()=>{let R,S=()=>{T.current=!0,clearTimeout(R),R=setTimeout(()=>{T.current=!1},500),g()},A=()=>{T.current&&S()};return E?.addEventListener("resize",S),E?.addEventListener("scroll",A),()=>{E?.removeEventListener("resize",S),E?.removeEventListener("scroll",A)}},[g]);let P=w.useCallback(()=>{T.current||$?.()},[$,T]);ye({triggerRef:n,isOpen:c,onClose:$&&P});var M,F,y;return{overlayProps:{style:{position:i?"absolute":"fixed",top:i?void 0:0,left:i?void 0:0,zIndex:1e5,...i?.position,maxHeight:(M=i?.maxHeight)!==null&&M!==void 0?M:"100vh"}},placement:(F=i?.placement)!==null&&F!==void 0?F:null,triggerAnchorPoint:(y=i?.triggerAnchorPoint)!==null&&y!==void 0?y:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:i?.arrowOffsetLeft,top:i?.arrowOffsetTop}},updatePosition:g}}function Ie(t){Y(()=>(window.addEventListener("resize",t,!1),()=>{window.removeEventListener("resize",t,!1)}),[t])}function Me(t,e){return e==="rtl"?t.replace("start","right").replace("end","left"):t.replace("start","left").replace("end","right")}const ce=w.createContext({});function Qe(t){let{getContainer:e}=t,{getContainer:o}=ke();return re.createElement(ce.Provider,{value:{getContainer:e===null?void 0:e??o}},t.children)}function ke(){var t;return(t=w.useContext(ce))!==null&&t!==void 0?t:{}}function De(t){let[e,o]=be(t.isOpen,t.defaultOpen||!1,t.onOpenChange);const n=w.useCallback(()=>{o(!0)},[o]),l=w.useCallback(()=>{o(!1)},[o]),r=w.useCallback(()=>{o(!e)},[o,e]);return{isOpen:e,setOpen:o,open:n,close:l,toggle:r}}const Oe=w.createContext({placement:"bottom"}),Ve=w.forwardRef(function(e,o){[e,o]=xe(e,o,Oe);let n=e.placement,l={position:"absolute",transform:n==="top"||n==="bottom"?"translateX(-50%)":"translateY(-50%)"};n!=null&&(l[n]="100%");let r=Ee({...e,defaultClassName:"react-aria-OverlayArrow",values:{placement:n}});r.style&&Object.keys(r.style).forEach(s=>r.style[s]===void 0&&delete r.style[s]);let a=Ce(e);return re.createElement("div",{...a,...r,style:{...l,...r.style},ref:o,"data-placement":n})});export{Ve as $,ze as a,Ke as b,ke as c,De as d,Je as e,qe as f,Oe as g,D as h,Qe as i};
