import{j as r}from"./iframe-EtTbRQoM.js";import{f as d}from"./FormField.module-CqWyJNQI.js";import{$ as I,b as w}from"./useFormValidation-CisZkPpg.js";import{a as C}from"./FieldError-Dm1dzE4u.js";import{a as P,$ as j}from"./Input-TlPGvJ5n.js";import{b as v}from"./utils-C_hvyJpn.js";import{P as g,f as R}from"./flowComponent-CRP3amPt.js";import"./browser-Cob99Do9.js";import{u as B}from"./useMakeFocusable-qjH8k0Qb.js";const f="mittwald.flow-core.file.awaitedArrayBuffer";function N(e){return f in e&&e[f]instanceof ArrayBuffer&&!e[f].detached}const q=async e=>{if(N(e))return e;const i=await e.arrayBuffer();return Object.assign(e,{[f]:i}),e},A="flow--file-field--file-input",T="flow--file-field--trigger",h={FileInput:A,trigger:T},b=e=>{const{children:i,isDisabled:c,onChange:s,isReadOnly:p,ref:u}=e,a=v(u),o=()=>{a.current?.value&&(a.current.value="",s?.(null)),a.current?.click()},n=t=>{s?.(t.target.files)},m={Button:{onPress:o,className:h.trigger,isDisabled:c,isReadOnly:p}};return r.jsxs(g,{props:m,children:[i,r.jsx(P,{className:h.FileInput,type:"file",ref:a,onChange:n})]})};b.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren"]};const D=R("FileField",e=>{const{children:i,ref:c,isRequired:s,isInvalid:p,isDisabled:u,validationBehavior:a,onChange:o,isReadOnly:n,...m}=e,t=v(c),l=I({value:void 0,validationBehavior:a,isInvalid:p});w({validationBehavior:a},l,t);const F={...m,"aria-invalid":l.displayValidation.isInvalid,value:void 0},$={Label:{className:d.label,optional:!e.isRequired},FieldDescription:{className:d.fieldDescription},FieldError:{className:d.customFieldError}},x=y=>{y&&o&&Promise.all(Array.from(y).map(q)).then(()=>o(y))};return B(t),r.jsx(j.Provider,{value:F,children:r.jsx(C.Provider,{value:l.displayValidation,children:r.jsx(g,{props:$,children:r.jsx("div",{"data-readonly":n,"data-required":!!s||void 0,"data-invalid":l.displayValidation.isInvalid||void 0,className:d.formField,children:r.jsx(b,{ref:t,isReadOnly:n,onChange:n?void 0:x,isDisabled:u,children:i})})})})})});D.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"FileField"};export{D as F,q as a};
