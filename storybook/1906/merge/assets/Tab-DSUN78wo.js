import{r as f,R as $,j as d}from"./iframe-fiZAYE2W.js";import{A as w,f as q,k as _,z as T,P as U}from"./PropsContextProvider-DiYt5N9g.js";import{a as G,C as J,M as Q}from"./ContextMenuContent-DYpl0Nfb.js";import{B as X}from"./Button-CPh6A0ie.js";import{N as Y}from"./IconWarning-CB_niWR5.js";import{c as P}from"./clsx-B-dksMZM.js";import{T as Z}from"./Text-BgnbdcU8.js";import{A as F}from"./Activity-BIVvjdgA.js";import{$ as O,c as ee,b as te}from"./Collection-BspUYjq1.js";import{b as N,a as I,e as L,$ as se,c as ae}from"./utils-sHGDZ6Zl.js";import{$ as ie,b as ne,c as oe}from"./CollectionBuilder-DSqxmXm5.js";import{b as le}from"./Hidden-l1NKNxky.js";import{$ as h,d as re}from"./mergeRefs-DAMFNCwk.js";import{$ as K}from"./filterDOMProps-CghfNOdR.js";import{$ as E}from"./inertValue-Dg4TW_2s.js";import{$ as R}from"./useLabel-8IHfk19G.js";import{$ as de}from"./useHasTabbableChild--W9T3sbh.js";import{b as ce}from"./usePress-j57SM-Nw.js";import{$ as ue}from"./useFocusable-DMthjPSk.js";import{d as fe,a as be}from"./SelectionManager-F5TK6880.js";import{$ as me}from"./context-0IVozT_C.js";import{a as j,$ as $e}from"./useFocusRing-B57qzYJa.js";import{$ as pe}from"./useSingleSelectListState-CPuH-H_D.js";const k=new WeakMap;function D(s,e,t){return s?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${k.get(s)}-${t}-${e}`):""}function xe(s,e,t){let{key:a,isDisabled:i,shouldSelectOnPressUp:r}=s,{selectionManager:n,selectedKey:o}=e,l=a===o,c=i||e.isDisabled||e.selectionManager.isDisabled(a),{itemProps:b,isPressed:u}=fe({selectionManager:n,key:a,ref:t,isDisabled:c,shouldSelectOnPressUp:r,linkBehavior:"selection"}),m=D(e,a,"tab"),x=D(e,a,"tabpanel"),{tabIndex:v}=b,p=e.collection.getItem(a),y=K(p==null?void 0:p.props,{labelable:!0});delete y.id;let H=ce(p==null?void 0:p.props),{focusableProps:z}=ue({isDisabled:c},t);return{tabProps:h(y,z,H,b,{id:m,"aria-selected":l,"aria-disabled":c||void 0,"aria-controls":l?x:void 0,tabIndex:c?void 0:v,role:"tab"}),isSelected:l,isDisabled:c,isPressed:u}}function he(s,e,t){let a=de(t)?void 0:0;var i;const r=D(e,(i=s.id)!==null&&i!==void 0?i:e==null?void 0:e.selectedKey,"tabpanel"),n=R({...s,id:r,"aria-labelledby":D(e,e==null?void 0:e.selectedKey,"tab")});return{tabPanelProps:h(n,{tabIndex:a,role:"tabpanel","aria-describedby":s["aria-describedby"],"aria-details":s["aria-details"]})}}class ve{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,a;return this.disabledKeys.has(e)||!!(!((a=this.collection.getItem(e))===null||a===void 0||(t=a.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let t=e;do t=this.collection.getKeyAfter(t),t==null&&(t=this.collection.getFirstKey());while(t!=null&&this.isDisabled(t));return t}getPreviousKey(e){let t=e;do t=this.collection.getKeyBefore(t),t==null&&(t=this.collection.getLastKey());while(t!=null&&this.isDisabled(t));return t}constructor(e,t,a,i=new Set){this.collection=e,this.flipDirection=t==="rtl"&&a==="horizontal",this.disabledKeys=i,this.tabDirection=a==="horizontal"}}function ye(s,e,t){let{orientation:a="horizontal",keyboardActivation:i="automatic"}=s,{collection:r,selectionManager:n,disabledKeys:o}=e,{direction:l}=me(),c=f.useMemo(()=>new ve(r,l,a,o),[r,o,a,l]),{collectionProps:b}=be({ref:t,selectionManager:n,keyboardDelegate:c,selectOnFocus:i==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),u=re();k.set(e,u);let m=R({...s,id:u});return{tabListProps:{...h(b,m),role:"tablist","aria-orientation":a,tabIndex:void 0}}}function ge(s){var e,t;let a=pe({...s,onSelectionChange:s.onSelectionChange?l=>{var c;l!=null&&((c=s.onSelectionChange)===null||c===void 0||c.call(s,l))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=s.defaultSelectedKey)!==null&&e!==void 0?e:A(s.collection,s.disabledKeys?new Set(s.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:i,collection:r,selectedKey:n}=a,o=f.useRef(n);return f.useEffect(()=>{let l=n;s.selectedKey==null&&(i.isEmpty||l==null||!r.getItem(l))&&(l=A(r,a.disabledKeys),l!=null&&i.setSelectedKeys([l])),(l!=null&&i.focusedKey==null||!i.isFocused&&l!==o.current)&&i.setFocusedKey(l),o.current=l}),{...a,isDisabled:s.isDisabled||!1}}function A(s,e){let t=null;if(s){var a,i,r,n;for(t=s.getFirstKey();t!=null&&(e.has(t)||!((i=s.getItem(t))===null||i===void 0||(a=i.props)===null||a===void 0)&&a.isDisabled)&&t!==s.getLastKey();)t=s.getKeyAfter(t);t!=null&&(e.has(t)||!((n=s.getItem(t))===null||n===void 0||(r=n.props)===null||r===void 0)&&r.isDisabled)&&t===s.getLastKey()&&(t=s.getFirstKey())}return t}const M=f.createContext(null),g=f.createContext(null),Pe=f.forwardRef(function(e,t){[e,t]=se(e,t,M);let{children:a,orientation:i="horizontal"}=e;return a=f.useMemo(()=>typeof a=="function"?a({orientation:i,defaultChildren:null}):a,[a,i]),$.createElement(ne,{content:a},r=>$.createElement(Ke,{props:e,collection:r,tabsRef:t}))});function Ke({props:s,tabsRef:e,collection:t}){let{orientation:a="horizontal"}=s,i=ge({...s,collection:t,children:void 0}),{focusProps:r,isFocused:n,isFocusVisible:o}=j({within:!0}),l=f.useMemo(()=>({orientation:a,isFocusWithin:n,isFocusVisible:o}),[a,n,o]),c=I({...s,defaultClassName:"react-aria-Tabs",values:l}),b=K(s,{global:!0});return $.createElement("div",{...h(b,c,r),ref:e,slot:s.slot||void 0,"data-focused":n||void 0,"data-orientation":a,"data-focus-visible":o||void 0,"data-disabled":i.isDisabled||void 0},$.createElement(L,{values:[[M,s],[g,i]]},c.children))}const Ce=f.forwardRef(function(e,t){return f.useContext(g)?$.createElement(Te,{props:e,forwardedRef:t}):$.createElement(oe,e)});function Te({props:s,forwardedRef:e}){let t=f.useContext(g),{CollectionRoot:a}=f.useContext(O),{orientation:i="horizontal",keyboardActivation:r="automatic"}=ae(M),n=N(e),{tabListProps:o}=ye({...s,orientation:i,keyboardActivation:r},t,n),l=I({...s,children:null,defaultClassName:"react-aria-TabList",values:{orientation:i,state:t}}),c=K(s,{global:!0});return delete c.id,$.createElement("div",{...h(c,l,o),ref:n,"data-orientation":i||void 0},$.createElement(a,{collection:t.collection,persistedKeys:te(t.selectionManager.focusedKey)}))}const Se=ie("item",(s,e,t)=>{let a=f.useContext(g),i=N(e),{tabProps:r,isSelected:n,isDisabled:o,isPressed:l}=xe({key:t.key,...s},a,i),{focusProps:c,isFocused:b,isFocusVisible:u}=j(),{hoverProps:m,isHovered:x}=$e({isDisabled:o,onHoverStart:s.onHoverStart,onHoverEnd:s.onHoverEnd,onHoverChange:s.onHoverChange}),v=I({...s,id:void 0,children:t.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:n,isDisabled:o,isFocused:b,isFocusVisible:u,isPressed:l,isHovered:x}}),p=t.props.href?"a":"div",y=K(s,{global:!0});return delete y.id,delete y.onClick,$.createElement(p,{...h(y,v,r,c,m),ref:i,"data-selected":n||void 0,"data-disabled":o||void 0,"data-focused":b||void 0,"data-focus-visible":u||void 0,"data-pressed":l||void 0,"data-hovered":x||void 0},v.children)}),we=le(function(e,t){const a=f.useContext(g);let i=N(t),{id:r,...n}=e,{tabPanelProps:o}=he(e,a,i),{focusProps:l,isFocused:c,isFocusVisible:b}=j(),u=a.selectedKey===e.id,m=I({...e,defaultClassName:"react-aria-TabPanel",values:{isFocused:c,isFocusVisible:b,isInert:E(!u),state:a}});if(!u&&!e.shouldForceMount)return null;let x=K(n,{global:!0});delete x.id;let v=u?h(x,o,l,m):m;return $.createElement("div",{...v,ref:i,"data-focused":c||void 0,"data-focus-visible":b||void 0,inert:E(!u||e.inert),"data-inert":u?void 0:"true"},$.createElement(L,{values:[[M,null],[g,null]]},$.createElement(O.Provider,{value:ee},m.children)))}),De="flow--tabs--tab-list",Ie="flow--tabs--tab-list--context-menu-button",Me="flow--tabs--tab-list--titles",Ne="flow--tabs--tab-list--collapsed",C={tabList:De,contextMenuButton:Ie,titles:Me,collapsed:Ne};function je(s,e){var t=f.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(a){var i=t.value;i!==a&&(t.value=a,t.callback(a,i))}}}})[0];return t.callback=e,t.facade}const Fe=()=>{const s=f.useRef(null),[e,t]=f.useState(!1),a=je(null,o=>{n(),r(o)}),i=([o])=>{o&&t(!o.isIntersecting)},r=(o=a.current)=>{if(o&&o instanceof Element){const l=new IntersectionObserver(i,{root:o.parentElement,threshold:1});s.current=l,l.observe(o)}},n=()=>{var o;(o=s.current)==null||o.disconnect()};return f.useEffect(()=>(r(),n),[s.current]),{ref:a,isOverflowing:e}},Ee="flow--tabs--tab-title",Ae="flow--tabs--tab-title--text",Oe="flow--tabs--tab-title--menu-item",S={tabTitle:Ee,text:Ae,menuItem:Oe},W=s=>{const{className:e,...t}=s,a=P(e,S.tabTitle);return d.jsx("div",{...t,className:a,"data-selected":!0,children:d.jsx(w,{id:"ActiveTitle"})})};W.__docgenInfo={description:"",methods:[],displayName:"TabTitleCollapsed",props:{id:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithClassName"]};const B=s=>{const{selection:e,disabledKeys:t,onContextMenuSelectionChange:a}=s,i=f.useId(),r=Fe(),n=r.isOverflowing,o=P(C.tabList,n&&C.collapsed),l=m=>{a(m)},c=d.jsx(Ce,{className:C.titles,ref:r.ref,children:d.jsx(w,{id:"Titles"})}),b=n&&d.jsx(W,{id:i}),u=n&&d.jsxs(G,{children:[d.jsx(X,{variant:"soft",className:C.contextMenuButton,color:"secondary","aria-labelledby":i,children:d.jsx(Y,{})}),d.jsx(J,{disabledKeys:t,selectedKeys:e?[e]:void 0,selectionMode:"navigation",onAction:m=>l(m),children:d.jsx(w,{id:"ContextMenuItems"})})]});return d.jsxs("div",{className:o,children:[c,b,u]})};B.__docgenInfo={description:"",methods:[],displayName:"TabList",props:{selection:{required:!0,tsType:{name:"union",raw:"Aria.Key | undefined",elements:[{name:"Aria.Key"},{name:"undefined"}]},description:""},onContextMenuSelectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Aria.Key) => void",signature:{arguments:[{type:{name:"Aria.Key"},name:"key"}],return:{name:"void"}}},description:""},disabledKeys:{required:!1,tsType:{name:"Iterable",elements:[{name:"Aria.Key"}],raw:"Iterable<Aria.Key>"},description:""}}};const Le="flow--tabs",Re={tabs:Le},ke=q("Tabs",s=>{const{children:e,className:t,defaultSelectedKey:a,disabledKeys:i,ref:r,onSelectionChange:n,...o}=s,l=P(Re.tabs,t),[c,b]=f.useState(a);return d.jsxs(_,{children:[e,d.jsxs(Pe,{slot:null,className:l,...o,selectedKey:c,onSelectionChange:u=>{b(u),n&&n(u)},disabledKeys:i,ref:r,children:[d.jsx(B,{selection:c,onContextMenuSelectionChange:u=>{b(u),n&&n(u)},disabledKeys:i}),d.jsx(w,{id:"Panels"})]})]})});ke.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tabs"};const V=f.createContext({id:"undefined"}),We=()=>f.useContext(V),Be=V.Provider,Ve=s=>{const{children:e,className:t,...a}=s,{id:i}=We(),r=P(S.tabTitle,t);return d.jsxs(d.Fragment,{children:[d.jsx(T,{id:"Titles",children:d.jsx(Se,{...a,id:i,className:r,children:n=>d.jsxs(d.Fragment,{children:[d.jsx(Z,{emulateBoldWidth:!0,children:d.jsx("span",{className:S.text,children:e})}),d.jsx(T,{id:"ActiveTitle",children:n.isSelected&&e})]})})}),d.jsx(T,{id:"ContextMenuItems",children:d.jsx(Q,{className:S.menuItem,id:i,children:e})})]})};Ve.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TabTitle",composes:["Omit","PropsWithChildren"]};const He="flow--tabs--tab--tab-panel",ze={tabPanel:He},qe=s=>{const{children:e,className:t,id:a,...i}=s,r=P(ze.tabPanel,t),n=f.useId(),o=a??n,l=c=>{const b=c.state.selectedKey===o,u={Content:{wrapWith:d.jsx(F,{isActive:b})},Section:{wrapWith:d.jsx(F,{isActive:b})}};return d.jsx(U,{props:u,dependencies:[b,e],children:e})};return d.jsx(T,{id:"Panels",children:d.jsx(Be,{value:{id:o},children:d.jsx(we,{className:r,shouldForceMount:!0,id:o,...i,children:l})})})};qe.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"Tab",composes:["Omit","PropsWithChildren"]};export{ke as T,qe as a,Ve as b};
