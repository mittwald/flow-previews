import{j as P}from"./jsx-runtime-CLpGMVip.js";import{R as s,r as a}from"./index-Cf9XvIV_.js";import{c as H}from"./clsx-B-dksMZM.js";import{g as I,$ as j,a as B}from"./utils-CVMEqJeI.js";import{b as _,c as F,d as W,a as k,e as A,$ as U}from"./OverlayArrow-CGwtiaMv.js";import{$ as K,a as V}from"./useFocusable-ZIe1iymP.js";import{$ as q,a as O,d as z,c as Y}from"./index-CoqFY4cC.js";import{a as S,g as G,q as J}from"./useFocusRing-CKcPrrmF.js";import{$ as Q}from"./filterDOMProps-BSfnXAP7.js";import{M as X}from"./index-CFEY-m6m.js";const h=s.createContext(null);function Z(t){let{children:r}=t,e=a.useContext(h),[l,i]=a.useState(0),c=a.useMemo(()=>({parent:e,modalCount:l,addModal(){i(n=>n+1),e&&e.addModal()},removeModal(){i(n=>n-1),e&&e.removeModal()}}),[e,l]);return s.createElement(h.Provider,{value:c},r)}function ee(){let t=a.useContext(h);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:void 0}}}function te(t){let{modalProviderProps:r}=ee();return s.createElement("div",{"data-overlay-container":!0,...t,...r})}function re(t){return s.createElement(Z,null,s.createElement(te,t))}function oe(t){let r=q(),{portalContainer:e=r?null:document.body,...l}=t;if(s.useEffect(()=>{if(e!=null&&e.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[e]),!e)return null;let i=s.createElement(re,l);return X.createPortal(i,e)}function le(t,r){let e=Q(t,{labelable:!0}),{hoverProps:l}=S({onHoverStart:()=>r==null?void 0:r.open(!0),onHoverEnd:()=>r==null?void 0:r.close()});return{tooltipProps:O(e,l,{role:"tooltip"})}}function ne(t,r,e){let{isDisabled:l,trigger:i}=t,c=z(),n=a.useRef(!1),o=a.useRef(!1),u=()=>{(n.current||o.current)&&r.open(o.current)},d=g=>{!n.current&&!o.current&&r.close(g)};a.useEffect(()=>{let g=C=>{e&&e.current&&C.key==="Escape"&&(C.stopPropagation(),r.close(!0))};if(r.isOpen)return document.addEventListener("keydown",g,!0),()=>{document.removeEventListener("keydown",g,!0)}},[e,r]);let m=()=>{i!=="focus"&&(G()==="pointer"?n.current=!0:n.current=!1,u())},x=()=>{i!=="focus"&&(o.current=!1,n.current=!1,d())},v=()=>{o.current=!1,n.current=!1,d(!0)},T=()=>{J()&&(o.current=!0,u())},f=()=>{o.current=!1,n.current=!1,d(!0)},{hoverProps:L}=S({isDisabled:l,onHoverStart:m,onHoverEnd:x}),{focusableProps:N}=K({isDisabled:l,onFocus:T,onBlur:f},e);return{triggerProps:{"aria-describedby":r.isOpen?c:void 0,...O(N,L,{onPointerDown:v,onKeyDown:v})},tooltipProps:{id:c}}}const ae=1500,w=500;let p={},ie=0,E=!1,$=null,b=null;function D(t={}){let{delay:r=ae,closeDelay:e=w}=t,{isOpen:l,open:i,close:c}=_(t),n=a.useMemo(()=>`${++ie}`,[]),o=a.useRef(null),u=a.useRef(c),d=()=>{p[n]=v},m=()=>{for(let f in p)f!==n&&(p[f](!0),delete p[f])},x=()=>{o.current&&clearTimeout(o.current),o.current=null,m(),d(),E=!0,i(),$&&(clearTimeout($),$=null),b&&(clearTimeout(b),b=null)},v=f=>{f||e<=0?(o.current&&clearTimeout(o.current),o.current=null,u.current()):o.current||(o.current=setTimeout(()=>{o.current=null,u.current()},e)),$&&(clearTimeout($),$=null),E&&(b&&clearTimeout(b),b=setTimeout(()=>{delete p[n],b=null,E=!1},Math.max(w,e)))},T=()=>{m(),d(),!l&&!$&&!E?$=setTimeout(()=>{$=null,E=!0,x()},r):l||x()};return a.useEffect(()=>{u.current=c},[c]),a.useEffect(()=>()=>{o.current&&clearTimeout(o.current),p[n]&&delete p[n]},[n]),{isOpen:l,open:f=>{!f&&r>0&&!o.current?T():x()},close:v}}const y=a.createContext(null),M=a.createContext(null);function ce(t){let r=D(t),e=a.useRef(null),{triggerProps:l,tooltipProps:i}=ne(t,r,e);return s.createElement(I,{values:[[y,r],[M,{...i,triggerRef:e}]]},s.createElement(V,{...l,ref:e},t.children))}const se=a.forwardRef(function({UNSTABLE_portalContainer:r,...e},l){[e,l]=j(e,l,M);let i=a.useContext(y),c=D(e),n=e.isOpen!=null||e.defaultOpen!=null||!i?c:i,o=F(l,n.isOpen)||e.isExiting||!1;return!n.isOpen&&!o?null:s.createElement(oe,{portalContainer:r},s.createElement(de,{...e,tooltipRef:l,isExiting:o}))});function de(t){let r=a.useContext(y),e=a.useRef(null),[l,i]=a.useState(0);Y(()=>{e.current&&r.isOpen&&i(e.current.getBoundingClientRect().width)},[r.isOpen,e]);let{overlayProps:c,arrowProps:n,placement:o}=W({placement:t.placement||"top",targetRef:t.triggerRef,overlayRef:t.tooltipRef,offset:t.offset,crossOffset:t.crossOffset,isOpen:r.isOpen,arrowSize:l,arrowBoundaryOffset:t.arrowBoundaryOffset,shouldFlip:t.shouldFlip,onClose:()=>r.close(!0)}),u=k(t.tooltipRef,!!o)||t.isEntering||!1,d=B({...t,defaultClassName:"react-aria-Tooltip",values:{placement:o,isEntering:u,isExiting:t.isExiting,state:r}});t=O(t,c);let{tooltipProps:m}=le(t,r);return s.createElement("div",{...m,ref:t.tooltipRef,...d,style:{...c.style,...d.style},"data-placement":o??void 0,"data-entering":u||void 0,"data-exiting":t.isExiting||void 0},s.createElement(A.Provider,{value:{...n,placement:o,ref:e}},d.children))}const fe=t=>{const{children:r,...e}=t;return P.jsx(ce,{...e,children:r})};fe.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TooltipTrigger"};const ue="flow--tooltip",$e="flow--tooltip--tip",pe="flow--tooltip--slide",R={tooltip:ue,tip:$e,slide:pe},be=t=>{const{children:r,className:e,...l}=t,i=H(R.tooltip,e);return P.jsxs(se,{...l,className:i,children:[P.jsx(U,{className:R.tip,children:P.jsx("svg",{viewBox:"0 0 8 8",children:P.jsx("path",{d:"M0 0 L4 4 L8 0"})})}),r]})};be.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tooltip"};export{fe as T,be as a};
