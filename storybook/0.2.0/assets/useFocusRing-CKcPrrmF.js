import{r as i}from"./index-Cf9XvIV_.js";import{c as G,b as R,$ as U}from"./index-CoqFY4cC.js";const T=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},v=e=>e&&"window"in e&&e.window===e?e:T(e).defaultView||window;function H(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function D(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function $(e){let n=null;return()=>(n==null&&(n=e()),n)}const W=$(function(){return D(/^Mac/i)}),q=$(function(){return D(/^iPhone/i)}),z=$(function(){return D(/^iPad/i)||W()&&navigator.maxTouchPoints>1}),N=$(function(){return q()||z()}),de=$(function(){return W()||N()}),ce=$(function(){return H(/AppleWebKit/i)&&!Y()}),Y=$(function(){return H(/Chrome/i)}),B=$(function(){return H(/Android/i)}),fe=$(function(){return H(/Firefox/i)});function J(e){return e.mozInputSource===0&&e.isTrusted?!0:B()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function le(e){return!B()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}class Q{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function A(e){let n=i.useRef({isFocused:!1,observer:null});G(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=R(r=>{e==null||e(r)});return i.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,s=d=>{n.current.isFocused=!1,o.disabled&&t(new Q("blur",d)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var d;(d=n.current.observer)===null||d===void 0||d.disconnect();let u=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function X(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const s=i.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),o&&o(!1),!0},[r,o]),d=A(s),u=i.useCallback(c=>{const f=T(c.target);c.target===c.currentTarget&&f.activeElement===c.target&&(t&&t(c),o&&o(!0),d(c))},[o,t,d]);return{focusProps:{onFocus:!n&&(t||o||r)?u:void 0,onBlur:!n&&(r||o)?s:void 0}}}let b=null,y=new Set,w=new Map,g=!1,C=!1;const Z={Tab:!0,Escape:!0};function M(e,n){for(let t of y)t(e,n)}function ee(e){return!(e.metaKey||!W()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function L(e){g=!0,ee(e)&&(b="keyboard",M("keyboard",e))}function l(e){b="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(g=!0,M("pointer",e))}function K(e){J(e)&&(g=!0,b="virtual")}function V(e){e.target===window||e.target===document||(!g&&!C&&(b="virtual",M("virtual",e)),g=!1,C=!1)}function O(){g=!1,C=!0}function x(e){if(typeof window>"u"||w.get(v(e)))return;const n=v(e),t=T(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){g=!0,r.apply(this,arguments)},t.addEventListener("keydown",L,!0),t.addEventListener("keyup",L,!0),t.addEventListener("click",K,!0),n.addEventListener("focus",V,!0),n.addEventListener("blur",O,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",l,!0),t.addEventListener("pointermove",l,!0),t.addEventListener("pointerup",l,!0)):(t.addEventListener("mousedown",l,!0),t.addEventListener("mousemove",l,!0),t.addEventListener("mouseup",l,!0)),n.addEventListener("beforeunload",()=>{_(e)},{once:!0}),w.set(n,{focus:r})}const _=(e,n)=>{const t=v(e),r=T(e);n&&r.removeEventListener("DOMContentLoaded",n),w.has(t)&&(t.HTMLElement.prototype.focus=w.get(t).focus,r.removeEventListener("keydown",L,!0),r.removeEventListener("keyup",L,!0),r.removeEventListener("click",K,!0),t.removeEventListener("focus",V,!0),t.removeEventListener("blur",O,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",l,!0),r.removeEventListener("pointermove",l,!0),r.removeEventListener("pointerup",l,!0)):(r.removeEventListener("mousedown",l,!0),r.removeEventListener("mousemove",l,!0),r.removeEventListener("mouseup",l,!0)),w.delete(t))};function te(e){const n=T(e);let t;return n.readyState!=="loading"?x(e):(t=()=>{x(e)},n.addEventListener("DOMContentLoaded",t)),()=>_(e,t)}typeof document<"u"&&te();function j(){return b!=="pointer"}function be(){return b}function $e(e){b=e,M(e,null)}function pe(){x();let[e,n]=i.useState(b);return i.useEffect(()=>{let t=()=>{n(b)};return y.add(t),()=>{y.delete(t)}},[]),U()?null:e}const ne=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function re(e,n,t){var r;const o=typeof window<"u"?v(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?v(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,d=typeof window<"u"?v(t==null?void 0:t.target).HTMLElement:HTMLElement,u=typeof window<"u"?v(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof o&&!ne.has(t==null||(r=t.target)===null||r===void 0?void 0:r.type)||(t==null?void 0:t.target)instanceof s||(t==null?void 0:t.target)instanceof d&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof u&&!Z[t.key])}function oe(e,n,t){x(),i.useEffect(()=>{let r=(o,s)=>{re(!!(t!=null&&t.isTextInput),o,s)&&e(j())};return y.add(r),()=>{y.delete(r)}},n)}function ue(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:r,onFocusWithinChange:o}=e,s=i.useRef({isFocusWithin:!1}),d=i.useCallback(f=>{s.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(s.current.isFocusWithin=!1,t&&t(f),o&&o(!1))},[t,o,s]),u=A(d),c=i.useCallback(f=>{!s.current.isFocusWithin&&document.activeElement===f.target&&(r&&r(f),o&&o(!0),s.current.isFocusWithin=!0,u(f))},[r,o,u]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:d}}}let P=!1,k=0;function S(){P=!0,setTimeout(()=>{P=!1},50)}function I(e){e.pointerType==="touch"&&S()}function ae(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",I):document.addEventListener("touchend",S),k++,()=>{k--,!(k>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",I):document.removeEventListener("touchend",S))}}function ve(e){let{onHoverStart:n,onHoverChange:t,onHoverEnd:r,isDisabled:o}=e,[s,d]=i.useState(!1),u=i.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;i.useEffect(ae,[]);let{hoverProps:c,triggerHoverEnd:f}=i.useMemo(()=>{let h=(a,E)=>{if(u.pointerType=E,o||E==="touch"||u.isHovered||!a.currentTarget.contains(a.target))return;u.isHovered=!0;let F=a.currentTarget;u.target=F,n&&n({type:"hoverstart",target:F,pointerType:E}),t&&t(!0),d(!0)},m=(a,E)=>{if(u.pointerType="",u.target=null,E==="touch"||!u.isHovered)return;u.isHovered=!1;let F=a.currentTarget;r&&r({type:"hoverend",target:F,pointerType:E}),t&&t(!1),d(!1)},p={};return typeof PointerEvent<"u"?(p.onPointerEnter=a=>{P&&a.pointerType==="mouse"||h(a,a.pointerType)},p.onPointerLeave=a=>{!o&&a.currentTarget.contains(a.target)&&m(a,a.pointerType)}):(p.onTouchStart=()=>{u.ignoreEmulatedMouseEvents=!0},p.onMouseEnter=a=>{!u.ignoreEmulatedMouseEvents&&!P&&h(a,"mouse"),u.ignoreEmulatedMouseEvents=!1},p.onMouseLeave=a=>{!o&&a.currentTarget.contains(a.target)&&m(a,"mouse")}),{hoverProps:p,triggerHoverEnd:m}},[n,t,r,o,u]);return i.useEffect(()=>{o&&f({currentTarget:u.target},u.pointerType)},[o]),{hoverProps:c,isHovered:s}}function ge(e={}){let{autoFocus:n=!1,isTextInput:t,within:r}=e,o=i.useRef({isFocused:!1,isFocusVisible:n||j()}),[s,d]=i.useState(!1),[u,c]=i.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=i.useCallback(()=>c(o.current.isFocused&&o.current.isFocusVisible),[]),h=i.useCallback(a=>{o.current.isFocused=a,d(a),f()},[f]);oe(a=>{o.current.isFocusVisible=a,f()},[],{isTextInput:t});let{focusProps:m}=X({isDisabled:r,onFocusChange:h}),{focusWithinProps:p}=ue({isDisabled:!r,onFocusWithinChange:h});return{isFocused:s,isFocusVisible:u,focusProps:r?p:m}}export{ue as $,ve as a,ge as b,v as c,T as d,B as e,Y as f,be as g,X as h,$e as i,fe as j,ce as k,W as l,z as m,N as n,le as o,J as p,j as q,de as r,q as s,pe as t};
