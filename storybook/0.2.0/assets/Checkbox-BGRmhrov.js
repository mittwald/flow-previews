import{j as x}from"./jsx-runtime-CLpGMVip.js";import{r as h,R}from"./index-Cf9XvIV_.js";import{c as G}from"./clsx-B-dksMZM.js";import"./IconApp-B1n3xJhN.js";import{H as J,K,J as z}from"./IconWarning-DYbrpMMf.js";import{C as A}from"./PropsContextProvider-CWFvCxZj.js";import{f as L}from"./flowComponent-DRn_CkhL.js";import{a as Q}from"./RSPContexts-BG_vMng8.js";import{$ as q,e as k,d as U,a as E,g as X,c as Y,b as Z,f as O}from"./utils-CVMEqJeI.js";import{$ as p,a as ee,e as S,f as ae,g as ie,d as de}from"./FieldError-CIY4tqAl.js";import{$ as le,b as M}from"./Form-B_J3Skg5.js";import{a as ne}from"./Label-0l9LIJhu.js";import{a as te}from"./Text-F0Mi_G2S.js";import{a as V}from"./index-CoqFY4cC.js";import{$ as _}from"./filterDOMProps-BSfnXAP7.js";import{$ as se}from"./useControlledState-19OAjgUP.js";import{$ as re,b as oe,a as ce}from"./useFocusRing-CvMz7Q_e.js";import{$ as fe}from"./usePress-lNW0gZrs.js";import{$ as ue,a as F}from"./useToggleState-PAcD5jYc.js";import{$ as be}from"./VisuallyHidden-EoGVKpYJ.js";function j(a,e,l){let c=p({...a,value:e.isSelected}),{isInvalid:r,validationErrors:t,validationDetails:s}=c.displayValidation,{labelProps:d,inputProps:f,isSelected:i,isPressed:n,isDisabled:o,isReadOnly:$}=ue({...a,isInvalid:r},e,l);ee(a,c,l);let{isIndeterminate:v,isRequired:u,validationBehavior:b="aria"}=a;h.useEffect(()=>{l.current&&(l.current.indeterminate=!!v)});let{pressProps:m}=fe({isDisabled:o||$,onPress(){let{[S]:P}=a,{commitValidation:I}=P||c;I()}});return{labelProps:V(d,m),inputProps:{...f,checked:i,"aria-required":u&&b==="aria"||void 0,required:u&&b==="native"},isSelected:i,isPressed:n,isDisabled:o,isReadOnly:$,isInvalid:r,validationErrors:t,validationDetails:s}}const N=new WeakMap;function $e(a,e){let{isDisabled:l,name:c,validationBehavior:r="aria"}=a,{isInvalid:t,validationErrors:s,validationDetails:d}=e.displayValidation,{labelProps:f,fieldProps:i,descriptionProps:n,errorMessageProps:o}=le({...a,labelElementType:"span",isInvalid:t,errorMessage:a.errorMessage||s});N.set(e,{name:c,descriptionId:n.id,errorMessageId:o.id,validationBehavior:r});let $=_(a,{labelable:!0}),{focusWithinProps:v}=re({onBlurWithin:a.onBlur,onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange});return{groupProps:V($,{role:"group","aria-disabled":l||void 0,...i,...v}),labelProps:f,descriptionProps:n,errorMessageProps:o,isInvalid:t,validationErrors:s,validationDetails:d}}function ve(a,e,l){const c=F({isReadOnly:a.isReadOnly||e.isReadOnly,isSelected:e.isSelected(a.value),onChange(m){m?e.addValue(a.value):e.removeValue(a.value),a.onChange&&a.onChange(m)}});let{name:r,descriptionId:t,errorMessageId:s,validationBehavior:d}=N.get(e);var f;d=(f=a.validationBehavior)!==null&&f!==void 0?f:d;let{realtimeValidation:i}=p({...a,value:c.isSelected,name:void 0,validationBehavior:"aria"}),n=h.useRef(ae),o=()=>{e.setInvalid(a.value,i.isInvalid?i:n.current)};h.useEffect(o);let $=e.realtimeValidation.isInvalid?e.realtimeValidation:i,v=d==="native"?e.displayValidation:$;var u;let b=j({...a,isReadOnly:a.isReadOnly||e.isReadOnly,isDisabled:a.isDisabled||e.isDisabled,name:a.name||r,isRequired:(u=a.isRequired)!==null&&u!==void 0?u:e.isRequired,validationBehavior:d,[S]:{realtimeValidation:$,displayValidation:v,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(m){n.current=m,o()}}},c,l);return{...b,inputProps:{...b.inputProps,"aria-describedby":[a["aria-describedby"],e.isInvalid?s:null,t].filter(Boolean).join(" ")||void 0}}}function me(a={}){let[e,l]=se(a.value,a.defaultValue||[],a.onChange),c=!!a.isRequired&&e.length===0,r=h.useRef(new Map),t=p({...a,value:e}),s=t.displayValidation.isInvalid;var d;return{...t,value:e,setValue(i){a.isReadOnly||a.isDisabled||l(i)},isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isSelected(i){return e.includes(i)},addValue(i){a.isReadOnly||a.isDisabled||e.includes(i)||l(e.concat(i))},removeValue(i){a.isReadOnly||a.isDisabled||e.includes(i)&&l(e.filter(n=>n!==i))},toggleValue(i){a.isReadOnly||a.isDisabled||(e.includes(i)?l(e.filter(n=>n!==i)):l(e.concat(i)))},setInvalid(i,n){let o=new Map(r.current);n.isInvalid?o.set(i,n):o.delete(i),r.current=o,t.updateValidation(ie(...o.values()))},validationState:(d=a.validationState)!==null&&d!==void 0?d:s?"invalid":null,isInvalid:s,isRequired:c}}const he=h.createContext(null),w=h.createContext(null),Te=h.forwardRef(function(e,l){[e,l]=q(e,l,he);let{validationBehavior:c}=k(M)||{};var r,t;let s=(t=(r=e.validationBehavior)!==null&&r!==void 0?r:c)!==null&&t!==void 0?t:"native",d=me({...e,validationBehavior:s}),[f,i]=U(),{groupProps:n,labelProps:o,descriptionProps:$,errorMessageProps:v,...u}=$e({...e,label:i,validationBehavior:s},d),b=E({...e,values:{isDisabled:d.isDisabled,isReadOnly:d.isReadOnly,isRequired:e.isRequired||!1,isInvalid:d.isInvalid,state:d},defaultClassName:"react-aria-CheckboxGroup"});return R.createElement("div",{...n,...b,ref:l,slot:e.slot||void 0,"data-readonly":d.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":d.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},R.createElement(X,{values:[[w,d],[ne,{...o,ref:f,elementType:"span"}],[te,{slots:{description:$,errorMessage:v}}],[de,u]]},b.children))}),xe=h.forwardRef(function(e,l){let{inputRef:c=null,...r}=e;[e,l]=q(r,l,Q);let{validationBehavior:t}=k(M)||{};var s,d;let f=(d=(s=e.validationBehavior)!==null&&s!==void 0?s:t)!==null&&d!==void 0?d:"native",i=h.useContext(w),n=Y(Z(c,e.inputRef!==void 0?e.inputRef:null)),{labelProps:o,inputProps:$,isSelected:v,isDisabled:u,isReadOnly:b,isPressed:m,isInvalid:P}=i?ve({...O(e),value:e.value,children:typeof e.children=="function"?!0:e.children},i,n):j({...O(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:f},F(e),n),{isFocused:I,isFocusVisible:g,focusProps:W}=oe(),H=u||b,{hoverProps:T,isHovered:D}=ce({...e,isDisabled:H}),C=E({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:v,isIndeterminate:e.isIndeterminate||!1,isPressed:m,isHovered:D,isFocused:I,isFocusVisible:g,isDisabled:u,isReadOnly:b,isInvalid:P,isRequired:e.isRequired||!1}}),B=_(e);return delete B.id,R.createElement("label",{...V(B,o,T,C),ref:l,slot:e.slot||void 0,"data-selected":v||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":m||void 0,"data-hovered":D||void 0,"data-focused":I||void 0,"data-focus-visible":g||void 0,"data-disabled":u||void 0,"data-readonly":b||void 0,"data-invalid":P||void 0,"data-required":e.isRequired||void 0},R.createElement(be,{elementType:"span"},R.createElement("input",{...V($,W),ref:n})),C.children)}),Pe="flow--checkbox",Re="flow--checkbox--icon",y={checkbox:Pe,icon:Re},Ie=L("Checkbox",a=>{const{children:e,className:l,ref:c,...r}=a,t=G(y.checkbox,l);return x.jsx(A,{children:x.jsx(xe,{...r,className:t,ref:c,children:({isSelected:s,isIndeterminate:d})=>x.jsxs(x.Fragment,{children:[s?x.jsx(J,{className:y.icon}):d?x.jsx(K,{className:y.icon}):x.jsx(z,{className:y.icon}),e]})})})});Ie.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Checkbox"};export{Te as $,Ie as C};
