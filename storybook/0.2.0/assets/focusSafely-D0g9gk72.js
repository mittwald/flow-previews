import{c as d}from"./index-CoqFY4cC.js";import{d as u,g as b}from"./useFocusRing-CKcPrrmF.js";function i(e){if($())e.focus({preventScroll:!0});else{let t=p(e);e.focus(),m(t)}}let c=null;function $(){if(c==null){c=!1;try{document.createElement("div").focus({get preventScroll(){return c=!0,!0}})}catch{}}return c}function p(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function m(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}let l=new Map,a=new Set;function s(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let t=r=>{if(!e(r)||!r.target)return;let o=l.get(r.target);o||(o=new Set,l.set(r.target,o),r.target.addEventListener("transitioncancel",n,{once:!0})),o.add(r.propertyName)},n=r=>{if(!e(r)||!r.target)return;let o=l.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",n),l.delete(r.target)),l.size===0)){for(let f of a)f();a.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?s():document.addEventListener("DOMContentLoaded",s));function v(e){requestAnimationFrame(()=>{l.size===0?e():a.add(e)})}function L(e,t){d(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}function T(e){const t=u(e);if(b()==="virtual"){let n=t.activeElement;v(()=>{t.activeElement===n&&e.isConnected&&i(e)})}else i(e)}export{T as $,L as a,i as b,v as c};
