import{j as fe,k as ce,l as B,m as de,n as te,d as M,o as ge,p as z,c as N}from"./useFocusRing-CKcPrrmF.js";import{b as I,c as pe,a as ve}from"./focusSafely-D0g9gk72.js";import{r as $,R as ye}from"./index-Cf9XvIV_.js";import{_ as q,a as Te,b as $e}from"./_class_private_field_set-CamGEj8o.js";import{b as L,a as re,f as be}from"./index-CoqFY4cC.js";const Pe=$.createContext({isNative:!0,open:me,useHref:t=>t});function ne(){return $.useContext(Pe)}function Ie(t,a){let s=t.getAttribute("target");return(!s||s==="_self")&&t.origin===location.origin&&!t.hasAttribute("download")&&!a.metaKey&&!a.ctrlKey&&!a.altKey&&!a.shiftKey}function A(t,a,s=!0){var o,u;let{metaKey:d,ctrlKey:f,altKey:v,shiftKey:p}=a;fe()&&(!((u=window.event)===null||u===void 0||(o=u.type)===null||o===void 0)&&o.startsWith("key"))&&t.target==="_blank"&&(B()?d=!0:f=!0);let b=ce()&&B()&&!de()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:d,ctrlKey:f,altKey:v,shiftKey:p}):new MouseEvent("click",{metaKey:d,ctrlKey:f,altKey:v,shiftKey:p,bubbles:!0,cancelable:!0});A.isOpening=s,I(t),t.dispatchEvent(b),A.isOpening=!1}A.isOpening=!1;function he(t,a){if(t instanceof HTMLAnchorElement)a(t);else if(t.hasAttribute("data-href")){let s=document.createElement("a");s.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(s.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(s.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(s.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(s.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(s.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(s),a(s),t.removeChild(s)}}function me(t,a){he(t,s=>A(s,a))}function _e(t){let a=ne();var s;const o=a.useHref((s=t.href)!==null&&s!==void 0?s:"");return{"data-href":t.href?o:void 0,"data-target":t.target,"data-rel":t.rel,"data-download":t.download,"data-ping":t.ping,"data-referrer-policy":t.referrerPolicy}}function De(t){let a=ne();var s;const o=a.useHref((s=t==null?void 0:t.href)!==null&&s!==void 0?s:"");return{href:t!=null&&t.href?o:void 0,target:t==null?void 0:t.target,rel:t==null?void 0:t.rel,download:t==null?void 0:t.download,ping:t==null?void 0:t.ping,referrerPolicy:t==null?void 0:t.referrerPolicy}}function Ee(){let t=$.useRef(new Map),a=$.useCallback((u,d,f,v)=>{let p=v!=null&&v.once?(...b)=>{t.current.delete(f),f(...b)}:f;t.current.set(f,{type:d,eventTarget:u,fn:p,options:v}),u.addEventListener(d,p,v)},[]),s=$.useCallback((u,d,f,v)=>{var p;let b=((p=t.current.get(f))===null||p===void 0?void 0:p.fn)||f;u.removeEventListener(d,b,v),t.current.delete(f)},[]),o=$.useCallback(()=>{t.current.forEach((u,d)=>{s(u.eventTarget,u.type,d,u.options)})},[s]);return $.useEffect(()=>o,[o]),{addGlobalListener:a,removeGlobalListener:s,removeAllGlobalListeners:o}}let C="default",V="",H=new WeakMap;function J(t){if(te()){if(C==="default"){const a=M(t);V=a.documentElement.style.webkitUserSelect,a.documentElement.style.webkitUserSelect="none"}C="disabled"}else(t instanceof HTMLElement||t instanceof SVGElement)&&(H.set(t,t.style.userSelect),t.style.userSelect="none")}function U(t){if(te()){if(C!=="disabled")return;C="restoring",setTimeout(()=>{pe(()=>{if(C==="restoring"){const a=M(t);a.documentElement.style.webkitUserSelect==="none"&&(a.documentElement.style.webkitUserSelect=V||""),V="",C="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&H.has(t)){let a=H.get(t);t.style.userSelect==="none"&&(t.style.userSelect=a),t.getAttribute("style")===""&&t.removeAttribute("style"),H.delete(t)}}const ae=ye.createContext({register:()=>{}});ae.displayName="PressResponderContext";function Ke(t){let a=$.useContext(ae);if(a){let{register:s,...o}=a;t=re(o,t),s()}return ve(a,t.ref),t}var X=new WeakMap;class Y{continuePropagation(){q(this,X,!1)}get shouldStopPropagation(){return Te(this,X)}constructor(a,s,o,u){$e(this,X,{writable:!0,value:void 0}),q(this,X,!0);var d;let f=(d=u==null?void 0:u.target)!==null&&d!==void 0?d:o.currentTarget;const v=f==null?void 0:f.getBoundingClientRect();let p,b=0,T,_=null;o.clientX!=null&&o.clientY!=null&&(T=o.clientX,_=o.clientY),v&&(T!=null&&_!=null?(p=T-v.left,b=_-v.top):(p=v.width/2,b=v.height/2)),this.type=a,this.pointerType=s,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=p,this.y=b}}const Q=Symbol("linkClicked");function Ue(t){let{onPress:a,onPressChange:s,onPressStart:o,onPressEnd:u,onPressUp:d,isDisabled:f,isPressed:v,preventFocusOnPress:p,shouldCancelOnPointerExit:b,allowTextSelectionOnPress:T,ref:_,...oe}=Ke(t),[le,W]=$.useState(!1),w=$.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:S,removeAllGlobalListeners:k}=Ee(),h=L((e,l)=>{let P=w.current;if(f||P.didFirePressStart)return!1;let i=!0;if(P.isTriggeringEvent=!0,o){let c=new Y("pressstart",l,e);o(c),i=c.shouldStopPropagation}return s&&s(!0),P.isTriggeringEvent=!1,P.didFirePressStart=!0,W(!0),i}),y=L((e,l,P=!0)=>{let i=w.current;if(!i.didFirePressStart)return!1;i.ignoreClickAfterPress=!0,i.didFirePressStart=!1,i.isTriggeringEvent=!0;let c=!0;if(u){let r=new Y("pressend",l,e);u(r),c=r.shouldStopPropagation}if(s&&s(!1),W(!1),a&&P&&!f){let r=new Y("press",l,e);a(r),c&&(c=r.shouldStopPropagation)}return i.isTriggeringEvent=!1,c}),O=L((e,l)=>{let P=w.current;if(f)return!1;if(d){P.isTriggeringEvent=!0;let i=new Y("pressup",l,e);return d(i),P.isTriggeringEvent=!1,i.shouldStopPropagation}return!0}),x=L(e=>{let l=w.current;l.isPressed&&l.target&&(l.isOverTarget&&l.pointerType!=null&&y(E(l.target,e),l.pointerType,!1),l.isPressed=!1,l.isOverTarget=!1,l.activePointerId=null,l.pointerType=null,k(),T||U(l.target))}),D=L(e=>{b&&x(e)}),ue=$.useMemo(()=>{let e=w.current,l={onKeyDown(i){if(G(i.nativeEvent,i.currentTarget)&&i.currentTarget.contains(i.target)){var c;ee(i.target,i.key)&&i.preventDefault();let r=!0;if(!e.isPressed&&!i.repeat){e.target=i.currentTarget,e.isPressed=!0,r=h(i,"keyboard");let n=i.currentTarget,g=m=>{G(m,n)&&!m.repeat&&n.contains(m.target)&&e.target&&O(E(e.target,m),"keyboard")};S(M(i.currentTarget),"keyup",be(g,P),!0)}r&&i.stopPropagation(),i.metaKey&&B()&&((c=e.metaKeyEvents)===null||c===void 0||c.set(i.key,i.nativeEvent))}else i.key==="Meta"&&(e.metaKeyEvents=new Map)},onClick(i){if(!(i&&!i.currentTarget.contains(i.target))&&i&&i.button===0&&!e.isTriggeringEvent&&!A.isOpening){let c=!0;if(f&&i.preventDefault(),!e.ignoreClickAfterPress&&!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType==="virtual"||z(i.nativeEvent))){!f&&!p&&I(i.currentTarget);let r=h(i,"virtual"),n=O(i,"virtual"),g=y(i,"virtual");c=r&&n&&g}e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1,c&&i.stopPropagation()}}},P=i=>{var c;if(e.isPressed&&e.target&&G(i,e.target)){var r;ee(i.target,i.key)&&i.preventDefault();let g=i.target;y(E(e.target,i),"keyboard",e.target.contains(g)),k(),i.key!=="Enter"&&j(e.target)&&e.target.contains(g)&&!i[Q]&&(i[Q]=!0,A(e.target,i,!1)),e.isPressed=!1,(r=e.metaKeyEvents)===null||r===void 0||r.delete(i.key)}else if(i.key==="Meta"&&(!((c=e.metaKeyEvents)===null||c===void 0)&&c.size)){var n;let g=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let m of g.values())(n=e.target)===null||n===void 0||n.dispatchEvent(new KeyboardEvent("keyup",m))}};if(typeof PointerEvent<"u"){l.onPointerDown=n=>{if(n.button!==0||!n.currentTarget.contains(n.target))return;if(ge(n.nativeEvent)){e.pointerType="virtual";return}F(n.currentTarget)&&n.preventDefault(),e.pointerType=n.pointerType;let g=!0;if(!e.isPressed){e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=n.pointerId,e.target=n.currentTarget,!f&&!p&&I(n.currentTarget),T||J(e.target),g=h(n,e.pointerType);let m=n.target;"releasePointerCapture"in m&&m.releasePointerCapture(n.pointerId),S(M(n.currentTarget),"pointerup",i,!1),S(M(n.currentTarget),"pointercancel",r,!1)}g&&n.stopPropagation()},l.onMouseDown=n=>{n.currentTarget.contains(n.target)&&n.button===0&&(F(n.currentTarget)&&n.preventDefault(),n.stopPropagation())},l.onPointerUp=n=>{!n.currentTarget.contains(n.target)||e.pointerType==="virtual"||n.button===0&&O(n,e.pointerType||n.pointerType)},l.onPointerEnter=n=>{n.pointerId===e.activePointerId&&e.target&&!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,h(E(e.target,n),e.pointerType))},l.onPointerLeave=n=>{n.pointerId===e.activePointerId&&e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,y(E(e.target,n),e.pointerType,!1),D(n))};let i=n=>{n.pointerId===e.activePointerId&&e.isPressed&&n.button===0&&e.target&&(e.target.contains(n.target)&&e.pointerType!=null?y(E(e.target,n),e.pointerType):e.isOverTarget&&e.pointerType!=null&&y(E(e.target,n),e.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,e.pointerType=null,k(),T||U(e.target),"ontouchend"in e.target&&n.pointerType!=="mouse"&&S(e.target,"touchend",c,{once:!0}))},c=n=>{ie(n.currentTarget)&&n.preventDefault()},r=n=>{x(n)};l.onDragStart=n=>{n.currentTarget.contains(n.target)&&x(n)}}else{l.onMouseDown=r=>{if(r.button!==0||!r.currentTarget.contains(r.target))return;if(F(r.currentTarget)&&r.preventDefault(),e.ignoreEmulatedMouseEvents){r.stopPropagation();return}e.isPressed=!0,e.isOverTarget=!0,e.target=r.currentTarget,e.pointerType=z(r.nativeEvent)?"virtual":"mouse",!f&&!p&&I(r.currentTarget),h(r,e.pointerType)&&r.stopPropagation(),S(M(r.currentTarget),"mouseup",i,!1)},l.onMouseEnter=r=>{if(!r.currentTarget.contains(r.target))return;let n=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!0,n=h(r,e.pointerType)),n&&r.stopPropagation()},l.onMouseLeave=r=>{if(!r.currentTarget.contains(r.target))return;let n=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!1,n=y(r,e.pointerType,!1),D(r)),n&&r.stopPropagation()},l.onMouseUp=r=>{r.currentTarget.contains(r.target)&&!e.ignoreEmulatedMouseEvents&&r.button===0&&O(r,e.pointerType||"mouse")};let i=r=>{if(r.button===0){if(e.isPressed=!1,k(),e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&R(r,e.target)&&e.pointerType!=null?y(E(e.target,r),e.pointerType):e.target&&e.isOverTarget&&e.pointerType!=null&&y(E(e.target,r),e.pointerType,!1),e.isOverTarget=!1}};l.onTouchStart=r=>{if(!r.currentTarget.contains(r.target))return;let n=Se(r.nativeEvent);if(!n)return;e.activePointerId=n.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=r.currentTarget,e.pointerType="touch",!f&&!p&&I(r.currentTarget),T||J(e.target),h(K(e.target,r),e.pointerType)&&r.stopPropagation(),S(N(r.currentTarget),"scroll",c,!0)},l.onTouchMove=r=>{if(!r.currentTarget.contains(r.target))return;if(!e.isPressed){r.stopPropagation();return}let n=Z(r.nativeEvent,e.activePointerId),g=!0;n&&R(n,r.currentTarget)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,g=h(K(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,g=y(K(e.target,r),e.pointerType,!1),D(K(e.target,r))),g&&r.stopPropagation()},l.onTouchEnd=r=>{if(!r.currentTarget.contains(r.target))return;if(!e.isPressed){r.stopPropagation();return}let n=Z(r.nativeEvent,e.activePointerId),g=!0;n&&R(n,r.currentTarget)&&e.pointerType!=null?(O(K(e.target,r),e.pointerType),g=y(K(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(g=y(K(e.target,r),e.pointerType,!1)),g&&r.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!T&&U(e.target),k()},l.onTouchCancel=r=>{r.currentTarget.contains(r.target)&&(r.stopPropagation(),e.isPressed&&x(K(e.target,r)))};let c=r=>{e.isPressed&&r.target.contains(e.target)&&x({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};l.onDragStart=r=>{r.currentTarget.contains(r.target)&&x(r)}}return l},[S,f,p,k,T,x,D,y,h,O]);return $.useEffect(()=>()=>{var e;T||U((e=w.current.target)!==null&&e!==void 0?e:void 0)},[T]),{isPressed:v||le,pressProps:re(oe,ue)}}function j(t){return t.tagName==="A"&&t.hasAttribute("href")}function G(t,a){const{key:s,code:o}=t,u=a,d=u.getAttribute("role");return(s==="Enter"||s===" "||s==="Spacebar"||o==="Space")&&!(u instanceof N(u).HTMLInputElement&&!se(u,s)||u instanceof N(u).HTMLTextAreaElement||u.isContentEditable)&&!((d==="link"||!d&&j(u))&&s!=="Enter")}function Se(t){const{targetTouches:a}=t;return a.length>0?a[0]:null}function Z(t,a){const s=t.changedTouches;for(let o=0;o<s.length;o++){const u=s[o];if(u.identifier===a)return u}return null}function K(t,a){let s=0,o=0;return a.targetTouches&&a.targetTouches.length===1&&(s=a.targetTouches[0].clientX,o=a.targetTouches[0].clientY),{currentTarget:t,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey,metaKey:a.metaKey,altKey:a.altKey,clientX:s,clientY:o}}function E(t,a){let s=a.clientX,o=a.clientY;return{currentTarget:t,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey,metaKey:a.metaKey,altKey:a.altKey,clientX:s,clientY:o}}function xe(t){let a=0,s=0;return t.width!==void 0?a=t.width/2:t.radiusX!==void 0&&(a=t.radiusX),t.height!==void 0?s=t.height/2:t.radiusY!==void 0&&(s=t.radiusY),{top:t.clientY-s,right:t.clientX+a,bottom:t.clientY+s,left:t.clientX-a}}function we(t,a){return!(t.left>a.right||a.left>t.right||t.top>a.bottom||a.top>t.bottom)}function R(t,a){let s=a.getBoundingClientRect(),o=xe(t);return we(s,o)}function F(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function ie(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!j(t)}function ee(t,a){return t instanceof HTMLInputElement?!se(t,a):ie(t)}const ke=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function se(t,a){return t.type==="checkbox"||t.type==="radio"?a===" ":ke.has(t.type)}export{Ue as $,De as a,ne as b,Ie as c,Ee as d,U as e,J as f,A as g,ae as h,_e as i};
