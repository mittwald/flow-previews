import{R as v,r as ae}from"./index-BbMBc-iG.js";import{P as it}from"./PropsContextProvider-BgoMLKZk.js";import{d as nt}from"./dynamic-DKDa4OpU.js";import{u as Pt}from"./useViewComponents-DfxsYA-o.js";import{F as Rt}from"./FieldError-Bxt0_Hqg.js";import{a as Ot,A as Mt}from"./Action-CReouxgX.js";var me=e=>e.type==="checkbox",re=e=>e instanceof Date,I=e=>e==null;const at=e=>typeof e=="object";var C=e=>!I(e)&&!Array.isArray(e)&&at(e)&&!re(e),ot=e=>C(e)&&e.target?me(e.target)?e.target.checked:e.target.value:e,Ut=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ut=(e,s)=>e.has(Ut(s)),Lt=e=>{const s=e.constructor&&e.constructor.prototype;return C(s)&&s.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function N(e){let s;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Te&&(e instanceof Blob||i))&&(t||C(e)))if(s=t?[]:{},!t&&!Lt(e))s=e;else for(const a in e)e.hasOwnProperty(a)&&(s[a]=N(e[a]));else return e;return s}var Ve=e=>Array.isArray(e)?e.filter(Boolean):[],w=e=>e===void 0,f=(e,s,t)=>{if(!s||!C(e))return t;const i=Ve(s.split(/[,[\].]+?/)).reduce((a,u)=>I(a)?a:a[u],e);return w(i)||i===e?w(e[s])?t:e[s]:i},H=e=>typeof e=="boolean",Pe=e=>/^\w*$/.test(e),lt=e=>Ve(e.replace(/["|']|\]/g,"").split(/\.|\[/)),E=(e,s,t)=>{let i=-1;const a=Pe(s)?[s]:lt(s),u=a.length,d=u-1;for(;++i<u;){const y=a[i];let b=t;if(i!==d){const x=e[y];b=C(x)||Array.isArray(x)?x:isNaN(+a[i+1])?{}:[]}if(y==="__proto__"||y==="constructor"||y==="prototype")return;e[y]=b,e=e[y]}return e};const be={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},G={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},It=v.createContext(null),Re=()=>v.useContext(It);var dt=(e,s,t,i=!0)=>{const a={defaultValues:s._defaultValues};for(const u in e)Object.defineProperty(a,u,{get:()=>{const d=u;return s._proxyFormState[d]!==G.all&&(s._proxyFormState[d]=!i||G.all),t&&(t[d]=!0),e[d]}});return a},B=e=>C(e)&&!Object.keys(e).length,ct=(e,s,t,i)=>{t(e);const{name:a,...u}=e;return B(u)||Object.keys(u).length>=Object.keys(s).length||Object.keys(u).find(d=>s[d]===(!i||G.all))},fe=e=>Array.isArray(e)?e:[e],ft=(e,s,t)=>!e||!s||e===s||fe(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i)));function Oe(e){const s=v.useRef(e);s.current=e,v.useEffect(()=>{const t=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Me(e){const s=Re(),{control:t=s.control,disabled:i,name:a,exact:u}=e||{},[d,y]=v.useState(t._formState),b=v.useRef(!0),x=v.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),F=v.useRef(a);return F.current=a,Oe({disabled:i,next:g=>b.current&&ft(F.current,g.name,u)&&ct(g,x.current,t._updateFormState)&&y({...t._formState,...g}),subject:t._subjects.state}),v.useEffect(()=>(b.current=!0,x.current.isValid&&t._updateValid(!0),()=>{b.current=!1}),[t]),v.useMemo(()=>dt(d,t,x.current,!1),[d,t])}var z=e=>typeof e=="string",yt=(e,s,t,i,a)=>z(e)?(i&&s.watch.add(e),f(t,e,a)):Array.isArray(e)?e.map(u=>(i&&s.watch.add(u),f(t,u))):(i&&(s.watchAll=!0),t);function Nt(e){const s=Re(),{control:t=s.control,name:i,defaultValue:a,disabled:u,exact:d}=e,y=v.useRef(i);y.current=i,Oe({disabled:u,subject:t._subjects.values,next:F=>{ft(y.current,F.name,d)&&x(N(yt(y.current,t._names,F.values||t._formValues,!1,a)))}});const[b,x]=v.useState(t._getWatch(i,a));return v.useEffect(()=>t._removeUnmounted()),b}function Bt(e){const s=Re(),{name:t,disabled:i,control:a=s.control,shouldUnregister:u}=e,d=ut(a._names.array,t),y=Nt({control:a,name:t,defaultValue:f(a._formValues,t,f(a._defaultValues,t,e.defaultValue)),exact:!0}),b=Me({control:a,name:t,exact:!0}),x=v.useRef(a.register(t,{...e.rules,value:y,...H(e.disabled)?{disabled:e.disabled}:{}})),F=v.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!f(b.errors,t)},isDirty:{enumerable:!0,get:()=>!!f(b.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!f(b.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!f(b.validatingFields,t)},error:{enumerable:!0,get:()=>f(b.errors,t)}}),[b,t]),g=v.useMemo(()=>({name:t,value:y,...H(i)||b.disabled?{disabled:b.disabled||i}:{},onChange:V=>x.current.onChange({target:{value:ot(V),name:t},type:be.CHANGE}),onBlur:()=>x.current.onBlur({target:{value:f(a._formValues,t),name:t},type:be.BLUR}),ref:V=>{const L=f(a._fields,t);L&&V&&(L._f.ref={focus:()=>V.focus(),select:()=>V.select(),setCustomValidity:D=>V.setCustomValidity(D),reportValidity:()=>V.reportValidity()})}}),[t,a._formValues,i,b.disabled,y,a._fields]);return v.useEffect(()=>{const V=a._options.shouldUnregister||u,L=(D,M)=>{const q=f(a._fields,D);q&&q._f&&(q._f.mount=M)};if(L(t,!0),V){const D=N(f(a._options.defaultValues,t));E(a._defaultValues,t,D),w(f(a._formValues,t))&&E(a._formValues,t,D)}return!d&&a.register(t),()=>{(d?V&&!a._state.action:V)?a.unregister(t):L(t,!1)}},[t,a,d,u]),v.useEffect(()=>{a._updateDisabledField({disabled:i,fields:a._fields,name:t})},[i,t,a]),v.useMemo(()=>({field:g,formState:b,fieldState:F}),[g,b,F])}const qt=e=>e.render(Bt(e));var Wt=(e,s,t,i,a)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:a||!0}}:{},Ye=e=>({isOnSubmit:!e||e===G.onSubmit,isOnBlur:e===G.onBlur,isOnChange:e===G.onChange,isOnAll:e===G.all,isOnTouch:e===G.onTouched}),Je=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ye=(e,s,t,i)=>{for(const a of t||Object.keys(e)){const u=f(e,a);if(u){const{_f:d,...y}=u;if(d){if(d.refs&&d.refs[0]&&s(d.refs[0],a)&&!i)return!0;if(d.ref&&s(d.ref,d.name)&&!i)return!0;if(ye(y,s))break}else if(C(y)&&ye(y,s))break}}};var jt=(e,s,t)=>{const i=fe(f(e,t));return E(i,"root",s[t]),E(e,t,i),e},Ue=e=>e.type==="file",K=e=>typeof e=="function",_e=e=>{if(!Te)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},ve=e=>z(e),Le=e=>e.type==="radio",Fe=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var mt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!w(e[0].attributes.value)?w(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe};const Ze={isValid:!1,value:null};var ht=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ze):Ze;function et(e,s,t="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||H(e)&&!e)return{type:t,message:ve(e)?e:"",ref:s}}var ne=e=>C(e)&&!Fe(e)?e:{value:e,message:""},tt=async(e,s,t,i,a,u)=>{const{ref:d,refs:y,required:b,maxLength:x,minLength:F,min:g,max:V,pattern:L,validate:D,name:M,valueAsNumber:q,mount:X}=e._f,S=f(t,M);if(!X||s.has(M))return{};const Y=y?y[0]:d,J=p=>{a&&Y.reportValidity&&(Y.setCustomValidity(H(p)?"":p||""),Y.reportValidity())},k={},se=Le(d),he=me(d),te=se||he,ie=(q||Ue(d))&&w(d.value)&&w(S)||_e(d)&&d.value===""||S===""||Array.isArray(S)&&!S.length,W=Wt.bind(null,M,i,k),ge=(p,A,T,U=Q.maxLength,$=Q.minLength)=>{const j=p?A:T;k[M]={type:p?U:$,message:j,ref:d,...W(p?U:$,j)}};if(u?!Array.isArray(S)||!S.length:b&&(!te&&(ie||I(S))||H(S)&&!S||he&&!mt(y).isValid||se&&!ht(y).isValid)){const{value:p,message:A}=ve(b)?{value:!!b,message:b}:ne(b);if(p&&(k[M]={type:Q.required,message:A,ref:Y,...W(Q.required,A)},!i))return J(A),k}if(!ie&&(!I(g)||!I(V))){let p,A;const T=ne(V),U=ne(g);if(!I(S)&&!isNaN(S)){const $=d.valueAsNumber||S&&+S;I(T.value)||(p=$>T.value),I(U.value)||(A=$<U.value)}else{const $=d.valueAsDate||new Date(S),j=le=>new Date(new Date().toDateString()+" "+le),oe=d.type=="time",ue=d.type=="week";z(T.value)&&S&&(p=oe?j(S)>j(T.value):ue?S>T.value:$>new Date(T.value)),z(U.value)&&S&&(A=oe?j(S)<j(U.value):ue?S<U.value:$<new Date(U.value))}if((p||A)&&(ge(!!p,T.message,U.message,Q.max,Q.min),!i))return J(k[M].message),k}if((x||F)&&!ie&&(z(S)||u&&Array.isArray(S))){const p=ne(x),A=ne(F),T=!I(p.value)&&S.length>+p.value,U=!I(A.value)&&S.length<+A.value;if((T||U)&&(ge(T,p.message,A.message),!i))return J(k[M].message),k}if(L&&!ie&&z(S)){const{value:p,message:A}=ne(L);if(Fe(p)&&!S.match(p)&&(k[M]={type:Q.pattern,message:A,ref:d,...W(Q.pattern,A)},!i))return J(A),k}if(D){if(K(D)){const p=await D(S,t),A=et(p,Y);if(A&&(k[M]={...A,...W(Q.validate,A.message)},!i))return J(A.message),k}else if(C(D)){let p={};for(const A in D){if(!B(p)&&!i)break;const T=et(await D[A](S,t),Y,A);T&&(p={...T,...W(A,T.message)},J(T.message),i&&(k[M]=p))}if(!B(p)&&(k[M]={ref:Y,...p},!i))return k}}return J(!0),k};function Ht(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=w(e)?i++:e[s[i++]];return e}function $t(e){for(const s in e)if(e.hasOwnProperty(s)&&!w(e[s]))return!1;return!0}function P(e,s){const t=Array.isArray(s)?s:Pe(s)?[s]:lt(s),i=t.length===1?e:Ht(e,t),a=t.length-1,u=t[a];return i&&delete i[u],a!==0&&(C(i)&&B(i)||Array.isArray(i)&&$t(i))&&P(e,t.slice(0,-1)),e}var we=()=>{let e=[];return{get observers(){return e},next:a=>{for(const u of e)u.next&&u.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(u=>u!==a)}}),unsubscribe:()=>{e=[]}}},ke=e=>I(e)||!at(e);function ee(e,s){if(ke(e)||ke(s))return e===s;if(re(e)&&re(s))return e.getTime()===s.getTime();const t=Object.keys(e),i=Object.keys(s);if(t.length!==i.length)return!1;for(const a of t){const u=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const d=s[a];if(re(u)&&re(d)||C(u)&&C(d)||Array.isArray(u)&&Array.isArray(d)?!ee(u,d):u!==d)return!1}}return!0}var gt=e=>e.type==="select-multiple",Gt=e=>Le(e)||me(e),Ce=e=>_e(e)&&e.isConnected,vt=e=>{for(const s in e)if(K(e[s]))return!0;return!1};function pe(e,s={}){const t=Array.isArray(e);if(C(e)||t)for(const i in e)Array.isArray(e[i])||C(e[i])&&!vt(e[i])?(s[i]=Array.isArray(e[i])?[]:{},pe(e[i],s[i])):I(e[i])||(s[i]=!0);return s}function bt(e,s,t){const i=Array.isArray(e);if(C(e)||i)for(const a in e)Array.isArray(e[a])||C(e[a])&&!vt(e[a])?w(s)||ke(t[a])?t[a]=Array.isArray(e[a])?pe(e[a],[]):{...pe(e[a])}:bt(e[a],I(s)?{}:s[a],t[a]):t[a]=!ee(e[a],s[a]);return t}var de=(e,s)=>bt(e,s,pe(s)),_t=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>w(e)?e:s?e===""?NaN:e&&+e:t&&z(e)?new Date(e):i?i(e):e;function De(e){const s=e.ref;return Ue(s)?s.files:Le(s)?ht(e.refs).value:gt(s)?[...s.selectedOptions].map(({value:t})=>t):me(s)?mt(e.refs).value:_t(w(s.value)?e.ref.value:s.value,e)}var Kt=(e,s,t,i)=>{const a={};for(const u of e){const d=f(s,u);d&&E(a,u,d._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:i}},ce=e=>w(e)?e:Fe(e)?e.source:C(e)?Fe(e.value)?e.value.source:e.value:e;const rt="AsyncFunction";var zt=e=>!!e&&!!e.validate&&!!(K(e.validate)&&e.validate.constructor.name===rt||C(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===rt)),Yt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function st(e,s,t){const i=f(e,t);if(i||Pe(t))return{error:i,name:t};const a=t.split(".");for(;a.length;){const u=a.join("."),d=f(s,u),y=f(e,u);if(d&&!Array.isArray(d)&&t!==u)return{name:t};if(y&&y.type)return{name:u,error:y};a.pop()}return{name:t}}var Jt=(e,s,t,i,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(s||e):(t?i.isOnBlur:a.isOnBlur)?!e:(t?i.isOnChange:a.isOnChange)?e:!0,Qt=(e,s)=>!Ve(f(e,s)).length&&P(e,s);const Xt={mode:G.onSubmit,reValidateMode:G.onChange,shouldFocusError:!0};function Zt(e={}){let s={...Xt,...e},t={submitCount:0,isDirty:!1,isLoading:K(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},a=C(s.defaultValues)||C(s.values)?N(s.defaultValues||s.values)||{}:{},u=s.shouldUnregister?{}:N(a),d={action:!1,mount:!1,watch:!1},y={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,x=0;const F={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={values:we(),array:we(),state:we()},V=Ye(s.mode),L=Ye(s.reValidateMode),D=s.criteriaMode===G.all,M=r=>n=>{clearTimeout(x),x=setTimeout(r,n)},q=async r=>{if(!s.disabled&&(F.isValid||r)){const n=s.resolver?B((await te()).errors):await W(i,!0);n!==t.isValid&&g.state.next({isValid:n})}},X=(r,n)=>{!s.disabled&&(F.isValidating||F.validatingFields)&&((r||Array.from(y.mount)).forEach(o=>{o&&(n?E(t.validatingFields,o,n):P(t.validatingFields,o))}),g.state.next({validatingFields:t.validatingFields,isValidating:!B(t.validatingFields)}))},S=(r,n=[],o,m,c=!0,l=!0)=>{if(m&&o&&!s.disabled){if(d.action=!0,l&&Array.isArray(f(i,r))){const h=o(f(i,r),m.argA,m.argB);c&&E(i,r,h)}if(l&&Array.isArray(f(t.errors,r))){const h=o(f(t.errors,r),m.argA,m.argB);c&&E(t.errors,r,h),Qt(t.errors,r)}if(F.touchedFields&&l&&Array.isArray(f(t.touchedFields,r))){const h=o(f(t.touchedFields,r),m.argA,m.argB);c&&E(t.touchedFields,r,h)}F.dirtyFields&&(t.dirtyFields=de(a,u)),g.state.next({name:r,isDirty:p(r,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else E(u,r,n)},Y=(r,n)=>{E(t.errors,r,n),g.state.next({errors:t.errors})},J=r=>{t.errors=r,g.state.next({errors:t.errors,isValid:!1})},k=(r,n,o,m)=>{const c=f(i,r);if(c){const l=f(u,r,w(o)?f(a,r):o);w(l)||m&&m.defaultChecked||n?E(u,r,n?l:De(c._f)):U(r,l),d.mount&&q()}},se=(r,n,o,m,c)=>{let l=!1,h=!1;const _={name:r};if(!s.disabled){const R=!!(f(i,r)&&f(i,r)._f&&f(i,r)._f.disabled);if(!o||m){F.isDirty&&(h=t.isDirty,t.isDirty=_.isDirty=p(),l=h!==_.isDirty);const O=R||ee(f(a,r),n);h=!!(!R&&f(t.dirtyFields,r)),O||R?P(t.dirtyFields,r):E(t.dirtyFields,r,!0),_.dirtyFields=t.dirtyFields,l=l||F.dirtyFields&&h!==!O}if(o){const O=f(t.touchedFields,r);O||(E(t.touchedFields,r,o),_.touchedFields=t.touchedFields,l=l||F.touchedFields&&O!==o)}l&&c&&g.state.next(_)}return l?_:{}},he=(r,n,o,m)=>{const c=f(t.errors,r),l=F.isValid&&H(n)&&t.isValid!==n;if(s.delayError&&o?(b=M(()=>Y(r,o)),b(s.delayError)):(clearTimeout(x),b=null,o?E(t.errors,r,o):P(t.errors,r)),(o?!ee(c,o):c)||!B(m)||l){const h={...m,...l&&H(n)?{isValid:n}:{},errors:t.errors,name:r};t={...t,...h},g.state.next(h)}},te=async r=>{X(r,!0);const n=await s.resolver(u,s.context,Kt(r||y.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return X(r),n},ie=async r=>{const{errors:n}=await te(r);if(r)for(const o of r){const m=f(n,o);m?E(t.errors,o,m):P(t.errors,o)}else t.errors=n;return n},W=async(r,n,o={valid:!0})=>{for(const m in r){const c=r[m];if(c){const{_f:l,...h}=c;if(l){const _=y.array.has(l.name),R=c._f&&zt(c._f);R&&F.validatingFields&&X([m],!0);const O=await tt(c,y.disabled,u,D,s.shouldUseNativeValidation&&!n,_);if(R&&F.validatingFields&&X([m]),O[l.name]&&(o.valid=!1,n))break;!n&&(f(O,l.name)?_?jt(t.errors,O,l.name):E(t.errors,l.name,O[l.name]):P(t.errors,l.name))}!B(h)&&await W(h,n,o)}}return o.valid},ge=()=>{for(const r of y.unMount){const n=f(i,r);n&&(n._f.refs?n._f.refs.every(o=>!Ce(o)):!Ce(n._f.ref))&&Se(r)}y.unMount=new Set},p=(r,n)=>!s.disabled&&(r&&n&&E(u,r,n),!ee(Ne(),a)),A=(r,n,o)=>yt(r,y,{...d.mount?u:w(n)?a:z(r)?{[r]:n}:n},o,n),T=r=>Ve(f(d.mount?u:a,r,s.shouldUnregister?f(a,r,[]):[])),U=(r,n,o={})=>{const m=f(i,r);let c=n;if(m){const l=m._f;l&&(!l.disabled&&E(u,r,_t(n,l)),c=_e(l.ref)&&I(n)?"":n,gt(l.ref)?[...l.ref.options].forEach(h=>h.selected=c.includes(h.value)):l.refs?me(l.ref)?l.refs.length>1?l.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(c)?!!c.find(_=>_===h.value):c===h.value)):l.refs[0]&&(l.refs[0].checked=!!c):l.refs.forEach(h=>h.checked=h.value===c):Ue(l.ref)?l.ref.value="":(l.ref.value=c,l.ref.type||g.values.next({name:r,values:{...u}})))}(o.shouldDirty||o.shouldTouch)&&se(r,c,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&le(r)},$=(r,n,o)=>{for(const m in n){const c=n[m],l=`${r}.${m}`,h=f(i,l);(y.array.has(r)||C(c)||h&&!h._f)&&!re(c)?$(l,c,o):U(l,c,o)}},j=(r,n,o={})=>{const m=f(i,r),c=y.array.has(r),l=N(n);E(u,r,l),c?(g.array.next({name:r,values:{...u}}),(F.isDirty||F.dirtyFields)&&o.shouldDirty&&g.state.next({name:r,dirtyFields:de(a,u),isDirty:p(r,l)})):m&&!m._f&&!I(l)?$(r,l,o):U(r,l,o),Je(r,y)&&g.state.next({...t}),g.values.next({name:d.mount?r:void 0,values:{...u}})},oe=async r=>{d.mount=!0;const n=r.target;let o=n.name,m=!0;const c=f(i,o),l=()=>n.type?De(c._f):ot(r),h=_=>{m=Number.isNaN(_)||re(_)&&isNaN(_.getTime())||ee(_,f(u,o,_))};if(c){let _,R;const O=l(),Z=r.type===be.BLUR||r.type===be.FOCUS_OUT,Dt=!Yt(c._f)&&!s.resolver&&!f(t.errors,o)&&!c._f.deps||Jt(Z,f(t.touchedFields,o),t.isSubmitted,L,V),xe=Je(o,y,Z);E(u,o,O),Z?(c._f.onBlur&&c._f.onBlur(r),b&&b(0)):c._f.onChange&&c._f.onChange(r);const Ee=se(o,O,Z,!1),kt=!B(Ee)||xe;if(!Z&&g.values.next({name:o,type:r.type,values:{...u}}),Dt)return F.isValid&&(s.mode==="onBlur"&&Z?q():Z||q()),kt&&g.state.next({name:o,...xe?{}:Ee});if(!Z&&xe&&g.state.next({...t}),s.resolver){const{errors:Ke}=await te([o]);if(h(O),m){const Tt=st(t.errors,i,o),ze=st(Ke,i,Tt.name||o);_=ze.error,o=ze.name,R=B(Ke)}}else X([o],!0),_=(await tt(c,y.disabled,u,D,s.shouldUseNativeValidation))[o],X([o]),h(O),m&&(_?R=!1:F.isValid&&(R=await W(i,!0)));m&&(c._f.deps&&le(c._f.deps),he(o,R,_,Ee))}},ue=(r,n)=>{if(f(t.errors,n)&&r.focus)return r.focus(),1},le=async(r,n={})=>{let o,m;const c=fe(r);if(s.resolver){const l=await ie(w(r)?r:c);o=B(l),m=r?!c.some(h=>f(l,h)):o}else r?(m=(await Promise.all(c.map(async l=>{const h=f(i,l);return await W(h&&h._f?{[l]:h}:h)}))).every(Boolean),!(!m&&!t.isValid)&&q()):m=o=await W(i);return g.state.next({...!z(r)||F.isValid&&o!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:o}:{},errors:t.errors}),n.shouldFocus&&!m&&ye(i,ue,r?c:y.mount),m},Ne=r=>{const n={...d.mount?u:a};return w(r)?n:z(r)?f(n,r):r.map(o=>f(n,o))},Be=(r,n)=>({invalid:!!f((n||t).errors,r),isDirty:!!f((n||t).dirtyFields,r),error:f((n||t).errors,r),isValidating:!!f(t.validatingFields,r),isTouched:!!f((n||t).touchedFields,r)}),xt=r=>{r&&fe(r).forEach(n=>P(t.errors,n)),g.state.next({errors:r?t.errors:{}})},qe=(r,n,o)=>{const m=(f(i,r,{_f:{}})._f||{}).ref,c=f(t.errors,r)||{},{ref:l,message:h,type:_,...R}=c;E(t.errors,r,{...R,...n,ref:m}),g.state.next({name:r,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&m&&m.focus&&m.focus()},Et=(r,n)=>K(r)?g.values.subscribe({next:o=>r(A(void 0,n),o)}):A(r,n,!0),Se=(r,n={})=>{for(const o of r?fe(r):y.mount)y.mount.delete(o),y.array.delete(o),n.keepValue||(P(i,o),P(u,o)),!n.keepError&&P(t.errors,o),!n.keepDirty&&P(t.dirtyFields,o),!n.keepTouched&&P(t.touchedFields,o),!n.keepIsValidating&&P(t.validatingFields,o),!s.shouldUnregister&&!n.keepDefaultValue&&P(a,o);g.values.next({values:{...u}}),g.state.next({...t,...n.keepDirty?{isDirty:p()}:{}}),!n.keepIsValid&&q()},We=({disabled:r,name:n,field:o,fields:m})=>{(H(r)&&d.mount||r||y.disabled.has(n))&&(r?y.disabled.add(n):y.disabled.delete(n),se(n,De(o?o._f:f(m,n)._f),!1,!1,!0))},Ae=(r,n={})=>{let o=f(i,r);const m=H(n.disabled)||H(s.disabled);return E(i,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...n}}),y.mount.add(r),o?We({field:o,disabled:H(n.disabled)?n.disabled:s.disabled,name:r}):k(r,!0,n.value),{...m?{disabled:n.disabled||s.disabled}:{},...s.progressive?{required:!!n.required,min:ce(n.min),max:ce(n.max),minLength:ce(n.minLength),maxLength:ce(n.maxLength),pattern:ce(n.pattern)}:{},name:r,onChange:oe,onBlur:oe,ref:c=>{if(c){Ae(r,n),o=f(i,r);const l=w(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,h=Gt(l),_=o._f.refs||[];if(h?_.find(R=>R===l):l===o._f.ref)return;E(i,r,{_f:{...o._f,...h?{refs:[..._.filter(Ce),l,...Array.isArray(f(a,r))?[{}]:[]],ref:{type:l.type,name:r}}:{ref:l}}}),k(r,!1,void 0,l)}else o=f(i,r,{}),o._f&&(o._f.mount=!1),(s.shouldUnregister||n.shouldUnregister)&&!(ut(y.array,r)&&d.action)&&y.unMount.add(r)}}},je=()=>s.shouldFocusError&&ye(i,ue,y.mount),wt=r=>{H(r)&&(g.state.next({disabled:r}),ye(i,(n,o)=>{const m=f(i,o);m&&(n.disabled=m._f.disabled||r,Array.isArray(m._f.refs)&&m._f.refs.forEach(c=>{c.disabled=m._f.disabled||r}))},0,!1))},He=(r,n)=>async o=>{let m;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let c=N(u);if(y.disabled.size)for(const l of y.disabled)E(c,l,void 0);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:l,values:h}=await te();t.errors=l,c=h}else await W(i);if(P(t.errors,"root"),B(t.errors)){g.state.next({errors:{}});try{await r(c,o)}catch(l){m=l}}else n&&await n({...t.errors},o),je(),setTimeout(je);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(t.errors)&&!m,submitCount:t.submitCount+1,errors:t.errors}),m)throw m},Ct=(r,n={})=>{f(i,r)&&(w(n.defaultValue)?j(r,N(f(a,r))):(j(r,n.defaultValue),E(a,r,N(n.defaultValue))),n.keepTouched||P(t.touchedFields,r),n.keepDirty||(P(t.dirtyFields,r),t.isDirty=n.defaultValue?p(r,N(f(a,r))):p()),n.keepError||(P(t.errors,r),F.isValid&&q()),g.state.next({...t}))},$e=(r,n={})=>{const o=r?N(r):a,m=N(o),c=B(r),l=c?a:m;if(n.keepDefaultValues||(a=o),!n.keepValues){if(n.keepDirtyValues){const h=new Set([...y.mount,...Object.keys(de(a,u))]);for(const _ of Array.from(h))f(t.dirtyFields,_)?E(l,_,f(u,_)):j(_,f(l,_))}else{if(Te&&w(r))for(const h of y.mount){const _=f(i,h);if(_&&_._f){const R=Array.isArray(_._f.refs)?_._f.refs[0]:_._f.ref;if(_e(R)){const O=R.closest("form");if(O){O.reset();break}}}}i={}}u=s.shouldUnregister?n.keepDefaultValues?N(a):{}:N(l),g.array.next({values:{...l}}),g.values.next({values:{...l}})}y={mount:n.keepDirtyValues?y.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!F.isValid||!!n.keepIsValid||!!n.keepDirtyValues,d.watch=!!s.shouldUnregister,g.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:c?!1:n.keepDirty?t.isDirty:!!(n.keepDefaultValues&&!ee(r,a)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?{}:n.keepDirtyValues?n.keepDefaultValues&&u?de(a,u):t.dirtyFields:n.keepDefaultValues&&r?de(a,r):n.keepDirty?t.dirtyFields:{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ge=(r,n)=>$e(K(r)?r(u):r,n);return{control:{register:Ae,unregister:Se,getFieldState:Be,handleSubmit:He,setError:qe,_executeSchema:te,_getWatch:A,_getDirty:p,_updateValid:q,_removeUnmounted:ge,_updateFieldArray:S,_updateDisabledField:We,_getFieldArray:T,_reset:$e,_resetDefaultValues:()=>K(s.defaultValues)&&s.defaultValues().then(r=>{Ge(r,s.resetOptions),g.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_disableForm:wt,_subjects:g,_proxyFormState:F,_setErrors:J,get _fields(){return i},get _formValues(){return u},get _state(){return d},set _state(r){d=r},get _defaultValues(){return a},get _names(){return y},set _names(r){y=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:le,register:Ae,handleSubmit:He,watch:Et,setValue:j,getValues:Ne,reset:Ge,resetField:Ct,clearErrors:xt,unregister:Se,setError:qe,setFocus:(r,n={})=>{const o=f(i,r),m=o&&o._f;if(m){const c=m.refs?m.refs[0]:m.ref;c.focus&&(c.focus(),n.shouldSelect&&K(c.select)&&c.select())}},getFieldState:Be}}function mr(e={}){const s=v.useRef(void 0),t=v.useRef(void 0),[i,a]=v.useState({isDirty:!1,isValidating:!1,isLoading:K(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:K(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...Zt(e),formState:i});const u=s.current.control;return u._options=e,Oe({subject:u._subjects.state,next:d=>{ct(d,u._proxyFormState,u._updateFormState,!0)&&a({...u._formState})}}),v.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),v.useEffect(()=>{if(u._proxyFormState.isDirty){const d=u._getDirty();d!==i.isDirty&&u._subjects.state.next({isDirty:d})}},[u,i.isDirty]),v.useEffect(()=>{e.values&&!ee(e.values,t.current)?(u._reset(e.values,u._options.resetOptions),t.current=e.values,a(d=>({...d}))):u._resetDefaultValues()},[e.values,u]),v.useEffect(()=>{e.errors&&u._setErrors(e.errors)},[e.errors,u]),v.useEffect(()=>{u._state.mount||(u._updateValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),v.useEffect(()=>{e.shouldUnregister&&u._subjects.values.next({values:u._getWatch()})},[e.shouldUnregister,u]),s.current.formState=dt(i,u),s.current}const Ft=ae.createContext({id:"default-form-id-"+Math.random().toString(36).slice(2)}),er=Ft.Provider,Ie=()=>ae.useContext(Ft),pt=e=>{const{children:s,errorMessage:t}=e;return v.createElement(v.Fragment,null,s,v.createElement(Rt,null,t))};pt.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Content",props:{errorMessage:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};function Vt(e){var y;const{children:s,control:t,...i}=e,a=Ie(),u=(y=a.form)==null?void 0:y.control,d=Pt("Field").Content??pt;return v.createElement(qt,{...i,control:t??u,render:b=>{var D;const{field:x,fieldState:{error:F,invalid:g}}=b,V={...x,form:a.id,isRequired:!!((D=i.rules)!=null&&D.required),isInvalid:g,validationBehavior:"aria",children:nt(M=>v.createElement(d,{errorMessage:F==null?void 0:F.message},M.children))},L={Checkbox:V,CheckboxGroup:V,CheckboxButton:V,FileField:V,NumberField:V,RadioGroup:V,Switch:V,TextArea:V,TextField:V,Select:{...V,selectedKey:V.value},Slider:V,DatePicker:V,DateRangePicker:V,TimeField:V,SegmentedControl:V};return v.createElement(it,{props:L,dependencies:[b]},s)}})}const hr=e=>Vt;Vt.__docgenInfo={description:"",methods:[],displayName:"Field",composes:["Omit","PropsWithChildren"]};const St=e=>{const{isStarted:s,hasFailedWithError:t,hasSucceeded:i,children:a}=e,u=Ot.useNew({});return ae.useEffect(()=>{i?u.state.onSucceeded():t?u.state.onFailed(t):s&&u.state.onAsyncStart()},[s,t,i]),v.createElement(Mt,{actionModel:u},a)};St.__docgenInfo={description:"",methods:[],displayName:"ActionStateContext",props:{isStarted:{required:!1,tsType:{name:"boolean"},description:""},hasSucceeded:{required:!1,tsType:{name:"boolean"},description:""},hasFailedWithError:{required:!1,tsType:{name:"unknown"},description:""}},composes:["PropsWithChildren"]};const tr=e=>{const{children:s,isAsyncSubmit:t}=e,i=Ie().form,{isSubmitted:a,isSubmitting:u,isSubmitSuccessful:d,errors:y}=Me(i),b=a&&y&&Object.entries(y).length>0?y:void 0,x=a&&d;return v.createElement(St,{isStarted:u&&t.current,hasFailedWithError:b,hasSucceeded:x},s)},At=e=>{const{children:s,isAsyncSubmit:t}=e,i={ActionGroup:{children:nt(a=>v.createElement(tr,{isAsyncSubmit:t},a.children))}};return v.createElement(it,{props:i,mergeInParentContext:!0},s)};At.__docgenInfo={description:"",methods:[],displayName:"SubmitButtonStateProvider",props:{isAsyncSubmit:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"boolean"}],raw:"MutableRefObject<boolean>"},description:""}},composes:["PropsWithChildren"]};const rr=()=>{const e=Ie().form,{isValid:s,isSubmitted:t}=Me(e);return ae.useEffect(()=>{t&&s&&e&&e.reset(void 0,{keepIsSubmitted:!1,keepIsSubmitSuccessful:!1,keepDefaultValues:!0,keepValues:!0,keepDirtyValues:!0,keepIsValid:!0,keepDirty:!0,keepErrors:!0,keepTouched:!0,keepIsValidating:!0,keepSubmitCount:!0})},[t,s,e]),null},sr=e=>v.createElement("form",{...e});function ir(e){const{form:s,children:t,onSubmit:i,formComponent:a=sr,...u}=e,d=ae.useId(),y=ae.useRef(!1),b=x=>{const{isSubmitting:F,isValidating:g}=s.control._formState;if(x.stopPropagation(),F||g){x.preventDefault();return}s.handleSubmit(V=>{const L=i(V,x);return y.current=L instanceof Promise,L})(x)};return v.createElement(er,{value:{form:s,id:d}},v.createElement(At,{isAsyncSubmit:y},v.createElement(a,{...u,id:d,onSubmit:b},t),v.createElement(rr,null)))}ir.__docgenInfo={description:"",methods:[],displayName:"Form",props:{form:{required:!0,tsType:{name:"UseFormReturn",elements:[{name:"F"}],raw:"UseFormReturn<F>"},description:""},onSubmit:{required:!0,tsType:{name:"Parameters[0]",raw:`Parameters<
  UseFormReturn<F>["handleSubmit"]
>[0]`},description:""},formComponent:{required:!1,tsType:{name:"ComponentType",elements:[{name:"PropsWithChildren",elements:[{name:"signature",type:"object",raw:"{ id: string; onSubmit?: FormEventHandler }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"onSubmit",value:{name:"FormEventHandler",required:!1}}]}}],raw:"PropsWithChildren<{ id: string; onSubmit?: FormEventHandler }>"}],raw:`ComponentType<
  PropsWithChildren<{ id: string; onSubmit?: FormEventHandler }>
>`},description:""}},composes:["Omit","PropsWithChildren"]};export{ir as F,Vt as a,hr as t,mr as u};
