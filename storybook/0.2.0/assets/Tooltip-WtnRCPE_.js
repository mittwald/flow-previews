import{j as P}from"./jsx-runtime-CLpGMVip.js";import{R as s,r as a}from"./index-Cf9XvIV_.js";import{c as H}from"./clsx-B-dksMZM.js";import{g as I,$ as j,h as B,i as F,a as _}from"./utils-DbIpkr2E.js";import{a as k,b as W,c as A,$ as U}from"./OverlayArrow-C189HunQ.js";import{$ as K,a as V}from"./useFocusable-CJ8wXOex.js";import{$ as z,a as O,d as Y,c as q}from"./index-CoqFY4cC.js";import{a as S,l as G,k as J}from"./useFocusRing-BUEgee7k.js";import{$ as Q}from"./filterDOMProps-BSfnXAP7.js";import{F as X}from"./index-Y1p7vO9S.js";const h=s.createContext(null);function Z(e){let{children:t}=e,r=a.useContext(h),[n,i]=a.useState(0),c=a.useMemo(()=>({parent:r,modalCount:n,addModal(){i(l=>l+1),r&&r.addModal()},removeModal(){i(l=>l-1),r&&r.removeModal()}}),[r,n]);return s.createElement(h.Provider,{value:c},t)}function ee(){let e=a.useContext(h);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:void 0}}}function te(e){let{modalProviderProps:t}=ee();return s.createElement("div",{"data-overlay-container":!0,...e,...t})}function re(e){return s.createElement(Z,null,s.createElement(te,e))}function oe(e){let t=z(),{portalContainer:r=t?null:document.body,...n}=e;if(s.useEffect(()=>{if(r!=null&&r.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[r]),!r)return null;let i=s.createElement(re,n);return X.createPortal(i,r)}function le(e,t){let r=Q(e,{labelable:!0}),{hoverProps:n}=S({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:O(r,n,{role:"tooltip"})}}function ne(e,t,r){let{isDisabled:n,trigger:i}=e,c=Y(),l=a.useRef(!1),o=a.useRef(!1),u=()=>{(l.current||o.current)&&t.open(o.current)},d=g=>{!l.current&&!o.current&&t.close(g)};a.useEffect(()=>{let g=C=>{r&&r.current&&C.key==="Escape"&&(C.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",g,!0),()=>{document.removeEventListener("keydown",g,!0)}},[r,t]);let m=()=>{i!=="focus"&&(G()==="pointer"?l.current=!0:l.current=!1,u())},x=()=>{i!=="focus"&&(o.current=!1,l.current=!1,d())},v=()=>{o.current=!1,l.current=!1,d(!0)},T=()=>{J()&&(o.current=!0,u())},f=()=>{o.current=!1,l.current=!1,d(!0)},{hoverProps:L}=S({isDisabled:n,onHoverStart:m,onHoverEnd:x}),{focusableProps:N}=K({isDisabled:n,onFocus:T,onBlur:f},r);return{triggerProps:{"aria-describedby":t.isOpen?c:void 0,...O(N,L,{onPointerDown:v,onKeyDown:v})},tooltipProps:{id:c}}}const ae=1500,w=500;let p={},ie=0,E=!1,$=null,b=null;function D(e={}){let{delay:t=ae,closeDelay:r=w}=e,{isOpen:n,open:i,close:c}=k(e),l=a.useMemo(()=>`${++ie}`,[]),o=a.useRef(null),u=a.useRef(c),d=()=>{p[l]=v},m=()=>{for(let f in p)f!==l&&(p[f](!0),delete p[f])},x=()=>{o.current&&clearTimeout(o.current),o.current=null,m(),d(),E=!0,i(),$&&(clearTimeout($),$=null),b&&(clearTimeout(b),b=null)},v=f=>{f||r<=0?(o.current&&clearTimeout(o.current),o.current=null,u.current()):o.current||(o.current=setTimeout(()=>{o.current=null,u.current()},r)),$&&(clearTimeout($),$=null),E&&(b&&clearTimeout(b),b=setTimeout(()=>{delete p[l],b=null,E=!1},Math.max(w,r)))},T=()=>{m(),d(),!n&&!$&&!E?$=setTimeout(()=>{$=null,E=!0,x()},t):n||x()};return a.useEffect(()=>{u.current=c},[c]),a.useEffect(()=>()=>{o.current&&clearTimeout(o.current),p[l]&&delete p[l]},[l]),{isOpen:n,open:f=>{!f&&t>0&&!o.current?T():x()},close:v}}const y=a.createContext(null),M=a.createContext(null);function ce(e){let t=D(e),r=a.useRef(null),{triggerProps:n,tooltipProps:i}=ne(e,t,r);return s.createElement(I,{values:[[y,t],[M,{...i,triggerRef:r}]]},s.createElement(V,{...n,ref:r},e.children))}function se({UNSTABLE_portalContainer:e,...t},r){[t,r]=j(t,r,M);let n=a.useContext(y),i=D(t),c=t.isOpen!=null||t.defaultOpen!=null||!n?i:n,l=B(r,c.isOpen)||t.isExiting||!1;return!c.isOpen&&!l?null:s.createElement(oe,{portalContainer:e},s.createElement(fe,{...t,tooltipRef:r,isExiting:l}))}const de=a.forwardRef(se);function fe(e){let t=a.useContext(y),r=a.useRef(null),[n,i]=a.useState(0);q(()=>{r.current&&t.isOpen&&i(r.current.getBoundingClientRect().width)},[t.isOpen,r]);let{overlayProps:c,arrowProps:l,placement:o}=W({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,offset:e.offset,crossOffset:e.crossOffset,isOpen:t.isOpen,arrowSize:n,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip,onClose:()=>t.close(!0)}),u=F(e.tooltipRef,!!o)||e.isEntering||!1,d=_({...e,defaultClassName:"react-aria-Tooltip",values:{placement:o,isEntering:u,isExiting:e.isExiting,state:t}});e=O(e,c);let{tooltipProps:m}=le(e,t);return s.createElement("div",{...m,ref:e.tooltipRef,...d,style:{...c.style,...d.style},"data-placement":o??void 0,"data-entering":u||void 0,"data-exiting":e.isExiting||void 0},s.createElement(A.Provider,{value:{...l,placement:o,ref:r}},d.children))}const ue=e=>{const{children:t,...r}=e;return P.jsx(ce,{...r,children:t})};ue.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TooltipTrigger"};const $e="flow--tooltip",pe="flow--tooltip--tip",be="flow--tooltip--slide",R={tooltip:$e,tip:pe,slide:be},me=e=>{const{children:t,className:r,...n}=e,i=H(R.tooltip,r);return P.jsxs(de,{...n,className:i,children:[P.jsx(U,{className:R.tip,children:P.jsx("svg",{viewBox:"0 0 8 8",children:P.jsx("path",{d:"M0 0 L4 4 L8 0"})})}),t]})};me.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tooltip"};export{ue as T,me as a};
