import{j as x}from"./jsx-runtime-CLpGMVip.js";import{r as m,R}from"./index-Cf9XvIV_.js";import{c as T}from"./clsx-B-dksMZM.js";import"./IconApp-DoH4uGTw.js";import{D as G,L,E as z}from"./IconWarning--dCRo9Au.js";import{C as A}from"./PropsContextProvider-CWFvCxZj.js";import{f as J}from"./flowComponent-CGvK_9lq.js";import{a as K}from"./RSPContexts-BG_vMng8.js";import{$ as O,e as q,d as Q,a as k,g as U,c as X,b as Y,f as B}from"./utils-DbIpkr2E.js";import{$ as p,a as Z,e as E,f as ee,g as ae,d as ie}from"./FieldError-B7sm6tD2.js";import{$ as de,b as S}from"./Form-Dr9yAafV.js";import{a as le}from"./Label-wrbsGWF5.js";import{a as ne}from"./Text-DUOeOfAn.js";import{a as V}from"./index-CoqFY4cC.js";import{$ as M}from"./filterDOMProps-BSfnXAP7.js";import{$ as te}from"./useControlledState-19OAjgUP.js";import{$ as se,b as re,a as oe}from"./useFocusRing-Jnne1fGl.js";import{$ as ce}from"./usePress-6Arr-Ydv.js";import{$ as fe,a as _}from"./useToggleState-DTK8T4Sd.js";import{$ as ue}from"./VisuallyHidden-DJ16t8n8.js";function F(e,a,l){let t=p({...e,value:a.isSelected}),{isInvalid:o,validationErrors:n,validationDetails:d}=t.displayValidation,{labelProps:s,inputProps:f,isSelected:i,isPressed:r,isDisabled:c,isReadOnly:b}=fe({...e,isInvalid:o},a,l);Z(e,t,l);let{isIndeterminate:$,isRequired:u,validationBehavior:h="aria"}=e;m.useEffect(()=>{l.current&&(l.current.indeterminate=!!$)});let{pressProps:v}=ce({isDisabled:c||b,onPress(){let{[E]:P}=e,{commitValidation:I}=P||t;I()}});return{labelProps:V(s,v),inputProps:{...f,checked:i,"aria-required":u&&h==="aria"||void 0,required:u&&h==="native"},isSelected:i,isPressed:r,isDisabled:c,isReadOnly:b,isInvalid:o,validationErrors:n,validationDetails:d}}const j=new WeakMap;function be(e,a){let{isDisabled:l,name:t,validationBehavior:o="aria"}=e,{isInvalid:n,validationErrors:d,validationDetails:s}=a.displayValidation,{labelProps:f,fieldProps:i,descriptionProps:r,errorMessageProps:c}=de({...e,labelElementType:"span",isInvalid:n,errorMessage:e.errorMessage||d});j.set(a,{name:t,descriptionId:r.id,errorMessageId:c.id,validationBehavior:o});let b=M(e,{labelable:!0}),{focusWithinProps:$}=se({onBlurWithin:e.onBlur,onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange});return{groupProps:V(b,{role:"group","aria-disabled":l||void 0,...i,...$}),labelProps:f,descriptionProps:r,errorMessageProps:c,isInvalid:n,validationErrors:d,validationDetails:s}}function $e(e,a,l){const t=_({isReadOnly:e.isReadOnly||a.isReadOnly,isSelected:a.isSelected(e.value),onChange(v){v?a.addValue(e.value):a.removeValue(e.value),e.onChange&&e.onChange(v)}});let{name:o,descriptionId:n,errorMessageId:d,validationBehavior:s}=j.get(a);var f;s=(f=e.validationBehavior)!==null&&f!==void 0?f:s;let{realtimeValidation:i}=p({...e,value:t.isSelected,name:void 0,validationBehavior:"aria"}),r=m.useRef(ee),c=()=>{a.setInvalid(e.value,i.isInvalid?i:r.current)};m.useEffect(c);let b=a.realtimeValidation.isInvalid?a.realtimeValidation:i,$=s==="native"?a.displayValidation:b;var u;let h=F({...e,isReadOnly:e.isReadOnly||a.isReadOnly,isDisabled:e.isDisabled||a.isDisabled,name:e.name||o,isRequired:(u=e.isRequired)!==null&&u!==void 0?u:a.isRequired,validationBehavior:s,[E]:{realtimeValidation:b,displayValidation:$,resetValidation:a.resetValidation,commitValidation:a.commitValidation,updateValidation(v){r.current=v,c()}}},t,l);return{...h,inputProps:{...h.inputProps,"aria-describedby":[e["aria-describedby"],a.isInvalid?d:null,n].filter(Boolean).join(" ")||void 0}}}function ve(e={}){let[a,l]=te(e.value,e.defaultValue||[],e.onChange),t=!!e.isRequired&&a.length===0,o=m.useRef(new Map),n=p({...e,value:a}),d=n.displayValidation.isInvalid;var s;return{...n,value:a,setValue(i){e.isReadOnly||e.isDisabled||l(i)},isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isSelected(i){return a.includes(i)},addValue(i){e.isReadOnly||e.isDisabled||a.includes(i)||l(a.concat(i))},removeValue(i){e.isReadOnly||e.isDisabled||a.includes(i)&&l(a.filter(r=>r!==i))},toggleValue(i){e.isReadOnly||e.isDisabled||(a.includes(i)?l(a.filter(r=>r!==i)):l(a.concat(i)))},setInvalid(i,r){let c=new Map(o.current);r.isInvalid?c.set(i,r):c.delete(i),o.current=c,n.updateValidation(ae(...c.values()))},validationState:(s=e.validationState)!==null&&s!==void 0?s:d?"invalid":null,isInvalid:d,isRequired:t}}const me=m.createContext(null),N=m.createContext(null);function he(e,a){[e,a]=O(e,a,me);let{validationBehavior:l}=q(S)||{};var t,o;let n=(o=(t=e.validationBehavior)!==null&&t!==void 0?t:l)!==null&&o!==void 0?o:"native",d=ve({...e,validationBehavior:n}),[s,f]=Q(),{groupProps:i,labelProps:r,descriptionProps:c,errorMessageProps:b,...$}=be({...e,label:f,validationBehavior:n},d),u=k({...e,values:{isDisabled:d.isDisabled,isReadOnly:d.isReadOnly,isRequired:e.isRequired||!1,isInvalid:d.isInvalid,state:d},defaultClassName:"react-aria-CheckboxGroup"});return R.createElement("div",{...i,...u,ref:a,slot:e.slot||void 0,"data-readonly":d.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":d.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},R.createElement(U,{values:[[N,d],[le,{...r,ref:s,elementType:"span"}],[ne,{slots:{description:c,errorMessage:b}}],[ie,$]]},u.children))}function xe(e,a){let{inputRef:l=null,...t}=e;[e,a]=O(t,a,K);let{validationBehavior:o}=q(S)||{};var n,d;let s=(d=(n=e.validationBehavior)!==null&&n!==void 0?n:o)!==null&&d!==void 0?d:"native",f=m.useContext(N),i=X(Y(l,e.inputRef!==void 0?e.inputRef:null)),{labelProps:r,inputProps:c,isSelected:b,isDisabled:$,isReadOnly:u,isPressed:h,isInvalid:v}=f?$e({...B(e),value:e.value,children:typeof e.children=="function"?!0:e.children},f,i):F({...B(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:s},_(e),i),{isFocused:P,isFocusVisible:I,focusProps:w}=re(),W=$||u,{hoverProps:H,isHovered:g}=oe({...e,isDisabled:W}),D=k({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:b,isIndeterminate:e.isIndeterminate||!1,isPressed:h,isHovered:g,isFocused:P,isFocusVisible:I,isDisabled:$,isReadOnly:u,isInvalid:v,isRequired:e.isRequired||!1}}),C=M(e);return delete C.id,R.createElement("label",{...V(C,r,H,D),ref:a,slot:e.slot||void 0,"data-selected":b||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":h||void 0,"data-hovered":g||void 0,"data-focused":P||void 0,"data-focus-visible":I||void 0,"data-disabled":$||void 0,"data-readonly":u||void 0,"data-invalid":v||void 0,"data-required":e.isRequired||void 0},R.createElement(ue,{elementType:"span"},R.createElement("input",{...V(c,w),ref:i})),D.children)}const Pe=m.forwardRef(xe),Ge=m.forwardRef(he),Re="flow--src--checkbox",Ie="flow--src--checkbox--icon",y={checkbox:Re,icon:Ie},ye=J("Checkbox",e=>{const{children:a,className:l,ref:t,...o}=e,n=T(y.checkbox,l);return x.jsx(A,{children:x.jsx(Pe,{...o,className:n,ref:t,children:({isSelected:d,isIndeterminate:s})=>x.jsxs(x.Fragment,{children:[d?x.jsx(G,{className:y.icon}):s?x.jsx(L,{className:y.icon}):x.jsx(z,{className:y.icon}),a]})})})});ye.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Checkbox"};export{Ge as $,ye as C};
