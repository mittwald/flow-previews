import{j as P}from"./jsx-runtime-CLpGMVip.js";import{r as h,R as I}from"./index-Cf9XvIV_.js";import{c as G}from"./clsx-B-dksMZM.js";import"./IconApp-B1n3xJhN.js";import{C as A,K,D as z}from"./IconWarning-D8dw3UeH.js";import{C as J}from"./PropsContextProvider-CWFvCxZj.js";import{f as Q}from"./flowComponent-DRn_CkhL.js";import{a as U}from"./RSPContexts-BG_vMng8.js";import{$ as _,e as F,d as X,a as j,g as Y,c as Z,b as ee,f as M}from"./utils-CVMEqJeI.js";import{$ as O,a as ae,e as w,f as ie,g as de,d as le}from"./FieldError-BcRZtHui.js";import{$ as ne,b as N}from"./Form-Dnjmabzf.js";import{a as te}from"./Label-0l9LIJhu.js";import{a as se}from"./Text-F0Mi_G2S.js";import{a as p}from"./index-CoqFY4cC.js";import{$ as S}from"./filterDOMProps-BSfnXAP7.js";import{$ as re}from"./useControlledState-19OAjgUP.js";import{$ as oe,b as ce,a as fe}from"./useFocusRing-CKcPrrmF.js";import{$ as B}from"./usePress-6HCAk5fU.js";import{$ as ue}from"./useFormReset-SCbFK273.js";import{$ as be}from"./useFocusable-ZIe1iymP.js";import{$ as W}from"./useToggleState-DSNVePrw.js";import{$ as ve}from"./VisuallyHidden-D-O8AK4M.js";function $e(a,e,l){let{isDisabled:t=!1,isReadOnly:s=!1,value:r,name:o,children:d,"aria-label":f,"aria-labelledby":i,validationState:n="valid",isInvalid:c}=a,v=R=>{R.stopPropagation(),e.setSelected(R.target.checked)},$=d!=null,u=f!=null||i!=null;!$&&!u&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:b,isPressed:m}=B({isDisabled:t}),{pressProps:x,isPressed:y}=B({isDisabled:t||s,onPress(){e.toggle()}}),{focusableProps:g}=be(a,l),D=p(b,g),C=S(a,{labelable:!0});return ue(l,e.isSelected,e.setSelected),{labelProps:p(x,{onClick:R=>R.preventDefault()}),inputProps:p(C,{"aria-invalid":c||n==="invalid"||void 0,"aria-errormessage":a["aria-errormessage"],"aria-controls":a["aria-controls"],"aria-readonly":s||void 0,onChange:v,disabled:t,...r==null?{}:{value:r},name:o,type:"checkbox",...D}),isSelected:e.isSelected,isPressed:m||y,isDisabled:t,isReadOnly:s,isInvalid:c||n==="invalid"}}function L(a,e,l){let t=O({...a,value:e.isSelected}),{isInvalid:s,validationErrors:r,validationDetails:o}=t.displayValidation,{labelProps:d,inputProps:f,isSelected:i,isPressed:n,isDisabled:c,isReadOnly:v}=$e({...a,isInvalid:s},e,l);ae(a,t,l);let{isIndeterminate:$,isRequired:u,validationBehavior:b="aria"}=a;h.useEffect(()=>{l.current&&(l.current.indeterminate=!!$)});let{pressProps:m}=B({isDisabled:c||v,onPress(){let{[w]:x}=a,{commitValidation:y}=x||t;y()}});return{labelProps:p(d,m),inputProps:{...f,checked:i,"aria-required":u&&b==="aria"||void 0,required:u&&b==="native"},isSelected:i,isPressed:n,isDisabled:c,isReadOnly:v,isInvalid:s,validationErrors:r,validationDetails:o}}const H=new WeakMap;function me(a,e){let{isDisabled:l,name:t,validationBehavior:s="aria"}=a,{isInvalid:r,validationErrors:o,validationDetails:d}=e.displayValidation,{labelProps:f,fieldProps:i,descriptionProps:n,errorMessageProps:c}=ne({...a,labelElementType:"span",isInvalid:r,errorMessage:a.errorMessage||o});H.set(e,{name:t,descriptionId:n.id,errorMessageId:c.id,validationBehavior:s});let v=S(a,{labelable:!0}),{focusWithinProps:$}=oe({onBlurWithin:a.onBlur,onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange});return{groupProps:p(v,{role:"group","aria-disabled":l||void 0,...i,...$}),labelProps:f,descriptionProps:n,errorMessageProps:c,isInvalid:r,validationErrors:o,validationDetails:d}}function he(a,e,l){const t=W({isReadOnly:a.isReadOnly||e.isReadOnly,isSelected:e.isSelected(a.value),onChange(m){m?e.addValue(a.value):e.removeValue(a.value),a.onChange&&a.onChange(m)}});let{name:s,descriptionId:r,errorMessageId:o,validationBehavior:d}=H.get(e);var f;d=(f=a.validationBehavior)!==null&&f!==void 0?f:d;let{realtimeValidation:i}=O({...a,value:t.isSelected,name:void 0,validationBehavior:"aria"}),n=h.useRef(ie),c=()=>{e.setInvalid(a.value,i.isInvalid?i:n.current)};h.useEffect(c);let v=e.realtimeValidation.isInvalid?e.realtimeValidation:i,$=d==="native"?e.displayValidation:v;var u;let b=L({...a,isReadOnly:a.isReadOnly||e.isReadOnly,isDisabled:a.isDisabled||e.isDisabled,name:a.name||s,isRequired:(u=a.isRequired)!==null&&u!==void 0?u:e.isRequired,validationBehavior:d,[w]:{realtimeValidation:v,displayValidation:$,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(m){n.current=m,c()}}},t,l);return{...b,inputProps:{...b.inputProps,"aria-describedby":[a["aria-describedby"],e.isInvalid?o:null,r].filter(Boolean).join(" ")||void 0}}}function xe(a={}){let[e,l]=re(a.value,a.defaultValue||[],a.onChange),t=!!a.isRequired&&e.length===0,s=h.useRef(new Map),r=O({...a,value:e}),o=r.displayValidation.isInvalid;var d;return{...r,value:e,setValue(i){a.isReadOnly||a.isDisabled||l(i)},isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isSelected(i){return e.includes(i)},addValue(i){a.isReadOnly||a.isDisabled||e.includes(i)||l(e.concat(i))},removeValue(i){a.isReadOnly||a.isDisabled||e.includes(i)&&l(e.filter(n=>n!==i))},toggleValue(i){a.isReadOnly||a.isDisabled||(e.includes(i)?l(e.filter(n=>n!==i)):l(e.concat(i)))},setInvalid(i,n){let c=new Map(s.current);n.isInvalid?c.set(i,n):c.delete(i),s.current=c,r.updateValidation(de(...c.values()))},validationState:(d=a.validationState)!==null&&d!==void 0?d:o?"invalid":null,isInvalid:o,isRequired:t}}const Pe=h.createContext(null),T=h.createContext(null),Ke=h.forwardRef(function(e,l){[e,l]=_(e,l,Pe);let{validationBehavior:t}=F(N)||{};var s,r;let o=(r=(s=e.validationBehavior)!==null&&s!==void 0?s:t)!==null&&r!==void 0?r:"native",d=xe({...e,validationBehavior:o}),[f,i]=X(),{groupProps:n,labelProps:c,descriptionProps:v,errorMessageProps:$,...u}=me({...e,label:i,validationBehavior:o},d),b=j({...e,values:{isDisabled:d.isDisabled,isReadOnly:d.isReadOnly,isRequired:e.isRequired||!1,isInvalid:d.isInvalid,state:d},defaultClassName:"react-aria-CheckboxGroup"});return I.createElement("div",{...n,...b,ref:l,slot:e.slot||void 0,"data-readonly":d.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":d.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},I.createElement(Y,{values:[[T,d],[te,{...c,ref:f,elementType:"span"}],[se,{slots:{description:v,errorMessage:$}}],[le,u]]},b.children))}),pe=h.forwardRef(function(e,l){let{inputRef:t=null,...s}=e;[e,l]=_(s,l,U);let{validationBehavior:r}=F(N)||{};var o,d;let f=(d=(o=e.validationBehavior)!==null&&o!==void 0?o:r)!==null&&d!==void 0?d:"native",i=h.useContext(T),n=Z(ee(t,e.inputRef!==void 0?e.inputRef:null)),{labelProps:c,inputProps:v,isSelected:$,isDisabled:u,isReadOnly:b,isPressed:m,isInvalid:x}=i?he({...M(e),value:e.value,children:typeof e.children=="function"?!0:e.children},i,n):L({...M(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:f},W(e),n),{isFocused:y,isFocusVisible:g,focusProps:D}=ce(),C=u||b,{hoverProps:R,isHovered:k}=fe({...e,isDisabled:C}),q=j({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:$,isIndeterminate:e.isIndeterminate||!1,isPressed:m,isHovered:k,isFocused:y,isFocusVisible:g,isDisabled:u,isReadOnly:b,isInvalid:x,isRequired:e.isRequired||!1}}),E=S(e);return delete E.id,I.createElement("label",{...p(E,c,R,q),ref:l,slot:e.slot||void 0,"data-selected":$||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":m||void 0,"data-hovered":k||void 0,"data-focused":y||void 0,"data-focus-visible":g||void 0,"data-disabled":u||void 0,"data-readonly":b||void 0,"data-invalid":x||void 0,"data-required":e.isRequired||void 0},I.createElement(ve,{elementType:"span"},I.createElement("input",{...p(v,D),ref:n})),q.children)}),ye="flow--checkbox",Re="flow--checkbox--icon",V={checkbox:ye,icon:Re},Ie=Q("Checkbox",a=>{const{children:e,className:l,ref:t,...s}=a,r=G(V.checkbox,l);return P.jsx(J,{children:P.jsx(pe,{...s,className:r,ref:t,children:({isSelected:o,isIndeterminate:d})=>P.jsxs(P.Fragment,{children:[o?P.jsx(A,{className:V.icon}):d?P.jsx(K,{className:V.icon}):P.jsx(z,{className:V.icon}),e]})})})});Ie.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Checkbox"};export{Ke as $,Ie as C};
