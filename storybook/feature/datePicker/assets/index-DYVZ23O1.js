import{R as n,r as i}from"./index-BwDkhjyp.js";import{c as L}from"./clsx-B-dksMZM.js";import{f as W,$ as H,i as B,j as F,b as k}from"./utils-DDqfTkhb.js";import{$ as A,a as U,b as j,c as K}from"./OverlayArrow-C-JGts0N.js";import{a as C,c as V,i as z,j as Y,k as q}from"./useFocusable-1hkoevAF.js";import{c as G,b as E,$ as J,e as Q}from"./flowComponent-Dglj5cqB.js";import{$ as X}from"./filterDOMProps-CeZl_uWj.js";import{R as Z}from"./index-B8XB3FuZ.js";const P=n.createContext(null);function ee(e){let{children:t}=e,o=i.useContext(P),[l,c]=i.useState(0),s=i.useMemo(()=>({parent:o,modalCount:l,addModal(){c(r=>r+1),o&&o.addModal()},removeModal(){c(r=>r-1),o&&o.removeModal()}}),[o,l]);return n.createElement(P.Provider,{value:s},t)}function te(){let e=i.useContext(P);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:null}}}function oe(e){let{modalProviderProps:t}=te();return n.createElement("div",{"data-overlay-container":!0,...e,...t})}function re(e){return n.createElement(ee,null,n.createElement(oe,e))}function le(e){let t=G(),{portalContainer:o=t?null:document.body,...l}=e;if(n.useEffect(()=>{if(o!=null&&o.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[o]),!o)return null;let c=n.createElement(re,l);return Z.createPortal(c,o)}function ae(e,t){let o=X(e,{labelable:!0}),{hoverProps:l}=C({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:E(o,l,{role:"tooltip"})}}function ne(e,t,o){let{isDisabled:l,trigger:c}=e,s=J(),r=i.useRef(!1),a=i.useRef(!1),$=()=>{(r.current||a.current)&&t.open(a.current)},d=v=>{!r.current&&!a.current&&t.close(v)};i.useEffect(()=>{let v=w=>{o&&o.current&&w.key==="Escape"&&(w.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}},[o,t]);let p=()=>{c!=="focus"&&(z()==="pointer"?r.current=!0:r.current=!1,$())},g=()=>{c!=="focus"&&(a.current=!1,r.current=!1,d())},h=()=>{a.current=!1,r.current=!1,d(!0)},f=()=>{Y()&&(a.current=!0,$())},M=()=>{a.current=!1,r.current=!1,d(!0)},{hoverProps:N}=C({isDisabled:l,onHoverStart:p,onHoverEnd:g}),{focusableProps:I}=V({isDisabled:l,onFocus:f,onBlur:M},o);return{triggerProps:{"aria-describedby":t.isOpen?s:void 0,...E(I,N,{onPointerDown:h,onKeyDown:h})},tooltipProps:{id:s}}}const ie=1500,y=500;let m={},ce=0,x=!1,u=null,b=null;function R(e={}){let{delay:t=ie,closeDelay:o=y}=e,{isOpen:l,open:c,close:s}=A(e),r=i.useMemo(()=>`${++ce}`,[]),a=i.useRef(),$=()=>{m[r]=g},d=()=>{for(let f in m)f!==r&&(m[f](!0),delete m[f])},p=()=>{clearTimeout(a.current),a.current=null,d(),$(),x=!0,c(),u&&(clearTimeout(u),u=null),b&&(clearTimeout(b),b=null)},g=f=>{f||o<=0?(clearTimeout(a.current),a.current=null,s()):a.current||(a.current=setTimeout(()=>{a.current=null,s()},o)),u&&(clearTimeout(u),u=null),x&&(b&&clearTimeout(b),b=setTimeout(()=>{delete m[r],b=null,x=!1},Math.max(y,o)))},h=()=>{d(),$(),!l&&!u&&!x?u=setTimeout(()=>{u=null,x=!0,p()},t):l||p()};return i.useEffect(()=>()=>{clearTimeout(a.current),m[r]&&delete m[r]},[r]),{isOpen:l,open:f=>{!f&&t>0&&!a.current?h():p()},close:g}}const T=i.createContext(null),D=i.createContext(null);function se(e){let t=R(e),o=i.useRef(null),{triggerProps:l,tooltipProps:c}=ne(e,t,o);return n.createElement(W,{values:[[T,t],[D,{...c,triggerRef:o}]]},n.createElement(q,{...l,ref:o},e.children))}function de({UNSTABLE_portalContainer:e,...t},o){[t,o]=H(t,o,D);let l=i.useContext(T),c=R(t),s=t.isOpen!=null||t.defaultOpen!=null||!l?c:l,r=B(o,s.isOpen)||t.isExiting||!1;return!s.isOpen&&!r?null:n.createElement(le,{portalContainer:e},n.createElement(ue,{...t,tooltipRef:o,isExiting:r}))}const fe=i.forwardRef(de);function ue(e){let t=i.useContext(T),o=i.useRef(null),[l,c]=i.useState(0);Q(()=>{o.current&&t.isOpen&&c(o.current.getBoundingClientRect().width)},[t.isOpen,o]);let{overlayProps:s,arrowProps:r,placement:a}=U({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,offset:e.offset,crossOffset:e.crossOffset,isOpen:t.isOpen,arrowSize:l,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip}),$=F(e.tooltipRef,!!a)||e.isEntering||!1,d=k({...e,defaultClassName:"react-aria-Tooltip",values:{placement:a,isEntering:$,isExiting:e.isExiting,state:t}});e=E(e,s);let{tooltipProps:p}=ae(e,t);return n.createElement("div",{...p,ref:e.tooltipRef,...d,style:{...s.style,...d.style},"data-placement":a,"data-entering":$||void 0,"data-exiting":e.isExiting||void 0},n.createElement(j.Provider,{value:{...r,placement:a,ref:o}},d.children))}const $e="flow--tooltip",pe="flow--tooltip--arrow",me="flow--tooltip--slide",O={tooltip:$e,arrow:pe,slide:me},S=e=>{const{children:t,className:o,...l}=e,c=L(O.tooltip,o);return n.createElement(fe,{...l,className:c},n.createElement(K,{className:O.arrow},n.createElement("svg",{viewBox:"0 0 8 8"},n.createElement("path",{d:"M0 0 L4 4 L8 0"}))),t)};S.__docgenInfo={description:"",methods:[],displayName:"Tooltip",composes:["PropsWithChildren"]};const _=e=>{const{children:t,...o}=e;return n.createElement(se,{...o},t)};_.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger",composes:["PropsWithChildren"]};_.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger",composes:["PropsWithChildren"]};S.__docgenInfo={description:"",methods:[],displayName:"Tooltip",composes:["PropsWithChildren"]};export{S as T,_ as a};
