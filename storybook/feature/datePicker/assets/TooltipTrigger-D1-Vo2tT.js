import{R as n,r as i}from"./index-uCp2LrAq.js";import{c as N}from"./clsx-B-dksMZM.js";import{a as H,b as I,c as B,$ as _}from"./OverlayArrow-DFzBEdBA.js";import{f as F,$ as W,i as k,j as A,b as U}from"./utils-CblGkSXh.js";import{a as C,c as j,i as K,j as V,k as z}from"./useFocusable-SxMTR87z.js";import{$ as X,b as T,a as Y,d as q}from"./index-CFQDndEx.js";import{$ as G}from"./filterDOMProps-CeZl_uWj.js";import{$ as J}from"./index-BOkhicXD.js";const P=n.createContext(null);function Q(e){let{children:t}=e,o=i.useContext(P),[l,c]=i.useState(0),s=i.useMemo(()=>({parent:o,modalCount:l,addModal(){c(r=>r+1),o&&o.addModal()},removeModal(){c(r=>r-1),o&&o.removeModal()}}),[o,l]);return n.createElement(P.Provider,{value:s},t)}function Z(){let e=i.useContext(P);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:null}}}function ee(e){let{modalProviderProps:t}=Z();return n.createElement("div",{"data-overlay-container":!0,...e,...t})}function te(e){return n.createElement(Q,null,n.createElement(ee,e))}function oe(e){let t=X(),{portalContainer:o=t?null:document.body,...l}=e;if(n.useEffect(()=>{if(o!=null&&o.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[o]),!o)return null;let c=n.createElement(te,l);return J.createPortal(c,o)}function re(e,t){let o=G(e,{labelable:!0}),{hoverProps:l}=C({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:T(o,l,{role:"tooltip"})}}function le(e,t,o){let{isDisabled:l,trigger:c}=e,s=Y(),r=i.useRef(!1),a=i.useRef(!1),$=()=>{(r.current||a.current)&&t.open(a.current)},d=v=>{!r.current&&!a.current&&t.close(v)};i.useEffect(()=>{let v=w=>{o&&o.current&&w.key==="Escape"&&(w.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}},[o,t]);let p=()=>{c!=="focus"&&(K()==="pointer"?r.current=!0:r.current=!1,$())},g=()=>{c!=="focus"&&(a.current=!1,r.current=!1,d())},E=()=>{a.current=!1,r.current=!1,d(!0)},f=()=>{V()&&(a.current=!0,$())},D=()=>{a.current=!1,r.current=!1,d(!0)},{hoverProps:M}=C({isDisabled:l,onHoverStart:p,onHoverEnd:g}),{focusableProps:L}=j({isDisabled:l,onFocus:f,onBlur:D},o);return{triggerProps:{"aria-describedby":t.isOpen?s:void 0,...T(L,M,{onPointerDown:E,onKeyDown:E})},tooltipProps:{id:s}}}const ae=1500,O=500;let b={},ne=0,x=!1,u=null,m=null;function R(e={}){let{delay:t=ae,closeDelay:o=O}=e,{isOpen:l,open:c,close:s}=H(e),r=i.useMemo(()=>`${++ne}`,[]),a=i.useRef(),$=()=>{b[r]=g},d=()=>{for(let f in b)f!==r&&(b[f](!0),delete b[f])},p=()=>{clearTimeout(a.current),a.current=null,d(),$(),x=!0,c(),u&&(clearTimeout(u),u=null),m&&(clearTimeout(m),m=null)},g=f=>{f||o<=0?(clearTimeout(a.current),a.current=null,s()):a.current||(a.current=setTimeout(()=>{a.current=null,s()},o)),u&&(clearTimeout(u),u=null),x&&(m&&clearTimeout(m),m=setTimeout(()=>{delete b[r],m=null,x=!1},Math.max(O,o)))},E=()=>{d(),$(),!l&&!u&&!x?u=setTimeout(()=>{u=null,x=!0,p()},t):l||p()};return i.useEffect(()=>()=>{clearTimeout(a.current),b[r]&&delete b[r]},[r]),{isOpen:l,open:f=>{!f&&t>0&&!a.current?E():p()},close:g}}const h=i.createContext(null),S=i.createContext(null);function ie(e){let t=R(e),o=i.useRef(null),{triggerProps:l,tooltipProps:c}=le(e,t,o);return n.createElement(F,{values:[[h,t],[S,{...c,triggerRef:o}]]},n.createElement(z,{...l,ref:o},e.children))}function ce({UNSTABLE_portalContainer:e,...t},o){[t,o]=W(t,o,S);let l=i.useContext(h),c=R(t),s=t.isOpen!=null||t.defaultOpen!=null||!l?c:l,r=k(o,s.isOpen)||t.isExiting||!1;return!s.isOpen&&!r?null:n.createElement(oe,{portalContainer:e},n.createElement(de,{...t,tooltipRef:o,isExiting:r}))}const se=i.forwardRef(ce);function de(e){let t=i.useContext(h),o=i.useRef(null),[l,c]=i.useState(0);q(()=>{o.current&&t.isOpen&&c(o.current.getBoundingClientRect().width)},[t.isOpen,o]);let{overlayProps:s,arrowProps:r,placement:a}=I({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,offset:e.offset,crossOffset:e.crossOffset,isOpen:t.isOpen,arrowSize:l,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip}),$=A(e.tooltipRef,!!a)||e.isEntering||!1,d=U({...e,defaultClassName:"react-aria-Tooltip",values:{placement:a,isEntering:$,isExiting:e.isExiting,state:t}});e=T(e,s);let{tooltipProps:p}=re(e,t);return n.createElement("div",{...p,ref:e.tooltipRef,...d,style:{...s.style,...d.style},"data-placement":a,"data-entering":$||void 0,"data-exiting":e.isExiting||void 0},n.createElement(B.Provider,{value:{...r,placement:a,ref:o}},d.children))}const fe="flow--tooltip",ue="flow--tooltip--arrow",$e="flow--tooltip--slide",y={tooltip:fe,arrow:ue,slide:$e},pe=e=>{const{children:t,className:o,...l}=e,c=N(y.tooltip,o);return n.createElement(se,{...l,className:c},n.createElement(_,{className:y.arrow},n.createElement("svg",{viewBox:"0 0 8 8"},n.createElement("path",{d:"M0 0 L4 4 L8 0"}))),t)};pe.__docgenInfo={description:"",methods:[],displayName:"Tooltip"};const be=e=>{const{children:t,...o}=e;return n.createElement(ie,{...o},t)};be.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger"};export{pe as T,be as a};
