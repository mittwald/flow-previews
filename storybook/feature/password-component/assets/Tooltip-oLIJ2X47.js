import{R as i,r as a}from"./index-B-o1Wr-g.js";import{c as N}from"./clsx-B-dksMZM.js";import{f as H,$ as I,h as B,i as F,a as _}from"./utils-DQkeZTYT.js";import{a as k,b as W,c as A,$ as U}from"./OverlayArrow-Dus-MUVG.js";import{$ as K,a as V}from"./useFocusable-DbryJmtU.js";import{$ as z,a as h,d as Y,c as j}from"./index-ynQ6n1pc.js";import{a as R,l as q,k as G}from"./useFocusRing-CTDVvBmm.js";import{$ as J}from"./filterDOMProps-CeZl_uWj.js";import{F as Q}from"./index-DolzVqEf.js";const T=i.createContext(null);function X(e){let{children:t}=e,r=a.useContext(T),[n,c]=a.useState(0),s=a.useMemo(()=>({parent:r,modalCount:n,addModal(){c(l=>l+1),r&&r.addModal()},removeModal(){c(l=>l-1),r&&r.removeModal()}}),[r,n]);return i.createElement(T.Provider,{value:s},t)}function Z(){let e=a.useContext(T);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:void 0}}}function ee(e){let{modalProviderProps:t}=Z();return i.createElement("div",{"data-overlay-container":!0,...e,...t})}function te(e){return i.createElement(X,null,i.createElement(ee,e))}function re(e){let t=z(),{portalContainer:r=t?null:document.body,...n}=e;if(i.useEffect(()=>{if(r!=null&&r.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[r]),!r)return null;let c=i.createElement(te,n);return Q.createPortal(c,r)}function oe(e,t){let r=J(e,{labelable:!0}),{hoverProps:n}=R({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:h(r,n,{role:"tooltip"})}}function le(e,t,r){let{isDisabled:n,trigger:c}=e,s=Y(),l=a.useRef(!1),o=a.useRef(!1),u=()=>{(l.current||o.current)&&t.open(o.current)},d=g=>{!l.current&&!o.current&&t.close(g)};a.useEffect(()=>{let g=y=>{r&&r.current&&y.key==="Escape"&&(y.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",g,!0),()=>{document.removeEventListener("keydown",g,!0)}},[r,t]);let m=()=>{c!=="focus"&&(q()==="pointer"?l.current=!0:l.current=!1,u())},v=()=>{c!=="focus"&&(o.current=!1,l.current=!1,d())},x=()=>{o.current=!1,l.current=!1,d(!0)},P=()=>{G()&&(o.current=!0,u())},f=()=>{o.current=!1,l.current=!1,d(!0)},{hoverProps:M}=R({isDisabled:n,onHoverStart:m,onHoverEnd:v}),{focusableProps:L}=K({isDisabled:n,onFocus:P,onBlur:f},r);return{triggerProps:{"aria-describedby":t.isOpen?s:void 0,...h(L,M,{onPointerDown:x,onKeyDown:x})},tooltipProps:{id:s}}}const ne=1500,C=500;let p={},ae=0,E=!1,$=null,b=null;function S(e={}){let{delay:t=ne,closeDelay:r=C}=e,{isOpen:n,open:c,close:s}=k(e),l=a.useMemo(()=>`${++ae}`,[]),o=a.useRef(null),u=a.useRef(s),d=()=>{p[l]=x},m=()=>{for(let f in p)f!==l&&(p[f](!0),delete p[f])},v=()=>{o.current&&clearTimeout(o.current),o.current=null,m(),d(),E=!0,c(),$&&(clearTimeout($),$=null),b&&(clearTimeout(b),b=null)},x=f=>{f||r<=0?(o.current&&clearTimeout(o.current),o.current=null,u.current()):o.current||(o.current=setTimeout(()=>{o.current=null,u.current()},r)),$&&(clearTimeout($),$=null),E&&(b&&clearTimeout(b),b=setTimeout(()=>{delete p[l],b=null,E=!1},Math.max(C,r)))},P=()=>{m(),d(),!n&&!$&&!E?$=setTimeout(()=>{$=null,E=!0,v()},t):n||v()};return a.useEffect(()=>{u.current=s},[s]),a.useEffect(()=>()=>{o.current&&clearTimeout(o.current),p[l]&&delete p[l]},[l]),{isOpen:n,open:f=>{!f&&t>0&&!o.current?P():v()},close:x}}const O=a.createContext(null),D=a.createContext(null);function ie(e){let t=S(e),r=a.useRef(null),{triggerProps:n,tooltipProps:c}=le(e,t,r);return i.createElement(H,{values:[[O,t],[D,{...c,triggerRef:r}]]},i.createElement(V,{...n,ref:r},e.children))}function ce({UNSTABLE_portalContainer:e,...t},r){[t,r]=I(t,r,D);let n=a.useContext(O),c=S(t),s=t.isOpen!=null||t.defaultOpen!=null||!n?c:n,l=B(r,s.isOpen)||t.isExiting||!1;return!s.isOpen&&!l?null:i.createElement(re,{portalContainer:e},i.createElement(de,{...t,tooltipRef:r,isExiting:l}))}const se=a.forwardRef(ce);function de(e){let t=a.useContext(O),r=a.useRef(null),[n,c]=a.useState(0);j(()=>{r.current&&t.isOpen&&c(r.current.getBoundingClientRect().width)},[t.isOpen,r]);let{overlayProps:s,arrowProps:l,placement:o}=W({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,offset:e.offset,crossOffset:e.crossOffset,isOpen:t.isOpen,arrowSize:n,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip,onClose:()=>t.close(!0)}),u=F(e.tooltipRef,!!o)||e.isEntering||!1,d=_({...e,defaultClassName:"react-aria-Tooltip",values:{placement:o,isEntering:u,isExiting:e.isExiting,state:t}});e=h(e,s);let{tooltipProps:m}=oe(e,t);return i.createElement("div",{...m,ref:e.tooltipRef,...d,style:{...s.style,...d.style},"data-placement":o??void 0,"data-entering":u||void 0,"data-exiting":e.isExiting||void 0},i.createElement(A.Provider,{value:{...l,placement:o,ref:r}},d.children))}const fe=e=>{const{children:t,...r}=e;return i.createElement(ie,{...r},t)};fe.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger"};const ue="flow--tooltip",$e="flow--tooltip--tip",pe="flow--tooltip--slide",w={tooltip:ue,tip:$e,slide:pe},be=e=>{const{children:t,className:r,...n}=e,c=N(w.tooltip,r);return i.createElement(se,{...n,className:c},i.createElement(U,{className:w.tip},i.createElement("svg",{viewBox:"0 0 8 8"},i.createElement("path",{d:"M0 0 L4 4 L8 0"}))),t)};be.__docgenInfo={description:"",methods:[],displayName:"Tooltip"};export{fe as T,be as a};
