import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{f}from"./FormField.module-B9AzUSUD.js";import{$ as b,a as F}from"./useFormValidation-BP6joqgG.js";import{a as P}from"./FieldError-D2eBwE7I.js";import{a as w,$ as I}from"./Input-Dom3MqAg.js";import"./index-BdpSHsi2.js";import{f as u}from"./utils-q_Aud5Js.js";import{P as v,f as j}from"./PropsContextProvider-BpNGM7f2.js";import"./browser-BJKb5O22.js";const y="mittwald.flow-core.file.awaitedArrayBuffer";function C(e){return y in e}const B=async e=>{if(C(e))return e;const s=await e.arrayBuffer();Object.assign(e,{[y]:s})},N="flow--file-field--trigger",R={trigger:N},x=e=>{const{children:s,isDisabled:o,onChange:r,ref:c}=e,n=u(c),l=()=>{var i,a;(i=n.current)!=null&&i.value&&(n.current.value="",r==null||r(null)),(a=n.current)==null||a.click()},d=i=>{r==null||r(i.target.files)},p={Button:{onPress:l,className:R.trigger,isDisabled:o}};return t.jsxs(v,{props:p,mergeInParentContext:!0,children:[s,t.jsx(w,{style:{display:"none"},type:"file",ref:n,onChange:d})]})};x.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""}},composes:["PropsWithChildren"]};const q=j("FileField",e=>{const{children:s,ref:o,isRequired:r,isInvalid:c,isDisabled:n,validationBehavior:l,onChange:d,...p}=e,i=u(o),a=b({value:void 0,validationBehavior:l,isInvalid:c});F({validationBehavior:l},a,i);const g={...p,ref:i,"aria-invalid":a.displayValidation.isInvalid,value:void 0},h={Label:{className:f.label,optional:!e.isRequired},FieldDescription:{className:f.fieldDescription},FieldError:{className:f.customFieldError}},$=m=>{m&&d&&Promise.all(Array.from(m).map(B)).then(()=>d(m))};return t.jsx(I.Provider,{value:g,children:t.jsx(P.Provider,{value:a.displayValidation,children:t.jsx(v,{props:h,children:t.jsx("div",{"data-required":!!r||void 0,"data-invalid":a.displayValidation.isInvalid||void 0,className:f.formField,children:t.jsx(x,{ref:o,onChange:$,isDisabled:n,children:s})})})})})});q.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"FileField"};export{q as F,B as a};
