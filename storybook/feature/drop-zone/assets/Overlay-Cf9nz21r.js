import{j as u}from"./jsx-runtime-D_zvdyIk.js";import{r as s,R as m}from"./index-BdpSHsi2.js";import{c as S}from"./clsx-B-dksMZM.js";import{u as j,a as _}from"./DialogTriggerView-C2FHi8qK.js";import{$ as I,f as E,a as O,b as q}from"./utils-q_Aud5Js.js";import{j as W,k as z,l as B,m as V,n as x,o as H,p as A,h as F}from"./Dialog-HD9t1mUg.js";import{b as C,$ as b,c as U}from"./mergeRefs-COuk0-v5.js";import{$ as w}from"./filterDOMProps-CeZl_uWj.js";import{a as K,b as h,c as R}from"./OverlayArrow-fUY3Kb5L.js";import{v as k}from"./PropsContextProvider-2-HjFX4e.js";let c=typeof document<"u"&&window.visualViewport;function G(){let t=C(),[e,n]=s.useState(()=>t?{width:0,height:0}:y());return s.useEffect(()=>{let i=()=>{n(a=>{let r=y();return r.width===a.width&&r.height===a.height?a:r})};return c?c.addEventListener("resize",i):window.addEventListener("resize",i),()=>{c?c.removeEventListener("resize",i):window.removeEventListener("resize",i)}},[]),e}function y(){return{width:c&&(c==null?void 0:c.width)||window.innerWidth,height:c&&(c==null?void 0:c.height)||window.innerHeight}}function J(t,e,n){let{overlayProps:i,underlayProps:a}=W({...t,isOpen:e.isOpen,onClose:e.close},n);return z({isDisabled:!e.isOpen}),B(),s.useEffect(()=>{if(e.isOpen&&n.current)return V([n.current])},[e.isOpen,n]),{modalProps:b(i),underlayProps:a}}const Q=s.createContext(null),v=s.createContext(null),X=s.forwardRef(function(e,n){if(s.useContext(v))return m.createElement(g,{...e,modalRef:n},e.children);let{isDismissable:a,isKeyboardDismissDisabled:r,isOpen:f,defaultOpen:o,onOpenChange:l,children:d,isEntering:$,isExiting:p,UNSTABLE_portalContainer:M,shouldCloseOnInteractOutside:L,...N}=e;return m.createElement(P,{isDismissable:a,isKeyboardDismissDisabled:r,isOpen:f,defaultOpen:o,onOpenChange:l,isEntering:$,isExiting:p,UNSTABLE_portalContainer:M,shouldCloseOnInteractOutside:L},m.createElement(g,{...N,modalRef:n},d))});function Y(t,e){[t,e]=I(t,e,Q);let n=s.useContext(x),i=K(t),a=t.isOpen!=null||t.defaultOpen!=null||!n?i:n,r=E(e),f=s.useRef(null),o=h(r,a.isOpen),l=h(f,a.isOpen),d=o||l||t.isExiting||!1,$=C();return!a.isOpen&&!d||$?null:m.createElement(Z,{...t,state:a,isExiting:d,overlayRef:r,modalRef:f})}const P=s.forwardRef(Y);function Z({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:i}=e,{modalProps:a,underlayProps:r}=J(e,i,n),f=R(e.overlayRef)||e.isEntering||!1,o=O({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:f,isExiting:e.isExiting,state:i}}),l=G(),d={...o.style,"--visual-viewport-height":l.height+"px"};return m.createElement(A,{isExiting:e.isExiting,portalContainer:t},m.createElement("div",{...b(w(e),r),...o,style:d,ref:e.overlayRef,"data-entering":f||void 0,"data-exiting":e.isExiting||void 0},m.createElement(q,{values:[[v,{modalProps:a,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[x,i]]},o.children)))}function g(t){let{modalProps:e,modalRef:n,isExiting:i,isDismissable:a}=s.useContext(v),r=s.useContext(x),f=s.useMemo(()=>U(t.modalRef,n),[t.modalRef,n]),o=E(f),l=R(o),d=O({...t,defaultClassName:"react-aria-Modal",values:{isEntering:l,isExiting:i,state:r}});return m.createElement("div",{...b(w(t),e),...d,ref:o,"data-entering":l||void 0,"data-exiting":i||void 0},a&&m.createElement(H,{onDismiss:r.close}),d.children)}const ee="flow--overlay",te={overlay:ee},D=t=>{const{children:e,...n}=t;return u.jsx(P,{...n,children:u.jsx(X,{children:u.jsx(F,{children:e})})})};D.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const T=t=>{const e=s.useContext(k).OverlayContent??D;return u.jsx(e,{...t})};T.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const ne=t=>{const{controller:e,children:n,isDismissable:i=!0,className:a,overlayType:r="Modal",ref:f}=t,o=j(r,{reuseControllerFromContext:!0}),l=e??o,d=l.useIsOpen(),$=S(te.overlay,a);return u.jsx(T,{onOpenChange:p=>l.setOpen(p),isOpen:d,ref:f,isDismissable:i,className:$,children:u.jsx(_,{type:"Modal",controller:l,children:d&&n})})};ne.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."}},composes:["PropsWithChildren","PropsWithClassName"]};export{ne as O};
