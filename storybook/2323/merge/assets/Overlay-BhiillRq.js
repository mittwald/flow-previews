import{r as i,R as p,j as d}from"./iframe-Bq_dTdDz.js";import{c as I}from"./clsx-B-dksMZM.js";import{v as P}from"./flowComponent-BeJ1jrGf.js";import{u as V}from"./useOverlayController-BN71uM-Z.js";import{O as W}from"./OverlayContextProvider-CwxNfmUY.js";import{L as k}from"./LoadingSpinner-QnwB8HJT.js";import{u as z}from"./Button-DwhPeKe2.js";import{$ as A,b as N,a as S,d as B}from"./utils-Dc83Zc3S.js";import{h as U,i as K,j as G,k as J,l as x,m as Q,n as X,b as Y}from"./Dialog-atW1yRI0.js";import{e as T,$ as y,a as Z}from"./index-Dif5dzDL.js";import{$ as L}from"./filterDOMProps-BNnC3YgW.js";import{a as ee}from"./useCollator-CL9Njxka.js";import{$ as w}from"./SelectionManager-DJLtj_Nc.js";import{d as te,e as E,f as j}from"./OverlayArrow-D8uV1uDe.js";let f=typeof document<"u"&&window.visualViewport;function ne(){let t=T(),[e,n]=i.useState(()=>t?{width:0,height:0}:C());return i.useEffect(()=>{let a=()=>{f&&f.scale>1||n(s=>{let r=C();return r.width===s.width&&r.height===s.height?s:r})},o,l=s=>{f&&f.scale>1||w(s.target)&&(o=requestAnimationFrame(()=>{(!document.activeElement||!w(document.activeElement))&&n(r=>{let c={width:window.innerWidth,height:window.innerHeight};return c.width===r.width&&c.height===r.height?r:c})}))};return window.addEventListener("blur",l,!0),f?f.addEventListener("resize",a):window.addEventListener("resize",a),()=>{cancelAnimationFrame(o),window.removeEventListener("blur",l,!0),f?f.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function C(){return{width:f?f.width*f.scale:window.innerWidth,height:f?f.height*f.scale:window.innerHeight}}function re(t,e,n){let{overlayProps:a,underlayProps:o}=U({...t,isOpen:e.isOpen,onClose:e.close},n);return K({isDisabled:!e.isOpen}),G(),i.useEffect(()=>{if(e.isOpen&&n.current)return J([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:y(a),underlayProps:o}}const ae=i.createContext(null),b=i.createContext(null),ie=i.forwardRef(function(e,n){if(i.useContext(b))return p.createElement(R,{...e,modalRef:n},e.children);let{isDismissable:o,isKeyboardDismissDisabled:l,isOpen:s,defaultOpen:r,onOpenChange:c,children:m,isEntering:$,isExiting:u,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:v,...H}=e;return p.createElement(D,{isDismissable:o,isKeyboardDismissDisabled:l,isOpen:s,defaultOpen:r,onOpenChange:c,isEntering:$,isExiting:u,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:v},p.createElement(R,{...H,modalRef:n},m))});function oe(t,e){[t,e]=A(t,e,ae);let n=i.useContext(x),a=te(t),o=t.isOpen!=null||t.defaultOpen!=null||!n?a:n,l=N(e),s=i.useRef(null),r=E(l,o.isOpen),c=E(s,o.isOpen),m=r||c||t.isExiting||!1,$=T();return!o.isOpen&&!m||$?null:p.createElement(se,{...t,state:o,isExiting:m,overlayRef:l,modalRef:s})}const D=i.forwardRef(oe);function se({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:a}=e,{modalProps:o,underlayProps:l}=re(e,a,n),s=j(e.overlayRef)||e.isEntering||!1,r=S({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:s,isExiting:e.isExiting,state:a}}),c=ne(),m;if(typeof document<"u"){let u=ee(document.body)?document.body:document.scrollingElement||document.documentElement,h=u.getBoundingClientRect().height%1;m=u.scrollHeight-h}let $={...r.style,"--visual-viewport-height":c.height+"px","--page-height":m!==void 0?m+"px":void 0};return p.createElement(X,{isExiting:e.isExiting,portalContainer:t},p.createElement("div",{...y(L(e,{global:!0}),l),...r,style:$,ref:e.overlayRef,"data-entering":s||void 0,"data-exiting":e.isExiting||void 0},p.createElement(B,{values:[[b,{modalProps:o,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[x,a]]},r.children)))}function R(t){let{modalProps:e,modalRef:n,isExiting:a,isDismissable:o}=i.useContext(b),l=i.useContext(x),s=i.useMemo(()=>Z(t.modalRef,n),[t.modalRef,n]),r=N(s),c=j(r),m=S({...t,defaultClassName:"react-aria-Modal",values:{isEntering:c,isExiting:a,state:l}});return p.createElement("div",{...y(L(t,{global:!0}),e),...m,ref:r,"data-entering":c||void 0,"data-exiting":a||void 0},o&&p.createElement(Q,{onDismiss:l.close}),m.children)}const le="flow--overlay",M={overlay:le},g=i.memo(t=>{const e=i.useContext(P).LoadingSpinner??k;return d.jsx(e,{...t})});g.displayName="LoadingSpinnerView";g.__docgenInfo={description:"",methods:[],displayName:"LoadingSpinnerView"};const q=()=>(z(),d.jsx(g,{color:"dark"}));q.__docgenInfo={description:"",methods:[],displayName:"OverlaySuspenseFallback"};const F=t=>{const{children:e,className:n,...a}=t,[o,l]=i.useState(!1),s=()=>(i.useLayoutEffect(()=>(l(!0),()=>l(!1)),[l]),d.jsx(q,{...a})),r=o?M.overlay:n;return d.jsx(D,{...a,className:r,children:d.jsx(ie,{children:d.jsx(i.Suspense,{fallback:d.jsx(s,{}),children:d.jsx(Y,{children:e})})})})};F.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const O=i.memo(t=>{const e=i.useContext(P).OverlayContent??F;return d.jsx(e,{...t})});O.displayName="OverlayContentView";O.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};function Ee(t){if(typeof t=="function")throw new Error("Render functions as children is not supported here.")}function _(t){const{children:e}=t,n="renderProps"in t?t.renderProps:void 0;return typeof e=="function"?d.jsx(d.Fragment,{children:e(n)}):d.jsx(d.Fragment,{children:e})}_.__docgenInfo={description:"",methods:[],displayName:"Render",props:{children:{required:!0,tsType:{name:"union",raw:"RenderFn<P> | ReactNode",elements:[{name:"signature",type:"function",raw:"(props: P) => ReactNode | void",signature:{arguments:[{type:{name:"P"},name:"props"}],return:{name:"union",raw:"ReactNode | void",elements:[{name:"ReactNode"},{name:"void"}]}}},{name:"ReactNode"}]},description:""}}};const de=t=>{const{controller:e,children:n,isDismissable:a=!0,className:o,overlayType:l="Modal",isDefaultOpen:s,isOpen:r,ref:c,...m}=t,$=V(l,{reuseControllerFromContext:!0,isDefaultOpen:s}),u=e??$;u.useUpdateOptions(m);const h=r??u.useIsOpen(),v=I(M.overlay,o);return d.jsx(O,{onOpenChange:u.setOpen,isOpen:h,ref:c,isDismissable:a,className:v,children:d.jsx(W,{type:"Modal",controller:u,children:d.jsx(_,{renderProps:{controller:u},children:n})})})};de.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."},isOpen:{required:!1,tsType:{name:"boolean"},description:""},isDefaultOpen:{required:!1,tsType:{name:"boolean"},description:""},onOpen:{required:!1,tsType:{name:"OverlayOpenHandler"},description:""},onClose:{required:!1,tsType:{name:"OverlayCloseHandler"},description:""},onOpenChange:{required:!1,tsType:{name:"OverlayOpenStateHandler"},description:""}},composes:["PropsWithRenderChildren","PropsWithClassName"]};export{g as L,de as O,_ as R,Ee as a};
