import{r as m,R as b}from"./index-BwDkhjyp.js";import{c as H}from"./clsx-B-dksMZM.js";import"./IconApp-Bb0sM1mV.js";import{z as T,A as G,B as j}from"./IconWarning-CLj4DHmJ.js";import{f as z,C as A}from"./flowComponent-Bzcp-389.js";import{a as J}from"./RSPContexts-Bc9pl35m.js";import{a as B,c as p,d as K,b as E,f as L,g as Q,h as U}from"./utils-B2_e5HNY.js";import{a as I,c as X,b as Y,g as Z,h as ee,i as ae,e as O,f as ie}from"./Form-MXGUzDjW.js";import{a as de}from"./Label-DFB5ayN_.js";import{a as le}from"./Text-BgNBscSb.js";import{a as R}from"./index-X5uBQEpu.js";import{$ as k}from"./filterDOMProps-CeZl_uWj.js";import{$ as te}from"./useControlledState-C0C-dzuH.js";import{$ as ne,b as re,c as se}from"./useFocusable-LawXdULP.js";import{$ as oe,a as q}from"./useToggleState-BiJaP4jx.js";import{$ as ce}from"./VisuallyHidden-X5SqJT1V.js";function S(e,a,l){let s=I({...e,value:a.isSelected}),{isInvalid:o,validationErrors:t,validationDetails:d}=s.displayValidation,{labelProps:n,inputProps:f,isSelected:i,isPressed:r,isDisabled:c,isReadOnly:v}=oe({...e,isInvalid:o},a,l);X(e,s,l);let{isIndeterminate:$,isRequired:u,validationBehavior:h="aria"}=e;return m.useEffect(()=>{l.current&&(l.current.indeterminate=!!$)}),{labelProps:n,inputProps:{...f,checked:i,"aria-required":u&&h==="aria"||void 0,required:u&&h==="native"},isSelected:i,isPressed:r,isDisabled:c,isReadOnly:v,isInvalid:o,validationErrors:t,validationDetails:d}}const _=new WeakMap;function fe(e,a){let{isDisabled:l,name:s,validationBehavior:o="aria"}=e,{isInvalid:t,validationErrors:d,validationDetails:n}=a.displayValidation,{labelProps:f,fieldProps:i,descriptionProps:r,errorMessageProps:c}=Y({...e,labelElementType:"span",isInvalid:t,errorMessage:e.errorMessage||d});_.set(a,{name:s,descriptionId:r.id,errorMessageId:c.id,validationBehavior:o});let v=k(e,{labelable:!0}),{focusWithinProps:$}=ne({onBlurWithin:e.onBlur,onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange});return{groupProps:R(v,{role:"group","aria-disabled":l||void 0,...i,...$}),labelProps:f,descriptionProps:r,errorMessageProps:c,isInvalid:t,validationErrors:d,validationDetails:n}}function ue(e,a,l){const s=q({isReadOnly:e.isReadOnly||a.isReadOnly,isSelected:a.isSelected(e.value),onChange(x){x?a.addValue(e.value):a.removeValue(e.value),e.onChange&&e.onChange(x)}});let{name:o,descriptionId:t,errorMessageId:d,validationBehavior:n}=_.get(a);var f;n=(f=e.validationBehavior)!==null&&f!==void 0?f:n;let{realtimeValidation:i}=I({...e,value:s.isSelected,name:void 0,validationBehavior:"aria"}),r=m.useRef(Z),c=()=>{a.setInvalid(e.value,i.isInvalid?i:r.current)};m.useEffect(c);let v=a.realtimeValidation.isInvalid?a.realtimeValidation:i,$=n==="native"?a.displayValidation:v;var u;let h=S({...e,isReadOnly:e.isReadOnly||a.isReadOnly,isDisabled:e.isDisabled||a.isDisabled,name:e.name||o,isRequired:(u=e.isRequired)!==null&&u!==void 0?u:a.isRequired,validationBehavior:n,[ee]:{realtimeValidation:v,displayValidation:$,resetValidation:a.resetValidation,commitValidation:a.commitValidation,updateValidation(x){r.current=x,c()}}},s,l);return{...h,inputProps:{...h.inputProps,"aria-describedby":[e["aria-describedby"],a.isInvalid?d:null,t].filter(Boolean).join(" ")||void 0}}}function be(e={}){let[a,l]=te(e.value,e.defaultValue||[],e.onChange),s=!!e.isRequired&&a.length===0,o=m.useRef(new Map),t=I({...e,value:a}),d=t.displayValidation.isInvalid;var n;return{...t,value:a,setValue(i){e.isReadOnly||e.isDisabled||l(i)},isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isSelected(i){return a.includes(i)},addValue(i){e.isReadOnly||e.isDisabled||a.includes(i)||l(a.concat(i))},removeValue(i){e.isReadOnly||e.isDisabled||a.includes(i)&&l(a.filter(r=>r!==i))},toggleValue(i){e.isReadOnly||e.isDisabled||(a.includes(i)?l(a.filter(r=>r!==i)):l(a.concat(i)))},setInvalid(i,r){let c=new Map(o.current);r.isInvalid?c.set(i,r):c.delete(i),o.current=c,t.updateValidation(ae(...c.values()))},validationState:(n=e.validationState)!==null&&n!==void 0?n:d?"invalid":null,isInvalid:d,isRequired:s}}const ve=m.createContext(null),M=m.createContext(null);function $e(e,a){[e,a]=B(e,a,ve);let{validationBehavior:l}=p(O)||{};var s,o;let t=(o=(s=e.validationBehavior)!==null&&s!==void 0?s:l)!==null&&o!==void 0?o:"native",d=be({...e,validationBehavior:t}),[n,f]=K(),{groupProps:i,labelProps:r,descriptionProps:c,errorMessageProps:v,...$}=fe({...e,label:f,validationBehavior:t},d),u=E({...e,values:{isDisabled:d.isDisabled,isReadOnly:d.isReadOnly,isRequired:e.isRequired||!1,isInvalid:d.isInvalid,state:d},defaultClassName:"react-aria-CheckboxGroup"});return b.createElement("div",{...i,...u,ref:a,slot:e.slot||void 0,"data-readonly":d.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":d.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},b.createElement(L,{values:[[M,d],[de,{...r,ref:n,elementType:"span"}],[le,{slots:{description:c,errorMessage:v}}],[ie,$]]},u.children))}function me(e,a){let{inputRef:l=null,...s}=e;[e,a]=B(s,a,J);let{validationBehavior:o}=p(O)||{};var t,d;let n=(d=(t=e.validationBehavior)!==null&&t!==void 0?t:o)!==null&&d!==void 0?d:"native",f=m.useContext(M),i=Q(U(l,e.inputRef!==void 0?e.inputRef:null)),{labelProps:r,inputProps:c,isSelected:v,isDisabled:$,isReadOnly:u,isPressed:h,isInvalid:x}=f?ue({...e,value:e.value,children:typeof e.children=="function"?!0:e.children},f,i):S({...e,children:typeof e.children=="function"?!0:e.children,validationBehavior:n},q(e),i),{isFocused:y,isFocusVisible:V,focusProps:N}=re(),w=$||u,{hoverProps:W,isHovered:g}=se({...e,isDisabled:w}),C=E({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:v,isIndeterminate:e.isIndeterminate||!1,isPressed:h,isHovered:g,isFocused:y,isFocusVisible:V,isDisabled:$,isReadOnly:u,isInvalid:x,isRequired:e.isRequired||!1}}),D=k(e);return delete D.id,b.createElement("label",{...R(D,r,W,C),ref:a,slot:e.slot||void 0,"data-selected":v||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":h||void 0,"data-hovered":g||void 0,"data-focused":y||void 0,"data-focus-visible":V||void 0,"data-disabled":$||void 0,"data-readonly":u||void 0,"data-invalid":x||void 0,"data-required":e.isRequired||void 0},b.createElement(ce,{elementType:"span"},b.createElement("input",{...R(c,N),ref:i})),C.children)}const he=m.forwardRef(me),Fe=m.forwardRef($e),xe="flow--checkbox",Pe="flow--checkbox--icon",P={checkbox:xe,icon:Pe},F=z("Checkbox",e=>{const{children:a,className:l,ref:s,...o}=e,t=H(P.checkbox,l);return b.createElement(A,null,b.createElement(he,{...o,className:t,ref:s},({isSelected:d,isIndeterminate:n})=>b.createElement(b.Fragment,null,d?b.createElement(T,{className:P.icon}):n?b.createElement(G,{className:P.icon}):b.createElement(j,{className:P.icon}),a)))});F.__docgenInfo={description:"",methods:[],displayName:"Checkbox"};F.__docgenInfo={description:"",methods:[],displayName:"Checkbox"};export{Fe as $,F as C};
