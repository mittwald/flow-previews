import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{f}from"./FormField.module-B9AzUSUD.js";import{$ as b,a as F}from"./useFormValidation-BP6joqgG.js";import{a as P}from"./FieldError-D2eBwE7I.js";import{a as w,$ as I}from"./Input-Dom3MqAg.js";import"./index-BdpSHsi2.js";import{f as y}from"./utils-q_Aud5Js.js";import{P as v,f as j}from"./PropsContextProvider-BtE5ePtu.js";import"./browser-BJKb5O22.js";const c="mittwald.flow-core.file.awaitedArrayBuffer";function C(e){return c in e&&e[c]instanceof ArrayBuffer&&!e[c].detached}const B=async e=>{if(C(e))return e;const s=await e.arrayBuffer();return Object.assign(e,{[c]:s}),e},A="flow--file-field--trigger",N={trigger:A},h=e=>{const{children:s,isDisabled:o,onChange:r,ref:p}=e,n=y(p),l=()=>{var a,i;(a=n.current)!=null&&a.value&&(n.current.value="",r==null||r(null)),(i=n.current)==null||i.click()},d=a=>{r==null||r(a.target.files)},m={Button:{onPress:l,className:N.trigger,isDisabled:o}};return t.jsxs(v,{props:m,mergeInParentContext:!0,children:[s,t.jsx(w,{style:{display:"none"},type:"file",ref:n,onChange:d})]})};h.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""}},composes:["PropsWithChildren"]};const R=j("FileField",e=>{const{children:s,ref:o,isRequired:r,isInvalid:p,isDisabled:n,validationBehavior:l,onChange:d,...m}=e,a=y(o),i=b({value:void 0,validationBehavior:l,isInvalid:p});F({validationBehavior:l},i,a);const x={...m,ref:a,"aria-invalid":i.displayValidation.isInvalid,value:void 0},g={Label:{className:f.label,optional:!e.isRequired},FieldDescription:{className:f.fieldDescription},FieldError:{className:f.customFieldError}},$=u=>{u&&d&&Promise.all(Array.from(u).map(B)).then(()=>d(u))};return t.jsx(I.Provider,{value:x,children:t.jsx(P.Provider,{value:i.displayValidation,children:t.jsx(v,{props:g,children:t.jsx("div",{"data-required":!!r||void 0,"data-invalid":i.displayValidation.isInvalid||void 0,className:f.formField,children:t.jsx(h,{ref:o,onChange:$,isDisabled:n,children:s})})})})})});R.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"FileField"};export{R as F,B as a};
