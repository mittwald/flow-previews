import{j as X}from"./jsx-runtime-D_zvdyIk.js";import{r as ue,R as p}from"./index-BZISi7jw.js";import{a as Ct,A as Tt}from"./Action-DdkAMDFz.js";import{i as Ot}from"./browser-B1A6F7LW.js";const it=e=>{const{isStarted:s,hasFailedWithError:t,hasSucceeded:n,children:a}=e,o=Ct.useNew({});return ue.useEffect(()=>{n?o.state.onSucceeded():t?o.state.onFailed(t):s&&o.state.onAsyncStart()},[s,t,n]),X.jsx(Tt,{actionModel:o,children:a})};it.__docgenInfo={description:"",methods:[],displayName:"ActionStateContext",props:{isStarted:{required:!1,tsType:{name:"boolean"},description:""},hasSucceeded:{required:!1,tsType:{name:"boolean"},description:""},hasFailedWithError:{required:!1,tsType:{name:"unknown"},description:""}},composes:["PropsWithChildren"]};const nt=ue.createContext(void 0),Rt=nt.Provider,at=()=>{const e=ue.useContext(nt);return Ot(!!e,"Could not useFormContext() outside a Form, or multiple versions of Flow installed."),e};var ge=e=>e.type==="checkbox",se=e=>e instanceof Date,M=e=>e==null;const ut=e=>typeof e=="object";var D=e=>!M(e)&&!Array.isArray(e)&&ut(e)&&!se(e),ot=e=>D(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,Pt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,lt=(e,s)=>e.has(Pt(s)),Ut=e=>{const s=e.constructor&&e.constructor.prototype;return D(s)&&s.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function I(e){let s;const t=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Oe&&(e instanceof Blob||n))&&(t||D(e)))if(s=t?[]:{},!t&&!Ut(e))s=e;else for(const a in e)e.hasOwnProperty(a)&&(s[a]=I(e[a]));else return e;return s}var pe=e=>Array.isArray(e)?e.filter(Boolean):[],w=e=>e===void 0,f=(e,s,t)=>{if(!s||!D(e))return t;const n=pe(s.split(/[,[\].]+?/)).reduce((a,o)=>M(a)?a:a[o],e);return w(n)||n===e?w(e[s])?t:e[s]:n},H=e=>typeof e=="boolean",Re=e=>/^\w*$/.test(e),dt=e=>pe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),S=(e,s,t)=>{let n=-1;const a=Re(s)?[s]:dt(s),o=a.length,d=o-1;for(;++n<o;){const h=a[n];let b=t;if(n!==d){const A=e[h];b=D(A)||Array.isArray(A)?A:isNaN(+a[n+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=b,e=e[h]}return e};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ct=p.createContext(null),Pe=()=>p.useContext(ct),Lt=e=>{const{children:s,...t}=e;return p.createElement(ct.Provider,{value:t},s)};var ft=(e,s,t,n=!0)=>{const a={defaultValues:s._defaultValues};for(const o in e)Object.defineProperty(a,o,{get:()=>{const d=o;return s._proxyFormState[d]!==K.all&&(s._proxyFormState[d]=!n||K.all),t&&(t[d]=!0),e[d]}});return a},N=e=>D(e)&&!Object.keys(e).length,yt=(e,s,t,n)=>{t(e);const{name:a,...o}=e;return N(o)||Object.keys(o).length>=Object.keys(s).length||Object.keys(o).find(d=>s[d]===(!n||K.all))},ye=e=>Array.isArray(e)?e:[e],ht=(e,s,t)=>!e||!s||e===s||ye(e).some(n=>n&&(t?n===s:n.startsWith(s)||s.startsWith(n)));function Ue(e){const s=p.useRef(e);s.current=e,p.useEffect(()=>{const t=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Le(e){const s=Pe(),{control:t=s.control,disabled:n,name:a,exact:o}=e||{},[d,h]=p.useState(t._formState),b=p.useRef(!0),A=p.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),F=p.useRef(a);return F.current=a,Ue({disabled:n,next:m=>b.current&&ht(F.current,m.name,o)&&yt(m,A.current,t._updateFormState)&&h({...t._formState,...m}),subject:t._subjects.state}),p.useEffect(()=>(b.current=!0,A.current.isValid&&t._updateValid(!0),()=>{b.current=!1}),[t]),p.useMemo(()=>ft(d,t,A.current,!1),[d,t])}var G=e=>typeof e=="string",gt=(e,s,t,n,a)=>G(e)?(n&&s.watch.add(e),f(t,e,a)):Array.isArray(e)?e.map(o=>(n&&s.watch.add(o),f(t,o))):(n&&(s.watchAll=!0),t);function Mt(e){const s=Pe(),{control:t=s.control,name:n,defaultValue:a,disabled:o,exact:d}=e||{},h=p.useRef(n);h.current=n,Ue({disabled:o,subject:t._subjects.values,next:F=>{ht(h.current,F.name,d)&&A(I(gt(h.current,t._names,F.values||t._formValues,!1,a)))}});const[b,A]=p.useState(t._getWatch(n,a));return p.useEffect(()=>t._removeUnmounted()),b}function It(e){const s=Pe(),{name:t,disabled:n,control:a=s.control,shouldUnregister:o}=e,d=lt(a._names.array,t),h=Mt({control:a,name:t,defaultValue:f(a._formValues,t,f(a._defaultValues,t,e.defaultValue)),exact:!0}),b=Le({control:a,name:t,exact:!0}),A=p.useRef(a.register(t,{...e.rules,value:h,...H(e.disabled)?{disabled:e.disabled}:{}})),F=p.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!f(b.errors,t)},isDirty:{enumerable:!0,get:()=>!!f(b.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!f(b.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!f(b.validatingFields,t)},error:{enumerable:!0,get:()=>f(b.errors,t)}}),[b,t]),m=p.useMemo(()=>({name:t,value:h,...H(n)||b.disabled?{disabled:b.disabled||n}:{},onChange:T=>A.current.onChange({target:{value:ot(T),name:t},type:_e.CHANGE}),onBlur:()=>A.current.onBlur({target:{value:f(a._formValues,t),name:t},type:_e.BLUR}),ref:T=>{const B=f(a._fields,t);B&&T&&(B._f.ref={focus:()=>T.focus(),select:()=>T.select(),setCustomValidity:P=>T.setCustomValidity(P),reportValidity:()=>T.reportValidity()})}}),[t,a._formValues,n,b.disabled,h,a._fields]);return p.useEffect(()=>{const T=a._options.shouldUnregister||o,B=(P,L)=>{const j=f(a._fields,P);j&&j._f&&(j._f.mount=L)};if(B(t,!0),T){const P=I(f(a._options.defaultValues,t));S(a._defaultValues,t,P),w(f(a._formValues,t))&&S(a._formValues,t,P)}return!d&&a.register(t),()=>{(d?T&&!a._state.action:T)?a.unregister(t):B(t,!1)}},[t,a,d,o]),p.useEffect(()=>{a._updateDisabledField({disabled:n,fields:a._fields,name:t})},[n,t,a]),p.useMemo(()=>({field:m,formState:b,fieldState:F}),[m,b,F])}const or=e=>e.render(It(e));var Nt=(e,s,t,n,a)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[n]:a||!0}}:{},Ye=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),Je=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const he=(e,s,t,n)=>{for(const a of t||Object.keys(e)){const o=f(e,a);if(o){const{_f:d,...h}=o;if(d){if(d.refs&&d.refs[0]&&s(d.refs[0],a)&&!n)return!0;if(d.ref&&s(d.ref,d.name)&&!n)return!0;if(he(h,s))break}else if(D(h)&&he(h,s))break}}};var Bt=(e,s,t)=>{const n=ye(f(e,t));return S(n,"root",s[t]),S(e,t,n),e},Me=e=>e.type==="file",z=e=>typeof e=="function",Fe=e=>{if(!Oe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},be=e=>G(e),Ie=e=>e.type==="radio",Ve=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var mt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!w(e[0].attributes.value)?w(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe};const Ze={isValid:!1,value:null};var vt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ze):Ze;function et(e,s,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||H(e)&&!e)return{type:t,message:be(e)?e:"",ref:s}}var ae=e=>D(e)&&!Ve(e)?e:{value:e,message:""},tt=async(e,s,t,n,a,o)=>{const{ref:d,refs:h,required:b,maxLength:A,minLength:F,min:m,max:T,pattern:B,validate:P,name:L,valueAsNumber:j,mount:Z}=e._f,V=f(t,L);if(!Z||s.has(L))return{};const Y=h?h[0]:d,J=_=>{a&&Y.reportValidity&&(Y.setCustomValidity(H(_)?"":_||""),Y.reportValidity())},E={},ie=Ie(d),me=ge(d),re=ie||me,ne=(j||Me(d))&&w(d.value)&&w(V)||Fe(d)&&d.value===""||V===""||Array.isArray(V)&&!V.length,W=Nt.bind(null,L,n,E),ve=(_,x,k,U=Q.maxLength,$=Q.minLength)=>{const q=_?x:k;E[L]={type:_?U:$,message:q,ref:d,...W(_?U:$,q)}};if(o?!Array.isArray(V)||!V.length:b&&(!re&&(ne||M(V))||H(V)&&!V||me&&!mt(h).isValid||ie&&!vt(h).isValid)){const{value:_,message:x}=be(b)?{value:!!b,message:b}:ae(b);if(_&&(E[L]={type:Q.required,message:x,ref:Y,...W(Q.required,x)},!n))return J(x),E}if(!ne&&(!M(m)||!M(T))){let _,x;const k=ae(T),U=ae(m);if(!M(V)&&!isNaN(V)){const $=d.valueAsNumber||V&&+V;M(k.value)||(_=$>k.value),M(U.value)||(x=$<U.value)}else{const $=d.valueAsDate||new Date(V),q=de=>new Date(new Date().toDateString()+" "+de),oe=d.type=="time",le=d.type=="week";G(k.value)&&V&&(_=oe?q(V)>q(k.value):le?V>k.value:$>new Date(k.value)),G(U.value)&&V&&(x=oe?q(V)<q(U.value):le?V<U.value:$<new Date(U.value))}if((_||x)&&(ve(!!_,k.message,U.message,Q.max,Q.min),!n))return J(E[L].message),E}if((A||F)&&!ne&&(G(V)||o&&Array.isArray(V))){const _=ae(A),x=ae(F),k=!M(_.value)&&V.length>+_.value,U=!M(x.value)&&V.length<+x.value;if((k||U)&&(ve(k,_.message,x.message),!n))return J(E[L].message),E}if(B&&!ne&&G(V)){const{value:_,message:x}=ae(B);if(Ve(_)&&!V.match(_)&&(E[L]={type:Q.pattern,message:x,ref:d,...W(Q.pattern,x)},!n))return J(x),E}if(P){if(z(P)){const _=await P(V,t),x=et(_,Y);if(x&&(E[L]={...x,...W(Q.validate,x.message)},!n))return J(x.message),E}else if(D(P)){let _={};for(const x in P){if(!N(_)&&!n)break;const k=et(await P[x](V,t),Y,x);k&&(_={...k,...W(x,k.message)},J(k.message),n&&(E[L]=_))}if(!N(_)&&(E[L]={ref:Y,..._},!n))return E}}return J(!0),E};function jt(e,s){const t=s.slice(0,-1).length;let n=0;for(;n<t;)e=w(e)?n++:e[s[n++]];return e}function Wt(e){for(const s in e)if(e.hasOwnProperty(s)&&!w(e[s]))return!1;return!0}function C(e,s){const t=Array.isArray(s)?s:Re(s)?[s]:dt(s),n=t.length===1?e:jt(e,t),a=t.length-1,o=t[a];return n&&delete n[o],a!==0&&(D(n)&&N(n)||Array.isArray(n)&&Wt(n))&&C(e,t.slice(0,-1)),e}var Ee=()=>{let e=[];return{get observers(){return e},next:a=>{for(const o of e)o.next&&o.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(o=>o!==a)}}),unsubscribe:()=>{e=[]}}},Te=e=>M(e)||!ut(e);function te(e,s){if(Te(e)||Te(s))return e===s;if(se(e)&&se(s))return e.getTime()===s.getTime();const t=Object.keys(e),n=Object.keys(s);if(t.length!==n.length)return!1;for(const a of t){const o=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const d=s[a];if(se(o)&&se(d)||D(o)&&D(d)||Array.isArray(o)&&Array.isArray(d)?!te(o,d):o!==d)return!1}}return!0}var bt=e=>e.type==="select-multiple",qt=e=>Ie(e)||ge(e),ke=e=>Fe(e)&&e.isConnected,_t=e=>{for(const s in e)if(z(e[s]))return!0;return!1};function xe(e,s={}){const t=Array.isArray(e);if(D(e)||t)for(const n in e)Array.isArray(e[n])||D(e[n])&&!_t(e[n])?(s[n]=Array.isArray(e[n])?[]:{},xe(e[n],s[n])):M(e[n])||(s[n]=!0);return s}function Ft(e,s,t){const n=Array.isArray(e);if(D(e)||n)for(const a in e)Array.isArray(e[a])||D(e[a])&&!_t(e[a])?w(s)||Te(t[a])?t[a]=Array.isArray(e[a])?xe(e[a],[]):{...xe(e[a])}:Ft(e[a],M(s)?{}:s[a],t[a]):t[a]=!te(e[a],s[a]);return t}var ce=(e,s)=>Ft(e,s,xe(s)),Vt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:n})=>w(e)?e:s?e===""?NaN:e&&+e:t&&G(e)?new Date(e):n?n(e):e;function Ce(e){const s=e.ref;return Me(s)?s.files:Ie(s)?vt(e.refs).value:bt(s)?[...s.selectedOptions].map(({value:t})=>t):ge(s)?mt(e.refs).value:Vt(w(s.value)?e.ref.value:s.value,e)}var Ht=(e,s,t,n)=>{const a={};for(const o of e){const d=f(s,o);d&&S(a,o,d._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:n}},fe=e=>w(e)?e:Ve(e)?e.source:D(e)?Ve(e.value)?e.value.source:e.value:e;const rt="AsyncFunction";var $t=e=>!!e&&!!e.validate&&!!(z(e.validate)&&e.validate.constructor.name===rt||D(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===rt)),Kt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function st(e,s,t){const n=f(e,t);if(n||Re(t))return{error:n,name:t};const a=t.split(".");for(;a.length;){const o=a.join("."),d=f(s,o),h=f(e,o);if(d&&!Array.isArray(d)&&t!==o)return{name:t};if(h&&h.type)return{name:o,error:h};a.pop()}return{name:t}}var zt=(e,s,t,n,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(s||e):(t?n.isOnBlur:a.isOnBlur)?!e:(t?n.isOnChange:a.isOnChange)?e:!0,Gt=(e,s)=>!pe(f(e,s)).length&&C(e,s);const Yt={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function Jt(e={}){let s={...Yt,...e},t={submitCount:0,isDirty:!1,isLoading:z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},a=D(s.defaultValues)||D(s.values)?I(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:I(a),d={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,A=0;const F={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:Ee(),array:Ee(),state:Ee()},T=Ye(s.mode),B=Ye(s.reValidateMode),P=s.criteriaMode===K.all,L=r=>i=>{clearTimeout(A),A=setTimeout(r,i)},j=async r=>{if(!s.disabled&&(F.isValid||r)){const i=s.resolver?N((await re()).errors):await W(n,!0);i!==t.isValid&&m.state.next({isValid:i})}},Z=(r,i)=>{!s.disabled&&(F.isValidating||F.validatingFields)&&((r||Array.from(h.mount)).forEach(u=>{u&&(i?S(t.validatingFields,u,i):C(t.validatingFields,u))}),m.state.next({validatingFields:t.validatingFields,isValidating:!N(t.validatingFields)}))},V=(r,i=[],u,y,c=!0,l=!0)=>{if(y&&u&&!s.disabled){if(d.action=!0,l&&Array.isArray(f(n,r))){const g=u(f(n,r),y.argA,y.argB);c&&S(n,r,g)}if(l&&Array.isArray(f(t.errors,r))){const g=u(f(t.errors,r),y.argA,y.argB);c&&S(t.errors,r,g),Gt(t.errors,r)}if(F.touchedFields&&l&&Array.isArray(f(t.touchedFields,r))){const g=u(f(t.touchedFields,r),y.argA,y.argB);c&&S(t.touchedFields,r,g)}F.dirtyFields&&(t.dirtyFields=ce(a,o)),m.state.next({name:r,isDirty:_(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else S(o,r,i)},Y=(r,i)=>{S(t.errors,r,i),m.state.next({errors:t.errors})},J=r=>{t.errors=r,m.state.next({errors:t.errors,isValid:!1})},E=(r,i,u,y)=>{const c=f(n,r);if(c){const l=f(o,r,w(u)?f(a,r):u);w(l)||y&&y.defaultChecked||i?S(o,r,i?l:Ce(c._f)):U(r,l),d.mount&&j()}},ie=(r,i,u,y,c)=>{let l=!1,g=!1;const v={name:r};if(!s.disabled){const O=!!(f(n,r)&&f(n,r)._f&&f(n,r)._f.disabled);if(!u||y){F.isDirty&&(g=t.isDirty,t.isDirty=v.isDirty=_(),l=g!==v.isDirty);const R=O||te(f(a,r),i);g=!!(!O&&f(t.dirtyFields,r)),R||O?C(t.dirtyFields,r):S(t.dirtyFields,r,!0),v.dirtyFields=t.dirtyFields,l=l||F.dirtyFields&&g!==!R}if(u){const R=f(t.touchedFields,r);R||(S(t.touchedFields,r,u),v.touchedFields=t.touchedFields,l=l||F.touchedFields&&R!==u)}l&&c&&m.state.next(v)}return l?v:{}},me=(r,i,u,y)=>{const c=f(t.errors,r),l=F.isValid&&H(i)&&t.isValid!==i;if(s.delayError&&u?(b=L(()=>Y(r,u)),b(s.delayError)):(clearTimeout(A),b=null,u?S(t.errors,r,u):C(t.errors,r)),(u?!te(c,u):c)||!N(y)||l){const g={...y,...l&&H(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...g},m.state.next(g)}},re=async r=>{Z(r,!0);const i=await s.resolver(o,s.context,Ht(r||h.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return Z(r),i},ne=async r=>{const{errors:i}=await re(r);if(r)for(const u of r){const y=f(i,u);y?S(t.errors,u,y):C(t.errors,u)}else t.errors=i;return i},W=async(r,i,u={valid:!0})=>{for(const y in r){const c=r[y];if(c){const{_f:l,...g}=c;if(l){const v=h.array.has(l.name),O=c._f&&$t(c._f);O&&F.validatingFields&&Z([y],!0);const R=await tt(c,h.disabled,o,P,s.shouldUseNativeValidation&&!i,v);if(O&&F.validatingFields&&Z([y]),R[l.name]&&(u.valid=!1,i))break;!i&&(f(R,l.name)?v?Bt(t.errors,R,l.name):S(t.errors,l.name,R[l.name]):C(t.errors,l.name))}!N(g)&&await W(g,i,u)}}return u.valid},ve=()=>{for(const r of h.unMount){const i=f(n,r);i&&(i._f.refs?i._f.refs.every(u=>!ke(u)):!ke(i._f.ref))&&Se(r)}h.unMount=new Set},_=(r,i)=>!s.disabled&&(r&&i&&S(o,r,i),!te(Ne(),a)),x=(r,i,u)=>gt(r,h,{...d.mount?o:w(i)?a:G(r)?{[r]:i}:i},u,i),k=r=>pe(f(d.mount?o:a,r,s.shouldUnregister?f(a,r,[]):[])),U=(r,i,u={})=>{const y=f(n,r);let c=i;if(y){const l=y._f;l&&(!l.disabled&&S(o,r,Vt(i,l)),c=Fe(l.ref)&&M(i)?"":i,bt(l.ref)?[...l.ref.options].forEach(g=>g.selected=c.includes(g.value)):l.refs?ge(l.ref)?l.refs.length>1?l.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(c)?!!c.find(v=>v===g.value):c===g.value)):l.refs[0]&&(l.refs[0].checked=!!c):l.refs.forEach(g=>g.checked=g.value===c):Me(l.ref)?l.ref.value="":(l.ref.value=c,l.ref.type||m.values.next({name:r,values:{...o}})))}(u.shouldDirty||u.shouldTouch)&&ie(r,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&de(r)},$=(r,i,u)=>{for(const y in i){const c=i[y],l=`${r}.${y}`,g=f(n,l);(h.array.has(r)||D(c)||g&&!g._f)&&!se(c)?$(l,c,u):U(l,c,u)}},q=(r,i,u={})=>{const y=f(n,r),c=h.array.has(r),l=I(i);S(o,r,l),c?(m.array.next({name:r,values:{...o}}),(F.isDirty||F.dirtyFields)&&u.shouldDirty&&m.state.next({name:r,dirtyFields:ce(a,o),isDirty:_(r,l)})):y&&!y._f&&!M(l)?$(r,l,u):U(r,l,u),Je(r,h)&&m.state.next({...t}),m.values.next({name:d.mount?r:void 0,values:{...o}})},oe=async r=>{d.mount=!0;const i=r.target;let u=i.name,y=!0;const c=f(n,u),l=()=>i.type?Ce(c._f):ot(r),g=v=>{y=Number.isNaN(v)||se(v)&&isNaN(v.getTime())||te(v,f(o,u,v))};if(c){let v,O;const R=l(),ee=r.type===_e.BLUR||r.type===_e.FOCUS_OUT,Dt=!Kt(c._f)&&!s.resolver&&!f(t.errors,u)&&!c._f.deps||zt(ee,f(t.touchedFields,u),t.isSubmitted,B,T),we=Je(u,h,ee);S(o,u,R),ee?(c._f.onBlur&&c._f.onBlur(r),b&&b(0)):c._f.onChange&&c._f.onChange(r);const De=ie(u,R,ee,!1),Et=!N(De)||we;if(!ee&&m.values.next({name:u,type:r.type,values:{...o}}),Dt)return F.isValid&&(s.mode==="onBlur"&&ee?j():ee||j()),Et&&m.state.next({name:u,...we?{}:De});if(!ee&&we&&m.state.next({...t}),s.resolver){const{errors:ze}=await re([u]);if(g(R),y){const kt=st(t.errors,n,u),Ge=st(ze,n,kt.name||u);v=Ge.error,u=Ge.name,O=N(ze)}}else Z([u],!0),v=(await tt(c,h.disabled,o,P,s.shouldUseNativeValidation))[u],Z([u]),g(R),y&&(v?O=!1:F.isValid&&(O=await W(n,!0)));y&&(c._f.deps&&de(c._f.deps),me(u,O,v,De))}},le=(r,i)=>{if(f(t.errors,i)&&r.focus)return r.focus(),1},de=async(r,i={})=>{let u,y;const c=ye(r);if(s.resolver){const l=await ne(w(r)?r:c);u=N(l),y=r?!c.some(g=>f(l,g)):u}else r?(y=(await Promise.all(c.map(async l=>{const g=f(n,l);return await W(g&&g._f?{[l]:g}:g)}))).every(Boolean),!(!y&&!t.isValid)&&j()):y=u=await W(n);return m.state.next({...!G(r)||F.isValid&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors}),i.shouldFocus&&!y&&he(n,le,r?c:h.mount),y},Ne=r=>{const i={...d.mount?o:a};return w(r)?i:G(r)?f(i,r):r.map(u=>f(i,u))},Be=(r,i)=>({invalid:!!f((i||t).errors,r),isDirty:!!f((i||t).dirtyFields,r),error:f((i||t).errors,r),isValidating:!!f(t.validatingFields,r),isTouched:!!f((i||t).touchedFields,r)}),pt=r=>{r&&ye(r).forEach(i=>C(t.errors,i)),m.state.next({errors:r?t.errors:{}})},je=(r,i,u)=>{const y=(f(n,r,{_f:{}})._f||{}).ref,c=f(t.errors,r)||{},{ref:l,message:g,type:v,...O}=c;S(t.errors,r,{...O,...i,ref:y}),m.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&y&&y.focus&&y.focus()},St=(r,i)=>z(r)?m.values.subscribe({next:u=>r(x(void 0,i),u)}):x(r,i,!0),Se=(r,i={})=>{for(const u of r?ye(r):h.mount)h.mount.delete(u),h.array.delete(u),i.keepValue||(C(n,u),C(o,u)),!i.keepError&&C(t.errors,u),!i.keepDirty&&C(t.dirtyFields,u),!i.keepTouched&&C(t.touchedFields,u),!i.keepIsValidating&&C(t.validatingFields,u),!s.shouldUnregister&&!i.keepDefaultValue&&C(a,u);m.values.next({values:{...o}}),m.state.next({...t,...i.keepDirty?{isDirty:_()}:{}}),!i.keepIsValid&&j()},We=({disabled:r,name:i,field:u,fields:y})=>{(H(r)&&d.mount||r||h.disabled.has(i))&&(r?h.disabled.add(i):h.disabled.delete(i),ie(i,Ce(u?u._f:f(y,i)._f),!1,!1,!0))},Ae=(r,i={})=>{let u=f(n,r);const y=H(i.disabled)||H(s.disabled);return S(n,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...i}}),h.mount.add(r),u?We({field:u,disabled:H(i.disabled)?i.disabled:s.disabled,name:r}):E(r,!0,i.value),{...y?{disabled:i.disabled||s.disabled}:{},...s.progressive?{required:!!i.required,min:fe(i.min),max:fe(i.max),minLength:fe(i.minLength),maxLength:fe(i.maxLength),pattern:fe(i.pattern)}:{},name:r,onChange:oe,onBlur:oe,ref:c=>{if(c){Ae(r,i),u=f(n,r);const l=w(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,g=qt(l),v=u._f.refs||[];if(g?v.find(O=>O===l):l===u._f.ref)return;S(n,r,{_f:{...u._f,...g?{refs:[...v.filter(ke),l,...Array.isArray(f(a,r))?[{}]:[]],ref:{type:l.type,name:r}}:{ref:l}}}),E(r,!1,void 0,l)}else u=f(n,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(lt(h.array,r)&&d.action)&&h.unMount.add(r)}}},qe=()=>s.shouldFocusError&&he(n,le,h.mount),At=r=>{H(r)&&(m.state.next({disabled:r}),he(n,(i,u)=>{const y=f(n,u);y&&(i.disabled=y._f.disabled||r,Array.isArray(y._f.refs)&&y._f.refs.forEach(c=>{c.disabled=y._f.disabled||r}))},0,!1))},He=(r,i)=>async u=>{let y;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let c=I(o);if(h.disabled.size)for(const l of h.disabled)S(c,l,void 0);if(m.state.next({isSubmitting:!0}),s.resolver){const{errors:l,values:g}=await re();t.errors=l,c=g}else await W(n);if(C(t.errors,"root"),N(t.errors)){m.state.next({errors:{}});try{await r(c,u)}catch(l){y=l}}else i&&await i({...t.errors},u),qe(),setTimeout(qe);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:N(t.errors)&&!y,submitCount:t.submitCount+1,errors:t.errors}),y)throw y},wt=(r,i={})=>{f(n,r)&&(w(i.defaultValue)?q(r,I(f(a,r))):(q(r,i.defaultValue),S(a,r,I(i.defaultValue))),i.keepTouched||C(t.touchedFields,r),i.keepDirty||(C(t.dirtyFields,r),t.isDirty=i.defaultValue?_(r,I(f(a,r))):_()),i.keepError||(C(t.errors,r),F.isValid&&j()),m.state.next({...t}))},$e=(r,i={})=>{const u=r?I(r):a,y=I(u),c=N(r),l=c?a:y;if(i.keepDefaultValues||(a=u),!i.keepValues){if(i.keepDirtyValues){const g=new Set([...h.mount,...Object.keys(ce(a,o))]);for(const v of Array.from(g))f(t.dirtyFields,v)?S(l,v,f(o,v)):q(v,f(l,v))}else{if(Oe&&w(r))for(const g of h.mount){const v=f(n,g);if(v&&v._f){const O=Array.isArray(v._f.refs)?v._f.refs[0]:v._f.ref;if(Fe(O)){const R=O.closest("form");if(R){R.reset();break}}}}n={}}o=s.shouldUnregister?i.keepDefaultValues?I(a):{}:I(l),m.array.next({values:{...l}}),m.values.next({values:{...l}})}h={mount:i.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!F.isValid||!!i.keepIsValid||!!i.keepDirtyValues,d.watch=!!s.shouldUnregister,m.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:c?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!te(r,a)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?{}:i.keepDirtyValues?i.keepDefaultValues&&o?ce(a,o):t.dirtyFields:i.keepDefaultValues&&r?ce(a,r):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ke=(r,i)=>$e(z(r)?r(o):r,i);return{control:{register:Ae,unregister:Se,getFieldState:Be,handleSubmit:He,setError:je,_executeSchema:re,_getWatch:x,_getDirty:_,_updateValid:j,_removeUnmounted:ve,_updateFieldArray:V,_updateDisabledField:We,_getFieldArray:k,_reset:$e,_resetDefaultValues:()=>z(s.defaultValues)&&s.defaultValues().then(r=>{Ke(r,s.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_disableForm:At,_subjects:m,_proxyFormState:F,_setErrors:J,get _fields(){return n},get _formValues(){return o},get _state(){return d},set _state(r){d=r},get _defaultValues(){return a},get _names(){return h},set _names(r){h=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:de,register:Ae,handleSubmit:He,watch:St,setValue:q,getValues:Ne,reset:Ke,resetField:wt,clearErrors:pt,unregister:Se,setError:je,setFocus:(r,i={})=>{const u=f(n,r),y=u&&u._f;if(y){const c=y.refs?y.refs[0]:y.ref;c.focus&&(c.focus(),i.shouldSelect&&z(c.select)&&c.select())}},getFieldState:Be}}function lr(e={}){const s=p.useRef(void 0),t=p.useRef(void 0),[n,a]=p.useState({isDirty:!1,isValidating:!1,isLoading:z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:z(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...Jt(e),formState:n});const o=s.current.control;return o._options=e,Ue({subject:o._subjects.state,next:d=>{yt(d,o._proxyFormState,o._updateFormState,!0)&&a({...o._formState})}}),p.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),p.useEffect(()=>{if(o._proxyFormState.isDirty){const d=o._getDirty();d!==n.isDirty&&o._subjects.state.next({isDirty:d})}},[o,n.isDirty]),p.useEffect(()=>{e.values&&!te(e.values,t.current)?(o._reset(e.values,o._options.resetOptions),t.current=e.values,a(d=>({...d}))):o._resetDefaultValues()},[e.values,o]),p.useEffect(()=>{e.errors&&o._setErrors(e.errors)},[e.errors,o]),p.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),p.useEffect(()=>{e.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[e.shouldUnregister,o]),s.current.formState=ft(n,o),s.current}const Qt=e=>{const{children:s,isAsyncSubmit:t}=e,n=at().form,{isSubmitted:a,isSubmitting:o,isSubmitSuccessful:d,errors:h}=Le(n),b=a&&h&&Object.entries(h).length>0?h:void 0,A=a&&d;return X.jsx(it,{isStarted:o&&t.current,hasFailedWithError:b,hasSucceeded:A,children:s})},xt=e=>{const{children:s,isAsyncSubmit:t}=e;return X.jsx(Qt,{isAsyncSubmit:t,children:s})};xt.__docgenInfo={description:"",methods:[],displayName:"SubmitButtonStateProvider",props:{isAsyncSubmit:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"boolean"}],raw:"MutableRefObject<boolean>"},description:""}},composes:["PropsWithChildren"]};const Xt=()=>{const e=at().form,{isValid:s,isSubmitted:t}=Le(e);return ue.useEffect(()=>{t&&s&&e&&e.reset(void 0,{keepIsSubmitted:!1,keepIsSubmitSuccessful:!1,keepDefaultValues:!0,keepValues:!0,keepDirtyValues:!0,keepIsValid:!0,keepDirty:!0,keepErrors:!0,keepTouched:!0,keepIsValidating:!0,keepSubmitCount:!0})},[t,s,e]),null},Zt=e=>X.jsx("form",{...e});function er(e){const{form:s,children:t,onSubmit:n,formComponent:a=Zt,...o}=e,d=ue.useId(),h=ue.useRef(!1),b=A=>{const{isSubmitting:F,isValidating:m}=s.control._formState;if(A.stopPropagation(),F||m){A.preventDefault();return}s.handleSubmit(T=>{const B=n(T,A);return h.current=B instanceof Promise,B})(A)};return X.jsx(Lt,{...s,children:X.jsx(Rt,{value:{form:s,id:d},children:X.jsxs(xt,{isAsyncSubmit:h,children:[X.jsx(a,{...o,id:d,onSubmit:b,children:t}),X.jsx(Xt,{})]})})})}er.__docgenInfo={description:"",methods:[],displayName:"Form",props:{form:{required:!0,tsType:{name:"UseFormReturn",elements:[{name:"F"}],raw:"UseFormReturn<F>"},description:""},onSubmit:{required:!0,tsType:{name:"Parameters[0]",raw:`Parameters<
  UseFormReturn<F>["handleSubmit"]
>[0]`},description:""},formComponent:{required:!1,tsType:{name:"ComponentType",elements:[{name:"PropsWithChildren",elements:[{name:"signature",type:"object",raw:"{ id: string; onSubmit?: FormEventHandler }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"onSubmit",value:{name:"FormEventHandler",required:!1}}]}}],raw:"PropsWithChildren<{ id: string; onSubmit?: FormEventHandler }>"}],raw:`ComponentType<
  PropsWithChildren<{ id: string; onSubmit?: FormEventHandler }>
>`},description:""}},composes:["Omit","PropsWithChildren"]};export{or as C,er as F,at as a,lr as u};
