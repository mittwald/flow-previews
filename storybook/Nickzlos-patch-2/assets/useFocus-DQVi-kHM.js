import{c as I,a as j,b as W}from"./mergeRefs-78-678FT.js";import{r as $}from"./index-CgfFrydU.js";const v=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},b=e=>e&&"window"in e&&e.window===e?e:v(e).defaultView||window;function z(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function U(e){return z(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let q=!1,G=!1;function Ee(){return q}function k(){return G}function we(e,n){if(!k())return n&&e?e.contains(n):!1;if(!e||!n)return!1;let t=n;for(;t!==null;){if(t===e)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:U(t)?t=t.host:t=t.parentNode}return!1}const L=(e=document)=>{var n;if(!k())return e.activeElement;let t=e.activeElement;for(;t&&"shadowRoot"in t&&(!((n=t.shadowRoot)===null||n===void 0)&&n.activeElement);)t=t.shadowRoot.activeElement;return t};function V(e){return k()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function y(e){if(Y())e.focus({preventScroll:!0});else{let n=J(e);e.focus(),Q(n)}}let h=null;function Y(){if(h==null){h=!1;try{document.createElement("div").focus({get preventScroll(){return h=!0,!0}})}catch{}}return h}function J(e){let n=e.parentNode,t=[],r=document.scrollingElement||document.documentElement;for(;n instanceof HTMLElement&&n!==r;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),n=n.parentNode;return r instanceof HTMLElement&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),t}function Q(e){for(let{element:n,scrollTop:t,scrollLeft:r}of e)n.scrollTop=t,n.scrollLeft=r}function S(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function C(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function l(e){let n=null;return()=>(n==null&&(n=e()),n)}const D=l(function(){return C(/^Mac/i)}),X=l(function(){return C(/^iPhone/i)}),Z=l(function(){return C(/^iPad/i)||D()&&navigator.maxTouchPoints>1}),ee=l(function(){return X()||Z()}),ge=l(function(){return D()||ee()}),he=l(function(){return S(/AppleWebKit/i)&&!te()}),te=l(function(){return S(/Chrome/i)}),B=l(function(){return S(/Android/i)}),Le=l(function(){return S(/Firefox/i)});let m=new Map,P=new Set;function O(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let n=r=>{if(!e(r)||!r.target)return;let o=m.get(r.target);o||(o=new Set,m.set(r.target,o),r.target.addEventListener("transitioncancel",t,{once:!0})),o.add(r.propertyName)},t=r=>{if(!e(r)||!r.target)return;let o=m.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",t),m.delete(r.target)),m.size===0)){for(let i of P)i();P.clear()}};document.body.addEventListener("transitionrun",n),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?O():document.addEventListener("DOMContentLoaded",O));function ne(e){requestAnimationFrame(()=>{m.size===0?e():P.add(e)})}function ye(e,n){I(()=>{if(e&&e.ref&&n)return e.ref.current=n.current,()=>{e.ref&&(e.ref.current=null)}})}function re(e){return e.mozInputSource===0&&e.isTrusted?!0:B()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Te(e){return!B()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}const A=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],oe=A.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";A.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const ae=A.join(':not([hidden]):not([tabindex="-1"]),');function ie(e){return e.matches(oe)}function xe(e){return e.matches(ae)}class ce{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function se(e){let n=$.useRef({isFocused:!1,observer:null});I(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=j(r=>{e==null||e(r)});return $.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,i=c=>{n.current.isFocused=!1,o.disabled&&t(new ce("blur",c)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var c;(c=n.current.observer)===null||c===void 0||c.disconnect();let u=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}let T=!1;function Me(e){for(;e&&!ie(e);)e=e.parentElement;let n=b(e),t=n.document.activeElement;if(!t||t===e)return;T=!0;let r=!1,o=s=>{(s.target===t||r)&&s.stopImmediatePropagation()},i=s=>{(s.target===t||r)&&(s.stopImmediatePropagation(),!e&&!r&&(r=!0,y(t),a()))},c=s=>{(s.target===e||r)&&s.stopImmediatePropagation()},u=s=>{(s.target===e||r)&&(s.stopImmediatePropagation(),r||(r=!0,y(t),a()))};n.addEventListener("blur",o,!0),n.addEventListener("focusout",i,!0),n.addEventListener("focusin",u,!0),n.addEventListener("focus",c,!0);let a=()=>{cancelAnimationFrame(g),n.removeEventListener("blur",o,!0),n.removeEventListener("focusout",i,!0),n.removeEventListener("focusin",u,!0),n.removeEventListener("focus",c,!0),T=!1,r=!1},g=requestAnimationFrame(a);return a}let f=null,w=new Set,E=new Map,p=!1,H=!1;const de={Tab:!0,Escape:!0};function F(e,n){for(let t of w)t(e,n)}function ue(e){return!(e.metaKey||!D()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function x(e){p=!0,ue(e)&&(f="keyboard",F("keyboard",e))}function d(e){f="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(p=!0,F("pointer",e))}function N(e){re(e)&&(p=!0,f="virtual")}function _(e){e.target===window||e.target===document||T||!e.isTrusted||(!p&&!H&&(f="virtual",F("virtual",e)),p=!1,H=!1)}function K(){T||(p=!1,H=!0)}function M(e){if(typeof window>"u"||E.get(b(e)))return;const n=b(e),t=v(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){p=!0,r.apply(this,arguments)},t.addEventListener("keydown",x,!0),t.addEventListener("keyup",x,!0),t.addEventListener("click",N,!0),n.addEventListener("focus",_,!0),n.addEventListener("blur",K,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",d,!0),t.addEventListener("pointermove",d,!0),t.addEventListener("pointerup",d,!0)):(t.addEventListener("mousedown",d,!0),t.addEventListener("mousemove",d,!0),t.addEventListener("mouseup",d,!0)),n.addEventListener("beforeunload",()=>{R(e)},{once:!0}),E.set(n,{focus:r})}const R=(e,n)=>{const t=b(e),r=v(e);n&&r.removeEventListener("DOMContentLoaded",n),E.has(t)&&(t.HTMLElement.prototype.focus=E.get(t).focus,r.removeEventListener("keydown",x,!0),r.removeEventListener("keyup",x,!0),r.removeEventListener("click",N,!0),t.removeEventListener("focus",_,!0),t.removeEventListener("blur",K,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",d,!0),r.removeEventListener("pointermove",d,!0),r.removeEventListener("pointerup",d,!0)):(r.removeEventListener("mousedown",d,!0),r.removeEventListener("mousemove",d,!0),r.removeEventListener("mouseup",d,!0)),E.delete(t))};function fe(e){const n=v(e);let t;return n.readyState!=="loading"?M(e):(t=()=>{M(e)},n.addEventListener("DOMContentLoaded",t)),()=>R(e,t)}typeof document<"u"&&fe();function le(){return f!=="pointer"}function be(){return f}function Se(e){f=e,F(e,null)}function Fe(){M();let[e,n]=$.useState(f);return $.useEffect(()=>{let t=()=>{n(f)};return w.add(t),()=>{w.delete(t)}},[]),W()?null:e}const $e=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function pe(e,n,t){let r=v(t==null?void 0:t.target);const o=typeof window<"u"?b(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?b(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,c=typeof window<"u"?b(t==null?void 0:t.target).HTMLElement:HTMLElement,u=typeof window<"u"?b(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!$e.has(r.activeElement.type)||r.activeElement instanceof i||r.activeElement instanceof c&&r.activeElement.isContentEditable,!(e&&n==="keyboard"&&t instanceof u&&!de[t.key])}function Pe(e,n,t){M(),$.useEffect(()=>{let r=(o,i)=>{pe(!!(t!=null&&t.isTextInput),o,i)&&e(le())};return w.add(r),()=>{w.delete(r)}},n)}function He(e){const n=v(e),t=L(n);if(be()==="virtual"){let r=t;ne(()=>{L(n)===r&&e.isConnected&&y(e)})}else y(e)}function ke(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const i=$.useCallback(a=>{if(a.target===a.currentTarget)return r&&r(a),o&&o(!1),!0},[r,o]),c=se(i),u=$.useCallback(a=>{const g=v(a.target),s=g?L(g):L();a.target===a.currentTarget&&s===V(a.nativeEvent)&&(t&&t(a),o&&o(!0),c(a))},[o,t,c]);return{focusProps:{onFocus:!n&&(t||o||r)?u:void 0,onBlur:!n&&(r||o)?i:void 0}}}export{b as $,Me as A,re as B,ge as C,X as D,Fe as E,Ee as F,Se as a,ke as b,He as c,ye as d,k as e,we as f,L as g,v as h,V as i,B as j,te as k,xe as l,ie as m,be as n,se as o,ce as p,le as q,Pe as r,D as s,he as t,y as u,Le as v,Z as w,ee as x,ne as y,Te as z};
