import{R as i,r as n}from"./index-Cs7sjTYM.js";import{c as N}from"./clsx-B-dksMZM.js";import{a as H,b as I,c as B,$ as _}from"./OverlayArrow-ZcRxrH45.js";import{f as k,$ as F,h as W,i as A,a as U}from"./utils-Bcr9fq-m.js";import{$ as K,a as V}from"./useFocusable-B6dIjavV.js";import{$ as z,b as h,a as Y,d as j}from"./index-C8LjR2Bd.js";import{a as R,l as q,k as G}from"./useFocusRing-CRCkdtud.js";import{$ as J}from"./filterDOMProps-CeZl_uWj.js";import{f as Q}from"./index-Cf-03bMR.js";const T=i.createContext(null);function X(e){let{children:t}=e,r=n.useContext(T),[l,c]=n.useState(0),s=n.useMemo(()=>({parent:r,modalCount:l,addModal(){c(o=>o+1),r&&r.addModal()},removeModal(){c(o=>o-1),r&&r.removeModal()}}),[r,l]);return i.createElement(T.Provider,{value:s},t)}function Z(){let e=n.useContext(T);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:null}}}function ee(e){let{modalProviderProps:t}=Z();return i.createElement("div",{"data-overlay-container":!0,...e,...t})}function te(e){return i.createElement(X,null,i.createElement(ee,e))}function re(e){let t=z(),{portalContainer:r=t?null:document.body,...l}=e;if(i.useEffect(()=>{if(r!=null&&r.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[r]),!r)return null;let c=i.createElement(te,l);return Q.createPortal(c,r)}function oe(e,t){let r=J(e,{labelable:!0}),{hoverProps:l}=R({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:h(r,l,{role:"tooltip"})}}function le(e,t,r){let{isDisabled:l,trigger:c}=e,s=Y(),o=n.useRef(!1),a=n.useRef(!1),u=()=>{(o.current||a.current)&&t.open(a.current)},f=g=>{!o.current&&!a.current&&t.close(g)};n.useEffect(()=>{let g=O=>{r&&r.current&&O.key==="Escape"&&(O.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",g,!0),()=>{document.removeEventListener("keydown",g,!0)}},[r,t]);let m=()=>{c!=="focus"&&(q()==="pointer"?o.current=!0:o.current=!1,u())},v=()=>{c!=="focus"&&(a.current=!1,o.current=!1,f())},x=()=>{a.current=!1,o.current=!1,f(!0)},P=()=>{G()&&(a.current=!0,u())},d=()=>{a.current=!1,o.current=!1,f(!0)},{hoverProps:M}=R({isDisabled:l,onHoverStart:m,onHoverEnd:v}),{focusableProps:L}=K({isDisabled:l,onFocus:P,onBlur:d},r);return{triggerProps:{"aria-describedby":t.isOpen?s:void 0,...h(L,M,{onPointerDown:x,onKeyDown:x})},tooltipProps:{id:s}}}const ae=1500,y=500;let p={},ne=0,E=!1,$=null,b=null;function S(e={}){let{delay:t=ae,closeDelay:r=y}=e,{isOpen:l,open:c,close:s}=H(e),o=n.useMemo(()=>`${++ne}`,[]),a=n.useRef(void 0),u=n.useRef(s),f=()=>{p[o]=x},m=()=>{for(let d in p)d!==o&&(p[d](!0),delete p[d])},v=()=>{clearTimeout(a.current),a.current=null,m(),f(),E=!0,c(),$&&(clearTimeout($),$=null),b&&(clearTimeout(b),b=null)},x=d=>{d||r<=0?(clearTimeout(a.current),a.current=null,u.current()):a.current||(a.current=setTimeout(()=>{a.current=null,u.current()},r)),$&&(clearTimeout($),$=null),E&&(b&&clearTimeout(b),b=setTimeout(()=>{delete p[o],b=null,E=!1},Math.max(y,r)))},P=()=>{m(),f(),!l&&!$&&!E?$=setTimeout(()=>{$=null,E=!0,v()},t):l||v()};return n.useEffect(()=>{u.current=s},[s]),n.useEffect(()=>()=>{clearTimeout(a.current),p[o]&&delete p[o]},[o]),{isOpen:l,open:d=>{!d&&t>0&&!a.current?P():v()},close:x}}const w=n.createContext(null),D=n.createContext(null);function ie(e){let t=S(e),r=n.useRef(null),{triggerProps:l,tooltipProps:c}=le(e,t,r);return i.createElement(k,{values:[[w,t],[D,{...c,triggerRef:r}]]},i.createElement(V,{...l,ref:r},e.children))}function ce({UNSTABLE_portalContainer:e,...t},r){[t,r]=F(t,r,D);let l=n.useContext(w),c=S(t),s=t.isOpen!=null||t.defaultOpen!=null||!l?c:l,o=W(r,s.isOpen)||t.isExiting||!1;return!s.isOpen&&!o?null:i.createElement(re,{portalContainer:e},i.createElement(fe,{...t,tooltipRef:r,isExiting:o}))}const se=n.forwardRef(ce);function fe(e){let t=n.useContext(w),r=n.useRef(null),[l,c]=n.useState(0);j(()=>{r.current&&t.isOpen&&c(r.current.getBoundingClientRect().width)},[t.isOpen,r]);let{overlayProps:s,arrowProps:o,placement:a}=I({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,offset:e.offset,crossOffset:e.crossOffset,isOpen:t.isOpen,arrowSize:l,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip}),u=A(e.tooltipRef,!!a)||e.isEntering||!1,f=U({...e,defaultClassName:"react-aria-Tooltip",values:{placement:a,isEntering:u,isExiting:e.isExiting,state:t}});e=h(e,s);let{tooltipProps:m}=oe(e,t);return i.createElement("div",{...m,ref:e.tooltipRef,...f,style:{...s.style,...f.style},"data-placement":a,"data-entering":u||void 0,"data-exiting":e.isExiting||void 0},i.createElement(B.Provider,{value:{...o,placement:a,ref:r}},f.children))}const de="flow--tooltip",ue="flow--tooltip--arrow",$e="flow--tooltip--slide",C={tooltip:de,arrow:ue,slide:$e},pe=e=>{const{children:t,className:r,...l}=e,c=N(C.tooltip,r);return i.createElement(se,{...l,className:c},i.createElement(_,{className:C.arrow},i.createElement("svg",{viewBox:"0 0 8 8"},i.createElement("path",{d:"M0 0 L4 4 L8 0"}))),t)};pe.__docgenInfo={description:"",methods:[],displayName:"Tooltip"};const be=e=>{const{children:t,...r}=e;return i.createElement(ie,{...r},t)};be.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger"};export{pe as T,be as a};
