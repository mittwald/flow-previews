import{r as l,R as r}from"./index-uCp2LrAq.js";import{c as M}from"./clsx-B-dksMZM.js";import{u as E,O as h,A as T}from"./Action-Deik0Gku.js";import{a as I,g as y,i as p,j as O,b as C,f as L,h as _}from"./utils-DZgOXw50.js";import{b as z,c as A,d as B,e as F,f as u,g as U,h as q,i as K}from"./Dialog-C_GihYWd.js";import{$ as w,b as x}from"./index-CFQDndEx.js";import{$ as R}from"./filterDOMProps-CeZl_uWj.js";import{a as V}from"./OverlayArrow-B5rNo2Ho.js";import{P as W}from"./flowComponent-Dzs9U9nI.js";let f=typeof document<"u"&&window.visualViewport;function j(){let t=w(),[e,i]=l.useState(()=>t?{width:0,height:0}:v());return l.useEffect(()=>{let a=()=>{i(n=>{let s=v();return s.width===n.width&&s.height===n.height?n:s})};return f?f.addEventListener("resize",a):window.addEventListener("resize",a),()=>{f?f.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function v(){return{width:f&&(f==null?void 0:f.width)||window.innerWidth,height:f&&(f==null?void 0:f.height)||window.innerHeight}}function H(t,e,i){let{overlayProps:a,underlayProps:n}=z({...t,isOpen:e.isOpen,onClose:e.close},i);return A({isDisabled:!e.isOpen}),B(),l.useEffect(()=>{if(e.isOpen)return F([i.current])},[e.isOpen,i]),{modalProps:x(a),underlayProps:n}}const k=l.createContext(null),b=l.createContext(null);function G(t,e){if(l.useContext(b))return r.createElement(g,{...t,modalRef:e},t.children);let{isDismissable:a,isKeyboardDismissDisabled:n,isOpen:s,defaultOpen:o,onOpenChange:d,children:$,isEntering:c,isExiting:m,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:S,...N}=t;return r.createElement(P,{isDismissable:a,isKeyboardDismissDisabled:n,isOpen:s,defaultOpen:o,onOpenChange:d,isEntering:c,isExiting:m,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:S},r.createElement(g,{...N,modalRef:e},$))}const J=l.forwardRef(G);function Q(t,e){[t,e]=I(t,e,k);let i=l.useContext(u),a=V(t),n=t.isOpen!=null||t.defaultOpen!=null||!i?a:i,s=y(e),o=l.useRef(null),d=p(s,n.isOpen),$=p(o,n.isOpen),c=d||$||t.isExiting||!1,m=w();return!n.isOpen&&!c||m?null:r.createElement(X,{...t,state:n,isExiting:c,overlayRef:s,modalRef:o})}const P=l.forwardRef(Q);function X({UNSTABLE_portalContainer:t,...e}){let i=e.modalRef,{state:a}=e,{modalProps:n,underlayProps:s}=H(e,a,i),o=O(e.overlayRef)||e.isEntering||!1,d=C({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:o,isExiting:e.isExiting,state:a}}),$=j(),c={...d.style,"--visual-viewport-height":$.height+"px"};return r.createElement(U,{isExiting:e.isExiting,portalContainer:t},r.createElement("div",{...x(R(e),s),...d,style:c,ref:e.overlayRef,"data-entering":o||void 0,"data-exiting":e.isExiting||void 0},r.createElement(L,{values:[[b,{modalProps:n,modalRef:i,isExiting:e.isExiting,isDismissable:e.isDismissable}],[u,a]]},d.children)))}function g(t){let{modalProps:e,modalRef:i,isExiting:a,isDismissable:n}=l.useContext(b),s=l.useContext(u),o=l.useMemo(()=>_(t.modalRef,i),[t.modalRef,i]),d=y(o),$=O(d),c=C({...t,defaultClassName:"react-aria-Modal",values:{isEntering:$,isExiting:a,state:s}});return r.createElement("div",{...x(R(t),e),...c,ref:d,"data-entering":$||void 0,"data-exiting":a||void 0},n&&r.createElement(q,{onDismiss:s.close}),c.children)}const Y="flow--overlay",Z={overlay:Y,"overlay-fade":"flow--overlay--overlay-fade"},ee=t=>{const{controller:e,children:i,isDismissable:a=!0,className:n}=t,s=E({reuseControllerFromContext:!0}),o=e??s,d=o.useIsOpen(),$=M(Z.overlay,n);return r.createElement(P,{className:$,isDismissable:a,isOpen:d,onOpenChange:c=>o.setOpen(c)},r.createElement(J,null,r.createElement(K,null,r.createElement(h,{value:o},i))))};ee.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const te=t=>{const e=E(),i={Button:{render:(a,n)=>r.createElement(T,{openOverlay:e},r.createElement(a,{...n}))}};return r.createElement(h,{value:e},r.createElement(W,{props:i},t.children))};te.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger"};export{te as O,ee as a};
