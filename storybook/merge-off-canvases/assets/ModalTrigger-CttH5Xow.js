import{r as c,R as a}from"./index-uCp2LrAq.js";import{c as y}from"./clsx-B-dksMZM.js";import{P as T}from"./PropsContextProvider-RdMO5ekw.js";import{f as I,M as _,P as p}from"./flowComponent-VNMV0_Nr.js";import{d as L,e as A,f as B,g as q,h as b,i as F,j,u as G,b as H,O as U,c as V,$ as K}from"./OverlayTrigger-B_V56TaE.js";import{a as W,g as O,i as v,j as C,b as w,f as k,h as J}from"./utils-DZgOXw50.js";import{$ as R,b as g}from"./index-CFQDndEx.js";import{$ as P}from"./filterDOMProps-CeZl_uWj.js";import{a as Q}from"./OverlayArrow-BCqBDIej.js";import{H as X}from"./Header-B6kwU2iU.js";import{A as Y}from"./Action-Bw5N3irA.js";import{B as Z}from"./Button-DIiR5Jtq.js";import"./IconApp-wkSNGWZu.js";import{j as ee}from"./IconWarning-BTA_RZAe.js";let m=typeof document<"u"&&window.visualViewport;function te(){let t=R(),[e,o]=c.useState(()=>t?{width:0,height:0}:E());return c.useEffect(()=>{let n=()=>{o(l=>{let r=E();return r.width===l.width&&r.height===l.height?l:r})};return m?m.addEventListener("resize",n):window.addEventListener("resize",n),()=>{m?m.removeEventListener("resize",n):window.removeEventListener("resize",n)}},[]),e}function E(){return{width:m&&(m==null?void 0:m.width)||window.innerWidth,height:m&&(m==null?void 0:m.height)||window.innerHeight}}function ae(t,e,o){let{overlayProps:n,underlayProps:l}=L({...t,isOpen:e.isOpen,onClose:e.close},o);return A({isDisabled:!e.isOpen}),B(),c.useEffect(()=>{if(e.isOpen)return q([o.current])},[e.isOpen,o]),{modalProps:g(n),underlayProps:l}}const oe=c.createContext(null),x=c.createContext(null);function ne(t,e){if(c.useContext(x))return a.createElement(h,{...t,modalRef:e},t.children);let{isDismissable:n,isKeyboardDismissDisabled:l,isOpen:r,defaultOpen:i,onOpenChange:s,children:f,isEntering:d,isExiting:$,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:z,...S}=t;return a.createElement(M,{isDismissable:n,isKeyboardDismissDisabled:l,isOpen:r,defaultOpen:i,onOpenChange:s,isEntering:d,isExiting:$,UNSTABLE_portalContainer:D,shouldCloseOnInteractOutside:z},a.createElement(h,{...S,modalRef:e},f))}const le=c.forwardRef(ne);function re(t,e){[t,e]=W(t,e,oe);let o=c.useContext(b),n=Q(t),l=t.isOpen!=null||t.defaultOpen!=null||!o?n:o,r=O(e),i=c.useRef(null),s=v(r,l.isOpen),f=v(i,l.isOpen),d=s||f||t.isExiting||!1,$=R();return!l.isOpen&&!d||$?null:a.createElement(ie,{...t,state:l,isExiting:d,overlayRef:r,modalRef:i})}const M=c.forwardRef(re);function ie({UNSTABLE_portalContainer:t,...e}){let o=e.modalRef,{state:n}=e,{modalProps:l,underlayProps:r}=ae(e,n,o),i=C(e.overlayRef)||e.isEntering||!1,s=w({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:i,isExiting:e.isExiting,state:n}}),f=te(),d={...s.style,"--visual-viewport-height":f.height+"px"};return a.createElement(F,{isExiting:e.isExiting,portalContainer:t},a.createElement("div",{...g(P(e),r),...s,style:d,ref:e.overlayRef,"data-entering":i||void 0,"data-exiting":e.isExiting||void 0},a.createElement(k,{values:[[x,{modalProps:l,modalRef:o,isExiting:e.isExiting,isDismissable:e.isDismissable}],[b,n]]},s.children)))}function h(t){let{modalProps:e,modalRef:o,isExiting:n,isDismissable:l}=c.useContext(x),r=c.useContext(b),i=c.useMemo(()=>J(t.modalRef,o),[t.modalRef,o]),s=O(i),f=C(s),d=w({...t,defaultClassName:"react-aria-Modal",values:{isEntering:f,isExiting:n,state:r}});return a.createElement("div",{...g(P(t),e),...d,ref:s,"data-entering":f||void 0,"data-exiting":n||void 0},l&&a.createElement(j,{onDismiss:r.close}),d.children)}const se="flow--modal",de="flow--modal--action-group",ce="flow--modal--content",fe="flow--modal--off-canvas",me="flow--modal--header",u={modal:se,"modal-zoom":"flow--modal--modal-zoom",actionGroup:de,content:ce,"size-s":"flow--modal--size-s","size-m":"flow--modal--size-m","size-l":"flow--modal--size-l",offCanvas:fe,"modal-slide-in":"flow--modal--modal-slide-in",header:me,"modal-slide-up":"flow--modal--modal-slide-up"},ue="flow--modal-overlay--overlay",$e={overlay:ue,"overlay-fade":"flow--modal-overlay--overlay-fade"},N=t=>{const{controller:e,children:o,isDismissable:n=!0,className:l}=t,r=G("Modal",{reuseControllerFromContext:!0}),i=e??r,s=i.useIsOpen(),f=y($e.overlay,l);return a.createElement(M,{className:f,isDismissable:n,isOpen:s,onOpenChange:d=>i.setOpen(d)},a.createElement(le,null,a.createElement(H,null,a.createElement(U,{type:"Modal",controller:i},o))))};N.__docgenInfo={description:"",methods:[],displayName:"ModalOverlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const pe=I("Modal",t=>{const{size:e="s",offCanvas:o,controller:n,children:l,refProp:r,className:i,...s}=t,f=y(u.modal,u[`size-${e}`],o&&u.offCanvas,i),d={Content:{elementType:a.Fragment},Heading:{level:2,levelVisual:4,slot:"title",tunnelId:"heading"},ActionGroup:{className:u.actionGroup,tunnelId:"buttons"}};return a.createElement(N,{className:f,controller:n,...s},a.createElement(T,{props:d},a.createElement(_,null,o&&a.createElement(X,{className:u.header},a.createElement(p,{id:"heading"}),a.createElement(Y,{closeOverlay:"Modal"},a.createElement(Z,{variant:"plain",color:"secondary",className:u.closeButton},a.createElement(ee,null)))),a.createElement("div",{className:u.content},!o&&a.createElement(p,{id:"heading"}),l),a.createElement(p,{id:"buttons"}))))});pe.__docgenInfo={description:"",methods:[],displayName:"Modal"};const be=t=>{const{children:e,...o}=t;return a.createElement(V,{overlayType:"Modal",...o,component:K},e)};be.__docgenInfo={description:"",methods:[],displayName:"ModalTrigger",props:{isDefaultOpen:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};export{pe as M,be as a};
