import{r as a,R as u}from"./index-CgfFrydU.js";import{a as D}from"./Hidden-DwT0szmK.js";import{r as E}from"./index-Brqd7pHr.js";import{a as S}from"./useFocusable-B6XldfNl.js";import{c as I,b as K,s as R}from"./mergeRefs-CQveTfyF.js";class x{get childNodes(){throw new Error("childNodes is not supported")}clone(){let e=new x(this.type,this.key);return e.value=this.value,e.level=this.level,e.hasChildNodes=this.hasChildNodes,e.rendered=this.rendered,e.textValue=this.textValue,e["aria-label"]=this["aria-label"],e.index=this.index,e.parentKey=this.parentKey,e.prevKey=this.prevKey,e.nextKey=this.nextKey,e.firstChildKey=this.firstChildKey,e.lastChildKey=this.lastChildKey,e.props=this.props,e.render=this.render,e.colSpan=this.colSpan,e.colIndex=this.colIndex,e}constructor(e,t){this.value=null,this.level=0,this.hasChildNodes=!1,this.rendered=null,this.textValue="",this["aria-label"]=void 0,this.index=0,this.parentKey=null,this.prevKey=null,this.nextKey=null,this.firstChildKey=null,this.lastChildKey=null,this.props={},this.colSpan=null,this.colIndex=null,this.type=e,this.key=t}}class b{get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}*[Symbol.iterator](){let e=this.firstKey!=null?this.keyMap.get(this.firstKey):void 0;for(;e;)yield e,e=e.nextKey!=null?this.keyMap.get(e.nextKey):void 0}getChildren(e){let t=this.keyMap;return{*[Symbol.iterator](){let l=t.get(e),n=(l==null?void 0:l.firstChildKey)!=null?t.get(l.firstChildKey):null;for(;n;)yield n,n=n.nextKey!=null?t.get(n.nextKey):void 0}}}getKeyBefore(e){let t=this.keyMap.get(e);if(!t)return null;if(t.prevKey!=null){for(t=this.keyMap.get(t.prevKey);t&&t.type!=="item"&&t.lastChildKey!=null;)t=this.keyMap.get(t.lastChildKey);var l;return(l=t==null?void 0:t.key)!==null&&l!==void 0?l:null}return t.parentKey}getKeyAfter(e){let t=this.keyMap.get(e);if(!t)return null;if(t.type!=="item"&&t.firstChildKey!=null)return t.firstChildKey;for(;t;){if(t.nextKey!=null)return t.nextKey;if(t.parentKey!=null)t=this.keyMap.get(t.parentKey);else return null}return null}getFirstKey(){return this.firstKey}getLastKey(){let e=this.lastKey!=null?this.keyMap.get(this.lastKey):null;for(;(e==null?void 0:e.lastChildKey)!=null;)e=this.keyMap.get(e.lastChildKey);var t;return(t=e==null?void 0:e.key)!==null&&t!==void 0?t:null}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(){throw new Error("Not implemented")}clone(){let e=this.constructor,t=new e;return t.keyMap=new Map(this.keyMap),t.firstKey=this.firstKey,t.lastKey=this.lastKey,t}addNode(e){if(this.frozen)throw new Error("Cannot add a node to a frozen collection");this.keyMap.set(e.key,e)}removeNode(e){if(this.frozen)throw new Error("Cannot remove a node to a frozen collection");this.keyMap.delete(e)}commit(e,t,l=!1){if(this.frozen)throw new Error("Cannot commit a frozen collection");this.firstKey=e,this.lastKey=t,this.frozen=!l}UNSTABLE_filter(e){let t=new b,l=null;for(let n of this)if(n.type==="section"&&n.hasChildNodes){let i=n.clone(),o=null;for(let d of this.getChildren(n.key))if(m(d,e,this,t)){let r=d.clone();o==null&&(i.firstChildKey=r.key),t.firstKey==null&&(t.firstKey=i.key),o&&o.parentKey===r.parentKey?(o.nextKey=r.key,r.prevKey=o.key):r.prevKey=null,r.nextKey=null,t.addNode(r),o=r}o&&(o.type!=="header"?(i.lastChildKey=o.key,l==null?i.prevKey=null:(l.type==="section"||l.type==="separator")&&(l.nextKey=i.key,i.prevKey=l.key),i.nextKey=null,l=i,t.addNode(i)):(t.firstKey===i.key&&(t.firstKey=null),t.removeNode(o.key)))}else if(n.type==="separator"){let i=n.clone();i.nextKey=null,(l==null?void 0:l.type)==="section"&&(l.nextKey=i.key,i.prevKey=l.key,l=i,t.addNode(i))}else{let i=n.clone();m(i,e,this,t)&&(t.firstKey==null&&(t.firstKey=i.key),l!=null&&l.type!=="section"&&l.type!=="separator"&&l.parentKey===i.parentKey?(l.nextKey=i.key,i.prevKey=l.key):i.prevKey=null,i.nextKey=null,t.addNode(i),l=i)}if((l==null?void 0:l.type)==="separator"&&l.nextKey===null){let n;l.prevKey!=null&&(n=t.getItem(l.prevKey),n.nextKey=null),t.removeNode(l.key),l=n}return t.lastKey=(l==null?void 0:l.key)||null,t}constructor(){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.frozen=!1}}function m(s,e,t,l){if(s.type==="subdialogtrigger"||s.type==="submenutrigger"){let n=[...t.getChildren(s.key)][0];if(n&&e(n.textValue)){let i=n.clone();return l.addNode(i),!0}else return!1}else return s.type==="header"?!0:e(s.textValue)}class k{*[Symbol.iterator](){let e=this.firstChild;for(;e;)yield e,e=e.nextSibling}get firstChild(){return this._firstChild}set firstChild(e){this._firstChild=e,this.ownerDocument.markDirty(this)}get lastChild(){return this._lastChild}set lastChild(e){this._lastChild=e,this.ownerDocument.markDirty(this)}get previousSibling(){return this._previousSibling}set previousSibling(e){this._previousSibling=e,this.ownerDocument.markDirty(this)}get nextSibling(){return this._nextSibling}set nextSibling(e){this._nextSibling=e,this.ownerDocument.markDirty(this)}get parentNode(){return this._parentNode}set parentNode(e){this._parentNode=e,this.ownerDocument.markDirty(this)}get isConnected(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.isConnected)||!1}invalidateChildIndices(e){(this._minInvalidChildIndex==null||e.index<this._minInvalidChildIndex.index)&&(this._minInvalidChildIndex=e)}updateChildIndices(){let e=this._minInvalidChildIndex;for(;e;)e.index=e.previousSibling?e.previousSibling.index+1:0,e=e.nextSibling;this._minInvalidChildIndex=null}appendChild(e){e.parentNode&&e.parentNode.removeChild(e),this.firstChild==null&&(this.firstChild=e),this.lastChild?(this.lastChild.nextSibling=e,e.index=this.lastChild.index+1,e.previousSibling=this.lastChild):(e.previousSibling=null,e.index=0),e.parentNode=this,e.nextSibling=null,this.lastChild=e,this.ownerDocument.markDirty(this),this.ownerDocument.queueUpdate()}insertBefore(e,t){if(t==null)return this.appendChild(e);e.parentNode&&e.parentNode.removeChild(e),e.nextSibling=t,e.previousSibling=t.previousSibling,e.index=t.index,this.firstChild===t?this.firstChild=e:t.previousSibling&&(t.previousSibling.nextSibling=e),t.previousSibling=e,e.parentNode=t.parentNode,this.invalidateChildIndices(t),this.ownerDocument.queueUpdate()}removeChild(e){e.parentNode!==this||!this.ownerDocument.isMounted||(e.nextSibling&&(this.invalidateChildIndices(e.nextSibling),e.nextSibling.previousSibling=e.previousSibling),e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),this.firstChild===e&&(this.firstChild=e.nextSibling),this.lastChild===e&&(this.lastChild=e.previousSibling),e.parentNode=null,e.nextSibling=null,e.previousSibling=null,e.index=0,this.ownerDocument.markDirty(e),this.ownerDocument.queueUpdate())}addEventListener(){}removeEventListener(){}get previousVisibleSibling(){let e=this.previousSibling;for(;e&&e.isHidden;)e=e.previousSibling;return e}get nextVisibleSibling(){let e=this.nextSibling;for(;e&&e.isHidden;)e=e.nextSibling;return e}get firstVisibleChild(){let e=this.firstChild;for(;e&&e.isHidden;)e=e.nextSibling;return e}get lastVisibleChild(){let e=this.lastChild;for(;e&&e.isHidden;)e=e.previousSibling;return e}constructor(e){this._firstChild=null,this._lastChild=null,this._previousSibling=null,this._nextSibling=null,this._parentNode=null,this._minInvalidChildIndex=null,this.ownerDocument=e}}class y extends k{get index(){return this._index}set index(e){this._index=e,this.ownerDocument.markDirty(this)}get level(){return this.parentNode instanceof y?this.parentNode.level+(this.node.type==="item"?1:0):0}getMutableNode(){return this.isMutated||(this.node=this.node.clone(),this.isMutated=!0),this.ownerDocument.markDirty(this),this.node}updateNode(){var e,t,l;let n=this.nextVisibleSibling,i=this.getMutableNode();i.index=this.index,i.level=this.level,i.parentKey=this.parentNode instanceof y?this.parentNode.node.key:null;var o;i.prevKey=(o=(e=this.previousVisibleSibling)===null||e===void 0?void 0:e.node.key)!==null&&o!==void 0?o:null;var d;i.nextKey=(d=n==null?void 0:n.node.key)!==null&&d!==void 0?d:null,i.hasChildNodes=!!this.firstChild;var r;i.firstChildKey=(r=(t=this.firstVisibleChild)===null||t===void 0?void 0:t.node.key)!==null&&r!==void 0?r:null;var h;if(i.lastChildKey=(h=(l=this.lastVisibleChild)===null||l===void 0?void 0:l.node.key)!==null&&h!==void 0?h:null,(i.colSpan!=null||i.colIndex!=null)&&n){var f,c;let p=((f=i.colIndex)!==null&&f!==void 0?f:i.index)+((c=i.colSpan)!==null&&c!==void 0?c:1);if(p!==n.node.colIndex){let M=n.getMutableNode();M.colIndex=p}}}setProps(e,t,l,n){let i=this.getMutableNode(),{value:o,textValue:d,id:r,...h}=e;if(h.ref=t,i.props=h,i.rendered=l,i.render=n,i.value=o,i.textValue=d||(typeof h.children=="string"?h.children:"")||e["aria-label"]||"",r!=null&&r!==i.key){if(this.hasSetProps)throw new Error("Cannot change the id of an item");i.key=r}h.colSpan!=null&&(i.colSpan=h.colSpan),this.hasSetProps=!0,this.ownerDocument.queueUpdate()}get style(){let e=this;return{get display(){return e.isHidden?"none":""},set display(t){let l=t==="none";if(e.isHidden!==l){var n,i;(((n=e.parentNode)===null||n===void 0?void 0:n.firstVisibleChild)===e||((i=e.parentNode)===null||i===void 0?void 0:i.lastVisibleChild)===e)&&e.ownerDocument.markDirty(e.parentNode);let o=e.previousVisibleSibling,d=e.nextVisibleSibling;o&&e.ownerDocument.markDirty(o),d&&e.ownerDocument.markDirty(d),e.isHidden=l,e.ownerDocument.markDirty(e)}}}}hasAttribute(){}setAttribute(){}setAttributeNS(){}removeAttribute(){}constructor(e,t){super(t),this.nodeType=8,this.isMutated=!0,this._index=0,this.hasSetProps=!1,this.isHidden=!1,this.node=new x(e,`react-aria-${++t.nodeId}`)}}class V extends k{get isConnected(){return this.isMounted}createElement(e){return new y(e,this)}getMutableCollection(){return this.nextCollection||(this.nextCollection=this.collection.clone()),this.nextCollection}markDirty(e){this.dirtyNodes.add(e)}addNode(e){if(e.isHidden)return;let t=this.getMutableCollection();if(!t.getItem(e.node.key))for(let l of e)this.addNode(l);t.addNode(e.node)}removeNode(e){for(let l of e)this.removeNode(l);this.getMutableCollection().removeNode(e.node.key)}getCollection(){return this.inSubscription?this.collection.clone():(this.queuedRender=!1,this.updateCollection(),this.collection)}updateCollection(){for(let i of this.dirtyNodes)i instanceof y&&(!i.isConnected||i.isHidden)?this.removeNode(i):i.updateChildIndices();for(let i of this.dirtyNodes)i instanceof y&&(i.isConnected&&!i.isHidden&&(i.updateNode(),this.addNode(i)),i.isMutated=!1);if(this.dirtyNodes.clear(),this.nextCollection){var e,t,l,n;this.nextCollection.commit((l=(e=this.firstVisibleChild)===null||e===void 0?void 0:e.node.key)!==null&&l!==void 0?l:null,(n=(t=this.lastVisibleChild)===null||t===void 0?void 0:t.node.key)!==null&&n!==void 0?n:null,this.isSSR),this.isSSR||(this.collection=this.nextCollection,this.nextCollection=null)}}queueUpdate(){if(!(this.dirtyNodes.size===0||this.queuedRender)){this.queuedRender=!0,this.inSubscription=!0;for(let e of this.subscriptions)e();this.inSubscription=!1}}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}resetAfterSSR(){this.isSSR&&(this.isSSR=!1,this.firstChild=null,this.lastChild=null,this.nodeId=0)}constructor(e){super(null),this.nodeType=11,this.ownerDocument=this,this.dirtyNodes=new Set,this.isSSR=!1,this.nodeId=0,this.nodesByProps=new WeakMap,this.isMounted=!0,this.nextCollection=null,this.subscriptions=new Set,this.queuedRender=!1,this.inSubscription=!1,this.collection=e,this.nextCollection=e}}function P(s){let{children:e,items:t,idScope:l,addIdAndValue:n,dependencies:i=[]}=s,o=a.useMemo(()=>new WeakMap,i);return a.useMemo(()=>{if(t&&typeof e=="function"){let h=[];for(let f of t){let c=o.get(f);if(!c){c=e(f);var d,r;let p=(r=(d=c.props.id)!==null&&d!==void 0?d:f.key)!==null&&r!==void 0?r:f.id;if(p==null)throw new Error("Could not determine key for item");l&&(p=l+":"+p),c=a.cloneElement(c,n?{key:p,id:p,value:f}:{key:p}),o.set(f,c)}h.push(c)}return h}else if(typeof e!="function")return e},[e,t,o,l,n])}const $=a.createContext(!1),v=a.createContext(null);function G(s){if(a.useContext(v))return s.content;let{collection:t,document:l}=q(s.createCollection);return u.createElement(u.Fragment,null,u.createElement(D,null,u.createElement(v.Provider,{value:l},s.content)),u.createElement(H,{render:s.children,collection:t}))}function H({collection:s,render:e}){return e(s)}function z(s,e,t){let l=K(),n=a.useRef(l);n.current=l;let i=a.useCallback(()=>n.current?t():e(),[e,t]);return R.useSyncExternalStore(s,i)}const A=typeof u.useSyncExternalStore=="function"?u.useSyncExternalStore:z;function q(s){let[e]=a.useState(()=>new V((s==null?void 0:s())||new b)),t=a.useCallback(o=>e.subscribe(o),[e]),l=a.useCallback(()=>{let o=e.getCollection();return e.isSSR&&e.resetAfterSSR(),o},[e]),n=a.useCallback(()=>(e.isSSR=!0,e.getCollection()),[e]),i=A(t,l,n);return I(()=>(e.isMounted=!0,()=>{e.isMounted=!1}),[e]),{collection:i,document:e}}const C=a.createContext(null);function w(s,e,t,l,n,i){let o=a.useCallback(r=>{r==null||r.setProps(e,t,l,i)},[e,t,l,i]),d=a.useContext(C);if(d){let r=d.ownerDocument.nodesByProps.get(e);return r||(r=d.ownerDocument.createElement(s),r.setProps(e,t,l,i),d.appendChild(r),d.ownerDocument.updateCollection(),d.ownerDocument.nodesByProps.set(e,r)),n?u.createElement(C.Provider,{value:r},n):null}return u.createElement(s,{ref:o},n)}function J(s,e){let t=({node:n})=>e(n.props,n.props.ref,n),l=a.forwardRef((n,i)=>{let o=a.useContext(S);if(!a.useContext($)){if(e.length>=3)throw new Error(e.name+" cannot be rendered outside a collection.");return e(n,i)}return w(s,n,i,"children"in n?n.children:null,null,r=>u.createElement(S.Provider,{value:o},u.createElement(t,{node:r})))});return l.displayName=e.name,l}function O(s,e,t=N){let l=({node:i})=>e(i.props,i.props.ref,i),n=a.forwardRef((i,o)=>{let d=t(i);var r;return(r=w(s,i,o,null,d,h=>u.createElement(l,{node:h})))!==null&&r!==void 0?r:u.createElement(u.Fragment,null)});return n.displayName=e.name,n}function N(s){return P({...s,addIdAndValue:!0})}const g=a.createContext(null);function Q(s){let e=a.useContext(g),t=((e==null?void 0:e.dependencies)||[]).concat(s.dependencies),l=s.idScope||(e==null?void 0:e.idScope),n=N({...s,idScope:l,dependencies:t});return a.useContext(v)&&(n=u.createElement(B,null,n)),e=a.useMemo(()=>({dependencies:t,idScope:l}),[l,...t]),u.createElement(g.Provider,{value:e},n)}function B({children:s}){let e=a.useContext(v),t=a.useMemo(()=>u.createElement(v.Provider,{value:null},u.createElement($.Provider,{value:!0},s)),[s]);return K()?u.createElement(C.Provider,{value:e},t):E.createPortal(t,e)}export{P as $,J as a,G as b,Q as c,O as d,b as e,x as f};
