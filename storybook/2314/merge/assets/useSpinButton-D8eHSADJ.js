import{$ as Se}from"./NumberFormatter-DNR9MAW-.js";import{a as we,$ as Ne}from"./LiveAnnouncer-Cy654hVN.js";import{r as m}from"./iframe-lphi5Fln.js";import{b as L,d as Fe}from"./useFocusRing-y2NKP0hv.js";import{$ as Te}from"./useLocalizedStringFormatter-ZZw30b7A.js";const Ie=new RegExp("^.*\\(.*\\).*$"),Re=["latn","arab","hanidec","deva","beng","fullwide"];class Ae{parse(t){return M(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,r){return M(this.locale,this.options,t).isValidPartialNumber(t,e,r)}getNumberingSystem(t){return M(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const _=new Map;function M(s,t,e){let r=U(s,t);if(!s.includes("-nu-")&&!r.isValidPartialNumber(e)){for(let a of Re)if(a!==r.options.numberingSystem){let o=U(s+(s.includes("-u-")?"-nu-":"-u-nu-")+a,t);if(o.isValidPartialNumber(e))return o}}return r}function U(s,t){let e=s+(t?Object.entries(t).sort((a,o)=>a[0]<o[0]?-1:1).join():""),r=_.get(e);return r||(r=new Ve(s,t),_.set(e,r)),r}class Ve{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=P(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let p=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let l=e.indexOf(".");l===-1&&(l=e.length),e=e.replace(".",""),l-2===0?e=`0.${e}`:l-2===-1?e=`0.0${e}`:l-2===-2?e="0.00":e=`${e.slice(0,l-2)}.${e.slice(l-2)}`,p>-1&&(e=`-${e}`)}let r=e?+e:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var a,o;let p={...this.options,style:"decimal",minimumFractionDigits:Math.min(((a=this.options.minimumFractionDigits)!==null&&a!==void 0?a:0)+2,20),maximumFractionDigits:Math.min(((o=this.options.maximumFractionDigits)!==null&&o!==void 0?o:0)+2,20)};return new Ae(this.locale,p).parse(new Se(this.locale,p).format(r))}return this.options.currencySign==="accounting"&&Ie.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=P(t,".",this.symbols.group))),this.symbols.group==="’"&&t.includes("'")&&(t=P(t,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(t=P(t," ",this.symbols.group),t=P(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=P(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=Ce(t,this.formatter,this.options,e);var r,a;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const G=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),Be=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function Ce(s,t,e,r){var a,o,p,l;let D=new Intl.NumberFormat(s,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),u=D.formatToParts(-10000.111),g=D.formatToParts(10000.111),c=Be.map(n=>D.formatToParts(n));var b;let x=(b=(a=u.find(n=>n.type==="minusSign"))===null||a===void 0?void 0:a.value)!==null&&b!==void 0?b:"-",$=(o=g.find(n=>n.type==="plusSign"))===null||o===void 0?void 0:o.value;!$&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&($="+");let h=(p=new Intl.NumberFormat(s,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(n=>n.type==="decimal"))===null||p===void 0?void 0:p.value,d=(l=u.find(n=>n.type==="group"))===null||l===void 0?void 0:l.value,S=u.filter(n=>!G.has(n.type)).map(n=>K(n.value)),A=c.flatMap(n=>n.filter(f=>!G.has(f.type)).map(f=>K(f.value))),v=[...new Set([...S,...A])].sort((n,f)=>f.length-n.length),w=v.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${v.join("|")}|[\\p{White_Space}]`,"gu"),E=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),N=new Map(E.map((n,f)=>[n,f])),F=new RegExp(`[${E.join("")}]`,"g");return{minusSign:x,plusSign:$,decimal:h,group:d,literals:w,numeral:F,index:n=>String(N.get(n))}}function P(s,t,e){return s.replaceAll?s.replaceAll(t,e):s.split(t).join(e)}function K(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var j={};j={Empty:"فارغ"};var W={};W={Empty:"Изпразни"};var q={};q={Empty:"Prázdné"};var H={};H={Empty:"Tom"};var O={};O={Empty:"Leer"};var Y={};Y={Empty:"Άδειο"};var Z={};Z={Empty:"Empty"};var J={};J={Empty:"Vacío"};var X={};X={Empty:"Tühjenda"};var Q={};Q={Empty:"Tyhjä"};var ee={};ee={Empty:"Vide"};var te={};te={Empty:"ריק"};var re={};re={Empty:"Prazno"};var ie={};ie={Empty:"Üres"};var se={};se={Empty:"Vuoto"};var ne={};ne={Empty:"空"};var ae={};ae={Empty:"비어 있음"};var oe={};oe={Empty:"Tuščias"};var le={};le={Empty:"Tukšs"};var ue={};ue={Empty:"Tom"};var ce={};ce={Empty:"Leeg"};var me={};me={Empty:"Pusty"};var de={};de={Empty:"Vazio"};var pe={};pe={Empty:"Vazio"};var fe={};fe={Empty:"Gol"};var be={};be={Empty:"Не заполнено"};var $e={};$e={Empty:"Prázdne"};var ye={};ye={Empty:"Prazen"};var he={};he={Empty:"Prazno"};var ge={};ge={Empty:"Tomt"};var xe={};xe={Empty:"Boş"};var ve={};ve={Empty:"Пусто"};var Ee={};Ee={Empty:"空"};var Pe={};Pe={Empty:"空白"};var De={};De={"ar-AE":j,"bg-BG":W,"cs-CZ":q,"da-DK":H,"de-DE":O,"el-GR":Y,"en-US":Z,"es-ES":J,"et-EE":X,"fi-FI":Q,"fr-FR":ee,"he-IL":te,"hr-HR":re,"hu-HU":ie,"it-IT":se,"ja-JP":ne,"ko-KR":ae,"lt-LT":oe,"lv-LV":le,"nb-NO":ue,"nl-NL":ce,"pl-PL":me,"pt-BR":de,"pt-PT":pe,"ro-RO":fe,"ru-RU":be,"sk-SK":$e,"sl-SI":ye,"sr-SP":he,"sv-SE":ge,"tr-TR":xe,"uk-UA":ve,"zh-CN":Ee,"zh-TW":Pe};function Le(s){return s&&s.__esModule?s.default:s}function Ge(s){const t=m.useRef(void 0);let{value:e,textValue:r,minValue:a,maxValue:o,isDisabled:p,isReadOnly:l,isRequired:D,onIncrement:u,onIncrementPage:g,onDecrement:c,onDecrementPage:b,onDecrementToMin:x,onIncrementToMax:$}=s;const k=Te(Le(De),"@react-aria/spinbutton");let h=m.useRef(!1);const d=m.useCallback(()=>{clearTimeout(t.current),h.current=!1},[]),S=L(()=>{d()});m.useEffect(()=>()=>S(),[]);let A=i=>{if(!(i.ctrlKey||i.metaKey||i.shiftKey||i.altKey||l||i.nativeEvent.isComposing))switch(i.key){case"PageUp":if(g){i.preventDefault(),g?.();break}case"ArrowUp":case"Up":u&&(i.preventDefault(),u?.());break;case"PageDown":if(b){i.preventDefault(),b?.();break}case"ArrowDown":case"Down":c&&(i.preventDefault(),c?.());break;case"Home":x&&(i.preventDefault(),x?.());break;case"End":$&&(i.preventDefault(),$?.());break}},v=m.useRef(!1),w=()=>{v.current=!0},E=()=>{v.current=!1},N=r===""?k.format("Empty"):(r||`${e}`).replace("-","−");m.useEffect(()=>{v.current&&(we("assertive"),Ne(N,"assertive"))},[N]);let F=m.useCallback(()=>{d()},[d]);const T=L(i=>{S(),h.current=!0,u?.(),t.current=window.setTimeout(()=>{(o===void 0||isNaN(o)||e===void 0||isNaN(e)||e<o)&&T(60)},i)}),n=L(i=>{S(),h.current=!0,c?.(),t.current=window.setTimeout(()=>{(a===void 0||isNaN(a)||e===void 0||isNaN(e)||e>a)&&n(60)},i)});let f=i=>{i.preventDefault()},{addGlobalListener:V,removeAllGlobalListeners:z}=Fe(),y=m.useRef(!1),[B,I]=m.useState(null);m.useEffect(()=>{B==="touch"?T(60):B&&T(400)},[B]);let[C,R]=m.useState(null);return m.useEffect(()=>{C==="touch"?n(60):C&&n(400)},[C]),{spinButtonProps:{role:"spinbutton","aria-valuenow":e!==void 0&&!isNaN(e)?e:void 0,"aria-valuetext":N,"aria-valuemin":a,"aria-valuemax":o,"aria-disabled":p||void 0,"aria-readonly":l||void 0,"aria-required":D||void 0,onKeyDown:A,onFocus:w,onBlur:E},incrementButtonProps:{onPressStart:i=>{i.pointerType!=="touch"?I("mouse"):(t.current&&d(),V(window,"pointercancel",F,{capture:!0}),y.current=!1,t.current=window.setTimeout(()=>{I("touch")},600)),V(window,"contextmenu",f)},onPressUp:i=>{i.pointerType==="touch"&&(y.current=!0),d(),z(),I(null)},onPressEnd:i=>{i.pointerType==="touch"&&!h.current&&y.current&&u?.(),d(),y.current=!1,I(null)},onFocus:w,onBlur:E},decrementButtonProps:{onPressStart:i=>{i.pointerType!=="touch"?R("mouse"):(t.current&&d(),V(window,"pointercancel",F,{capture:!0}),y.current=!1,t.current=window.setTimeout(()=>{R("touch")},600))},onPressUp:i=>{i.pointerType==="touch"&&(y.current=!0),d(),z(),R(null)},onPressEnd:i=>{i.pointerType==="touch"&&!h.current&&y.current&&c?.(),d(),y.current=!1,R(null)},onFocus:w,onBlur:E}}}export{Ae as $,Ge as a};
