import{j as N}from"./jsx-runtime-D_zvdyIk.js";import{v as wt,P as Et}from"./PropsContextProvider-CGP4rIIM.js";import{d as Dt}from"./dynamic-DKDa4OpU.js";import{R as E,r as H}from"./index-F2Fta7eo.js";import{F as Ct}from"./FieldError-B7WE-msJ.js";import{a as kt,A as Tt}from"./Action-CXU1vJUm.js";import{i as Pt}from"./browser-BJKb5O22.js";var me=e=>e.type==="checkbox",ie=e=>e instanceof Date,I=e=>e==null;const rt=e=>typeof e=="object";var w=e=>!I(e)&&!Array.isArray(e)&&rt(e)&&!ie(e),Rt=e=>w(e)&&e.target?me(e.target)?e.target.checked:e.target.value:e,Ot=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Lt=(e,r)=>e.has(Ot(r)),Ut=e=>{const r=e.constructor&&e.constructor.prototype;return w(r)&&r.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function W(e){let r;const t=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Te&&(e instanceof Blob||n))&&(t||w(e)))if(r=t?[]:{},!t&&!Ut(e))r=e;else for(const u in e)e.hasOwnProperty(u)&&(r[u]=W(e[u]));else return e;return r}var Se=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,y=(e,r,t)=>{if(!r||!w(e))return t;const n=Se(r.split(/[,[\].]+?/)).reduce((u,a)=>I(u)?u:u[a],e);return D(n)||n===e?D(e[r])?t:e[r]:n},z=e=>typeof e=="boolean",Pe=e=>/^\w*$/.test(e),st=e=>Se(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,r,t)=>{let n=-1;const u=Pe(r)?[r]:st(r),a=u.length,c=a-1;for(;++n<a;){const h=u[n];let p=t;if(n!==c){const V=e[h];p=w(V)||Array.isArray(V)?V:isNaN(+u[n+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=p,e=e[h]}return e};const Ke={BLUR:"blur",FOCUS_OUT:"focusout"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},it=E.createContext(null),It=()=>E.useContext(it),Mt=e=>{const{children:r,...t}=e;return E.createElement(it.Provider,{value:t},r)};var nt=(e,r,t,n=!0)=>{const u={defaultValues:r._defaultValues};for(const a in e)Object.defineProperty(u,a,{get:()=>{const c=a;return r._proxyFormState[c]!==K.all&&(r._proxyFormState[c]=!n||K.all),t&&(t[c]=!0),e[c]}});return u},M=e=>w(e)&&!Object.keys(e).length,ot=(e,r,t,n)=>{t(e);const{name:u,...a}=e;return M(a)||Object.keys(a).length>=Object.keys(r).length||Object.keys(a).find(c=>r[c]===(!n||K.all))},ye=e=>Array.isArray(e)?e:[e],Nt=(e,r,t)=>!e||!r||e===r||ye(e).some(n=>n&&(t?n===r:n.startsWith(r)||r.startsWith(n)));function at(e){const r=E.useRef(e);r.current=e,E.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Bt(e){const r=It(),{control:t=r.control,disabled:n,name:u,exact:a}=e||{},[c,h]=E.useState(t._formState),p=E.useRef(!0),V=E.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),b=E.useRef(u);return b.current=u,at({disabled:n,next:v=>p.current&&Nt(b.current,v.name,a)&&ot(v,V.current,t._updateFormState)&&h({...t._formState,...v}),subject:t._subjects.state}),E.useEffect(()=>(p.current=!0,V.current.isValid&&t._updateValid(!0),()=>{p.current=!1}),[t]),E.useMemo(()=>nt(c,t,V.current,!1),[c,t])}var Y=e=>typeof e=="string",jt=(e,r,t,n,u)=>Y(e)?(n&&r.watch.add(e),y(t,e,u)):Array.isArray(e)?e.map(a=>(n&&r.watch.add(a),y(t,a))):(n&&(r.watchAll=!0),t),qt=(e,r,t,n,u)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[n]:u||!0}}:{},ze=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),Ge=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const he=(e,r,t,n)=>{for(const u of t||Object.keys(e)){const a=y(e,u);if(a){const{_f:c,...h}=a;if(c){if(c.refs&&c.refs[0]&&r(c.refs[0],u)&&!n)return!0;if(c.ref&&r(c.ref,c.name)&&!n)return!0;if(he(h,r))break}else if(w(h)&&he(h,r))break}}};var Wt=(e,r,t)=>{const n=ye(y(e,t));return A(n,"root",r[t]),A(e,t,n),e},Re=e=>e.type==="file",G=e=>typeof e=="function",Fe=e=>{if(!Te)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},be=e=>Y(e),Oe=e=>e.type==="radio",_e=e=>e instanceof RegExp;const Ye={value:!1,isValid:!1},Je={value:!0,isValid:!0};var ut=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?Je:{value:e[0].value,isValid:!0}:Je:Ye}return Ye};const Qe={isValid:!1,value:null};var lt=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,Qe):Qe;function Xe(e,r,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||z(e)&&!e)return{type:t,message:be(e)?e:"",ref:r}}var ae=e=>w(e)&&!_e(e)?e:{value:e,message:""},Ze=async(e,r,t,n,u,a)=>{const{ref:c,refs:h,required:p,maxLength:V,minLength:b,min:v,max:S,pattern:B,validate:L,name:O,valueAsNumber:J,mount:ee}=e._f,_=y(t,O);if(!ee||r.has(O))return{};const Q=h?h[0]:c,X=F=>{u&&Q.reportValidity&&(Q.setCustomValidity(z(F)?"":F||""),Q.reportValidity())},C={},ne=Oe(c),ve=me(c),se=ne||ve,oe=(J||Re(c))&&D(c.value)&&D(_)||Fe(c)&&c.value===""||_===""||Array.isArray(_)&&!_.length,j=qt.bind(null,O,n,C),ge=(F,x,k,U=Z.maxLength,$=Z.minLength)=>{const q=F?x:k;C[O]={type:F?U:$,message:q,ref:c,...j(F?U:$,q)}};if(a?!Array.isArray(_)||!_.length:p&&(!se&&(oe||I(_))||z(_)&&!_||ve&&!ut(h).isValid||ne&&!lt(h).isValid)){const{value:F,message:x}=be(p)?{value:!!p,message:p}:ae(p);if(F&&(C[O]={type:Z.required,message:x,ref:Q,...j(Z.required,x)},!n))return X(x),C}if(!oe&&(!I(v)||!I(S))){let F,x;const k=ae(S),U=ae(v);if(!I(_)&&!isNaN(_)){const $=c.valueAsNumber||_&&+_;I(k.value)||(F=$>k.value),I(U.value)||(x=$<U.value)}else{const $=c.valueAsDate||new Date(_),q=ce=>new Date(new Date().toDateString()+" "+ce),ue=c.type=="time",le=c.type=="week";Y(k.value)&&_&&(F=ue?q(_)>q(k.value):le?_>k.value:$>new Date(k.value)),Y(U.value)&&_&&(x=ue?q(_)<q(U.value):le?_<U.value:$<new Date(U.value))}if((F||x)&&(ge(!!F,k.message,U.message,Z.max,Z.min),!n))return X(C[O].message),C}if((V||b)&&!oe&&(Y(_)||a&&Array.isArray(_))){const F=ae(V),x=ae(b),k=!I(F.value)&&_.length>+F.value,U=!I(x.value)&&_.length<+x.value;if((k||U)&&(ge(k,F.message,x.message),!n))return X(C[O].message),C}if(B&&!oe&&Y(_)){const{value:F,message:x}=ae(B);if(_e(F)&&!_.match(F)&&(C[O]={type:Z.pattern,message:x,ref:c,...j(Z.pattern,x)},!n))return X(x),C}if(L){if(G(L)){const F=await L(_,t),x=Xe(F,Q);if(x&&(C[O]={...x,...j(Z.validate,x.message)},!n))return X(x.message),C}else if(w(L)){let F={};for(const x in L){if(!M(F)&&!n)break;const k=Xe(await L[x](_,t),Q,x);k&&(F={...k,...j(x,k.message)},X(k.message),n&&(C[O]=F))}if(!M(F)&&(C[O]={ref:Q,...F},!n))return C}}return X(!0),C};function Ht(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=D(e)?n++:e[r[n++]];return e}function $t(e){for(const r in e)if(e.hasOwnProperty(r)&&!D(e[r]))return!1;return!0}function T(e,r){const t=Array.isArray(r)?r:Pe(r)?[r]:st(r),n=t.length===1?e:Ht(e,t),u=t.length-1,a=t[u];return n&&delete n[a],u!==0&&(w(n)&&M(n)||Array.isArray(n)&&$t(n))&&T(e,t.slice(0,-1)),e}var Ee=()=>{let e=[];return{get observers(){return e},next:u=>{for(const a of e)a.next&&a.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(a=>a!==u)}}),unsubscribe:()=>{e=[]}}},ke=e=>I(e)||!rt(e);function re(e,r){if(ke(e)||ke(r))return e===r;if(ie(e)&&ie(r))return e.getTime()===r.getTime();const t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(const u of t){const a=e[u];if(!n.includes(u))return!1;if(u!=="ref"){const c=r[u];if(ie(a)&&ie(c)||w(a)&&w(c)||Array.isArray(a)&&Array.isArray(c)?!re(a,c):a!==c)return!1}}return!0}var ct=e=>e.type==="select-multiple",Kt=e=>Oe(e)||me(e),De=e=>Fe(e)&&e.isConnected,dt=e=>{for(const r in e)if(G(e[r]))return!0;return!1};function xe(e,r={}){const t=Array.isArray(e);if(w(e)||t)for(const n in e)Array.isArray(e[n])||w(e[n])&&!dt(e[n])?(r[n]=Array.isArray(e[n])?[]:{},xe(e[n],r[n])):I(e[n])||(r[n]=!0);return r}function ft(e,r,t){const n=Array.isArray(e);if(w(e)||n)for(const u in e)Array.isArray(e[u])||w(e[u])&&!dt(e[u])?D(r)||ke(t[u])?t[u]=Array.isArray(e[u])?xe(e[u],[]):{...xe(e[u])}:ft(e[u],I(r)?{}:r[u],t[u]):t[u]=!re(e[u],r[u]);return t}var de=(e,r)=>ft(e,r,xe(r)),yt=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>D(e)?e:r?e===""?NaN:e&&+e:t&&Y(e)?new Date(e):n?n(e):e;function Ce(e){const r=e.ref;return Re(r)?r.files:Oe(r)?lt(e.refs).value:ct(r)?[...r.selectedOptions].map(({value:t})=>t):me(r)?ut(e.refs).value:yt(D(r.value)?e.ref.value:r.value,e)}var zt=(e,r,t,n)=>{const u={};for(const a of e){const c=y(r,a);c&&A(u,a,c._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:n}},fe=e=>D(e)?e:_e(e)?e.source:w(e)?_e(e.value)?e.value.source:e.value:e;const et="AsyncFunction";var Gt=e=>!!e&&!!e.validate&&!!(G(e.validate)&&e.validate.constructor.name===et||w(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===et)),Yt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function tt(e,r,t){const n=y(e,t);if(n||Pe(t))return{error:n,name:t};const u=t.split(".");for(;u.length;){const a=u.join("."),c=y(r,a),h=y(e,a);if(c&&!Array.isArray(c)&&t!==a)return{name:t};if(h&&h.type)return{name:a,error:h};u.pop()}return{name:t}}var Jt=(e,r,t,n,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(r||e):(t?n.isOnBlur:u.isOnBlur)?!e:(t?n.isOnChange:u.isOnChange)?e:!0,Qt=(e,r)=>!Se(y(e,r)).length&&T(e,r);const Xt={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function Zt(e={}){let r={...Xt,...e},t={submitCount:0,isDirty:!1,isLoading:G(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},n={},u=w(r.defaultValues)||w(r.values)?W(r.defaultValues||r.values)||{}:{},a=r.shouldUnregister?{}:W(u),c={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,V=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:Ee(),array:Ee(),state:Ee()},S=ze(r.mode),B=ze(r.reValidateMode),L=r.criteriaMode===K.all,O=s=>i=>{clearTimeout(V),V=setTimeout(s,i)},J=async s=>{if(!r.disabled&&(b.isValid||s)){const i=r.resolver?M((await se()).errors):await j(n,!0);i!==t.isValid&&v.state.next({isValid:i})}},ee=(s,i)=>{!r.disabled&&(b.isValidating||b.validatingFields)&&((s||Array.from(h.mount)).forEach(o=>{o&&(i?A(t.validatingFields,o,i):T(t.validatingFields,o))}),v.state.next({validatingFields:t.validatingFields,isValidating:!M(t.validatingFields)}))},_=(s,i=[],o,f,d=!0,l=!0)=>{if(f&&o&&!r.disabled){if(c.action=!0,l&&Array.isArray(y(n,s))){const m=o(y(n,s),f.argA,f.argB);d&&A(n,s,m)}if(l&&Array.isArray(y(t.errors,s))){const m=o(y(t.errors,s),f.argA,f.argB);d&&A(t.errors,s,m),Qt(t.errors,s)}if(b.touchedFields&&l&&Array.isArray(y(t.touchedFields,s))){const m=o(y(t.touchedFields,s),f.argA,f.argB);d&&A(t.touchedFields,s,m)}b.dirtyFields&&(t.dirtyFields=de(u,a)),v.state.next({name:s,isDirty:F(s,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else A(a,s,i)},Q=(s,i)=>{A(t.errors,s,i),v.state.next({errors:t.errors})},X=s=>{t.errors=s,v.state.next({errors:t.errors,isValid:!1})},C=(s,i,o,f)=>{const d=y(n,s);if(d){const l=y(a,s,D(o)?y(u,s):o);D(l)||f&&f.defaultChecked||i?A(a,s,i?l:Ce(d._f)):U(s,l),c.mount&&J()}},ne=(s,i,o,f,d)=>{let l=!1,m=!1;const g={name:s};if(!r.disabled){const P=!!(y(n,s)&&y(n,s)._f&&y(n,s)._f.disabled);if(!o||f){b.isDirty&&(m=t.isDirty,t.isDirty=g.isDirty=F(),l=m!==g.isDirty);const R=P||re(y(u,s),i);m=!!(!P&&y(t.dirtyFields,s)),R||P?T(t.dirtyFields,s):A(t.dirtyFields,s,!0),g.dirtyFields=t.dirtyFields,l=l||b.dirtyFields&&m!==!R}if(o){const R=y(t.touchedFields,s);R||(A(t.touchedFields,s,o),g.touchedFields=t.touchedFields,l=l||b.touchedFields&&R!==o)}l&&d&&v.state.next(g)}return l?g:{}},ve=(s,i,o,f)=>{const d=y(t.errors,s),l=b.isValid&&z(i)&&t.isValid!==i;if(r.delayError&&o?(p=O(()=>Q(s,o)),p(r.delayError)):(clearTimeout(V),p=null,o?A(t.errors,s,o):T(t.errors,s)),(o?!re(d,o):d)||!M(f)||l){const m={...f,...l&&z(i)?{isValid:i}:{},errors:t.errors,name:s};t={...t,...m},v.state.next(m)}},se=async s=>{ee(s,!0);const i=await r.resolver(a,r.context,zt(s||h.mount,n,r.criteriaMode,r.shouldUseNativeValidation));return ee(s),i},oe=async s=>{const{errors:i}=await se(s);if(s)for(const o of s){const f=y(i,o);f?A(t.errors,o,f):T(t.errors,o)}else t.errors=i;return i},j=async(s,i,o={valid:!0})=>{for(const f in s){const d=s[f];if(d){const{_f:l,...m}=d;if(l){const g=h.array.has(l.name),P=d._f&&Gt(d._f);P&&b.validatingFields&&ee([f],!0);const R=await Ze(d,h.disabled,a,L,r.shouldUseNativeValidation&&!i,g);if(P&&b.validatingFields&&ee([f]),R[l.name]&&(o.valid=!1,i))break;!i&&(y(R,l.name)?g?Wt(t.errors,R,l.name):A(t.errors,l.name,R[l.name]):T(t.errors,l.name))}!M(m)&&await j(m,i,o)}}return o.valid},ge=()=>{for(const s of h.unMount){const i=y(n,s);i&&(i._f.refs?i._f.refs.every(o=>!De(o)):!De(i._f.ref))&&pe(s)}h.unMount=new Set},F=(s,i)=>!r.disabled&&(s&&i&&A(a,s,i),!re(Ue(),u)),x=(s,i,o)=>jt(s,h,{...c.mount?a:D(i)?u:Y(s)?{[s]:i}:i},o,i),k=s=>Se(y(c.mount?a:u,s,r.shouldUnregister?y(u,s,[]):[])),U=(s,i,o={})=>{const f=y(n,s);let d=i;if(f){const l=f._f;l&&(!l.disabled&&A(a,s,yt(i,l)),d=Fe(l.ref)&&I(i)?"":i,ct(l.ref)?[...l.ref.options].forEach(m=>m.selected=d.includes(m.value)):l.refs?me(l.ref)?l.refs.length>1?l.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(d)?!!d.find(g=>g===m.value):d===m.value)):l.refs[0]&&(l.refs[0].checked=!!d):l.refs.forEach(m=>m.checked=m.value===d):Re(l.ref)?l.ref.value="":(l.ref.value=d,l.ref.type||v.values.next({name:s,values:{...a}})))}(o.shouldDirty||o.shouldTouch)&&ne(s,d,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ce(s)},$=(s,i,o)=>{for(const f in i){const d=i[f],l=`${s}.${f}`,m=y(n,l);(h.array.has(s)||w(d)||m&&!m._f)&&!ie(d)?$(l,d,o):U(l,d,o)}},q=(s,i,o={})=>{const f=y(n,s),d=h.array.has(s),l=W(i);A(a,s,l),d?(v.array.next({name:s,values:{...a}}),(b.isDirty||b.dirtyFields)&&o.shouldDirty&&v.state.next({name:s,dirtyFields:de(u,a),isDirty:F(s,l)})):f&&!f._f&&!I(l)?$(s,l,o):U(s,l,o),Ge(s,h)&&v.state.next({...t}),v.values.next({name:c.mount?s:void 0,values:{...a}})},ue=async s=>{c.mount=!0;const i=s.target;let o=i.name,f=!0;const d=y(n,o),l=()=>i.type?Ce(d._f):Rt(s),m=g=>{f=Number.isNaN(g)||ie(g)&&isNaN(g.getTime())||re(g,y(a,o,g))};if(d){let g,P;const R=l(),te=s.type===Ke.BLUR||s.type===Ke.FOCUS_OUT,pt=!Yt(d._f)&&!r.resolver&&!y(t.errors,o)&&!d._f.deps||Jt(te,y(t.touchedFields,o),t.isSubmitted,B,S),Ve=Ge(o,h,te);A(a,o,R),te?(d._f.onBlur&&d._f.onBlur(s),p&&p(0)):d._f.onChange&&d._f.onChange(s);const we=ne(o,R,te,!1),At=!M(we)||Ve;if(!te&&v.values.next({name:o,type:s.type,values:{...a}}),pt)return b.isValid&&(r.mode==="onBlur"&&te?J():te||J()),At&&v.state.next({name:o,...Ve?{}:we});if(!te&&Ve&&v.state.next({...t}),r.resolver){const{errors:He}=await se([o]);if(m(R),f){const Vt=tt(t.errors,n,o),$e=tt(He,n,Vt.name||o);g=$e.error,o=$e.name,P=M(He)}}else ee([o],!0),g=(await Ze(d,h.disabled,a,L,r.shouldUseNativeValidation))[o],ee([o]),m(R),f&&(g?P=!1:b.isValid&&(P=await j(n,!0)));f&&(d._f.deps&&ce(d._f.deps),ve(o,P,g,we))}},le=(s,i)=>{if(y(t.errors,i)&&s.focus)return s.focus(),1},ce=async(s,i={})=>{let o,f;const d=ye(s);if(r.resolver){const l=await oe(D(s)?s:d);o=M(l),f=s?!d.some(m=>y(l,m)):o}else s?(f=(await Promise.all(d.map(async l=>{const m=y(n,l);return await j(m&&m._f?{[l]:m}:m)}))).every(Boolean),!(!f&&!t.isValid)&&J()):f=o=await j(n);return v.state.next({...!Y(s)||b.isValid&&o!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:o}:{},errors:t.errors}),i.shouldFocus&&!f&&he(n,le,s?d:h.mount),f},Ue=s=>{const i={...c.mount?a:u};return D(s)?i:Y(s)?y(i,s):s.map(o=>y(i,o))},Ie=(s,i)=>({invalid:!!y((i||t).errors,s),isDirty:!!y((i||t).dirtyFields,s),error:y((i||t).errors,s),isValidating:!!y(t.validatingFields,s),isTouched:!!y((i||t).touchedFields,s)}),Ft=s=>{s&&ye(s).forEach(i=>T(t.errors,i)),v.state.next({errors:s?t.errors:{}})},Me=(s,i,o)=>{const f=(y(n,s,{_f:{}})._f||{}).ref,d=y(t.errors,s)||{},{ref:l,message:m,type:g,...P}=d;A(t.errors,s,{...P,...i,ref:f}),v.state.next({name:s,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&f&&f.focus&&f.focus()},_t=(s,i)=>G(s)?v.values.subscribe({next:o=>s(x(void 0,i),o)}):x(s,i,!0),pe=(s,i={})=>{for(const o of s?ye(s):h.mount)h.mount.delete(o),h.array.delete(o),i.keepValue||(T(n,o),T(a,o)),!i.keepError&&T(t.errors,o),!i.keepDirty&&T(t.dirtyFields,o),!i.keepTouched&&T(t.touchedFields,o),!i.keepIsValidating&&T(t.validatingFields,o),!r.shouldUnregister&&!i.keepDefaultValue&&T(u,o);v.values.next({values:{...a}}),v.state.next({...t,...i.keepDirty?{isDirty:F()}:{}}),!i.keepIsValid&&J()},Ne=({disabled:s,name:i,field:o,fields:f})=>{(z(s)&&c.mount||s||h.disabled.has(i))&&(s?h.disabled.add(i):h.disabled.delete(i),ne(i,Ce(o?o._f:y(f,i)._f),!1,!1,!0))},Ae=(s,i={})=>{let o=y(n,s);const f=z(i.disabled)||z(r.disabled);return A(n,s,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:s}},name:s,mount:!0,...i}}),h.mount.add(s),o?Ne({field:o,disabled:z(i.disabled)?i.disabled:r.disabled,name:s}):C(s,!0,i.value),{...f?{disabled:i.disabled||r.disabled}:{},...r.progressive?{required:!!i.required,min:fe(i.min),max:fe(i.max),minLength:fe(i.minLength),maxLength:fe(i.maxLength),pattern:fe(i.pattern)}:{},name:s,onChange:ue,onBlur:ue,ref:d=>{if(d){Ae(s,i),o=y(n,s);const l=D(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,m=Kt(l),g=o._f.refs||[];if(m?g.find(P=>P===l):l===o._f.ref)return;A(n,s,{_f:{...o._f,...m?{refs:[...g.filter(De),l,...Array.isArray(y(u,s))?[{}]:[]],ref:{type:l.type,name:s}}:{ref:l}}}),C(s,!1,void 0,l)}else o=y(n,s,{}),o._f&&(o._f.mount=!1),(r.shouldUnregister||i.shouldUnregister)&&!(Lt(h.array,s)&&c.action)&&h.unMount.add(s)}}},Be=()=>r.shouldFocusError&&he(n,le,h.mount),xt=s=>{z(s)&&(v.state.next({disabled:s}),he(n,(i,o)=>{const f=y(n,o);f&&(i.disabled=f._f.disabled||s,Array.isArray(f._f.refs)&&f._f.refs.forEach(d=>{d.disabled=f._f.disabled||s}))},0,!1))},je=(s,i)=>async o=>{let f;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let d=W(a);if(h.disabled.size)for(const l of h.disabled)A(d,l,void 0);if(v.state.next({isSubmitting:!0}),r.resolver){const{errors:l,values:m}=await se();t.errors=l,d=m}else await j(n);if(T(t.errors,"root"),M(t.errors)){v.state.next({errors:{}});try{await s(d,o)}catch(l){f=l}}else i&&await i({...t.errors},o),Be(),setTimeout(Be);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:M(t.errors)&&!f,submitCount:t.submitCount+1,errors:t.errors}),f)throw f},St=(s,i={})=>{y(n,s)&&(D(i.defaultValue)?q(s,W(y(u,s))):(q(s,i.defaultValue),A(u,s,W(i.defaultValue))),i.keepTouched||T(t.touchedFields,s),i.keepDirty||(T(t.dirtyFields,s),t.isDirty=i.defaultValue?F(s,W(y(u,s))):F()),i.keepError||(T(t.errors,s),b.isValid&&J()),v.state.next({...t}))},qe=(s,i={})=>{const o=s?W(s):u,f=W(o),d=M(s),l=d?u:f;if(i.keepDefaultValues||(u=o),!i.keepValues){if(i.keepDirtyValues){const m=new Set([...h.mount,...Object.keys(de(u,a))]);for(const g of Array.from(m))y(t.dirtyFields,g)?A(l,g,y(a,g)):q(g,y(l,g))}else{if(Te&&D(s))for(const m of h.mount){const g=y(n,m);if(g&&g._f){const P=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;if(Fe(P)){const R=P.closest("form");if(R){R.reset();break}}}}n={}}a=r.shouldUnregister?i.keepDefaultValues?W(u):{}:W(l),v.array.next({values:{...l}}),v.values.next({values:{...l}})}h={mount:i.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!b.isValid||!!i.keepIsValid||!!i.keepDirtyValues,c.watch=!!r.shouldUnregister,v.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:d?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!re(s,u)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:d?{}:i.keepDirtyValues?i.keepDefaultValues&&a?de(u,a):t.dirtyFields:i.keepDefaultValues&&s?de(u,s):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},We=(s,i)=>qe(G(s)?s(a):s,i);return{control:{register:Ae,unregister:pe,getFieldState:Ie,handleSubmit:je,setError:Me,_executeSchema:se,_getWatch:x,_getDirty:F,_updateValid:J,_removeUnmounted:ge,_updateFieldArray:_,_updateDisabledField:Ne,_getFieldArray:k,_reset:qe,_resetDefaultValues:()=>G(r.defaultValues)&&r.defaultValues().then(s=>{We(s,r.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:xt,_subjects:v,_proxyFormState:b,_setErrors:X,get _fields(){return n},get _formValues(){return a},get _state(){return c},set _state(s){c=s},get _defaultValues(){return u},get _names(){return h},set _names(s){h=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:ce,register:Ae,handleSubmit:je,watch:_t,setValue:q,getValues:Ue,reset:We,resetField:St,clearErrors:Ft,unregister:pe,setError:Me,setFocus:(s,i={})=>{const o=y(n,s),f=o&&o._f;if(f){const d=f.refs?f.refs[0]:f.ref;d.focus&&(d.focus(),i.shouldSelect&&G(d.select)&&d.select())}},getFieldState:Ie}}function vr(e={}){const r=E.useRef(void 0),t=E.useRef(void 0),[n,u]=E.useState({isDirty:!1,isValidating:!1,isLoading:G(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:G(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...Zt(e),formState:n});const a=r.current.control;return a._options=e,at({subject:a._subjects.state,next:c=>{ot(c,a._proxyFormState,a._updateFormState,!0)&&u({...a._formState})}}),E.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),E.useEffect(()=>{if(a._proxyFormState.isDirty){const c=a._getDirty();c!==n.isDirty&&a._subjects.state.next({isDirty:c})}},[a,n.isDirty]),E.useEffect(()=>{e.values&&!re(e.values,t.current)?(a._reset(e.values,a._options.resetOptions),t.current=e.values,u(c=>({...c}))):a._resetDefaultValues()},[e.values,a]),E.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),E.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),E.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),r.current.formState=nt(n,a),r.current}const ht=H.createContext(void 0),er=ht.Provider,Le=()=>{const e=H.useContext(ht);return Pt(!!e,"Could not useFormContext() outside a Form, or multiple versions of Flow installed."),e},mt=e=>{const r=H.useContext(wt).FieldError??Ct;return N.jsx(r,{...e})};mt.__docgenInfo={description:"",methods:[],displayName:"FieldErrorView"};function vt(e){var L;const{children:r,name:t,defaultValue:n,...u}=e,a=Le(),c=a.form,h=c.register(t),{invalid:p,error:V}=c.getFieldState(t),b=c.watch(t),v={...h,defaultValue:n,name:t,form:a.id,isRequired:!!((L=u.rules)!=null&&L.required),isInvalid:p,validationBehavior:"aria",children:Dt(O=>N.jsxs(N.Fragment,{children:[O.children,N.jsx(mt,{children:V==null?void 0:V.message})]})),onChange:O=>{c.setValue(t,O)}},S={...v,value:b},B={SearchField:v,TextField:v,TextArea:v,Checkbox:{...S,isSelected:S.value},CheckboxGroup:S,CheckboxButton:{...S,isSelected:S.value},FileField:S,NumberField:S,RadioGroup:S,Switch:{...S,isSelected:S.value},Select:{...S,selectedKey:S.value},Slider:S,DatePicker:S,DateRangePicker:S,TimeField:S,SegmentedControl:S,ComboBox:{...S,defaultInputValue:S.value}};return N.jsx(Et,{props:B,dependencies:[b],children:r})}const gr=e=>vt;vt.__docgenInfo={description:"",methods:[],displayName:"Field",composes:["Omit","PropsWithChildren"]};const gt=e=>{const{isStarted:r,hasFailedWithError:t,hasSucceeded:n,children:u}=e,a=kt.useNew({});return H.useEffect(()=>{n?a.state.onSucceeded():t?a.state.onFailed(t):r&&a.state.onAsyncStart()},[r,t,n]),N.jsx(Tt,{actionModel:a,children:u})};gt.__docgenInfo={description:"",methods:[],displayName:"ActionStateContext",props:{isStarted:{required:!1,tsType:{name:"boolean"},description:""},hasSucceeded:{required:!1,tsType:{name:"boolean"},description:""},hasFailedWithError:{required:!1,tsType:{name:"unknown"},description:""}},composes:["PropsWithChildren"]};const tr=e=>{const{children:r,isAsyncSubmit:t}=e,n=Le().form,[u,a]=H.useState(void 0),[c,h]=H.useState(!1),[p,V]=H.useState(!1);return H.useEffect(()=>{const{isSubmitted:b,isSubmitting:v,isSubmitSuccessful:S,errors:B}=n.formState;a(b&&B&&Object.entries(B).length>0?B:void 0),h(b&&S),V(v&&t.current)},[n.formState,t.current]),N.jsx(gt,{isStarted:p,hasFailedWithError:u,hasSucceeded:c,children:r})},bt=e=>{const{children:r,isAsyncSubmit:t}=e;return N.jsx(tr,{isAsyncSubmit:t,children:r})};bt.__docgenInfo={description:"",methods:[],displayName:"SubmitButtonStateProvider",props:{isAsyncSubmit:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"boolean"}],raw:"MutableRefObject<boolean>"},description:""}},composes:["PropsWithChildren"]};const rr=e=>{const r=t=>{typeof t=="function"&&t()};e instanceof Promise?e.then(r):r(e)},sr=e=>{const{submitHandlerResultRef:r}=e,t=Le().form,{isValid:n,isSubmitSuccessful:u}=Bt(t);return H.useEffect(()=>{u&&n&&rr(r.current)},[u,n,t]),null},ir=e=>N.jsx("form",{...e});function nr(e){const{form:r,children:t,onSubmit:n,formComponent:u=ir,...a}=e,c=H.useId(),h=H.useRef(!1),p=H.useRef(null),V=b=>{const{isSubmitting:v,isValidating:S}=r.control._formState;if(b.stopPropagation(),v||S){b.preventDefault();return}p.current=void 0,r.handleSubmit(B=>{const L=n(B,b);return h.current=L instanceof Promise,p.current=L,L})(b)};return N.jsx(Mt,{...r,children:N.jsxs(er,{value:{form:r,id:c},children:[N.jsx(bt,{isAsyncSubmit:h,children:N.jsx(u,{...a,id:c,onSubmit:V,children:t})}),N.jsx(sr,{submitHandlerResultRef:p})]})})}nr.__docgenInfo={description:"",methods:[],displayName:"Form",props:{form:{required:!0,tsType:{name:"UseFormReturn",elements:[{name:"F"}],raw:"UseFormReturn<F>"},description:""},onSubmit:{required:!0,tsType:{name:"Parameters[0]",raw:`Parameters<
  UseFormReturn<F>["handleSubmit"]
>[0]`},description:""},formComponent:{required:!1,tsType:{name:"ComponentType",elements:[{name:"PropsWithChildren",elements:[{name:"signature",type:"object",raw:"{ id: string; onSubmit?: FormEventHandler }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"onSubmit",value:{name:"FormEventHandler",required:!1}}]}}],raw:"PropsWithChildren<{ id: string; onSubmit?: FormEventHandler }>"}],raw:`ComponentType<
  PropsWithChildren<{ id: string; onSubmit?: FormEventHandler }>
>`},description:""}},composes:["Omit","PropsWithChildren"]};export{nr as F,vt as a,gr as t,vr as u};
