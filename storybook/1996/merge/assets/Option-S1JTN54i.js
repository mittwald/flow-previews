import{r as d,R as s,j as q}from"./iframe-D6MXtoeF.js";import{P as ne}from"./Popover-CAmf3Vp3.js";import{c as X}from"./clsx-B-dksMZM.js";import{f as Y}from"./PropsContextProvider-DKdwmELu.js";import{s as se}from"./IconWarning-BzCByWga.js";import{$ as z,a as ce}from"./Collection-Cv5VHUKE.js";import{$ as ue,b as R,a as _,e as Z,g as fe,f as $e}from"./utils-B7M3k9FN.js";import{$ as A,a as pe,b as ee,c as be,d as ve}from"./DragAndDrop-CbMS9Gp-.js";import{n as me,o as ge,p as xe,q as he}from"./Dialog-DTX65kLp.js";import{$ as Pe}from"./Separator-DFJzdh8J.js";import{a as De}from"./Text-X88WQLD_.js";import{b as ye,c as Se,$ as oe}from"./CollectionBuilder-C1kbEgCd.js";import{d as te,$ as M,g as G,e as Ce,a as Ee}from"./mergeRefs-DOKhc8cj.js";import{$ as O}from"./filterDOMProps-CghfNOdR.js";import{$ as Me}from"./inertValue-Dz5MOqqh.js";import{$ as Fe,a as ke}from"./useListState-dEgzsK03.js";import{$ as we}from"./context-Ck2zuvqd.js";import{a as Oe}from"./useCollator-K4h4KKi7.js";import{d as Ie,$ as _e}from"./SelectionManager-D5CRlMya.js";import{b as Le,$ as ae,a as Be}from"./useFocusRing-DiO0sb-8.js";import{a as Ne}from"./useLabel-D8eXzRI6.js";import{b as Ve}from"./usePress-Ct6Wvp4V.js";import{r as He,q as Ae,g as J}from"./useFocus-DFkM6utj.js";import{a as Te}from"./FocusScope-NXX1qwdY.js";const W=new WeakMap;function Ue(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function ze(t,e){let a=W.get(t);if(!a)throw new Error("Unknown list");return`${a.id}-option-${Ue(e)}`}function Re(t,e,a){let l=O(t,{labelable:!0}),r=t.selectionBehavior||"toggle",i=t.linkBehavior||(r==="replace"?"action":"override");r==="toggle"&&i==="action"&&(i="override");let{listProps:o}=me({...t,ref:a,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:i}),{focusWithinProps:n}=Le({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),c=te(t.id);W.set(e,{id:c,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:i});let{labelProps:$,fieldProps:u}=Ne({...t,id:c,labelElementType:"span"});return{labelProps:$,listBoxProps:M(l,n,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...M(u,o)})}}function We(t,e,a){var l,r;let{key:i}=t,o=W.get(e);var n;let c=(n=t.isDisabled)!==null&&n!==void 0?n:e.selectionManager.isDisabled(i);var $;let u=($=t.isSelected)!==null&&$!==void 0?$:e.selectionManager.isSelected(i);var b;let f=(b=t.shouldSelectOnPressUp)!==null&&b!==void 0?b:o==null?void 0:o.shouldSelectOnPressUp;var g;let m=(g=t.shouldFocusOnHover)!==null&&g!==void 0?g:o==null?void 0:o.shouldFocusOnHover;var x;let v=(x=t.shouldUseVirtualFocus)!==null&&x!==void 0?x:o==null?void 0:o.shouldUseVirtualFocus;var P;let C=(P=t.isVirtualized)!==null&&P!==void 0?P:o==null?void 0:o.isVirtualized,E=G(),D=G(),y={role:"option","aria-disabled":c||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?u:void 0};He()&&Ae()||(y["aria-label"]=t["aria-label"],y["aria-labelledby"]=E,y["aria-describedby"]=D);let p=e.collection.getItem(i);if(C){let h=Number(p==null?void 0:p.index);y["aria-posinset"]=Number.isNaN(h)?void 0:h+1,y["aria-setsize"]=ge(e.collection)}let B=o!=null&&o.onAction?()=>{var h;return o==null||(h=o.onAction)===null||h===void 0?void 0:h.call(o,i)}:void 0,F=ze(e,i),{itemProps:S,isPressed:k,isFocused:w,hasAction:N,allowsSelection:V}=Ie({selectionManager:e.selectionManager,key:i,ref:a,shouldSelectOnPressUp:f,allowsDifferentPressOrigin:f&&m,isVirtualized:C,shouldUseVirtualFocus:v,isDisabled:c,onAction:B||!(p==null||(l=p.props)===null||l===void 0)&&l.onAction?Ce(p==null||(r=p.props)===null||r===void 0?void 0:r.onAction,B):void 0,linkBehavior:o==null?void 0:o.linkBehavior,id:F}),{hoverProps:T}=ae({isDisabled:c||!m,onHoverStart(){J()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(i))}}),I=O(p==null?void 0:p.props);delete I.id;let H=Ve(p==null?void 0:p.props);return{optionProps:{...y,...M(I,S,T,H),id:F},labelProps:{id:E},descriptionProps:{id:D},isFocused:w,isFocusVisible:w&&e.selectionManager.isFocused&&J(),isSelected:u,isDisabled:c,isPressed:k,allowsSelection:V,hasAction:N}}function Ke(t){let{heading:e,"aria-label":a}=t,l=te();return{itemProps:{role:"presentation"},headingProps:e?{id:l,role:"presentation"}:{},groupProps:{role:"group","aria-label":a,"aria-labelledby":e?l:void 0}}}const le=d.createContext(null),L=d.createContext(null),je=d.forwardRef(function(e,a){[e,a]=ue(e,a,le);let l=d.useContext(L);return l?s.createElement(re,{state:l,props:e,listBoxRef:a}):s.createElement(ye,{content:s.createElement(Se,e)},r=>s.createElement(qe,{props:e,listBoxRef:a,collection:r}))});function qe({props:t,listBoxRef:e,collection:a}){t={...t,collection:a,children:null,items:null};let{layoutDelegate:l}=d.useContext(z),r=ke({...t,layoutDelegate:l});return s.createElement(re,{state:r,props:t,listBoxRef:e})}function re({state:t,props:e,listBoxRef:a}){let{filter:l,collectionProps:r,collectionRef:i}=d.useContext(xe)||{};e=d.useMemo(()=>r?{...e,...r}:e,[e,r]);let{dragAndDropHooks:o,layout:n="stack",orientation:c="vertical"}=e;a=R(d.useMemo(()=>Ee(a,i!==void 0?i:null),[i,a]));let $=Fe(t,l),{collection:u,selectionManager:b}=$,f=!!(o!=null&&o.useDraggableCollectionState),g=!!(o!=null&&o.useDroppableCollectionState),{direction:m}=we(),{disabledBehavior:x,disabledKeys:v}=b,P=Oe({usage:"search",sensitivity:"base"}),{isVirtualized:C,layoutDelegate:E,dropTargetDelegate:D,CollectionRoot:y}=d.useContext(z),p=d.useMemo(()=>e.keyboardDelegate||new _e({collection:u,collator:P,ref:a,disabledKeys:v,disabledBehavior:x,layout:n,orientation:c,direction:m,layoutDelegate:E}),[u,P,a,x,v,c,m,e.keyboardDelegate,n,E]),{listBoxProps:B}=Re({...e,shouldSelectOnPressUp:f||e.shouldSelectOnPressUp,keyboardDelegate:p,isVirtualized:C},$,a);d.useRef(f),d.useRef(g),d.useEffect(()=>{},[f,g]);let F,S,k,w=!1,N=null,V=d.useRef(null);if(f&&o){F=o.useDraggableCollectionState({collection:u,selectionManager:b,preview:o.renderDragPreview?V:void 0}),o.useDraggableCollection({},F,a);let U=o.DragPreview;N=o.renderDragPreview?s.createElement(U,{ref:V},o.renderDragPreview):null}if(g&&o){S=o.useDroppableCollectionState({collection:u,selectionManager:b});let U=o.dropTargetDelegate||D||new o.ListDropTargetDelegate(u,a,{orientation:c,layout:n,direction:m});k=o.useDroppableCollection({keyboardDelegate:p,dropTargetDelegate:U},S,a),w=S.isDropTarget({type:"root"})}let{focusProps:T,isFocused:I,isFocusVisible:H}=Be(),h=$.collection.size===0,K={isDropTarget:w,isEmpty:h,isFocused:I,isFocusVisible:H,layout:e.layout||"stack",state:$},ie=_({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:K}),j=null;h&&e.renderEmptyState&&(j=s.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(K)));let de=O(e,{global:!0});return s.createElement(Te,null,s.createElement("div",{...M(de,ie,B,T,k==null?void 0:k.collectionProps),ref:a,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":w||void 0,"data-empty":h||void 0,"data-focused":I||void 0,"data-focus-visible":H||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},s.createElement(Z,{values:[[le,e],[L,$],[A,{dragAndDropHooks:o,dragState:F,dropState:S}],[Pe,{elementType:"div"}],[pe,{render:Qe}],[ce,{name:"ListBoxSection",render:Ge}]]},s.createElement(y,{collection:u,scrollRef:a,persistedKeys:be(b,o,S),renderDropIndicator:ee(o,S)})),j,N))}function Ge(t,e,a,l="react-aria-ListBoxSection"){let r=d.useContext(L),{dragAndDropHooks:i,dropState:o}=d.useContext(A),{CollectionBranch:n}=d.useContext(z),[c,$]=fe();var u;let{headingProps:b,groupProps:f}=Ke({heading:$,"aria-label":(u=t["aria-label"])!==null&&u!==void 0?u:void 0}),g=_({defaultClassName:l,className:t.className,style:t.style,values:{}}),m=O(t,{global:!0});return delete m.id,s.createElement("section",{...M(m,g,f),ref:e},s.createElement(he.Provider,{value:{...b,ref:c}},s.createElement(n,{collection:r.collection,parent:a,renderDropIndicator:ee(i,o)})))}const Je=oe("item",function(e,a,l){let r=R(a),i=d.useContext(L),{dragAndDropHooks:o,dragState:n,dropState:c}=d.useContext(A),{optionProps:$,labelProps:u,descriptionProps:b,...f}=We({key:l.key,"aria-label":e==null?void 0:e["aria-label"]},i,r),{hoverProps:g,isHovered:m}=ae({isDisabled:!f.allowsSelection&&!f.hasAction,onHoverStart:l.props.onHoverStart,onHoverChange:l.props.onHoverChange,onHoverEnd:l.props.onHoverEnd}),x=null;n&&o&&(x=o.useDraggableItem({key:l.key},n));let v=null;c&&o&&(v=o.useDroppableItem({target:{type:"item",key:l.key,dropPosition:"on"}},c,r));let P=n&&n.isDragging(l.key),C=_({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...f,isHovered:m,selectionMode:i.selectionManager.selectionMode,selectionBehavior:i.selectionManager.selectionBehavior,allowsDragging:!!n,isDragging:P,isDropTarget:v==null?void 0:v.isDropTarget}});d.useEffect(()=>{l.textValue},[l.textValue]);let E=e.href?"a":"div",D=O(e,{global:!0});return delete D.id,delete D.onClick,s.createElement(E,{...M(D,C,$,g,x==null?void 0:x.dragProps,v==null?void 0:v.dropProps),ref:r,"data-allows-dragging":!!n||void 0,"data-selected":f.isSelected||void 0,"data-disabled":f.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":f.isFocused||void 0,"data-focus-visible":f.isFocusVisible||void 0,"data-pressed":f.isPressed||void 0,"data-dragging":P||void 0,"data-drop-target":(v==null?void 0:v.isDropTarget)||void 0,"data-selection-mode":i.selectionManager.selectionMode==="none"?void 0:i.selectionManager.selectionMode},s.createElement(Z,{values:[[De,{slots:{[$e]:u,label:u,description:b}}]]},C.children))});function Qe(t,e){e=R(e);let{dragAndDropHooks:a,dropState:l}=d.useContext(A),{dropIndicatorProps:r,isHidden:i,isDropTarget:o}=a.useDropIndicator(t,l,e);return i?null:s.createElement(Ye,{...t,dropIndicatorProps:r,isDropTarget:o,ref:e})}function Xe(t,e){let{dropIndicatorProps:a,isDropTarget:l,...r}=t,i=_({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:l}});return s.createElement("div",{...a,...i,role:"option",ref:e,"data-drop-target":l||void 0})}const Ye=d.forwardRef(Xe);oe("loader",function(e,a,l){let r=d.useContext(L),{isLoading:i,onLoadMore:o,scrollOffset:n,...c}=e,$=d.useRef(null),u=d.useMemo(()=>({onLoadMore:o,collection:r==null?void 0:r.collection,sentinelRef:$,scrollOffset:n}),[o,n,r==null?void 0:r.collection]);ve(u,$);let b=_({...c,id:void 0,children:l.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:null}),f={tabIndex:-1};return s.createElement(s.Fragment,null,s.createElement("div",{style:{position:"relative",width:0,height:0},inert:Me(!0)},s.createElement("div",{"data-testid":"loadMoreSentinel",ref:$,style:{position:"absolute",height:1,width:1}})),i&&b.children&&s.createElement("div",{...M(O(e,{global:!0}),f),...b,role:"option",ref:a},b.children))});const Ze="flow--options--popover",eo="flow--options",Q={popover:Ze,options:eo},oo=Y("Options",t=>{const{className:e,children:a,controller:l,renderEmptyState:r,onAction:i,...o}=t,n=X(Q.options,e);return q.jsx(ne,{className:Q.popover,controller:l,...o,children:q.jsx(je,{onAction:i,className:n,renderEmptyState:r,children:a})})});oo.__docgenInfo={description:"",methods:[],displayName:"Options",props:{controller:{required:!0,tsType:{name:"OverlayController"},description:""}},composes:["Pick","PopoverProps"]};const to="flow--option",ao={option:to},lo=Y("Option",t=>{const{className:e,children:a,textValue:l=se(a),value:r=l,ref:i,...o}=t,n=X(ao.option,e),c=d.Children.count(a)>=1;return d.createElement(Je,{className:n,ref:i,...o,textValue:l,id:r,key:r},c?a:l)});lo.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Option"};export{le as $,lo as O,L as a,oo as b,W as c,ze as d};
