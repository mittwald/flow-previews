import{r as f,j as n}from"./iframe-XxUhdOIM.js";import{f as U,P as _}from"./flowComponent-CoC0P7KZ.js";import{b as k}from"./utils-BCq0Cvc3.js";import{u as I}from"./useFieldComponent-DmQ0NGCO.js";import{c as v}from"./clsx-B-dksMZM.js";import{u as Z}from"./useControlledHostValueProps-CthJo39J.js";import{F as q}from"./FieldDescription-Czgw_F0J.js";import{$ as B}from"./useLocalizedStringFormatter-C41xTvax.js";import{$ as G,a as J}from"./TextField-CDsZNH3S.js";const K="flow--text-area--input",O="flow--text-area--horizontal-resize",Q="flow--text-area--vertical-resize",W="flow--text-area--resize",c={input:K,horizontalResize:O,verticalResize:Q,resize:W},X={"de-DE":{"textArea.characters":(e,a)=>`${a.select({0:()=>`${e.count}`,other:()=>`${e.count}/${e.maxCount}`},e.maxCount)} Zeichen`},"en-US":{"textArea.characters":(e,a)=>`${a.select({0:()=>`${e.count}`,other:()=>`${e.count}/${e.maxCount}`},e.maxCount)} characters`}},Y=U("TextArea",e=>{const{children:a,placeholder:$,rows:s=5,autoResizeMaxRows:h=s,ref:g,allowVerticalResize:R,allowHorizontalResize:b,showCharacterCount:d,className:H,...E}=Z(e),[j,y]=f.useState(e.defaultValue?.length??e.value?.length??0),{FieldErrorView:L,FieldErrorCaptureContext:N,fieldPropsContext:A,fieldProps:m}=I(e);let{allowResize:o}=e;R?o="vertical":b&&(o="horizontal");const P=v(m.className,H),F=v(c.input,typeof o=="boolean"&&o?c.resize:null,o==="horizontal"?c.horizontalResize:o==="vertical"?c.verticalResize:null),M=t=>{d&&y(t.length),e.onChange&&e.onChange(t)},D=B(X).format("textArea.characters",{count:j,maxCount:e.maxLength??0}),r=k(g),x=t=>`calc(var(--line-height--m) * ${t} + (var(--form-control--padding-y) * 2))`,[l,T]=f.useState(!1),u=s!==h,p=o&&(!u||u&&l);f.useEffect(()=>{const t=r.current;if(!t)return;const S=t.offsetHeight;let i=!1;const w=()=>{i=!0},z=()=>{if(!i||l)return;t.offsetHeight!==S&&(T(!0),i=!1)},C=()=>{i=!1};return window.addEventListener("mousedown",w),window.addEventListener("mousemove",z),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousedown",w),window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",C)}},[l]);const V=()=>{if(r.current&&u&&!p){r.current.style.height="0px";const t=r.current.scrollHeight;r.current.style.height=t+2+"px"}};return n.jsx(G,{...E,...m,className:P,onChange:M,children:n.jsxs(_,{props:A,children:[n.jsx(N,{children:a}),n.jsx(J,{rows:s,"aria-hidden":e["aria-hidden"],placeholder:$,className:F,ref:r,onChange:V,style:{minHeight:x(s),maxHeight:p?void 0:x(h)}}),d&&n.jsx(q,{children:D}),n.jsx(L,{})]})})});Y.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TextArea"};export{Y as T};
