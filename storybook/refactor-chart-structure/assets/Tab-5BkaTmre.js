import{r as u,R as m,j as c}from"./iframe-B14Hztna.js";import{A as T,f as q,k as _,z as K,P as U}from"./PropsContextProvider-uadcFCMp.js";import{a as G,C as J,M as Q}from"./ContextMenuContent-DaF-KKJ0.js";import{B as X}from"./Button-CgtdFPzc.js";import{N as Y}from"./IconWarning-EXdx-O5E.js";import{c as h}from"./clsx-B-dksMZM.js";import{T as Z}from"./Text-CvN8mc0t.js";import{A as F}from"./Activity-t8LUmqze.js";import{$ as O,c as ee,b as te}from"./Collection-fH4Kmtgq.js";import{b as j,a as w,e as L,$ as se,c as ae}from"./utils-DoVwnhJ7.js";import{$ as ne,b as ie,c as oe}from"./CollectionBuilder-bLuJ-4e5.js";import{b as le}from"./Hidden-DEGhv2S1.js";import{$ as v,d as re}from"./mergeRefs-Bv4UzjNV.js";import{$ as I}from"./filterDOMProps-CeZl_uWj.js";import{$ as E}from"./inertValue-CBQxRrkj.js";import{$ as R}from"./useLabel-BQ9idzkA.js";import{$ as de}from"./useHasTabbableChild-cq5wM2f4.js";import{b as ce}from"./usePress-CIDHtETH.js";import{$ as ue}from"./useFocusable-qJIKezDE.js";import{d as fe,a as be}from"./SelectionManager-DXvn-F5v.js";import{$ as me}from"./context-ClRpg4Pi.js";import{a as D,$ as $e}from"./useFocusRing-BniRYtyP.js";import{$ as pe}from"./useSingleSelectListState-DOxZk5sv.js";const k=new WeakMap;function S(s,e,t){return s?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${k.get(s)}-${t}-${e}`):""}function xe(s,e,t){let{key:a,isDisabled:n,shouldSelectOnPressUp:r}=s,{selectionManager:o,selectedKey:i}=e,l=a===i,d=n||e.isDisabled||e.selectionManager.isDisabled(a),{itemProps:f,isPressed:b}=fe({selectionManager:o,key:a,ref:t,isDisabled:d,shouldSelectOnPressUp:r,linkBehavior:"selection"}),$=S(e,a,"tab"),y=S(e,a,"tabpanel"),{tabIndex:g}=f,p=e.collection.getItem(a),M=I(p==null?void 0:p.props,{labelable:!0});delete M.id;let H=ce(p==null?void 0:p.props),{focusableProps:z}=ue({isDisabled:d},t);return{tabProps:v(M,z,H,f,{id:$,"aria-selected":l,"aria-disabled":d||void 0,"aria-controls":l?y:void 0,tabIndex:d?void 0:g,role:"tab"}),isSelected:l,isDisabled:d,isPressed:b}}function he(s,e,t){let a=de(t)?void 0:0;var n;const r=S(e,(n=s.id)!==null&&n!==void 0?n:e==null?void 0:e.selectedKey,"tabpanel"),o=R({...s,id:r,"aria-labelledby":S(e,e==null?void 0:e.selectedKey,"tab")});return{tabPanelProps:v(o,{tabIndex:a,role:"tabpanel","aria-describedby":s["aria-describedby"],"aria-details":s["aria-details"]})}}class ve{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,a;return this.disabledKeys.has(e)||!!(!((a=this.collection.getItem(e))===null||a===void 0||(t=a.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let t=e;do t=this.collection.getKeyAfter(t),t==null&&(t=this.collection.getFirstKey());while(t!=null&&this.isDisabled(t));return t}getPreviousKey(e){let t=e;do t=this.collection.getKeyBefore(t),t==null&&(t=this.collection.getLastKey());while(t!=null&&this.isDisabled(t));return t}constructor(e,t,a,n=new Set){this.collection=e,this.flipDirection=t==="rtl"&&a==="horizontal",this.disabledKeys=n,this.tabDirection=a==="horizontal"}}function ye(s,e,t){let{orientation:a="horizontal",keyboardActivation:n="automatic"}=s,{collection:r,selectionManager:o,disabledKeys:i}=e,{direction:l}=me(),d=u.useMemo(()=>new ve(r,l,a,i),[r,i,a,l]),{collectionProps:f}=be({ref:t,selectionManager:o,keyboardDelegate:d,selectOnFocus:n==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),b=re();k.set(e,b);let $=R({...s,id:b});return{tabListProps:{...v(f,$),role:"tablist","aria-orientation":a,tabIndex:void 0}}}function ge(s){var e,t;let a=pe({...s,onSelectionChange:s.onSelectionChange?l=>{var d;l!=null&&((d=s.onSelectionChange)===null||d===void 0||d.call(s,l))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=s.defaultSelectedKey)!==null&&e!==void 0?e:A(s.collection,s.disabledKeys?new Set(s.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:n,collection:r,selectedKey:o}=a,i=u.useRef(o);return u.useEffect(()=>{let l=o;s.selectedKey==null&&(n.isEmpty||l==null||!r.getItem(l))&&(l=A(r,a.disabledKeys),l!=null&&n.setSelectedKeys([l])),(l!=null&&n.focusedKey==null||!n.isFocused&&l!==i.current)&&n.setFocusedKey(l),i.current=l}),{...a,isDisabled:s.isDisabled||!1}}function A(s,e){let t=null;if(s){var a,n,r,o;for(t=s.getFirstKey();t!=null&&(e.has(t)||!((n=s.getItem(t))===null||n===void 0||(a=n.props)===null||a===void 0)&&a.isDisabled)&&t!==s.getLastKey();)t=s.getKeyAfter(t);t!=null&&(e.has(t)||!((o=s.getItem(t))===null||o===void 0||(r=o.props)===null||r===void 0)&&r.isDisabled)&&t===s.getLastKey()&&(t=s.getFirstKey())}return t}const N=u.createContext(null),x=u.createContext(null),Pe=u.forwardRef(function(e,t){[e,t]=se(e,t,N);let{children:a,orientation:n="horizontal"}=e;return a=u.useMemo(()=>typeof a=="function"?a({orientation:n,defaultChildren:null}):a,[a,n]),m.createElement(ie,{content:a},r=>m.createElement(Ke,{props:e,collection:r,tabsRef:t}))});function Ke({props:s,tabsRef:e,collection:t}){let{orientation:a="horizontal"}=s,n=ge({...s,collection:t,children:void 0}),{focusProps:r,isFocused:o,isFocusVisible:i}=D({within:!0}),l=u.useMemo(()=>({orientation:a,isFocusWithin:o,isFocusVisible:i}),[a,o,i]),d=w({...s,defaultClassName:"react-aria-Tabs",values:l});return m.createElement("div",{...I(s),...r,...d,ref:e,slot:s.slot||void 0,"data-focused":o||void 0,"data-orientation":a,"data-focus-visible":i||void 0,"data-disabled":n.isDisabled||void 0},m.createElement(L,{values:[[N,s],[x,n]]},d.children))}const Ce=u.forwardRef(function(e,t){return u.useContext(x)?m.createElement(Te,{props:e,forwardedRef:t}):m.createElement(oe,e)});function Te({props:s,forwardedRef:e}){let t=u.useContext(x),{CollectionRoot:a}=u.useContext(O),{orientation:n="horizontal",keyboardActivation:r="automatic"}=ae(N),o=j(e),{tabListProps:i}=ye({...s,orientation:n,keyboardActivation:r},t,o),l=w({...s,children:null,defaultClassName:"react-aria-TabList",values:{orientation:n,state:t}}),d=I(s);return delete d.id,m.createElement("div",{...d,...i,ref:o,...l,"data-orientation":n||void 0},m.createElement(a,{collection:t.collection,persistedKeys:te(t.selectionManager.focusedKey)}))}const Se=ne("item",(s,e,t)=>{let a=u.useContext(x),n=j(e),{tabProps:r,isSelected:o,isDisabled:i,isPressed:l}=xe({key:t.key,...s},a,n),{focusProps:d,isFocused:f,isFocusVisible:b}=D(),{hoverProps:$,isHovered:y}=$e({isDisabled:i,onHoverStart:s.onHoverStart,onHoverEnd:s.onHoverEnd,onHoverChange:s.onHoverChange}),g=w({...s,id:void 0,children:t.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:o,isDisabled:i,isFocused:f,isFocusVisible:b,isPressed:l,isHovered:y}}),p=t.props.href?"a":"div";return m.createElement(p,{...v(r,d,$,g),ref:n,"data-selected":o||void 0,"data-disabled":i||void 0,"data-focused":f||void 0,"data-focus-visible":b||void 0,"data-pressed":l||void 0,"data-hovered":y||void 0},g.children)}),we=le(function(e,t){const a=u.useContext(x);let n=j(t),{tabPanelProps:r}=he(e,a,n),{focusProps:o,isFocused:i,isFocusVisible:l}=D(),d=a.selectedKey===e.id,f=w({...e,defaultClassName:"react-aria-TabPanel",values:{isFocused:i,isFocusVisible:l,isInert:E(!d),state:a}});if(!d&&!e.shouldForceMount)return null;let b=I(e);delete b.id;let $=d?v(b,r,o,f):f;return m.createElement("div",{...$,ref:n,"data-focused":i||void 0,"data-focus-visible":l||void 0,inert:E(!d),"data-inert":d?void 0:"true"},m.createElement(L,{values:[[N,null],[x,null]]},m.createElement(O.Provider,{value:ee},f.children)))}),Ie="flow--tabs--tab-list",Ne="flow--tabs--tab-list--context-menu-button",je="flow--tabs--tab-list--titles",De="flow--tabs--tab-list--collapsed",P={tabList:Ie,contextMenuButton:Ne,titles:je,collapsed:De};function Me(s,e){var t=u.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(a){var n=t.value;n!==a&&(t.value=a,t.callback(a,n))}}}})[0];return t.callback=e,t.facade}const Fe=()=>{const s=u.useRef(null),[e,t]=u.useState(!1),a=Me(null,i=>{o(),r(i)}),n=([i])=>{i&&t(!i.isIntersecting)},r=(i=a.current)=>{if(i&&i instanceof Element){const l=new IntersectionObserver(n,{root:i.parentElement,threshold:1});s.current=l,l.observe(i)}},o=()=>{var i;(i=s.current)==null||i.disconnect()};return u.useEffect(()=>(r(),o),[s.current]),{ref:a,isOverflowing:e}},Ee="flow--tabs--tab-title",Ae="flow--tabs--tab-title--text",Oe="flow--tabs--tab-title--menu-item",C={tabTitle:Ee,text:Ae,menuItem:Oe},W=s=>{const{className:e,...t}=s,a=h(e,C.tabTitle);return c.jsx("div",{...t,className:a,"data-selected":!0,children:c.jsx(T,{id:"ActiveTitle"})})};W.__docgenInfo={description:"",methods:[],displayName:"TabTitleCollapsed",props:{id:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithClassName"]};const B=s=>{const{selection:e,disabledKeys:t,onContextMenuSelectionChange:a}=s,n=u.useId(),r=Fe(),o=r.isOverflowing,i=h(P.tabList,o&&P.collapsed),l=$=>{a($)},d=c.jsx(Ce,{className:P.titles,ref:r.ref,children:c.jsx(T,{id:"Titles"})}),f=o&&c.jsx(W,{id:n}),b=o&&c.jsxs(G,{children:[c.jsx(X,{variant:"soft",className:P.contextMenuButton,color:"secondary","aria-labelledby":n,children:c.jsx(Y,{})}),c.jsx(J,{disabledKeys:t,selectedKeys:e?[e]:void 0,selectionMode:"navigation",onAction:$=>l($),children:c.jsx(T,{id:"ContextMenuItems"})})]});return c.jsxs("div",{className:i,children:[d,f,b]})};B.__docgenInfo={description:"",methods:[],displayName:"TabList",props:{selection:{required:!0,tsType:{name:"union",raw:"Aria.Key | undefined",elements:[{name:"Aria.Key"},{name:"undefined"}]},description:""},onContextMenuSelectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Aria.Key) => void",signature:{arguments:[{type:{name:"Aria.Key"},name:"key"}],return:{name:"void"}}},description:""},disabledKeys:{required:!1,tsType:{name:"Iterable",elements:[{name:"Aria.Key"}],raw:"Iterable<Aria.Key>"},description:""}}};const Le="flow--tabs",Re={tabs:Le},ke=q("Tabs",s=>{const{children:e,className:t,defaultSelectedKey:a,disabledKeys:n,ref:r,onSelectionChange:o,...i}=s,l=h(Re.tabs,t),[d,f]=u.useState(a);return c.jsxs(_,{children:[e,c.jsxs(Pe,{slot:null,className:l,...i,selectedKey:d,onSelectionChange:b=>{f(b),o&&o(b)},disabledKeys:n,ref:r,children:[c.jsx(B,{selection:d,onContextMenuSelectionChange:b=>{f(b),o&&o(b)},disabledKeys:n}),c.jsx(T,{id:"Panels"})]})]})});ke.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tabs"};const V=u.createContext({id:"undefined"}),We=()=>u.useContext(V),Be=V.Provider,Ve=s=>{const{children:e,className:t,...a}=s,{id:n}=We(),r=h(C.tabTitle,t);return c.jsxs(c.Fragment,{children:[c.jsx(K,{id:"Titles",children:c.jsx(Se,{...a,id:n,className:r,children:o=>c.jsxs(c.Fragment,{children:[c.jsx(Z,{emulateBoldWidth:!0,children:c.jsx("span",{className:C.text,children:e})}),c.jsx(K,{id:"ActiveTitle",children:o.isSelected&&e})]})})}),c.jsx(K,{id:"ContextMenuItems",children:c.jsx(Q,{className:C.menuItem,id:n,children:e})})]})};Ve.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TabTitle",composes:["Omit","PropsWithChildren"]};const He="flow--tabs--tab--tab-panel",ze={tabPanel:He},qe=s=>{const{children:e,className:t,id:a,...n}=s,r=h(ze.tabPanel,t),o=u.useId(),i=a??o,l=d=>{const f=d.state.selectedKey===i,b={Content:{wrapWith:c.jsx(F,{isActive:f})},Section:{wrapWith:c.jsx(F,{isActive:f})}};return c.jsx(U,{props:b,dependencies:[f,e],children:e})};return c.jsx(K,{id:"Panels",children:c.jsx(Be,{value:{id:i},children:c.jsx(we,{className:r,shouldForceMount:!0,id:i,...n,children:l})})})};qe.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"Tab",composes:["Omit","PropsWithChildren"]};export{ke as T,qe as a,Ve as b};
