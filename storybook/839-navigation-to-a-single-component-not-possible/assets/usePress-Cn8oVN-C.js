import{n as ce,i as B,j as de,o as ge,m as I,p as te,d as x,q as pe,r as ve,s as z,c as N,g as ye}from"./useFocusRing-DdBFev_0.js";import{r as $,R as Te}from"./index-Cs7sjTYM.js";import{b as L,a as re,f as $e}from"./index-j_f0pOtZ.js";const be=$.createContext({isNative:!0,open:Pe,useHref:t=>t});function ne(){return $.useContext(be)}function De(t,r){let a=t.getAttribute("target");return(!a||a==="_self")&&t.origin===location.origin&&!t.hasAttribute("download")&&!r.metaKey&&!r.ctrlKey&&!r.altKey&&!r.shiftKey}function C(t,r,a=!0){var s,u;let{metaKey:g,ctrlKey:f,altKey:p,shiftKey:v}=r;ce()&&(!((u=window.event)===null||u===void 0||(s=u.type)===null||s===void 0)&&s.startsWith("key"))&&t.target==="_blank"&&(B()?g=!0:f=!0);let b=de()&&B()&&!ge()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:g,ctrlKey:f,altKey:p,shiftKey:v}):new MouseEvent("click",{metaKey:g,ctrlKey:f,altKey:p,shiftKey:v,bubbles:!0,cancelable:!0});C.isOpening=a,I(t),t.dispatchEvent(b),C.isOpening=!1}C.isOpening=!1;function he(t,r){if(t instanceof HTMLAnchorElement)r(t);else if(t.hasAttribute("data-href")){let a=document.createElement("a");a.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(a.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(a.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(a.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(a.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(a.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(a),r(a),t.removeChild(a)}}function Pe(t,r){he(t,a=>C(a,r))}function Ue(t){let r=ne();var a;const s=r.useHref((a=t.href)!==null&&a!==void 0?a:"");return{"data-href":t.href?s:void 0,"data-target":t.target,"data-rel":t.rel,"data-download":t.download,"data-ping":t.ping,"data-referrer-policy":t.referrerPolicy}}function Xe(t){let r=ne();var a;const s=r.useHref((a=t==null?void 0:t.href)!==null&&a!==void 0?a:"");return{href:t!=null&&t.href?s:void 0,target:t==null?void 0:t.target,rel:t==null?void 0:t.rel,download:t==null?void 0:t.download,ping:t==null?void 0:t.ping,referrerPolicy:t==null?void 0:t.referrerPolicy}}function me(){let t=$.useRef(new Map),r=$.useCallback((u,g,f,p)=>{let v=p!=null&&p.once?(...b)=>{t.current.delete(f),f(...b)}:f;t.current.set(f,{type:g,eventTarget:u,fn:v,options:p}),u.addEventListener(g,f,p)},[]),a=$.useCallback((u,g,f,p)=>{var v;let b=((v=t.current.get(f))===null||v===void 0?void 0:v.fn)||f;u.removeEventListener(g,b,p),t.current.delete(f)},[]),s=$.useCallback(()=>{t.current.forEach((u,g)=>{a(u.eventTarget,u.type,g,u.options)})},[a]);return $.useEffect(()=>s,[s]),{addGlobalListener:r,removeGlobalListener:a,removeAllGlobalListeners:s}}let A="default",V="",G=new WeakMap;function q(t){if(te()){if(A==="default"){const r=x(t);V=r.documentElement.style.webkitUserSelect,r.documentElement.style.webkitUserSelect="none"}A="disabled"}else(t instanceof HTMLElement||t instanceof SVGElement)&&(G.set(t,t.style.userSelect),t.style.userSelect="none")}function X(t){if(te()){if(A!=="disabled")return;A="restoring",setTimeout(()=>{pe(()=>{if(A==="restoring"){const r=x(t);r.documentElement.style.webkitUserSelect==="none"&&(r.documentElement.style.webkitUserSelect=V||""),V="",A="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&G.has(t)){let r=G.get(t);t.style.userSelect==="none"&&(t.style.userSelect=r),t.getAttribute("style")===""&&t.removeAttribute("style"),G.delete(t)}}const ae=Te.createContext({register:()=>{}});ae.displayName="PressResponderContext";function Ee(t,r){return r.get?r.get.call(t):r.value}function ie(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}function Ke(t,r){var a=ie(t,r,"get");return Ee(t,a)}function Se(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function we(t,r,a){Se(t,r),r.set(t,a)}function xe(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}function J(t,r,a){var s=ie(t,r,"set");return xe(t,s,a),a}function ke(t){let r=$.useContext(ae);if(r){let{register:a,...s}=r;t=re(s,t),a()}return ye(r,t.ref),t}var Y=new WeakMap;class H{continuePropagation(){J(this,Y,!1)}get shouldStopPropagation(){return Ke(this,Y)}constructor(r,a,s,u){we(this,Y,{writable:!0,value:void 0}),J(this,Y,!0);var g;let f=(g=u==null?void 0:u.target)!==null&&g!==void 0?g:s.currentTarget;const p=f==null?void 0:f.getBoundingClientRect();let v,b=0,T,D=null;s.clientX!=null&&s.clientY!=null&&(T=s.clientX,D=s.clientY),p&&(T!=null&&D!=null?(v=T-p.left,b=D-p.top):(v=p.width/2,b=p.height/2)),this.type=r,this.pointerType=a,this.target=s.currentTarget,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.x=v,this.y=b}}const Q=Symbol("linkClicked");function Ye(t){let{onPress:r,onPressChange:a,onPressStart:s,onPressEnd:u,onPressUp:g,isDisabled:f,isPressed:p,preventFocusOnPress:v,shouldCancelOnPointerExit:b,allowTextSelectionOnPress:T,ref:D,...le}=ke(t),[ue,W]=$.useState(!1),k=$.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:K,removeAllGlobalListeners:_}=me(),P=L((e,l)=>{let h=k.current;if(f||h.didFirePressStart)return!1;let o=!0;if(h.isTriggeringEvent=!0,s){let d=new H("pressstart",l,e);s(d),o=d.shouldStopPropagation}return a&&a(!0),h.isTriggeringEvent=!1,h.didFirePressStart=!0,W(!0),o}),y=L((e,l,h=!0)=>{let o=k.current;if(!o.didFirePressStart)return!1;o.ignoreClickAfterPress=!0,o.didFirePressStart=!1,o.isTriggeringEvent=!0;let d=!0;if(u){let n=new H("pressend",l,e);u(n),d=n.shouldStopPropagation}if(a&&a(!1),W(!1),r&&h&&!f){let n=new H("press",l,e);r(n),d&&(d=n.shouldStopPropagation)}return o.isTriggeringEvent=!1,d}),O=L((e,l)=>{let h=k.current;if(f)return!1;if(g){h.isTriggeringEvent=!0;let o=new H("pressup",l,e);return g(o),h.isTriggeringEvent=!1,o.shouldStopPropagation}return!0}),w=L(e=>{let l=k.current;l.isPressed&&l.target&&(l.isOverTarget&&l.pointerType!=null&&y(E(l.target,e),l.pointerType,!1),l.isPressed=!1,l.isOverTarget=!1,l.activePointerId=null,l.pointerType=null,_(),T||X(l.target))}),U=L(e=>{b&&w(e)}),fe=$.useMemo(()=>{let e=k.current,l={onKeyDown(o){if(R(o.nativeEvent,o.currentTarget)&&o.currentTarget.contains(o.target)){var d;ee(o.target,o.key)&&o.preventDefault();let n=!0;if(!e.isPressed&&!o.repeat){e.target=o.currentTarget,e.isPressed=!0,n=P(o,"keyboard");let c=o.currentTarget,i=m=>{R(m,c)&&!m.repeat&&c.contains(m.target)&&e.target&&O(E(e.target,m),"keyboard")};K(x(o.currentTarget),"keyup",$e(i,h),!0)}n&&o.stopPropagation(),o.metaKey&&B()&&((d=e.metaKeyEvents)===null||d===void 0||d.set(o.key,o.nativeEvent))}else o.key==="Meta"&&(e.metaKeyEvents=new Map)},onClick(o){if(!(o&&!o.currentTarget.contains(o.target))&&o&&o.button===0&&!e.isTriggeringEvent&&!C.isOpening){let d=!0;if(f&&o.preventDefault(),!e.ignoreClickAfterPress&&!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType==="virtual"||z(o.nativeEvent))){!f&&!v&&I(o.currentTarget);let n=P(o,"virtual"),c=O(o,"virtual"),i=y(o,"virtual");d=n&&c&&i}e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1,d&&o.stopPropagation()}}},h=o=>{var d;if(e.isPressed&&e.target&&R(o,e.target)){var n;ee(o.target,o.key)&&o.preventDefault();let i=o.target;y(E(e.target,o),"keyboard",e.target.contains(i)),_(),o.key!=="Enter"&&j(e.target)&&e.target.contains(i)&&!o[Q]&&(o[Q]=!0,C(e.target,o,!1)),e.isPressed=!1,(n=e.metaKeyEvents)===null||n===void 0||n.delete(o.key)}else if(o.key==="Meta"&&(!((d=e.metaKeyEvents)===null||d===void 0)&&d.size)){var c;let i=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let m of i.values())(c=e.target)===null||c===void 0||c.dispatchEvent(new KeyboardEvent("keyup",m))}};if(typeof PointerEvent<"u"){l.onPointerDown=i=>{if(i.button!==0||!i.currentTarget.contains(i.target))return;if(ve(i.nativeEvent)){e.pointerType="virtual";return}F(i.currentTarget)&&i.preventDefault(),e.pointerType=i.pointerType;let m=!0;e.isPressed||(e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=i.pointerId,e.target=i.currentTarget,!f&&!v&&I(i.currentTarget),T||q(e.target),m=P(i,e.pointerType),K(x(i.currentTarget),"pointermove",o,!1),K(x(i.currentTarget),"pointerup",d,!1),K(x(i.currentTarget),"pointercancel",c,!1)),m&&i.stopPropagation()},l.onMouseDown=i=>{i.currentTarget.contains(i.target)&&i.button===0&&(F(i.currentTarget)&&i.preventDefault(),i.stopPropagation())},l.onPointerUp=i=>{!i.currentTarget.contains(i.target)||e.pointerType==="virtual"||i.button===0&&M(i,i.currentTarget)&&O(i,e.pointerType||i.pointerType)};let o=i=>{i.pointerId===e.activePointerId&&(e.target&&M(i,e.target)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,P(E(e.target,i),e.pointerType)):e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,y(E(e.target,i),e.pointerType,!1),U(i)))},d=i=>{i.pointerId===e.activePointerId&&e.isPressed&&i.button===0&&e.target&&(M(i,e.target)&&e.pointerType!=null?y(E(e.target,i),e.pointerType):e.isOverTarget&&e.pointerType!=null&&y(E(e.target,i),e.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,e.pointerType=null,_(),T||X(e.target),"ontouchend"in e.target&&i.pointerType!=="mouse"&&K(e.target,"touchend",n,{once:!0}))},n=i=>{oe(i.target)&&i.preventDefault()},c=i=>{w(i)};l.onDragStart=i=>{i.currentTarget.contains(i.target)&&w(i)}}else{l.onMouseDown=n=>{if(n.button!==0||!n.currentTarget.contains(n.target))return;if(F(n.currentTarget)&&n.preventDefault(),e.ignoreEmulatedMouseEvents){n.stopPropagation();return}e.isPressed=!0,e.isOverTarget=!0,e.target=n.currentTarget,e.pointerType=z(n.nativeEvent)?"virtual":"mouse",!f&&!v&&I(n.currentTarget),P(n,e.pointerType)&&n.stopPropagation(),K(x(n.currentTarget),"mouseup",o,!1)},l.onMouseEnter=n=>{if(!n.currentTarget.contains(n.target))return;let c=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!0,c=P(n,e.pointerType)),c&&n.stopPropagation()},l.onMouseLeave=n=>{if(!n.currentTarget.contains(n.target))return;let c=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!1,c=y(n,e.pointerType,!1),U(n)),c&&n.stopPropagation()},l.onMouseUp=n=>{n.currentTarget.contains(n.target)&&!e.ignoreEmulatedMouseEvents&&n.button===0&&O(n,e.pointerType||"mouse")};let o=n=>{if(n.button===0){if(e.isPressed=!1,_(),e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&M(n,e.target)&&e.pointerType!=null?y(E(e.target,n),e.pointerType):e.target&&e.isOverTarget&&e.pointerType!=null&&y(E(e.target,n),e.pointerType,!1),e.isOverTarget=!1}};l.onTouchStart=n=>{if(!n.currentTarget.contains(n.target))return;let c=_e(n.nativeEvent);if(!c)return;e.activePointerId=c.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=n.currentTarget,e.pointerType="touch",!f&&!v&&I(n.currentTarget),T||q(e.target),P(S(e.target,n),e.pointerType)&&n.stopPropagation(),K(N(n.currentTarget),"scroll",d,!0)},l.onTouchMove=n=>{if(!n.currentTarget.contains(n.target))return;if(!e.isPressed){n.stopPropagation();return}let c=Z(n.nativeEvent,e.activePointerId),i=!0;c&&M(c,n.currentTarget)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,i=P(S(e.target,n),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,i=y(S(e.target,n),e.pointerType,!1),U(S(e.target,n))),i&&n.stopPropagation()},l.onTouchEnd=n=>{if(!n.currentTarget.contains(n.target))return;if(!e.isPressed){n.stopPropagation();return}let c=Z(n.nativeEvent,e.activePointerId),i=!0;c&&M(c,n.currentTarget)&&e.pointerType!=null?(O(S(e.target,n),e.pointerType),i=y(S(e.target,n),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(i=y(S(e.target,n),e.pointerType,!1)),i&&n.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!T&&X(e.target),_()},l.onTouchCancel=n=>{n.currentTarget.contains(n.target)&&(n.stopPropagation(),e.isPressed&&w(S(e.target,n)))};let d=n=>{e.isPressed&&n.target.contains(e.target)&&w({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};l.onDragStart=n=>{n.currentTarget.contains(n.target)&&w(n)}}return l},[K,f,v,_,T,w,U,y,P,O]);return $.useEffect(()=>()=>{var e;T||X((e=k.current.target)!==null&&e!==void 0?e:void 0)},[T]),{isPressed:p||ue,pressProps:re(le,fe)}}function j(t){return t.tagName==="A"&&t.hasAttribute("href")}function R(t,r){const{key:a,code:s}=t,u=r,g=u.getAttribute("role");return(a==="Enter"||a===" "||a==="Spacebar"||s==="Space")&&!(u instanceof N(u).HTMLInputElement&&!se(u,a)||u instanceof N(u).HTMLTextAreaElement||u.isContentEditable)&&!((g==="link"||!g&&j(u))&&a!=="Enter")}function _e(t){const{targetTouches:r}=t;return r.length>0?r[0]:null}function Z(t,r){const a=t.changedTouches;for(let s=0;s<a.length;s++){const u=a[s];if(u.identifier===r)return u}return null}function S(t,r){let a=0,s=0;return r.targetTouches&&r.targetTouches.length===1&&(a=r.targetTouches[0].clientX,s=r.targetTouches[0].clientY),{currentTarget:t,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,clientX:a,clientY:s}}function E(t,r){let a=r.clientX,s=r.clientY;return{currentTarget:t,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,clientX:a,clientY:s}}function Oe(t){let r=0,a=0;return t.width!==void 0?r=t.width/2:t.radiusX!==void 0&&(r=t.radiusX),t.height!==void 0?a=t.height/2:t.radiusY!==void 0&&(a=t.radiusY),{top:t.clientY-a,right:t.clientX+r,bottom:t.clientY+a,left:t.clientX-r}}function Me(t,r){return!(t.left>r.right||r.left>t.right||t.top>r.bottom||r.top>t.bottom)}function M(t,r){let a=r.getBoundingClientRect(),s=Oe(t);return Me(a,s)}function F(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function oe(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!j(t)}function ee(t,r){return t instanceof HTMLInputElement?!se(t,r):oe(t)}const Ae=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function se(t,r){return t.type==="checkbox"||t.type==="radio"?r===" ":Ae.has(t.type)}export{Ye as $,we as _,ne as a,Xe as b,De as c,me as d,X as e,q as f,C as g,ae as h,Ue as i};
