import{r as n,R as c,j as K}from"./iframe-CP5fTbjA.js";import{P as de}from"./Popover-JrRBQobZ.js";import{c as J}from"./clsx-B-dksMZM.js";import{f as Q}from"./flowComponent-CTnt5eSB.js";import{r as ne}from"./IconWarning-YasB_Ei3.js";import{$ as z,a as se}from"./Collection-BOIgwszt.js";import{b as X,a as _,d as Y,e as ce,$ as Z,f as ue}from"./utils-D6GTtcOE.js";import{$ as A,a as fe,b as ee,c as $e,d as pe}from"./DragAndDrop-lPlD-Y_I.js";import{n as be,o as ve,p as me}from"./Dialog-DAzhbt-W.js";import{$ as ge}from"./context-BoN7p6BF.js";import{$ as xe}from"./Separator-CXM6la1d.js";import{a as he}from"./Text-BAGiBnj-.js";import{$ as oe,c as Pe,e as De,f as ye,i as Se}from"./CollectionBuilder-HzejECpA.js";import{f as te,$ as F,g as j,e as Ce}from"./index-hIOjYjaD.js";import{$ as w}from"./filterDOMProps-CghfNOdR.js";import{$ as Ee}from"./inertValue-CprOBwEJ.js";import{b as Fe}from"./usePress-BOoZUp13.js";import{l as ke,k as Me,g as q}from"./useFocus-wlnmJgKA.js";import{c as we,$ as ae,a as Oe}from"./useFocusRing-Cgj30sRP.js";import{d as Ie,$ as _e}from"./SelectionManager-zDFJDssk.js";import{a as Be}from"./Label-CxfqiuLL.js";import{$ as Le,a as Ne}from"./useListState-DkvXWcYC.js";import{$ as Ve}from"./context-pkC0B_Pd.js";import{a as He}from"./useCollator-NOEQaEQX.js";import{a as Ae}from"./FocusScope-OWR7C_89.js";const R=new WeakMap;function Te(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function Ue(t,e){let a=R.get(t);if(!a)throw new Error("Unknown list");return`${a.id}-option-${Te(e)}`}function ze(t,e,a){let o=w(t,{labelable:!0}),r=t.selectionBehavior||"toggle",i=t.linkBehavior||(r==="replace"?"action":"override");r==="toggle"&&i==="action"&&(i="override");let{listProps:l}=be({...t,ref:a,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:i}),{focusWithinProps:d}=we({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),s=te(t.id);R.set(e,{id:s,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:i});let{labelProps:$,fieldProps:p}=Be({...t,id:s,labelElementType:"span"});return{labelProps:$,listBoxProps:F(o,d,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...F(p,l)})}}function Re(t,e,a){var o,r;let{key:i}=t,l=R.get(e);var d;let s=(d=t.isDisabled)!==null&&d!==void 0?d:e.selectionManager.isDisabled(i);var $;let p=($=t.isSelected)!==null&&$!==void 0?$:e.selectionManager.isSelected(i);var b;let u=(b=t.shouldSelectOnPressUp)!==null&&b!==void 0?b:l==null?void 0:l.shouldSelectOnPressUp;var x;let m=(x=t.shouldFocusOnHover)!==null&&x!==void 0?x:l==null?void 0:l.shouldFocusOnHover;var g;let v=(g=t.shouldUseVirtualFocus)!==null&&g!==void 0?g:l==null?void 0:l.shouldUseVirtualFocus;var h;let C=(h=t.isVirtualized)!==null&&h!==void 0?h:l==null?void 0:l.isVirtualized,k=j(),P=j(),y={role:"option","aria-disabled":s||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?p:void 0};ke()&&Me()||(y["aria-label"]=t["aria-label"],y["aria-labelledby"]=k,y["aria-describedby"]=P);let f=e.collection.getItem(i);if(C){let S=Number(f==null?void 0:f.index);y["aria-posinset"]=Number.isNaN(S)?void 0:S+1,y["aria-setsize"]=ve(e.collection)}let D=l!=null&&l.onAction?()=>{var S;return l==null||(S=l.onAction)===null||S===void 0?void 0:S.call(l,i)}:void 0,E=Ue(e,i),{itemProps:O,isPressed:L,isFocused:I,hasAction:T,allowsSelection:N}=Ie({selectionManager:e.selectionManager,key:i,ref:a,shouldSelectOnPressUp:u,allowsDifferentPressOrigin:u&&m,isVirtualized:C,shouldUseVirtualFocus:v,isDisabled:s,onAction:D||!(f==null||(o=f.props)===null||o===void 0)&&o.onAction?Ce(f==null||(r=f.props)===null||r===void 0?void 0:r.onAction,D):void 0,linkBehavior:l==null?void 0:l.linkBehavior,id:E}),{hoverProps:V}=ae({isDisabled:s||!m,onHoverStart(){q()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(i))}}),M=w(f==null?void 0:f.props);delete M.id;let H=Fe(f==null?void 0:f.props);return{optionProps:{...y,...F(M,O,V,H),id:E},labelProps:{id:k},descriptionProps:{id:P},isFocused:I,isFocusVisible:I&&e.selectionManager.isFocused&&q(),isSelected:p,isDisabled:s,isPressed:L,allowsSelection:N,hasAction:T}}function We(t){let{heading:e,"aria-label":a}=t,o=te();return{itemProps:{role:"presentation"},headingProps:e?{id:o,role:"presentation"}:{},groupProps:{role:"group","aria-label":a,"aria-labelledby":e?o:void 0}}}const le=n.createContext(null),B=n.createContext(null),Ke=n.forwardRef(function(e,a){[e,a]=Z(e,a,le);let o=n.useContext(B);return o?c.createElement(re,{state:o,props:e,listBoxRef:a}):c.createElement(De,{content:c.createElement(ye,e)},r=>c.createElement(je,{props:e,listBoxRef:a,collection:r}))});function je({props:t,listBoxRef:e,collection:a}){t={...t,collection:a,children:null,items:null};let{layoutDelegate:o}=n.useContext(z),r=Ne({...t,layoutDelegate:o});return c.createElement(re,{state:r,props:t,listBoxRef:e})}function re({state:t,props:e,listBoxRef:a}){[e,a]=Z(e,a,ge);let{dragAndDropHooks:o,layout:r="stack",orientation:i="vertical",filter:l}=e,d=Le(t,l),{collection:s,selectionManager:$}=d,p=!!(o!=null&&o.useDraggableCollectionState),b=!!(o!=null&&o.useDroppableCollectionState),{direction:u}=Ve(),{disabledBehavior:x,disabledKeys:m}=$,g=He({usage:"search",sensitivity:"base"}),{isVirtualized:v,layoutDelegate:h,dropTargetDelegate:C,CollectionRoot:k}=n.useContext(z),P=n.useMemo(()=>e.keyboardDelegate||new _e({collection:s,collator:g,ref:a,disabledKeys:m,disabledBehavior:x,layout:r,orientation:i,direction:u,layoutDelegate:h}),[s,g,a,x,m,i,u,e.keyboardDelegate,r,h]),{listBoxProps:y}=ze({...e,shouldSelectOnPressUp:p||e.shouldSelectOnPressUp,keyboardDelegate:P,isVirtualized:v},d,a);n.useRef(p),n.useRef(b),n.useEffect(()=>{},[p,b]);let f,D,E,O=!1,L=null,I=n.useRef(null);if(p&&o){f=o.useDraggableCollectionState({collection:s,selectionManager:$,preview:o.renderDragPreview?I:void 0}),o.useDraggableCollection({},f,a);let U=o.DragPreview;L=o.renderDragPreview?c.createElement(U,{ref:I},o.renderDragPreview):null}if(b&&o){D=o.useDroppableCollectionState({collection:s,selectionManager:$});let U=o.dropTargetDelegate||C||new o.ListDropTargetDelegate(s,a,{orientation:i,layout:r,direction:u});E=o.useDroppableCollection({keyboardDelegate:P,dropTargetDelegate:U},D,a),O=D.isDropTarget({type:"root"})}let{focusProps:T,isFocused:N,isFocusVisible:V}=Oe(),M=d.collection.size===0,H={isDropTarget:O,isEmpty:M,isFocused:N,isFocusVisible:V,layout:e.layout||"stack",state:d},S=_({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:H}),W=null;M&&e.renderEmptyState&&(W=c.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(H)));let ie=w(e,{global:!0});return c.createElement(Ae,null,c.createElement("div",{...F(ie,S,y,T,E==null?void 0:E.collectionProps),ref:a,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":O||void 0,"data-empty":M||void 0,"data-focused":N||void 0,"data-focus-visible":V||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},c.createElement(Y,{values:[[le,e],[B,d],[A,{dragAndDropHooks:o,dragState:f,dropState:D}],[xe,{elementType:"div"}],[fe,{render:Je}],[se,{name:"ListBoxSection",render:qe}]]},c.createElement(k,{collection:s,scrollRef:a,persistedKeys:$e($,o,D),renderDropIndicator:ee(o,D)})),W,L))}function qe(t,e,a,o="react-aria-ListBoxSection"){let r=n.useContext(B),{dragAndDropHooks:i,dropState:l}=n.useContext(A),{CollectionBranch:d}=n.useContext(z),[s,$]=ue();var p;let{headingProps:b,groupProps:u}=We({heading:$,"aria-label":(p=t["aria-label"])!==null&&p!==void 0?p:void 0}),x=_({defaultClassName:o,className:t.className,style:t.style,values:{}}),m=w(t,{global:!0});return delete m.id,c.createElement("section",{...F(m,x,u),ref:e},c.createElement(me.Provider,{value:{...b,ref:s}},c.createElement(d,{collection:r.collection,parent:a,renderDropIndicator:ee(i,l)})))}const Ge=oe(Pe,function(e,a,o){let r=X(a),i=n.useContext(B),{dragAndDropHooks:l,dragState:d,dropState:s}=n.useContext(A),{optionProps:$,labelProps:p,descriptionProps:b,...u}=Re({key:o.key,"aria-label":e==null?void 0:e["aria-label"]},i,r),{hoverProps:x,isHovered:m}=ae({isDisabled:!u.allowsSelection&&!u.hasAction,onHoverStart:o.props.onHoverStart,onHoverChange:o.props.onHoverChange,onHoverEnd:o.props.onHoverEnd}),g=null;d&&l&&(g=l.useDraggableItem({key:o.key},d));let v=null;s&&l&&(v=l.useDroppableItem({target:{type:"item",key:o.key,dropPosition:"on"}},s,r));let h=d&&d.isDragging(o.key),C=_({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...u,isHovered:m,selectionMode:i.selectionManager.selectionMode,selectionBehavior:i.selectionManager.selectionBehavior,allowsDragging:!!d,isDragging:h,isDropTarget:v==null?void 0:v.isDropTarget}});n.useEffect(()=>{o.textValue},[o.textValue]);let k=e.href?"a":"div",P=w(e,{global:!0});return delete P.id,delete P.onClick,c.createElement(k,{...F(P,C,$,x,g==null?void 0:g.dragProps,v==null?void 0:v.dropProps),ref:r,"data-allows-dragging":!!d||void 0,"data-selected":u.isSelected||void 0,"data-disabled":u.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":u.isFocused||void 0,"data-focus-visible":u.isFocusVisible||void 0,"data-pressed":u.isPressed||void 0,"data-dragging":h||void 0,"data-drop-target":(v==null?void 0:v.isDropTarget)||void 0,"data-selection-mode":i.selectionManager.selectionMode==="none"?void 0:i.selectionManager.selectionMode},c.createElement(Y,{values:[[he,{slots:{[ce]:p,label:p,description:b}}]]},C.children))});function Je(t,e){e=X(e);let{dragAndDropHooks:a,dropState:o}=n.useContext(A),{dropIndicatorProps:r,isHidden:i,isDropTarget:l}=a.useDropIndicator(t,o,e);return i?null:c.createElement(Xe,{...t,dropIndicatorProps:r,isDropTarget:l,ref:e})}function Qe(t,e){let{dropIndicatorProps:a,isDropTarget:o,...r}=t,i=_({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:o}});return c.createElement("div",{...a,...i,role:"option",ref:e,"data-drop-target":o||void 0})}const Xe=n.forwardRef(Qe);oe(Se,function(e,a,o){let r=n.useContext(B),{isLoading:i,onLoadMore:l,scrollOffset:d,...s}=e,$=n.useRef(null),p=n.useMemo(()=>({onLoadMore:l,collection:r==null?void 0:r.collection,sentinelRef:$,scrollOffset:d}),[l,d,r==null?void 0:r.collection]);pe(p,$);let b=_({...s,id:void 0,children:o.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:null}),u={tabIndex:-1};return c.createElement(c.Fragment,null,c.createElement("div",{style:{position:"relative",width:0,height:0},inert:Ee(!0)},c.createElement("div",{"data-testid":"loadMoreSentinel",ref:$,style:{position:"absolute",height:1,width:1}})),i&&b.children&&c.createElement("div",{...F(w(e,{global:!0}),u),...b,role:"option",ref:a},b.children))});const Ye="flow--options--popover",Ze="flow--options",G={popover:Ye,options:Ze},eo=Q("Options",t=>{const{className:e,children:a,controller:o,renderEmptyState:r,onAction:i,...l}=t,d=J(G.options,e);return K.jsx(de,{className:G.popover,controller:o,...l,children:K.jsx(Ke,{onAction:i,className:d,renderEmptyState:r,children:a})})});eo.__docgenInfo={description:"",methods:[],displayName:"Options",props:{controller:{required:!0,tsType:{name:"OverlayController"},description:""}},composes:["Pick","PopoverProps"]};const oo="flow--option",to={option:oo},ao=Q("Option",t=>{const{className:e,children:a,textValue:o=ne(a),value:r=o,ref:i,...l}=t,d=J(to.option,e),s=n.Children.count(a)>=1;return n.createElement(Ge,{className:d,ref:i,...l,textValue:o,id:r,key:r},s?a:o)});ao.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Option"};export{le as $,ao as O,B as a,eo as b,R as c,Ue as d};
