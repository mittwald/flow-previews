import{j as r}from"./iframe-DdrpCK7O.js";import{f as c}from"./FormField.module-B9AzUSUD.js";import{a as b,c as F}from"./Form-BaMTKeVV.js";import{$ as C}from"./FieldError-ENGkQJvk.js";import{a as P,$ as w}from"./Input-BQD-OzUK.js";import{b as h}from"./utils-jbl8fYpp.js";import{P as g,f as I}from"./PropsContextProvider-B-M9Ok3D.js";import"./browser-CJKA82in.js";const f="mittwald.flow-core.file.awaitedArrayBuffer";function j(e){return f in e&&e[f]instanceof ArrayBuffer&&!e[f].detached}const B=async e=>{if(j(e))return e;const n=await e.arrayBuffer();return Object.assign(e,{[f]:n}),e},A="flow--file-field--trigger",N={trigger:A},y=e=>{const{children:n,isDisabled:i,onChange:t,ref:p}=e,a=h(p),s=()=>{a.current?.value&&(a.current.value="",t?.(null)),a.current?.click()},o=l=>{t?.(l.target.files)},m={Button:{onPress:s,className:N.trigger,isDisabled:i}};return r.jsxs(g,{props:m,mergeInParentContext:!0,children:[n,r.jsx(P,{style:{display:"none"},type:"file",ref:a,onChange:o})]})};y.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""}},composes:["PropsWithChildren"]};const R=I("FileField",e=>{const{children:n,ref:i,isRequired:t,isInvalid:p,isDisabled:a,validationBehavior:s,onChange:o,...m}=e,l=h(i),d=b({value:void 0,validationBehavior:s,isInvalid:p});F({validationBehavior:s},d,l);const v={...m,ref:l,"aria-invalid":d.displayValidation.isInvalid,value:void 0},x={Label:{className:c.label,optional:!e.isRequired},FieldDescription:{className:c.fieldDescription},FieldError:{className:c.customFieldError}},$=u=>{u&&o&&Promise.all(Array.from(u).map(B)).then(()=>o(u))};return r.jsx(w.Provider,{value:v,children:r.jsx(C.Provider,{value:d.displayValidation,children:r.jsx(g,{props:x,children:r.jsx("div",{"data-required":!!t||void 0,"data-invalid":d.displayValidation.isInvalid||void 0,className:c.formField,children:r.jsx(y,{ref:i,onChange:$,isDisabled:a,children:n})})})})})});R.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"FileField"};export{R as F,B as a};
