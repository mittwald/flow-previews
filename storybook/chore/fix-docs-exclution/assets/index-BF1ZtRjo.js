import{r as o,R as s}from"./index-BwDkhjyp.js";import{c as I}from"./clsx-B-dksMZM.js";import{u as E,O as h,A as M}from"./index-CrcpoVsX.js";import{$ as L,g as y,i as b,j as O,b as C,f as z,h as A}from"./utils-DDqfTkhb.js";import{b as W,c as B,d as q,e as F,f as u,g as U,h as K,i as V}from"./Dialog-BB9pmluw.js";import{c as w,b as p,P as j}from"./flowComponent-Dglj5cqB.js";import{$ as P}from"./filterDOMProps-CeZl_uWj.js";import{$ as H}from"./OverlayArrow-CTItOegv.js";let d=typeof document<"u"&&window.visualViewport;function k(){let t=w(),[e,n]=o.useState(()=>t?{width:0,height:0}:v());return o.useEffect(()=>{let r=()=>{n(a=>{let i=v();return i.width===a.width&&i.height===a.height?a:i})};return d?d.addEventListener("resize",r):window.addEventListener("resize",r),()=>{d?d.removeEventListener("resize",r):window.removeEventListener("resize",r)}},[]),e}function v(){return{width:d&&(d==null?void 0:d.width)||window.innerWidth,height:d&&(d==null?void 0:d.height)||window.innerHeight}}function G(t,e,n){let{overlayProps:r,underlayProps:a}=W({...t,isOpen:e.isOpen,onClose:e.close},n);return B({isDisabled:!e.isOpen}),q(),o.useEffect(()=>{if(e.isOpen)return F([n.current])},[e.isOpen,n]),{modalProps:p(r),underlayProps:a}}const J=o.createContext(null),x=o.createContext(null);function Q(t,e){if(o.useContext(x))return s.createElement(g,{...t,modalRef:e},t.children);let{isDismissable:r,isKeyboardDismissDisabled:a,isOpen:i,defaultOpen:c,onOpenChange:l,children:f,isEntering:$,isExiting:m,UNSTABLE_portalContainer:S,shouldCloseOnInteractOutside:_,...T}=t;return s.createElement(R,{isDismissable:r,isKeyboardDismissDisabled:a,isOpen:i,defaultOpen:c,onOpenChange:l,isEntering:$,isExiting:m,UNSTABLE_portalContainer:S,shouldCloseOnInteractOutside:_},s.createElement(g,{...T,modalRef:e},f))}const X=o.forwardRef(Q);function Y(t,e){[t,e]=L(t,e,J);let n=o.useContext(u),r=H(t),a=t.isOpen!=null||t.defaultOpen!=null||!n?r:n,i=y(e),c=o.useRef(null),l=b(i,a.isOpen),f=b(c,a.isOpen),$=l||f||t.isExiting||!1,m=w();return!a.isOpen&&!$||m?null:s.createElement(Z,{...t,state:a,isExiting:$,overlayRef:i,modalRef:c})}const R=o.forwardRef(Y);function Z({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:r}=e,{modalProps:a,underlayProps:i}=G(e,r,n),c=O(e.overlayRef)||e.isEntering||!1,l=C({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:c,isExiting:e.isExiting,state:r}}),f=k(),$={...l.style,"--visual-viewport-height":f.height+"px"};return s.createElement(U,{isExiting:e.isExiting,portalContainer:t},s.createElement("div",{...p(P(e),i),...l,style:$,ref:e.overlayRef,"data-entering":c||void 0,"data-exiting":e.isExiting||void 0},s.createElement(z,{values:[[x,{modalProps:a,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[u,r]]},l.children)))}function g(t){let{modalProps:e,modalRef:n,isExiting:r,isDismissable:a}=o.useContext(x),i=o.useContext(u),c=o.useMemo(()=>A(t.modalRef,n),[t.modalRef,n]),l=y(c),f=O(l),$=C({...t,defaultClassName:"react-aria-Modal",values:{isEntering:f,isExiting:r,state:i}});return s.createElement("div",{...p(P(t),e),...$,ref:l,"data-entering":f||void 0,"data-exiting":r||void 0},a&&s.createElement(K,{onDismiss:i.close}),$.children)}const ee="flow--overlay",te={overlay:ee,"overlay-fade":"flow--overlay--overlay-fade"},D=t=>{const{controller:e,children:n,className:r}=t,a=E({reuseControllerFromContext:!0}),i=e??a,c=i.useIsOpen(),l=I(te.overlay,r);return s.createElement(R,{className:l,isDismissable:!0,isOpen:c,onOpenChange:f=>i.setOpen(f)},s.createElement(X,null,s.createElement(V,null,s.createElement(h,{value:i},n))))};D.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const N=t=>{const e=E(),n={Button:{render:(r,a)=>s.createElement(M,{openOverlay:e},s.createElement(r,{...a}))}};return s.createElement(h,{value:e},s.createElement(j,{props:n},t.children))};N.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger",composes:["PropsWithChildren"]};N.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger",composes:["PropsWithChildren"]};D.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};export{N as O,D as a};
