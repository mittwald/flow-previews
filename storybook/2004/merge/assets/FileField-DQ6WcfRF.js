import{j as t}from"./iframe-Cb4Rgx0e.js";import{f}from"./FormField.module-CqWyJNQI.js";import{$ as F,b as w}from"./useFormValidation-CF7ZQkcY.js";import{a as P}from"./FieldError-BgWprM1s.js";import{a as j,$ as I}from"./Input-CC07jkqr.js";import{b as v}from"./utils-ClJ9kHS9.js";import{P as b,f as R}from"./PropsContextProvider-CbnVRX13.js";import"./browser-GZXaf9ZM.js";const c="mittwald.flow-core.file.awaitedArrayBuffer";function B(e){return c in e&&e[c]instanceof ArrayBuffer&&!e[c].detached}const C=async e=>{if(B(e))return e;const s=await e.arrayBuffer();return Object.assign(e,{[c]:s}),e},q="flow--file-field--trigger",A={trigger:q},h=e=>{const{children:s,isDisabled:l,onChange:r,isReadOnly:p,ref:m}=e,a=v(m),d=()=>{var i,n;(i=a.current)!=null&&i.value&&(a.current.value="",r==null||r(null)),(n=a.current)==null||n.click()},o=i=>{r==null||r(i.target.files)},u={Button:{onPress:d,className:A.trigger,isDisabled:l,isReadOnly:p}};return t.jsxs(b,{props:u,children:[s,t.jsx(j,{style:{display:"none"},type:"file",ref:a,onChange:o})]})};h.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren"]};const N=R("FileField",e=>{const{children:s,ref:l,isRequired:r,isInvalid:p,isDisabled:m,validationBehavior:a,onChange:d,isReadOnly:o,...u}=e,i=v(l),n=F({value:void 0,validationBehavior:a,isInvalid:p});w({validationBehavior:a},n,i);const $={...u,ref:i,"aria-invalid":n.displayValidation.isInvalid,value:void 0},g={Label:{className:f.label,optional:!e.isRequired},FieldDescription:{className:f.fieldDescription},FieldError:{className:f.customFieldError}},x=y=>{y&&d&&Promise.all(Array.from(y).map(C)).then(()=>d(y))};return t.jsx(I.Provider,{value:$,children:t.jsx(P.Provider,{value:n.displayValidation,children:t.jsx(b,{props:g,children:t.jsx("div",{"data-readonly":o,"data-required":!!r||void 0,"data-invalid":n.displayValidation.isInvalid||void 0,className:f.formField,children:t.jsx(h,{ref:l,isReadOnly:o,onChange:o?void 0:x,isDisabled:m,children:s})})})})})});N.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"FileField"};export{N as F,C as a};
