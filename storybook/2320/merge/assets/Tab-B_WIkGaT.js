import{r as f,R as $,j as d}from"./iframe-l3dQPg2D.js";import{a as C,f as q,I as U,N as S,P as _}from"./flowComponent-BopG63Mr.js";import{u as G}from"./useRef-FIk_DJsE.js";import{B as J}from"./Button-CVhESpos.js";import{c as I}from"./clsx-B-dksMZM.js";import{C as Q}from"./ContextMenuTriggerView-CTX1d7Wj.js";import{C as X}from"./ContextMenuView-D5PPwQLW.js";import{n as Y}from"./IconWarning-C2C4Ye1P.js";import{T as Z}from"./Text-Cd9ftiQT.js";import{M as ee}from"./MenuItem-C9keqCYD.js";import{A as F}from"./Activity-CxGQsjGa.js";import{b as M,a as w,d as A,$ as te,c as se}from"./utils-BpR6PJXM.js";import{$ as R,c as ie,b as ae}from"./Collection-3pd5EYPv.js";import{$ as ne,a as le}from"./SelectionIndicator-DJKLLJ3b.js";import{$ as oe,e as re,f as de,g as ce}from"./CollectionBuilder-BWIBmgEn.js";import{$ as fe}from"./Hidden-D7QtMOwf.js";import{$ as v,b as ue}from"./index-C4NaKCSa.js";import{$ as P}from"./filterDOMProps-BNnC3YgW.js";import{$ as N}from"./inertValue-DJyFO5FB.js";import{e as be,f as $e}from"./OverlayArrow-BBo0Td8e.js";import{a as me}from"./useFocus-BoIaqFAK.js";import{$ as xe}from"./useFocusable-CewhyE_c.js";import{e as pe,b as he}from"./SelectionManager-D6KTmYmL.js";import{$ as L}from"./useLabel-Bgm61Ocu.js";import{$ as ve}from"./useHasTabbableChild-sCKu79Iu.js";import{$ as ye}from"./context-bJyTUMD1.js";import{a as j,$ as ge}from"./useFocusRing-Sg4LsORI.js";import{$ as Pe}from"./useSingleSelectListState-Ch1-I3QH.js";const k=new WeakMap;function T(s,e,t){return s?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${k.get(s)}-${t}-${e}`):""}function Ke(s,e,t){let{key:i,isDisabled:a,shouldSelectOnPressUp:n}=s,{selectionManager:o,selectedKey:l}=e,r=i===l,c=a||e.isDisabled||e.selectionManager.isDisabled(i),{itemProps:u,isPressed:b}=pe({selectionManager:o,key:i,ref:t,isDisabled:c,shouldSelectOnPressUp:n,linkBehavior:"selection"}),m=T(e,i,"tab"),p=T(e,i,"tabpanel"),{tabIndex:h}=u,x=e.collection.getItem(i),g=P(x?.props,{labelable:!0});delete g.id;let W=me(x?.props),{focusableProps:z}=xe({isDisabled:c},t);return{tabProps:v(g,z,W,u,{id:m,"aria-selected":r,"aria-disabled":c||void 0,"aria-controls":r?p:void 0,tabIndex:c?void 0:h,role:"tab"}),isSelected:r,isDisabled:c,isPressed:b}}function Ce(s,e,t){let i=ve(t)?void 0:0;var a;const n=T(e,(a=s.id)!==null&&a!==void 0?a:e?.selectedKey,"tabpanel"),o=L({...s,id:n,"aria-labelledby":T(e,e?.selectedKey,"tab")});return{tabPanelProps:v(o,{tabIndex:i,role:"tabpanel","aria-describedby":s["aria-describedby"],"aria-details":s["aria-details"]})}}class Se{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,i;return this.disabledKeys.has(e)||!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let t=e;do t=this.collection.getKeyAfter(t),t==null&&(t=this.collection.getFirstKey());while(t!=null&&this.isDisabled(t));return t}getPreviousKey(e){let t=e;do t=this.collection.getKeyBefore(t),t==null&&(t=this.collection.getLastKey());while(t!=null&&this.isDisabled(t));return t}constructor(e,t,i,a=new Set){this.collection=e,this.flipDirection=t==="rtl"&&i==="horizontal",this.disabledKeys=a,this.tabDirection=i==="horizontal"}}function Te(s,e,t){let{orientation:i="horizontal",keyboardActivation:a="automatic"}=s,{collection:n,selectionManager:o,disabledKeys:l}=e,{direction:r}=ye(),c=f.useMemo(()=>new Se(n,r,i,l),[n,l,i,r]),{collectionProps:u}=he({ref:t,selectionManager:o,keyboardDelegate:c,selectOnFocus:a==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),b=ue();k.set(e,b);let m=L({...s,id:b});return{tabListProps:{...v(u,m),role:"tablist","aria-orientation":i,tabIndex:void 0}}}function Ie(s){var e,t;let i=Pe({...s,onSelectionChange:s.onSelectionChange?r=>{var c;r!=null&&((c=s.onSelectionChange)===null||c===void 0||c.call(s,r))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=s.defaultSelectedKey)!==null&&e!==void 0?e:O(s.collection,s.disabledKeys?new Set(s.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:a,collection:n,selectedKey:o}=i,l=f.useRef(o);return f.useEffect(()=>{let r=o;s.selectedKey==null&&(a.isEmpty||r==null||!n.getItem(r))&&(r=O(n,i.disabledKeys),r!=null&&a.setSelectedKeys([r])),(r!=null&&a.focusedKey==null||!a.isFocused&&r!==l.current)&&a.setFocusedKey(r),l.current=r}),{...i,isDisabled:s.isDisabled||!1}}function O(s,e){let t=null;if(s){var i,a,n,o;for(t=s.getFirstKey();t!=null&&(e.has(t)||!((a=s.getItem(t))===null||a===void 0||(i=a.props)===null||i===void 0)&&i.isDisabled)&&t!==s.getLastKey();)t=s.getKeyAfter(t);t!=null&&(e.has(t)||!((o=s.getItem(t))===null||o===void 0||(n=o.props)===null||n===void 0)&&n.isDisabled)&&t===s.getLastKey()&&(t=s.getFirstKey())}return t}const D=f.createContext(null),y=f.createContext(null),we=f.forwardRef(function(e,t){[e,t]=te(e,t,D);let{children:i,orientation:a="horizontal"}=e;return i=f.useMemo(()=>typeof i=="function"?i({orientation:a,defaultChildren:null}):i,[i,a]),$.createElement(de,{content:i},n=>$.createElement(De,{props:e,collection:n,tabsRef:t}))});function De({props:s,tabsRef:e,collection:t}){let{orientation:i="horizontal"}=s,a=Ie({...s,collection:t,children:void 0}),{focusProps:n,isFocused:o,isFocusVisible:l}=j({within:!0}),r=f.useMemo(()=>({orientation:i,isFocusWithin:o,isFocusVisible:l}),[i,o,l]),c=w({...s,defaultClassName:"react-aria-Tabs",values:r}),u=P(s,{global:!0});return $.createElement("div",{...v(u,c,n),ref:e,slot:s.slot||void 0,"data-focused":o||void 0,"data-orientation":i,"data-focus-visible":l||void 0,"data-disabled":a.isDisabled||void 0},$.createElement(A,{values:[[D,s],[y,a]]},c.children))}const Ee=f.forwardRef(function(e,t){return f.useContext(y)?$.createElement(Me,{props:e,forwardedRef:t}):$.createElement(ce,e)});function Me({props:s,forwardedRef:e}){let t=f.useContext(y),{CollectionRoot:i}=f.useContext(R),{orientation:a="horizontal",keyboardActivation:n="automatic"}=se(D),o=M(e),{tabListProps:l}=Te({...s,orientation:a,keyboardActivation:n},t,o),r=w({...s,children:null,defaultClassName:"react-aria-TabList",values:{orientation:a,state:t}}),c=P(s,{global:!0});return delete c.id,$.createElement("div",{...v(c,r,l),ref:o,"data-orientation":a||void 0},$.createElement(le,null,$.createElement(i,{collection:t.collection,persistedKeys:ae(t.selectionManager.focusedKey)})))}class V extends re{}V.type="item";const je=oe(V,(s,e,t)=>{let i=f.useContext(y),a=M(e),{tabProps:n,isSelected:o,isDisabled:l,isPressed:r}=Ke({key:t.key,...s},i,a),{focusProps:c,isFocused:u,isFocusVisible:b}=j(),{hoverProps:m,isHovered:p}=ge({isDisabled:l,onHoverStart:s.onHoverStart,onHoverEnd:s.onHoverEnd,onHoverChange:s.onHoverChange}),h=w({...s,id:void 0,children:t.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:o,isDisabled:l,isFocused:u,isFocusVisible:b,isPressed:r,isHovered:p}}),x=t.props.href?"a":"div",g=P(s,{global:!0});return delete g.id,delete g.onClick,$.createElement(x,{...v(g,h,n,c,m),ref:a,"data-selected":o||void 0,"data-disabled":l||void 0,"data-focused":u||void 0,"data-focus-visible":b||void 0,"data-pressed":r||void 0,"data-hovered":p||void 0},$.createElement(ne.Provider,{value:{isSelected:o}},h.children))}),Fe=fe(function(e,t){const i=f.useContext(y);let a=M(t),n=i.selectedKey===e.id,[o,l]=f.useState(i.selectedKey!=null?n:null);o==null&&i.selectedKey!=null?l(n):!n&&o&&l(!1);let r=be(a,n);return!n&&!e.shouldForceMount&&!r?null:$.createElement(Ne,{...e,tabPanelRef:a,isInitiallySelected:o||!1,isExiting:r})});function Ne(s){let e=f.useContext(y),{id:t,tabPanelRef:i,isInitiallySelected:a,isExiting:n,...o}=s,{tabPanelProps:l}=Ce(s,e,i),{focusProps:r,isFocused:c,isFocusVisible:u}=j(),b=e.selectedKey===s.id,m=$e(i)&&!a,p=w({...s,defaultClassName:"react-aria-TabPanel",values:{isFocused:c,isFocusVisible:u,isInert:N(!b),isEntering:m,isExiting:n,state:e}}),h=P(o,{global:!0});delete h.id;let x=b?v(h,l,r,p):v(h,p);return $.createElement("div",{...x,ref:i,"data-focused":c||void 0,"data-focus-visible":u||void 0,inert:N(!b||s.inert),"data-inert":b?void 0:"true","data-entering":m||void 0,"data-exiting":n||void 0},$.createElement(A,{values:[[D,null],[y,null]]},$.createElement(R.Provider,{value:ie},p.children)))}const Oe="flow--tabs--tab-list",Ae="flow--tabs--tab-list--context-menu-button",Re="flow--tabs--tab-list--titles",Le="flow--tabs--tab-list--collapsed",K={tabList:Oe,contextMenuButton:Ae,titles:Re,collapsed:Le},ke=()=>{const s=f.useRef(null),[e,t]=f.useState(!1),i=G(null,l=>{o(),n(l)}),a=([l])=>{l&&t(!l.isIntersecting)},n=(l=i.current)=>{if(l&&l instanceof Element){const r=new IntersectionObserver(a,{root:l.parentElement,threshold:1});s.current=r,r.observe(l)}},o=()=>{s.current?.disconnect()};return f.useEffect(()=>(n(),o),[s.current]),{ref:i,isOverflowing:e}},B=s=>{const{selection:e,disabledKeys:t,onContextMenuSelectionChange:i}=s,a=f.useId(),n=ke(),o=n.isOverflowing,l=I(K.tabList,o&&K.collapsed),r=b=>{i(b)},c=d.jsx(Ee,{className:K.titles,ref:n.ref,children:d.jsx(C,{id:"Titles"})}),u=o&&d.jsxs(Q,{children:[d.jsxs(J,{variant:"solid",className:K.contextMenuButton,color:"light","aria-labelledby":a,children:[d.jsx(C,{id:"ActiveTitle"}),d.jsx(Y,{})]}),d.jsx(X,{disabledKeys:t,selectedKeys:e?[e]:void 0,selectionMode:"navigation",onAction:b=>r(b),children:d.jsx(C,{id:"ContextMenuItems"})})]});return d.jsxs("div",{className:l,children:[c,u]})};B.__docgenInfo={description:"",methods:[],displayName:"TabList",props:{selection:{required:!0,tsType:{name:"union",raw:"Aria.Key | undefined",elements:[{name:"Aria.Key"},{name:"undefined"}]},description:""},onContextMenuSelectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Aria.Key) => void",signature:{arguments:[{type:{name:"Aria.Key"},name:"key"}],return:{name:"void"}}},description:""},disabledKeys:{required:!1,tsType:{name:"Iterable",elements:[{name:"Aria.Key"}],raw:"Iterable<Aria.Key>"},description:""}}};const Ve="flow--tabs",Be={tabs:Ve},He=q("Tabs",s=>{const{children:e,className:t,defaultSelectedKey:i,selectedKey:a,disabledKeys:n,ref:o,onSelectionChange:l,...r}=s,c=I(Be.tabs,t),[u,b]=f.useState(a??i);return d.jsxs(U,{children:[e,d.jsxs(we,{slot:null,className:c,...r,selectedKey:u,onSelectionChange:m=>{b(m),l&&l(m)},disabledKeys:n,ref:o,children:[d.jsx(B,{selection:u,onContextMenuSelectionChange:m=>{b(m),l&&l(m)},disabledKeys:n}),d.jsx(C,{id:"Panels"})]})]})});He.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tabs"};const We="flow--tabs--tab-title",ze="flow--tabs--tab-title--text",qe="flow--tabs--tab-title--menu-item",E={tabTitle:We,text:ze,menuItem:qe},H=f.createContext({id:"undefined"}),Ue=()=>f.useContext(H),_e=H.Provider,Ge=s=>{const{children:e,className:t,...i}=s,{id:a}=Ue(),n=I(E.tabTitle,t);return d.jsxs(d.Fragment,{children:[d.jsx(S,{id:"Titles",children:d.jsx(je,{...i,id:a,className:n,children:o=>d.jsxs(d.Fragment,{children:[d.jsx(Z,{emulateBoldWidth:!0,children:d.jsx("span",{className:E.text,children:e})}),d.jsx(S,{id:"ActiveTitle",children:o.isSelected&&e})]})})}),d.jsx(S,{id:"ContextMenuItems",children:d.jsx(ee,{className:E.menuItem,id:a,children:e})})]})};Ge.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TabTitle",composes:["Omit","PropsWithChildren"]};const Je="flow--tabs--tab--tab-panel",Qe={tabPanel:Je},Xe=s=>{const{children:e,className:t,id:i,...a}=s,n=I(Qe.tabPanel,t),o=f.useId(),l=i??o,r=c=>{const u=c.state.selectedKey===l,b={Content:{wrapWith:d.jsx(F,{isActive:u})},Section:{wrapWith:d.jsx(F,{isActive:u})}};return d.jsx(_,{props:b,dependencies:[u,e],children:e})};return d.jsx(S,{id:"Panels",children:d.jsx(_e,{value:{id:l},children:d.jsx(Fe,{className:n,shouldForceMount:!0,id:l,...a,children:r})})})};Xe.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tab",composes:["Omit","PropsWithChildren"]};export{He as T,Xe as a,Ge as b};
