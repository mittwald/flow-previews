import{v as de,t as pe,s as G,w as ve,u as re,x as ne,h as M,y as ge,f as p,i as c,z as ye,A as W,B as j,$ as B,d as $e}from"./useFocus-bBgo0bKd.js";import{r as x,R as be}from"./index-CgfFrydU.js";import{a as I,$ as ie,g as Te}from"./mergeRefs-_uxeg_17.js";import{c as he}from"./useFocusRing-DUlPoSa4.js";import{r as Pe}from"./index-sY8i7rw0.js";const Ee=x.createContext({isNative:!0,open:Ke,useHref:e=>e});function ae(){return x.useContext(Ee)}function Re(e,n){let i=e.getAttribute("target");return(!i||i==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!n.metaKey&&!n.ctrlKey&&!n.altKey&&!n.shiftKey}function A(e,n,i=!0){var o,d;let{metaKey:g,ctrlKey:y,altKey:T,shiftKey:h}=n;de()&&(!((d=window.event)===null||d===void 0||(o=d.type)===null||o===void 0)&&o.startsWith("key"))&&e.target==="_blank"&&(G()?g=!0:y=!0);let K=pe()&&G()&&!ve()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:g,ctrlKey:y,altKey:T,shiftKey:h}):new MouseEvent("click",{metaKey:g,ctrlKey:y,altKey:T,shiftKey:h,bubbles:!0,cancelable:!0});A.isOpening=i,re(e),e.dispatchEvent(K),A.isOpening=!1}A.isOpening=!1;function me(e,n){if(e instanceof HTMLAnchorElement)n(e);else if(e.hasAttribute("data-href")){let i=document.createElement("a");i.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(i.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(i.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(i.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(i.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(i),n(i),e.removeChild(i)}}function Ke(e,n){me(e,i=>A(i,n))}function Fe(e){let n=ae();var i;const o=n.useHref((i=e.href)!==null&&i!==void 0?i:"");return{"data-href":e.href?o:void 0,"data-target":e.target,"data-rel":e.rel,"data-download":e.download,"data-ping":e.ping,"data-referrer-policy":e.referrerPolicy}}function Ge(e){let n=ae();var i;const o=n.useHref((i=e==null?void 0:e.href)!==null&&i!==void 0?i:"");return{href:e!=null&&e.href?o:void 0,target:e==null?void 0:e.target,rel:e==null?void 0:e.rel,download:e==null?void 0:e.download,ping:e==null?void 0:e.ping,referrerPolicy:e==null?void 0:e.referrerPolicy}}let C="default",N="",H=new WeakMap;function q(e){if(ne()){if(C==="default"){const n=M(e);N=n.documentElement.style.webkitUserSelect,n.documentElement.style.webkitUserSelect="none"}C="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let n="userSelect"in e.style?"userSelect":"webkitUserSelect";H.set(e,e.style[n]),e.style[n]="none"}}function R(e){if(ne()){if(C!=="disabled")return;C="restoring",setTimeout(()=>{ge(()=>{if(C==="restoring"){const n=M(e);n.documentElement.style.webkitUserSelect==="none"&&(n.documentElement.style.webkitUserSelect=N||""),N="",C="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&H.has(e)){let n=H.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[i]==="none"&&(e.style[i]=n),e.getAttribute("style")===""&&e.removeAttribute("style"),H.delete(e)}}const se=be.createContext({register:()=>{}});se.displayName="PressResponderContext";function Se(e,n){return n.get?n.get.call(e):n.value}function oe(e,n,i){if(!n.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return n.get(e)}function xe(e,n){var i=oe(e,n,"get");return Se(e,i)}function we(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ke(e,n,i){we(e,n),n.set(e,i)}function Oe(e,n,i){if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}}function J(e,n,i){var o=oe(e,n,"set");return Oe(e,o,i),i}function _e(e){let n=x.useContext(se);if(n){let{register:i,...o}=n;e=ie(o,e),i()}return $e(n,e.ref),e}var X=new WeakMap;class Y{continuePropagation(){J(this,X,!1)}get shouldStopPropagation(){return xe(this,X)}constructor(n,i,o,d){ke(this,X,{writable:!0,value:void 0}),J(this,X,!0);var g;let y=(g=d==null?void 0:d.target)!==null&&g!==void 0?g:o.currentTarget;const T=y==null?void 0:y.getBoundingClientRect();let h,K=0,$,L=null;o.clientX!=null&&o.clientY!=null&&($=o.clientX,L=o.clientY),T&&($!=null&&L!=null?(h=$-T.left,K=L-T.top):(h=T.width/2,K=T.height/2)),this.type=n,this.pointerType=i,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=h,this.y=K}}const Q=Symbol("linkClicked");function Be(e){let{onPress:n,onPressChange:i,onPressStart:o,onPressEnd:d,onPressUp:g,isDisabled:y,isPressed:T,preventFocusOnPress:h,shouldCancelOnPointerExit:K,allowTextSelectionOnPress:$,ref:L,...fe}=_e(e),[ue,z]=x.useState(!1),w=x.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:S,removeAllGlobalListeners:U}=he(),E=I((t,s)=>{let v=w.current;if(y||v.didFirePressStart)return!1;let a=!0;if(v.isTriggeringEvent=!0,o){let u=new Y("pressstart",s,t);o(u),a=u.shouldStopPropagation}return i&&i(!0),v.isTriggeringEvent=!1,v.didFirePressStart=!0,z(!0),a}),P=I((t,s,v=!0)=>{let a=w.current;if(!a.didFirePressStart)return!1;a.didFirePressStart=!1,a.isTriggeringEvent=!0;let u=!0;if(d){let r=new Y("pressend",s,t);d(r),u=r.shouldStopPropagation}if(i&&i(!1),z(!1),n&&v&&!y){let r=new Y("press",s,t);n(r),u&&(u=r.shouldStopPropagation)}return a.isTriggeringEvent=!1,u}),k=I((t,s)=>{let v=w.current;if(y)return!1;if(g){v.isTriggeringEvent=!0;let a=new Y("pressup",s,t);return g(a),v.isTriggeringEvent=!1,a.shouldStopPropagation}return!0}),b=I(t=>{let s=w.current;if(s.isPressed&&s.target){s.didFirePressStart&&s.pointerType!=null&&P(_(s.target,t),s.pointerType,!1),s.isPressed=!1,s.isOverTarget=!1,s.activePointerId=null,s.pointerType=null,U(),$||R(s.target);for(let v of s.disposables)v();s.disposables=[]}}),D=I(t=>{K&&b(t)}),ce=x.useMemo(()=>{let t=w.current,s={onKeyDown(a){if(F(a.nativeEvent,a.currentTarget)&&p(a.currentTarget,c(a.nativeEvent))){var u;te(c(a.nativeEvent),a.key)&&a.preventDefault();let r=!0;if(!t.isPressed&&!a.repeat){t.target=a.currentTarget,t.isPressed=!0,t.pointerType="keyboard",r=E(a,"keyboard");let l=a.currentTarget,f=O=>{F(O,l)&&!O.repeat&&p(l,c(O))&&t.target&&k(_(t.target,O),"keyboard")};S(M(a.currentTarget),"keyup",Te(f,v),!0)}r&&a.stopPropagation(),a.metaKey&&G()&&((u=t.metaKeyEvents)===null||u===void 0||u.set(a.key,a.nativeEvent))}else a.key==="Meta"&&(t.metaKeyEvents=new Map)},onClick(a){if(!(a&&!p(a.currentTarget,c(a.nativeEvent)))&&a&&a.button===0&&!t.isTriggeringEvent&&!A.isOpening){let u=!0;if(y&&a.preventDefault(),!t.ignoreEmulatedMouseEvents&&!t.isPressed&&(t.pointerType==="virtual"||j(a.nativeEvent))){let r=E(a,"virtual"),l=k(a,"virtual"),f=P(a,"virtual");u=r&&l&&f}else if(t.isPressed&&t.pointerType!=="keyboard"){let r=t.pointerType||a.nativeEvent.pointerType||"virtual";u=P(_(a.currentTarget,a),r,!0),t.isOverTarget=!1,b(a)}t.ignoreEmulatedMouseEvents=!1,u&&a.stopPropagation()}}},v=a=>{var u;if(t.isPressed&&t.target&&F(a,t.target)){var r;te(c(a),a.key)&&a.preventDefault();let f=c(a);P(_(t.target,a),"keyboard",p(t.target,c(a))),U(),a.key!=="Enter"&&V(t.target)&&p(t.target,f)&&!a[Q]&&(a[Q]=!0,A(t.target,a,!1)),t.isPressed=!1,(r=t.metaKeyEvents)===null||r===void 0||r.delete(a.key)}else if(a.key==="Meta"&&(!((u=t.metaKeyEvents)===null||u===void 0)&&u.size)){var l;let f=t.metaKeyEvents;t.metaKeyEvents=void 0;for(let O of f.values())(l=t.target)===null||l===void 0||l.dispatchEvent(new KeyboardEvent("keyup",O))}};if(typeof PointerEvent<"u"){s.onPointerDown=r=>{if(r.button!==0||!p(r.currentTarget,c(r.nativeEvent)))return;if(ye(r.nativeEvent)){t.pointerType="virtual";return}t.pointerType=r.pointerType;let l=!0;if(!t.isPressed){t.isPressed=!0,t.isOverTarget=!0,t.activePointerId=r.pointerId,t.target=r.currentTarget,$||q(t.target),l=E(r,t.pointerType);let f=c(r.nativeEvent);"releasePointerCapture"in f&&f.releasePointerCapture(r.pointerId),S(M(r.currentTarget),"pointerup",a,!1),S(M(r.currentTarget),"pointercancel",u,!1)}l&&r.stopPropagation()},s.onMouseDown=r=>{if(p(r.currentTarget,c(r.nativeEvent))&&r.button===0){if(h){let l=W(r.target);l&&t.disposables.push(l)}r.stopPropagation()}},s.onPointerUp=r=>{!p(r.currentTarget,c(r.nativeEvent))||t.pointerType==="virtual"||r.button===0&&k(r,t.pointerType||r.pointerType)},s.onPointerEnter=r=>{r.pointerId===t.activePointerId&&t.target&&!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,E(_(t.target,r),t.pointerType))},s.onPointerLeave=r=>{r.pointerId===t.activePointerId&&t.target&&t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,P(_(t.target,r),t.pointerType,!1),D(r))};let a=r=>{if(r.pointerId===t.activePointerId&&t.isPressed&&r.button===0&&t.target){if(p(t.target,c(r))&&t.pointerType!=null){let l=!1,f=setTimeout(()=>{t.isPressed&&t.target instanceof HTMLElement&&(l?b(r):(re(t.target),t.target.click()))},80);S(r.currentTarget,"click",()=>l=!0,!0),t.disposables.push(()=>clearTimeout(f))}else b(r);t.isOverTarget=!1}},u=r=>{b(r)};s.onDragStart=r=>{p(r.currentTarget,c(r.nativeEvent))&&b(r)}}else{s.onMouseDown=r=>{if(r.button!==0||!p(r.currentTarget,c(r.nativeEvent)))return;if(t.ignoreEmulatedMouseEvents){r.stopPropagation();return}if(t.isPressed=!0,t.isOverTarget=!0,t.target=r.currentTarget,t.pointerType=j(r.nativeEvent)?"virtual":"mouse",Pe.flushSync(()=>E(r,t.pointerType))&&r.stopPropagation(),h){let f=W(r.target);f&&t.disposables.push(f)}S(M(r.currentTarget),"mouseup",a,!1)},s.onMouseEnter=r=>{if(!p(r.currentTarget,c(r.nativeEvent)))return;let l=!0;t.isPressed&&!t.ignoreEmulatedMouseEvents&&t.pointerType!=null&&(t.isOverTarget=!0,l=E(r,t.pointerType)),l&&r.stopPropagation()},s.onMouseLeave=r=>{if(!p(r.currentTarget,c(r.nativeEvent)))return;let l=!0;t.isPressed&&!t.ignoreEmulatedMouseEvents&&t.pointerType!=null&&(t.isOverTarget=!1,l=P(r,t.pointerType,!1),D(r)),l&&r.stopPropagation()},s.onMouseUp=r=>{p(r.currentTarget,c(r.nativeEvent))&&!t.ignoreEmulatedMouseEvents&&r.button===0&&k(r,t.pointerType||"mouse")};let a=r=>{if(r.button===0){if(t.ignoreEmulatedMouseEvents){t.ignoreEmulatedMouseEvents=!1;return}t.target&&t.target.contains(r.target)&&t.pointerType!=null||b(r),t.isOverTarget=!1}};s.onTouchStart=r=>{if(!p(r.currentTarget,c(r.nativeEvent)))return;let l=Me(r.nativeEvent);if(!l)return;t.activePointerId=l.identifier,t.ignoreEmulatedMouseEvents=!0,t.isOverTarget=!0,t.isPressed=!0,t.target=r.currentTarget,t.pointerType="touch",$||q(t.target),E(m(t.target,r),t.pointerType)&&r.stopPropagation(),S(B(r.currentTarget),"scroll",u,!0)},s.onTouchMove=r=>{if(!p(r.currentTarget,c(r.nativeEvent)))return;if(!t.isPressed){r.stopPropagation();return}let l=Z(r.nativeEvent,t.activePointerId),f=!0;l&&ee(l,r.currentTarget)?!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,f=E(m(t.target,r),t.pointerType)):t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,f=P(m(t.target,r),t.pointerType,!1),D(m(t.target,r))),f&&r.stopPropagation()},s.onTouchEnd=r=>{if(!p(r.currentTarget,c(r.nativeEvent)))return;if(!t.isPressed){r.stopPropagation();return}let l=Z(r.nativeEvent,t.activePointerId),f=!0;l&&ee(l,r.currentTarget)&&t.pointerType!=null?(k(m(t.target,r),t.pointerType),f=P(m(t.target,r),t.pointerType)):t.isOverTarget&&t.pointerType!=null&&(f=P(m(t.target,r),t.pointerType,!1)),f&&r.stopPropagation(),t.isPressed=!1,t.activePointerId=null,t.isOverTarget=!1,t.ignoreEmulatedMouseEvents=!0,t.target&&!$&&R(t.target),U()},s.onTouchCancel=r=>{p(r.currentTarget,c(r.nativeEvent))&&(r.stopPropagation(),t.isPressed&&b(m(t.target,r)))};let u=r=>{t.isPressed&&p(c(r),t.target)&&b({currentTarget:t.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};s.onDragStart=r=>{p(r.currentTarget,c(r.nativeEvent))&&b(r)}}return s},[S,y,h,U,$,b,D,P,E,k]);return x.useEffect(()=>{let t=w.current;return()=>{var s;$||R((s=t.target)!==null&&s!==void 0?s:void 0);for(let v of t.disposables)v();t.disposables=[]}},[$]),{isPressed:T||ue,pressProps:ie(fe,ce)}}function V(e){return e.tagName==="A"&&e.hasAttribute("href")}function F(e,n){const{key:i,code:o}=e,d=n,g=d.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||o==="Space")&&!(d instanceof B(d).HTMLInputElement&&!le(d,i)||d instanceof B(d).HTMLTextAreaElement||d.isContentEditable)&&!((g==="link"||!g&&V(d))&&i!=="Enter")}function Me(e){const{targetTouches:n}=e;return n.length>0?n[0]:null}function Z(e,n){const i=e.changedTouches;for(let o=0;o<i.length;o++){const d=i[o];if(d.identifier===n)return d}return null}function m(e,n){let i=0,o=0;return n.targetTouches&&n.targetTouches.length===1&&(i=n.targetTouches[0].clientX,o=n.targetTouches[0].clientY),{currentTarget:e,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:i,clientY:o}}function _(e,n){let i=n.clientX,o=n.clientY;return{currentTarget:e,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:i,clientY:o}}function Ce(e){let n=0,i=0;return e.width!==void 0?n=e.width/2:e.radiusX!==void 0&&(n=e.radiusX),e.height!==void 0?i=e.height/2:e.radiusY!==void 0&&(i=e.radiusY),{top:e.clientY-i,right:e.clientX+n,bottom:e.clientY+i,left:e.clientX-n}}function Ae(e,n){return!(e.left>n.right||n.left>e.right||e.top>n.bottom||n.top>e.bottom)}function ee(e,n){let i=n.getBoundingClientRect(),o=Ce(e);return Ae(i,o)}function Ie(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!V(e)}function te(e,n){return e instanceof HTMLInputElement?!le(e,n):Ie(e)}const Le=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function le(e,n){return e.type==="checkbox"||e.type==="radio"?n===" ":Le.has(e.type)}export{Be as $,ke as _,Ge as a,ae as b,Re as c,R as d,q as e,A as f,se as g,Fe as h};
