import{b as Z,r as me}from"./index-CoBbVvoA.js";import{r as E,R as ie}from"./iframe-DRU2mvvl.js";import{k as ve}from"./useFocus-WX08leiR.js";import{$ as J}from"./ProgressBar-CO2F47bQ.js";import{$ as ge}from"./context-WCWlHgyn.js";import{$ as $e}from"./useControlledState-B4CekZuY.js";import{$ as he,a as be}from"./utils-CFpcVBbf.js";import{$ as xe}from"./filterDOMProps-CghfNOdR.js";function we(){return typeof window.ResizeObserver<"u"}function V(t){const{ref:e,box:o,onResize:n}=t;E.useEffect(()=>{let l=e==null?void 0:e.current;if(l)if(we()){const r=new window.ResizeObserver(c=>{c.length&&n()});return r.observe(l,{box:o}),()=>{l&&r.unobserve(l)}}else return window.addEventListener("resize",n,!1),()=>{window.removeEventListener("resize",n,!1)}},[n,e,o])}function je(t,e=!0){let[o,n]=E.useState(!0),l=o&&e;return Z(()=>{if(l&&t.current&&"getAnimations"in t.current)for(let r of t.current.getAnimations())r instanceof CSSTransition&&r.cancel()},[t,l]),ae(t,l,E.useCallback(()=>n(!1),[])),l}function Ge(t,e){let[o,n]=E.useState(e?"open":"closed");switch(o){case"open":e||n("exiting");break;case"closed":case"exiting":e&&n("open");break}let l=o==="exiting";return ae(t,l,E.useCallback(()=>{n(r=>r==="exiting"?"closed":r)},[])),l}function ae(t,e,o){Z(()=>{if(e&&t.current){if(!("getAnimations"in t.current)){o();return}let n=t.current.getAnimations();if(n.length===0){o();return}let l=!1;return Promise.all(n.map(r=>r.finished)).then(()=>{l||me.flushSync(()=>{o()})}).catch(()=>{}),()=>{l=!0}}},[t,e,o])}const M={top:"top",bottom:"top",left:"left",right:"left"},G={top:"bottom",bottom:"top",left:"right",right:"left"},Ee={top:"left",left:"top"},K={top:"height",left:"width"},ce={width:"totalWidth",height:"totalHeight"},j={};let P=typeof document<"u"?window.visualViewport:null;function ee(t){let e=0,o=0,n=0,l=0,r=0,c=0,i={};var h;let d=((h=P==null?void 0:P.scale)!==null&&h!==void 0?h:1)>1;if(t.tagName==="BODY"){let u=document.documentElement;n=u.clientWidth,l=u.clientHeight;var p;e=(p=P==null?void 0:P.width)!==null&&p!==void 0?p:n;var v;o=(v=P==null?void 0:P.height)!==null&&v!==void 0?v:l,i.top=u.scrollTop||t.scrollTop,i.left=u.scrollLeft||t.scrollLeft,P&&(r=P.offsetTop,c=P.offsetLeft)}else({width:e,height:o,top:r,left:c}=B(t,!1)),i.top=t.scrollTop,i.left=t.scrollLeft,n=e,l=o;if(ve()&&(t.tagName==="BODY"||t.tagName==="HTML")&&d){i.top=0,i.left=0;var m;r=(m=P==null?void 0:P.pageTop)!==null&&m!==void 0?m:0;var s;c=(s=P==null?void 0:P.pageLeft)!==null&&s!==void 0?s:0}return{width:e,height:o,totalWidth:n,totalHeight:l,scroll:i,top:r,left:c}}function Ce(t){return{top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}}function te(t,e,o,n,l,r,c){var i;let h=(i=l.scroll[t])!==null&&i!==void 0?i:0,d=n[K[t]],p=n.scroll[M[t]]+r,v=d+n.scroll[M[t]]-r,m=e-h+c[t]-n[M[t]],s=e-h+o+c[t]-n[M[t]];return m<p?p-m:s>v?Math.max(v-s,p-m):0}function Pe(t){let e=window.getComputedStyle(t);return{top:parseInt(e.marginTop,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0,right:parseInt(e.marginRight,10)||0}}function oe(t){if(j[t])return j[t];let[e,o]=t.split(" "),n=M[e]||"right",l=Ee[n];M[o]||(o="center");let r=K[n],c=K[l];return j[t]={placement:e,crossPlacement:o,axis:n,crossAxis:l,size:r,crossSize:c},j[t]}function q(t,e,o,n,l,r,c,i,h,d){let{placement:p,crossPlacement:v,axis:m,crossAxis:s,size:u,crossSize:g}=n,f={};var R;f[s]=(R=t[s])!==null&&R!==void 0?R:0;var a,w,x,T;v==="center"?f[s]+=(((a=t[g])!==null&&a!==void 0?a:0)-((w=o[g])!==null&&w!==void 0?w:0))/2:v!==s&&(f[s]+=((x=t[g])!==null&&x!==void 0?x:0)-((T=o[g])!==null&&T!==void 0?T:0)),f[s]+=r;const $=t[s]-o[g]+h+d,S=t[s]+t[g]-h-d;if(f[s]=J(f[s],$,S),p===m){const k=i?c[u]:e[ce[u]];f[G[m]]=Math.floor(k-t[m]+l)}else f[m]=Math.floor(t[m]+t[u]+l);return f}function Le(t,e,o,n,l,r,c,i){const h=n?o.height:e[ce.height];var d;let p=t.top!=null?o.top+t.top:o.top+(h-((d=t.bottom)!==null&&d!==void 0?d:0)-c);var v,m,s,u,g,f;let R=i!=="top"?Math.max(0,e.height+e.top+((v=e.scroll.top)!==null&&v!==void 0?v:0)-p-(((m=l.top)!==null&&m!==void 0?m:0)+((s=l.bottom)!==null&&s!==void 0?s:0)+r)):Math.max(0,p+c-(e.top+((u=e.scroll.top)!==null&&u!==void 0?u:0))-(((g=l.top)!==null&&g!==void 0?g:0)+((f=l.bottom)!==null&&f!==void 0?f:0)+r));return Math.min(e.height-r*2,R)}function le(t,e,o,n,l,r){let{placement:c,axis:i,size:h}=r;var d,p;if(c===i)return Math.max(0,o[i]-t[i]-((d=t.scroll[i])!==null&&d!==void 0?d:0)+e[i]-((p=n[i])!==null&&p!==void 0?p:0)-n[G[i]]-l);var v;return Math.max(0,t[h]+t[i]+t.scroll[i]-e[i]-o[i]-o[h]-((v=n[i])!==null&&v!==void 0?v:0)-n[G[i]]-l)}function Re(t,e,o,n,l,r,c,i,h,d,p,v,m,s,u,g){let f=oe(t),{size:R,crossAxis:a,crossSize:w,placement:x,crossPlacement:T}=f,$=q(e,i,o,f,p,v,d,m,u,g),S=p,k=le(i,d,e,l,r+p,f);if(c&&n[R]>k){let W=oe(`${G[x]} ${T}`),pe=q(e,i,o,W,p,v,d,m,u,g);le(i,d,e,l,r+p,W)>k&&(f=W,$=pe,S=p)}let _="bottom";f.axis==="top"?f.placement==="top"?_="top":f.placement==="bottom"&&(_="bottom"):f.crossAxis==="top"&&(f.crossPlacement==="top"?_="bottom":f.crossPlacement==="bottom"&&(_="top"));let y=te(a,$[a],o[w],i,h,r,d);$[a]+=y;let z=Le($,i,d,m,l,r,o.height,_);s&&s<z&&(z=s),o.height=Math.min(o.height,z),$=q(e,i,o,f,S,v,d,m,u,g),y=te(a,$[a],o[w],i,h,r,d),$[a]+=y;let C={},L=e[a]-$[a]-l[M[a]],O=L+.5*e[w];const X=u/2+g;var A,N,F,I;const H=M[a]==="left"?((A=l.left)!==null&&A!==void 0?A:0)+((N=l.right)!==null&&N!==void 0?N:0):((F=l.top)!==null&&F!==void 0?F:0)+((I=l.bottom)!==null&&I!==void 0?I:0),Y=o[w]-H-u/2-g,U=e[a]+u/2-($[a]+l[M[a]]),fe=e[a]+e[w]-u/2-($[a]+l[M[a]]),de=J(O,U,fe);C[a]=J(de,X,Y),{placement:x,crossPlacement:T}=f,u?L=C[a]:T==="right"?L+=e[w]:T==="center"&&(L+=e[w]/2);let D=x==="left"||x==="top"?o[R]:0,ue={x:x==="top"||x==="bottom"?L:D,y:x==="left"||x==="right"?L:D};return{position:$,maxHeight:z,arrowOffsetLeft:C.left,arrowOffsetTop:C.top,placement:x,triggerAnchorPoint:ue}}function Te(t){let{placement:e,targetNode:o,overlayNode:n,scrollNode:l,padding:r,shouldFlip:c,boundaryElement:i,offset:h,crossOffset:d,maxHeight:p,arrowSize:v=0,arrowBoundaryOffset:m=0}=t,s=n instanceof HTMLElement?Se(n):document.documentElement,u=s===document.documentElement;const g=window.getComputedStyle(s).position;let f=!!g&&g!=="static",R=u?B(o,!1):ne(o,s,!1);if(!u){let{marginTop:C,marginLeft:L}=window.getComputedStyle(o);R.top+=parseInt(C,10)||0,R.left+=parseInt(L,10)||0}let a=B(n,!0),w=Pe(n);var x,T;a.width+=((x=w.left)!==null&&x!==void 0?x:0)+((T=w.right)!==null&&T!==void 0?T:0);var $,S;a.height+=(($=w.top)!==null&&$!==void 0?$:0)+((S=w.bottom)!==null&&S!==void 0?S:0);let k=Ce(l),_=ee(i),y=ee(s),z=i.tagName==="BODY"?B(s,!1):ne(s,i,!1);return s.tagName==="HTML"&&i.tagName==="BODY"&&(y.scroll.top=0,y.scroll.left=0),Re(e,R,a,k,w,r,c,_,y,z,h,d,f,p,v,m)}function Q(t,e){let{top:o,left:n,width:l,height:r}=t.getBoundingClientRect();return e&&t instanceof t.ownerDocument.defaultView.HTMLElement&&(l=t.offsetWidth,r=t.offsetHeight),{top:o,left:n,width:l,height:r}}function B(t,e){let{top:o,left:n,width:l,height:r}=Q(t,e),{scrollTop:c,scrollLeft:i,clientTop:h,clientLeft:d}=document.documentElement;return{top:o+c-h,left:n+i-d,width:l,height:r}}function ne(t,e,o){let n=window.getComputedStyle(t),l;if(n.position==="fixed")l=Q(t,o);else{l=B(t,o);let r=B(e,o),c=window.getComputedStyle(e);r.top+=(parseInt(c.borderTopWidth,10)||0)-e.scrollTop,r.left+=(parseInt(c.borderLeftWidth,10)||0)-e.scrollLeft,l.top-=r.top,l.left-=r.left}return l.top-=parseInt(n.marginTop,10)||0,l.left-=parseInt(n.marginLeft,10)||0,l}function Se(t){let e=t.offsetParent;if(e&&e===document.body&&window.getComputedStyle(e).position==="static"&&!re(e)&&(e=document.documentElement),e==null)for(e=t.parentElement;e&&!re(e);)e=e.parentElement;return e||document.documentElement}function re(t){let e=window.getComputedStyle(t);return e.transform!=="none"||/transform|perspective/.test(e.willChange)||e.filter!=="none"||e.contain==="paint"||"backdropFilter"in e&&e.backdropFilter!=="none"||"WebkitBackdropFilter"in e&&e.WebkitBackdropFilter!=="none"}const Ae=new WeakMap;function He(t){let{triggerRef:e,isOpen:o,onClose:n}=t;E.useEffect(()=>{if(!o||n===null)return;let l=r=>{let c=r.target;if(!e.current||c instanceof Node&&!c.contains(e.current)||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement)return;let i=n||Ae.get(e.current);i&&i()};return window.addEventListener("scroll",l,!0),()=>{window.removeEventListener("scroll",l,!0)}},[o,n,e])}let b=typeof document<"u"?window.visualViewport:null;function Ue(t){let{direction:e}=ge(),{arrowSize:o,targetRef:n,overlayRef:l,arrowRef:r,scrollRef:c=l,placement:i="bottom",containerPadding:h=12,shouldFlip:d=!0,boundaryElement:p=typeof document<"u"?document.body:null,offset:v=0,crossOffset:m=0,shouldUpdatePosition:s=!0,isOpen:u=!0,onClose:g,maxHeight:f,arrowBoundaryOffset:R=0}=t,[a,w]=E.useState(null),x=[s,i,l.current,n.current,r==null?void 0:r.current,c.current,h,d,p,v,m,u,e,f,R,o],T=E.useRef(b==null?void 0:b.scale);E.useEffect(()=>{u&&(T.current=b==null?void 0:b.scale)},[u]);let $=E.useCallback(()=>{if(s===!1||!u||!l.current||!n.current||!p||(b==null?void 0:b.scale)!==T.current)return;let C=null;if(c.current&&c.current.contains(document.activeElement)){var L;let H=(L=document.activeElement)===null||L===void 0?void 0:L.getBoundingClientRect(),Y=c.current.getBoundingClientRect();var O;if(C={type:"top",offset:((O=H==null?void 0:H.top)!==null&&O!==void 0?O:0)-Y.top},C.offset>Y.height/2){C.type="bottom";var X;C.offset=((X=H==null?void 0:H.bottom)!==null&&X!==void 0?X:0)-Y.bottom}}let A=l.current;if(!f&&l.current){var N;A.style.top="0px",A.style.bottom="";var F;A.style.maxHeight=((F=(N=window.visualViewport)===null||N===void 0?void 0:N.height)!==null&&F!==void 0?F:window.innerHeight)+"px"}let I=Te({placement:ye(i,e),overlayNode:l.current,targetNode:n.current,scrollNode:c.current||l.current,padding:h,shouldFlip:d,boundaryElement:p,offset:v,crossOffset:m,maxHeight:f,arrowSize:o??(r!=null&&r.current?Q(r.current,!0).width:0),arrowBoundaryOffset:R});if(I.position){if(A.style.top="",A.style.bottom="",A.style.left="",A.style.right="",Object.keys(I.position).forEach(H=>A.style[H]=I.position[H]+"px"),A.style.maxHeight=I.maxHeight!=null?I.maxHeight+"px":"",C&&document.activeElement&&c.current){let H=document.activeElement.getBoundingClientRect(),Y=c.current.getBoundingClientRect(),U=H[C.type]-Y[C.type];c.current.scrollTop+=U-C.offset}w(I)}},x);Z($,x),_e($),V({ref:l,onResize:$}),V({ref:n,onResize:$});let S=E.useRef(!1);Z(()=>{let C,L=()=>{S.current=!0,clearTimeout(C),C=setTimeout(()=>{S.current=!1},500),$()},O=()=>{S.current&&L()};return b==null||b.addEventListener("resize",L),b==null||b.addEventListener("scroll",O),()=>{b==null||b.removeEventListener("resize",L),b==null||b.removeEventListener("scroll",O)}},[$]);let k=E.useCallback(()=>{S.current||g==null||g()},[g,S]);He({triggerRef:n,isOpen:u,onClose:g&&k});var _,y,z;return{overlayProps:{style:{position:a?"absolute":"fixed",top:a?void 0:0,left:a?void 0:0,zIndex:1e5,...a==null?void 0:a.position,maxHeight:(_=a==null?void 0:a.maxHeight)!==null&&_!==void 0?_:"100vh"}},placement:(y=a==null?void 0:a.placement)!==null&&y!==void 0?y:null,triggerAnchorPoint:(z=a==null?void 0:a.triggerAnchorPoint)!==null&&z!==void 0?z:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:a==null?void 0:a.arrowOffsetLeft,top:a==null?void 0:a.arrowOffsetTop}},updatePosition:$}}function _e(t){Z(()=>(window.addEventListener("resize",t,!1),()=>{window.removeEventListener("resize",t,!1)}),[t])}function ye(t,e){return e==="rtl"?t.replace("start","right").replace("end","left"):t.replace("start","left").replace("end","right")}const se=E.createContext({});function We(t){let{getContainer:e}=t,{getContainer:o}=ze();return ie.createElement(se.Provider,{value:{getContainer:e===null?void 0:e??o}},t.children)}function ze(){var t;return(t=E.useContext(se))!==null&&t!==void 0?t:{}}function qe(t){let[e,o]=$e(t.isOpen,t.defaultOpen||!1,t.onOpenChange);const n=E.useCallback(()=>{o(!0)},[o]),l=E.useCallback(()=>{o(!1)},[o]),r=E.useCallback(()=>{o(!e)},[o,e]);return{isOpen:e,setOpen:o,open:n,close:l,toggle:r}}const Ie=E.createContext({placement:"bottom"}),Je=E.forwardRef(function(e,o){[e,o]=he(e,o,Ie);let n=e.placement,l={position:"absolute",transform:n==="top"||n==="bottom"?"translateX(-50%)":"translateY(-50%)"};n!=null&&(l[n]="100%");let r=be({...e,defaultClassName:"react-aria-OverlayArrow",values:{placement:n}});r.style&&Object.keys(r.style).forEach(i=>r.style[i]===void 0&&delete r.style[i]);let c=xe(e);return ie.createElement("div",{...c,...r,style:{...l,...r.style},ref:o,"data-placement":n})});export{Ae as $,Ue as a,ze as b,qe as c,Ge as d,je as e,Ie as f,V as g,Je as h,We as i};
