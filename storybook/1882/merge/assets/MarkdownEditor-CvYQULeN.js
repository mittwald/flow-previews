import{j as e,r as M}from"./iframe-BAtUELBR.js";import{M as I}from"./Markdown-ln_0k-2u.js";import{T as N}from"./TextArea-Bh6sTOGA.js";import{O as v,K as k,P as _,Q as A,R as B}from"./IconWarning-h84dHhem.js";import{B as T}from"./Button-BEq1XaV7.js";import{$ as j}from"./useLocalizedStringFormatter-BRgbsD3G.js";import{c as D}from"./clsx-B-dksMZM.js";import{f as R}from"./PropsContextProvider-Cm-qlPij.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]],F=v("outline","bold","Bold",S);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]],H=v("outline","italic","Italic",C);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]],P=v("outline","list-numbers","ListNumbers",O);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5",key:"svg-1"}]],K=v("outline","strikethrough","Strikethrough",z);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M9 5a2 2 0 0 1 2 2v6c0 3.13 -1.65 5.193 -4.757 5.97a1 1 0 1 1 -.486 -1.94c2.227 -.557 3.243 -1.827 3.243 -4.03v-1h-3a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-3a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M18 5a2 2 0 0 1 2 2v6c0 3.13 -1.65 5.193 -4.757 5.97a1 1 0 1 1 -.486 -1.94c2.227 -.557 3.243 -1.827 3.243 -4.03v-1h-3a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-3a2 2 0 0 1 2 -2z",key:"svg-1"}]],W=v("filled","quote-filled","QuoteFilled",Q),U="flow--markdown-editor",Z="flow--markdown-editor--toolbar",G="flow--markdown-editor--toolbar-buttons",J="flow--markdown-editor--mode-button",V="flow--markdown-editor--markdown",x={markdownEditor:U,"mode-editor":"flow--markdown-editor--mode-editor","mode-preview":"flow--markdown-editor--mode-preview",toolbar:Z,toolbarButtons:G,modeButton:J,markdown:V},X={bold:{before:"**",after:"**",toggleable:!0},italic:{before:"*",after:"*",toggleable:!0},strikeThrough:{before:"~~",after:"~~",toggleable:!0},quote:{before:"> "},code:{before:"`",after:"`"},link:{before:"[",after:"](https://)"},unorderedList:{before:"- "},orderedList:{before:"1. "}},Y=(t,p,u,o,n)=>{const s=u.current;if(!s)return;const{before:h,after:m="",toggleable:f=!1}=X[o],r=s.selectionStart,c=s.selectionEnd,i=t.substring(r,c),b=i.split(`
`),w=i.startsWith(h)&&i.endsWith(m);let a,l=0;if(o==="code"&&i.includes(`
`))a=t.substring(0,r)+"```\n"+i+"\n```\n"+t.substring(c),l=r+4+i.length;else if(o==="orderedList"){const d=b.map((g,$)=>`${$+1}. ${g}`).join(`
`);a=t.substring(0,r)+d+t.substring(c),l=r+d.length}else if(o==="unorderedList"){const d=b.map(g=>`- ${g}`).join(`
`);a=t.substring(0,r)+d+t.substring(c),l=r+d.length}else if(o==="quote"){const d=b.map(g=>`> ${g}`).join(`
`);a=t.substring(0,r)+d+t.substring(c),l=r+d.length}else if(f&&w){const d=i.slice(h.length,i.length-m.length);a=t.substring(0,r)+d+t.substring(c),l=r+d.length}else a=t.substring(0,r)+h+i+m+t.substring(c),l=r+h.length+i.length+m.length;p(a),n&&n(a),requestAnimationFrame(()=>{s.setSelectionRange(l,l),s.focus()})},E={"de-DE":{"mode.editor":"Editor","mode.preview":"Preview","toolbar.bold":"Fett","toolbar.code":"Code","toolbar.italic":"Kursiv","toolbar.link":"Link","toolbar.orderedList":"Sortierte Liste","toolbar.quote":"Zitat","toolbar.strikeThrough":"Durchgestrichen","toolbar.unorderedList":"Liste"},"en-US":{"mode.editor":"Editor","mode.preview":"Preview","toolbar.bold":"Bold","toolbar.code":"Code","toolbar.italic":"Italic","toolbar.link":"Link","toolbar.orderedList":"Ordered List","toolbar.quote":"Quote","toolbar.strikeThrough":"Strike through","toolbar.unorderedList":"List"}},y=t=>{const{markdown:p,setMarkdown:u,textAreaRef:o,children:n,isDisabled:s,type:h,onChange:m}=t,f=j(E);return e.jsx(T,{isDisabled:s,"aria-label":f.format(`toolbar.${h}`),size:"s",variant:"plain",color:"dark",onPress:()=>Y(p,u,o,h,m),children:n})};y.__docgenInfo={description:"",methods:[],displayName:"ToolbarButton",props:{markdown:{required:!0,tsType:{name:"string"},description:""},setMarkdown:{required:!0,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""},textAreaRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLTextAreaElement | null",elements:[{name:"HTMLTextAreaElement"},{name:"null"}]}],raw:"RefObject<HTMLTextAreaElement | null>"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},type:{required:!0,tsType:{name:"InsertType"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""}},composes:["PropsWithChildren"]};const q=t=>{const{setMode:p,mode:u,isDisabled:o}=t,n=j(E),s=u==="editor"?"preview":"editor";return e.jsx(T,{isDisabled:o,className:x.modeButton,size:"s",variant:"plain",color:"dark",onPress:()=>p(s),children:n.format(`mode.${s}`)})};q.__docgenInfo={description:"",methods:[],displayName:"ModeButton",props:{mode:{required:!0,tsType:{name:"MarkdownEditorMode"},description:""},setMode:{required:!0,tsType:{name:"signature",type:"function",raw:"(mode: MarkdownEditorMode) => void",signature:{arguments:[{type:{name:"MarkdownEditorMode"},name:"mode"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""}}};const L=t=>{const{setMode:p,mode:u,...o}=t;return e.jsxs("header",{className:x.toolbar,children:[u==="editor"&&e.jsxs("div",{className:x.toolbarButtons,children:[e.jsx(y,{...o,type:"bold",children:e.jsx(k,{children:e.jsx(F,{})})}),e.jsx(y,{...o,type:"italic",children:e.jsx(k,{children:e.jsx(H,{})})}),e.jsx(y,{...o,type:"strikeThrough",children:e.jsx(k,{children:e.jsx(K,{})})}),e.jsx(y,{...o,type:"quote",children:e.jsx(k,{children:e.jsx(W,{})})}),e.jsx(y,{...o,type:"code",children:e.jsx(_,{})}),e.jsx(y,{...o,type:"link",children:e.jsx(A,{})}),e.jsx(y,{...o,type:"unorderedList",children:e.jsx(k,{children:e.jsx(B,{})})}),e.jsx(y,{...o,type:"orderedList",children:e.jsx(k,{children:e.jsx(P,{})})})]}),e.jsx(q,{setMode:p,mode:u,isDisabled:t.isDisabled})]})};L.__docgenInfo={description:"",methods:[],displayName:"Toolbar",props:{markdown:{required:!0,tsType:{name:"string"},description:""},setMarkdown:{required:!0,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""},textAreaRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLTextAreaElement | null",elements:[{name:"HTMLTextAreaElement"},{name:"null"}]}],raw:"RefObject<HTMLTextAreaElement | null>"},description:""},setMode:{required:!0,tsType:{name:"signature",type:"function",raw:"(mode: MarkdownEditorMode) => void",signature:{arguments:[{type:{name:"MarkdownEditorMode"},name:"mode"}],return:{name:"void"}}},description:""},mode:{required:!0,tsType:{name:"MarkdownEditorMode"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""}}};const ee=(t,p,u,o)=>{if(t.key!=="Enter")return;const n=p.current;if(!n)return;const s=n.selectionStart,h=n.selectionEnd,m=n.value,f=m.slice(0,s),r=m.slice(h),c=f.lastIndexOf(`
`)+1,i=f.slice(c),b=i.match(/^(\s*)(\d+)\.\s+/),w=i.match(/^(\s*)([-*+])\s+/);if((b||w)&&i.trim().match(/^([-*+]|\d+\.)$/)){t.preventDefault();const a=m.slice(0,c)+`
`+r;u(a),o&&o(a),requestAnimationFrame(()=>{n.selectionStart=n.selectionEnd=c+1});return}if(b){t.preventDefault();const a=b[1],l=parseInt(b[2]??"",10)+1,d=`
${a}${l}. `,g=f+d+r;u(g),o&&o(g),requestAnimationFrame(()=>{n.selectionStart=n.selectionEnd=s+d.length})}else if(w){t.preventDefault();const a=w[1],l=w[2],d=`
${a}${l} `,g=f+d+r;u(g),o&&o(g),requestAnimationFrame(()=>{n.selectionStart=n.selectionEnd=s+d.length})}},te=R("MarkdownEditor",t=>{const{isDisabled:p,children:u,className:o,value:n,onChange:s,rows:h,autoResizeMaxRows:m,...f}=t,[r,c]=M.useState(n??""),[i,b]=M.useState("editor"),w=M.useRef(null),a=D(x.markdownEditor,o,x[`mode-${i}`]);return e.jsxs(N,{...f,isDisabled:p,className:a,ref:w,value:r,rows:h,autoResizeMaxRows:m,onChange:l=>c(l),onKeyDown:l=>ee(l,w,c,s),children:[e.jsx(L,{markdown:r,setMarkdown:c,textAreaRef:w,setMode:b,mode:i,isDisabled:p,onChange:s}),e.jsx(I,{className:x.markdown,style:{maxHeight:`calc(var(--line-height--m) * ${m??h} + (var(--form-control--padding-y) * 2))`},children:r}),u]})});te.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"MarkdownEditor"};export{te as M};
