import{j as e,r as v}from"./iframe-DqL79zQf.js";import{M as _}from"./Markdown-BDmub1aP.js";import{T as I}from"./TextArea-BTXjTr4O.js";import{N as x,D as b,O as $,P as B,Q as R}from"./IconWarning-B2WreSxS.js";import{B as T}from"./Button-QUsEiN5S.js";import{$ as j}from"./useLocalizedStringFormatter-0rSYolxh.js";import{c as A}from"./clsx-B-dksMZM.js";import{f as C}from"./PropsContextProvider-CyLvSquV.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]],S=x("outline","bold","Bold",D);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]],P=x("outline","italic","Italic",H);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]],O=x("outline","list-numbers","ListNumbers",z);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5",key:"svg-1"}]],Q=x("outline","strikethrough","Strikethrough",F);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M9 5a2 2 0 0 1 2 2v6c0 3.13 -1.65 5.193 -4.757 5.97a1 1 0 1 1 -.486 -1.94c2.227 -.557 3.243 -1.827 3.243 -4.03v-1h-3a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-3a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M18 5a2 2 0 0 1 2 2v6c0 3.13 -1.65 5.193 -4.757 5.97a1 1 0 1 1 -.486 -1.94c2.227 -.557 3.243 -1.827 3.243 -4.03v-1h-3a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-3a2 2 0 0 1 2 -2z",key:"svg-1"}]],K=x("filled","quote-filled","QuoteFilled",W),U="flow--markdown-editor",Z="flow--markdown-editor--toolbar",G="flow--markdown-editor--toolbar-buttons",J="flow--markdown-editor--mode-button",V="flow--markdown-editor--markdown",f={markdownEditor:U,"mode-editor":"flow--markdown-editor--mode-editor","mode-preview":"flow--markdown-editor--mode-preview",toolbar:Z,toolbarButtons:G,modeButton:J,markdown:V},X={bold:{before:"**",after:"**",toggleable:!0},italic:{before:"*",after:"*",toggleable:!0},strikeThrough:{before:"~~",after:"~~",toggleable:!0},quote:{before:"> "},code:{before:"`",after:"`"},link:{before:"[",after:"](https://)"},unorderedList:{before:"- "},orderedList:{before:"1. "}},Y=(t,a,d,o,h)=>{const s=d.current;if(!s)return;const{before:l,after:p="",toggleable:k=!1}=X[o],r=s.selectionStart,c=s.selectionEnd,n=t.substring(r,c),w=n.split(`
`),M=n.startsWith(l)&&n.endsWith(p);let u,m=0;if(o==="code"&&n.includes(`
`))u=t.substring(0,r)+"```\n"+n+"\n```\n"+t.substring(c),m=r+4+n.length;else if(o==="orderedList"){const i=w.map((y,N)=>`${N+1}. ${y}`).join(`
`);u=t.substring(0,r)+i+t.substring(c),m=r+i.length}else if(o==="unorderedList"){const i=w.map(y=>`- ${y}`).join(`
`);u=t.substring(0,r)+i+t.substring(c),m=r+i.length}else if(o==="quote"){const i=w.map(y=>`> ${y}`).join(`
`);u=t.substring(0,r)+i+t.substring(c),m=r+i.length}else if(k&&M){const i=n.slice(l.length,n.length-p.length);u=t.substring(0,r)+i+t.substring(c),m=r+i.length}else u=t.substring(0,r)+l+n+p+t.substring(c),m=r+l.length+n.length+p.length;a(u),h&&h(u),setTimeout(()=>{s.setSelectionRange(m,m),s.focus()},0)},L={"de-DE":{"mode.editor":"Editor","mode.preview":"Preview","toolbar.bold":"Fett","toolbar.code":"Code","toolbar.italic":"Kursiv","toolbar.link":"Link","toolbar.orderedList":"Sortierte Liste","toolbar.quote":"Zitat","toolbar.strikeThrough":"Durchgestrichen","toolbar.unorderedList":"Liste"},"en-US":{"mode.editor":"Editor","mode.preview":"Preview","toolbar.bold":"Bold","toolbar.code":"Code","toolbar.italic":"Italic","toolbar.link":"Link","toolbar.orderedList":"Ordered List","toolbar.quote":"Quote","toolbar.strikeThrough":"Strike through","toolbar.unorderedList":"List"}},g=t=>{const{markdown:a,setMarkdown:d,textAreaRef:o,children:h,isDisabled:s,type:l,onChange:p}=t,k=j(L);return e.jsx(T,{isDisabled:s,"aria-label":k.format(`toolbar.${l}`),size:"s",variant:"plain",color:"dark",onPress:()=>Y(a,d,o,l,p),children:h})};g.__docgenInfo={description:"",methods:[],displayName:"ToolbarButton",props:{markdown:{required:!0,tsType:{name:"string"},description:""},setMarkdown:{required:!0,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""},textAreaRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLTextAreaElement | null",elements:[{name:"HTMLTextAreaElement"},{name:"null"}]}],raw:"RefObject<HTMLTextAreaElement | null>"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},type:{required:!0,tsType:{name:"InsertType"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""}},composes:["PropsWithChildren"]};const E=t=>{const{setMode:a,mode:d,isDisabled:o}=t,h=j(L),s=d==="editor"?"preview":"editor";return e.jsx(T,{isDisabled:o,className:f.modeButton,size:"s",variant:"plain",color:"dark",onPress:()=>a(s),children:h.format(`mode.${s}`)})};E.__docgenInfo={description:"",methods:[],displayName:"ModeButton",props:{mode:{required:!0,tsType:{name:"MarkdownEditorMode"},description:""},setMode:{required:!0,tsType:{name:"signature",type:"function",raw:"(mode: MarkdownEditorMode) => void",signature:{arguments:[{type:{name:"MarkdownEditorMode"},name:"mode"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""}}};const q=t=>{const{setMode:a,mode:d,...o}=t;return e.jsxs("header",{className:f.toolbar,children:[d==="editor"&&e.jsxs("div",{className:f.toolbarButtons,children:[e.jsx(g,{...o,type:"bold",children:e.jsx(b,{children:e.jsx(S,{})})}),e.jsx(g,{...o,type:"italic",children:e.jsx(b,{children:e.jsx(P,{})})}),e.jsx(g,{...o,type:"strikeThrough",children:e.jsx(b,{children:e.jsx(Q,{})})}),e.jsx(g,{...o,type:"quote",children:e.jsx(b,{children:e.jsx(K,{})})}),e.jsx(g,{...o,type:"code",children:e.jsx($,{})}),e.jsx(g,{...o,type:"link",children:e.jsx(B,{})}),e.jsx(g,{...o,type:"unorderedList",children:e.jsx(b,{children:e.jsx(R,{})})}),e.jsx(g,{...o,type:"orderedList",children:e.jsx(b,{children:e.jsx(O,{})})})]}),e.jsx(E,{setMode:a,mode:d,isDisabled:t.isDisabled})]})};q.__docgenInfo={description:"",methods:[],displayName:"Toolbar",props:{markdown:{required:!0,tsType:{name:"string"},description:""},setMarkdown:{required:!0,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""},textAreaRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLTextAreaElement | null",elements:[{name:"HTMLTextAreaElement"},{name:"null"}]}],raw:"RefObject<HTMLTextAreaElement | null>"},description:""},setMode:{required:!0,tsType:{name:"signature",type:"function",raw:"(mode: MarkdownEditorMode) => void",signature:{arguments:[{type:{name:"MarkdownEditorMode"},name:"mode"}],return:{name:"void"}}},description:""},mode:{required:!0,tsType:{name:"MarkdownEditorMode"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""}}};const ee=C("MarkdownEditor",t=>{const{isDisabled:a,children:d,className:o,value:h,onChange:s,rows:l,autoResizeMaxRows:p,...k}=t,[r,c]=v.useState(h??""),[n,w]=v.useState("editor"),M=v.useRef(null),u=A(f.markdownEditor,o,f[`mode-${n}`]);return e.jsxs(I,{...k,isDisabled:a,className:u,ref:M,value:r,rows:l,autoResizeMaxRows:p,onChange:m=>c(m),children:[e.jsx(q,{markdown:r,setMarkdown:c,textAreaRef:M,setMode:w,mode:n,isDisabled:a,onChange:s}),e.jsx(_,{className:f.markdown,style:{maxHeight:`calc(var(--line-height--m) * ${p??l} + (var(--form-control--padding-y) * 2))`},children:r}),d]})});ee.__docgenInfo={description:"",methods:[],displayName:"MarkdownEditor"};export{ee as M};
