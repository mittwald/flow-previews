import{j as e,r as j}from"./iframe-B2KmHf-y.js";import{M as _}from"./Markdown-BY_v-v7W.js";import{T as A}from"./TextArea-BR2XJJXG.js";import{O as M,K as y,P as R,Q as S,R as B}from"./IconWarning-BfZFkMSG.js";import{B as E}from"./Button-BbFeJzIv.js";import{$ as L}from"./useLocalizedStringFormatter-C1KZ20Nl.js";import{c as D}from"./clsx-B-dksMZM.js";import{f as F}from"./PropsContextProvider-DZxLHc6o.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]],C=M("outline","bold","Bold",O);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]],P=M("outline","italic","Italic",H);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]],U=M("outline","list-numbers","ListNumbers",z);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5",key:"svg-1"}]],Q=M("outline","strikethrough","Strikethrough",K);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M9 5a2 2 0 0 1 2 2v6c0 3.13 -1.65 5.193 -4.757 5.97a1 1 0 1 1 -.486 -1.94c2.227 -.557 3.243 -1.827 3.243 -4.03v-1h-3a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-3a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M18 5a2 2 0 0 1 2 2v6c0 3.13 -1.65 5.193 -4.757 5.97a1 1 0 1 1 -.486 -1.94c2.227 -.557 3.243 -1.827 3.243 -4.03v-1h-3a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-3a2 2 0 0 1 2 -2z",key:"svg-1"}]],V=M("filled","quote-filled","QuoteFilled",W),Z="flow--markdown-editor",G="flow--markdown-editor--toolbar",J="flow--markdown-editor--toolbar-buttons",X="flow--markdown-editor--mode-button",Y="flow--markdown-editor--markdown",v={markdownEditor:Z,"mode-editor":"flow--markdown-editor--mode-editor","mode-preview":"flow--markdown-editor--mode-preview",toolbar:G,toolbarButtons:J,modeButton:X,markdown:Y},ee={bold:{before:"**",after:"**",toggleable:!0},italic:{before:"*",after:"*",toggleable:!0},strikeThrough:{before:"~~",after:"~~",toggleable:!0},quote:{before:"> "},code:{before:"`",after:"`"},link:{before:"[",after:"](https://)"},unorderedList:{before:"- "},orderedList:{before:"1. "}},te=(t,h,u,o,i)=>{const d=u.current;if(!d)return;const{before:f,after:p="",toggleable:g=!1}=ee[o],r=d.selectionStart,c=d.selectionEnd,n=t.substring(r,c),b=n.split(`
`),x=n.startsWith(f)&&n.endsWith(p);let a,l=0;if(o==="code"&&n.includes(`
`))a=t.substring(0,r)+"```\n"+n+"\n```\n"+t.substring(c),l=r+4+n.length;else if(o==="orderedList"){const s=b.map((m,w)=>`${w+1}. ${m}`).join(`
`);a=t.substring(0,r)+s+t.substring(c),l=r+s.length}else if(o==="unorderedList"){const s=b.map(m=>`- ${m}`).join(`
`);a=t.substring(0,r)+s+t.substring(c),l=r+s.length}else if(o==="quote"){const s=b.map(m=>`> ${m}`).join(`
`);a=t.substring(0,r)+s+t.substring(c),l=r+s.length}else if(g&&x){const s=n.slice(f.length,n.length-p.length);a=t.substring(0,r)+s+t.substring(c),l=r+s.length}else if(o==="link"){let s="",m="",w="",T=0;n?(N=>{try{return new URL(N),!0}catch{return!1}})(n)?(m=n,w=`[](${m})`,T=r+1):(s=n,w=`[${s}]()`,T=r+w.indexOf("](")+2):(w="[](https://)",T=r+1),a=t.substring(0,r)+w+t.substring(c),l=T}else a=t.substring(0,r)+f+n+p+t.substring(c),l=r+f.length+n.length+p.length;h(a),i&&i(a),requestAnimationFrame(()=>{d.setSelectionRange(l,l),d.focus()})},q={"de-DE":{"mode.editor":"Editor","mode.preview":"Preview","toolbar.bold":"Fett","toolbar.code":"Code","toolbar.italic":"Kursiv","toolbar.link":"Link","toolbar.orderedList":"Sortierte Liste","toolbar.quote":"Zitat","toolbar.strikeThrough":"Durchgestrichen","toolbar.unorderedList":"Liste"},"en-US":{"mode.editor":"Editor","mode.preview":"Preview","toolbar.bold":"Bold","toolbar.code":"Code","toolbar.italic":"Italic","toolbar.link":"Link","toolbar.orderedList":"Ordered List","toolbar.quote":"Quote","toolbar.strikeThrough":"Strike through","toolbar.unorderedList":"List"}},k=t=>{const{markdown:h,setMarkdown:u,textAreaRef:o,children:i,isDisabled:d,type:f,onChange:p}=t,g=L(q);return e.jsx(E,{isDisabled:d,"aria-label":g.format(`toolbar.${f}`),size:"s",variant:"plain",color:"dark",onPress:()=>te(h,u,o,f,p),children:i})};k.__docgenInfo={description:"",methods:[],displayName:"ToolbarButton",props:{markdown:{required:!0,tsType:{name:"string"},description:""},setMarkdown:{required:!0,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""},textAreaRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLTextAreaElement | null",elements:[{name:"HTMLTextAreaElement"},{name:"null"}]}],raw:"RefObject<HTMLTextAreaElement | null>"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},type:{required:!0,tsType:{name:"InsertType"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""}},composes:["PropsWithChildren"]};const $=t=>{const{setMode:h,mode:u,isDisabled:o}=t,i=L(q),d=u==="editor"?"preview":"editor";return e.jsx(E,{isDisabled:o,className:v.modeButton,size:"s",variant:"plain",color:"dark",onPress:()=>h(d),children:i.format(`mode.${d}`)})};$.__docgenInfo={description:"",methods:[],displayName:"ModeButton",props:{mode:{required:!0,tsType:{name:"MarkdownEditorMode"},description:""},setMode:{required:!0,tsType:{name:"signature",type:"function",raw:"(mode: MarkdownEditorMode) => void",signature:{arguments:[{type:{name:"MarkdownEditorMode"},name:"mode"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""}}};const I=t=>{const{setMode:h,mode:u,...o}=t;return e.jsxs("header",{className:v.toolbar,children:[u==="editor"&&e.jsxs("div",{className:v.toolbarButtons,children:[e.jsx(k,{...o,type:"bold",children:e.jsx(y,{children:e.jsx(C,{})})}),e.jsx(k,{...o,type:"italic",children:e.jsx(y,{children:e.jsx(P,{})})}),e.jsx(k,{...o,type:"strikeThrough",children:e.jsx(y,{children:e.jsx(Q,{})})}),e.jsx(k,{...o,type:"quote",children:e.jsx(y,{children:e.jsx(V,{})})}),e.jsx(k,{...o,type:"code",children:e.jsx(R,{})}),e.jsx(k,{...o,type:"link",children:e.jsx(S,{})}),e.jsx(k,{...o,type:"unorderedList",children:e.jsx(y,{children:e.jsx(B,{})})}),e.jsx(k,{...o,type:"orderedList",children:e.jsx(y,{children:e.jsx(U,{})})})]}),e.jsx($,{setMode:h,mode:u,isDisabled:t.isDisabled})]})};I.__docgenInfo={description:"",methods:[],displayName:"Toolbar",props:{markdown:{required:!0,tsType:{name:"string"},description:""},setMarkdown:{required:!0,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""},textAreaRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLTextAreaElement | null",elements:[{name:"HTMLTextAreaElement"},{name:"null"}]}],raw:"RefObject<HTMLTextAreaElement | null>"},description:""},setMode:{required:!0,tsType:{name:"signature",type:"function",raw:"(mode: MarkdownEditorMode) => void",signature:{arguments:[{type:{name:"MarkdownEditorMode"},name:"mode"}],return:{name:"void"}}},description:""},mode:{required:!0,tsType:{name:"MarkdownEditorMode"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(markdown: string) => void",signature:{arguments:[{type:{name:"string"},name:"markdown"}],return:{name:"void"}}},description:""}}};const oe=(t,h,u,o)=>{if(t.key!=="Enter")return;const i=h.current;if(!i)return;const d=i.selectionStart,f=i.selectionEnd,p=i.value,g=p.slice(0,d),r=p.slice(f),c=g.lastIndexOf(`
`)+1,n=g.slice(c),b=n.match(/^(\s*)(\d+)\.\s+/),x=n.match(/^(\s*)([-*+])\s+/);if((b||x)&&n.trim().match(/^([-*+]|\d+\.)$/)){t.preventDefault();const a=p.slice(0,c)+`
`+r;u(a),o&&o(a),requestAnimationFrame(()=>{i.selectionStart=i.selectionEnd=c+1});return}if(b){t.preventDefault();const a=b[1],l=parseInt(b[2]??"",10)+1,s=`
${a}${l}. `,m=g+s+r;u(m),o&&o(m),requestAnimationFrame(()=>{i.selectionStart=i.selectionEnd=d+s.length})}else if(x){t.preventDefault();const a=x[1],l=x[2],s=`
${a}${l} `,m=g+s+r;u(m),o&&o(m),requestAnimationFrame(()=>{i.selectionStart=i.selectionEnd=d+s.length})}},re=F("MarkdownEditor",t=>{const{isDisabled:h,children:u,className:o,value:i,onChange:d,rows:f,autoResizeMaxRows:p,...g}=t,[r,c]=j.useState(i??""),[n,b]=j.useState("editor"),x=j.useRef(null),a=D(v.markdownEditor,o,v[`mode-${n}`]);return e.jsxs(A,{...g,isDisabled:h,className:a,ref:x,value:r,rows:f,autoResizeMaxRows:p,onChange:l=>c(l),onKeyDown:l=>oe(l,x,c,d),children:[e.jsx(I,{markdown:r,setMarkdown:c,textAreaRef:x,setMode:b,mode:n,isDisabled:h,onChange:d}),e.jsx(_,{className:v.markdown,style:{maxHeight:`calc(var(--line-height--m) * ${p??f} + (var(--form-control--padding-y) * 2))`},children:r}),u]})});re.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"MarkdownEditor"};export{re as M};
