import{R as s,r as a,j as v}from"./iframe-CqlVwSqw.js";import{c as j}from"./clsx-B-dksMZM.js";import{c as H,d as B,e as _,b as F,f as W,g as k,C as A,$ as U}from"./ClearPropsContextView-C3Bv20Xw.js";import{$ as V,e as K,a as z}from"./utils-B7PoWZoE.js";import{c as Y,R as q,$ as h,f as G,b as J}from"./mergeRefs-Cx0s-cU7.js";import{$ as D}from"./filterDOMProps-CghfNOdR.js";import{$ as Q,c as X}from"./useFocusable-BReVx9rr.js";import{w as Z,g as ee}from"./useFocus-qWrFSXYF.js";import{$ as S}from"./useFocusRing-DLxcniMF.js";const C=s.createContext(null);function te(t){let{children:r}=t,e=a.useContext(C),[l,i]=a.useState(0),c=a.useMemo(()=>({parent:e,modalCount:l,addModal(){i(n=>n+1),e&&e.addModal()},removeModal(){i(n=>n-1),e&&e.removeModal()}}),[e,l]);return s.createElement(C.Provider,{value:c},r)}function re(){let t=a.useContext(C);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:void 0}}}function oe(t){let{modalProviderProps:r}=re();return s.createElement("div",{"data-overlay-container":!0,...t,...r})}function le(t){return s.createElement(te,null,s.createElement(oe,t))}function ne(t){let r=Y(),{portalContainer:e=r?null:document.body,...l}=t,{getContainer:i}=H();if(!t.portalContainer&&i&&(e=i()),s.useEffect(()=>{if(e!=null&&e.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[e]),!e)return null;let c=s.createElement(le,l);return q.createPortal(c,e)}function ae(t,r){let e=D(t,{labelable:!0}),{hoverProps:l}=S({onHoverStart:()=>r==null?void 0:r.open(!0),onHoverEnd:()=>r==null?void 0:r.close()});return{tooltipProps:h(e,l,{role:"tooltip"})}}function ie(t,r,e){let{isDisabled:l,trigger:i}=t,c=G(),n=a.useRef(!1),o=a.useRef(!1),u=()=>{(n.current||o.current)&&r.open(o.current)},f=P=>{!n.current&&!o.current&&r.close(P)};a.useEffect(()=>{let P=y=>{e&&e.current&&y.key==="Escape"&&(y.stopPropagation(),r.close(!0))};if(r.isOpen)return document.addEventListener("keydown",P,!0),()=>{document.removeEventListener("keydown",P,!0)}},[e,r]);let x=()=>{i!=="focus"&&(Z()==="pointer"?n.current=!0:n.current=!1,u())},p=()=>{i!=="focus"&&(o.current=!1,n.current=!1,f())},g=()=>{o.current=!1,n.current=!1,f(!0)},T=()=>{ee()&&(o.current=!0,u())},d=()=>{o.current=!1,n.current=!1,f(!0)},{hoverProps:L}=S({isDisabled:l,onHoverStart:x,onHoverEnd:p}),{focusableProps:N}=Q({isDisabled:l,onFocus:T,onBlur:d},e);return{triggerProps:{"aria-describedby":r.isOpen?c:void 0,...h(N,L,{onPointerDown:g,onKeyDown:g,tabIndex:void 0})},tooltipProps:{id:c}}}const ce=1500,w=500;let b={},se=0,E=!1,$=null,m=null;function M(t={}){let{delay:r=ce,closeDelay:e=w}=t,{isOpen:l,open:i,close:c}=B(t),n=a.useMemo(()=>`${++se}`,[]),o=a.useRef(null),u=a.useRef(c),f=()=>{b[n]=g},x=()=>{for(let d in b)d!==n&&(b[d](!0),delete b[d])},p=()=>{o.current&&clearTimeout(o.current),o.current=null,x(),f(),E=!0,i(),$&&(clearTimeout($),$=null),m&&(clearTimeout(m),m=null)},g=d=>{d||e<=0?(o.current&&clearTimeout(o.current),o.current=null,u.current()):o.current||(o.current=setTimeout(()=>{o.current=null,u.current()},e)),$&&(clearTimeout($),$=null),E&&(m&&clearTimeout(m),m=setTimeout(()=>{delete b[n],m=null,E=!1},Math.max(w,e)))},T=()=>{x(),f(),!l&&!$&&!E?$=setTimeout(()=>{$=null,E=!0,p()},r):l||p()};return a.useEffect(()=>{u.current=c},[c]),a.useEffect(()=>()=>{o.current&&clearTimeout(o.current),b[n]&&delete b[n]},[n]),{isOpen:l,open:d=>{!d&&r>0&&!o.current?T():p()},close:g}}const O=a.createContext(null),I=a.createContext(null);function fe(t){let r=M(t),e=a.useRef(null),{triggerProps:l,tooltipProps:i}=ie(t,r,e);return s.createElement(K,{values:[[O,r],[I,{...i,triggerRef:e}]]},s.createElement(X,{...l,ref:e},t.children))}const de=a.forwardRef(function({UNSTABLE_portalContainer:r,...e},l){[e,l]=V(e,l,I);let i=a.useContext(O),c=M(e),n=e.isOpen!=null||e.defaultOpen!=null||!i?c:i,o=_(l,n.isOpen)||e.isExiting||!1;return!n.isOpen&&!o?null:s.createElement(ne,{portalContainer:r},s.createElement(ue,{...e,tooltipRef:l,isExiting:o}))});function ue(t){let r=a.useContext(O),e=a.useRef(null),[l,i]=a.useState(0);J(()=>{e.current&&r.isOpen&&i(e.current.getBoundingClientRect().width)},[r.isOpen,e]);let{overlayProps:c,arrowProps:n,placement:o}=F({placement:t.placement||"top",targetRef:t.triggerRef,overlayRef:t.tooltipRef,offset:t.offset,crossOffset:t.crossOffset,isOpen:r.isOpen,arrowSize:l,arrowBoundaryOffset:t.arrowBoundaryOffset,shouldFlip:t.shouldFlip,onClose:()=>r.close(!0)}),u=W(t.tooltipRef,!!o)||t.isEntering||!1,f=z({...t,defaultClassName:"react-aria-Tooltip",values:{placement:o,isEntering:u,isExiting:t.isExiting,state:r}});t=h(t,c);let{tooltipProps:x}=ae(t,r),p=D(t,{global:!0});return s.createElement("div",{...h(p,f,x),ref:t.tooltipRef,style:{...c.style,...f.style},"data-placement":o??void 0,"data-entering":u||void 0,"data-exiting":t.isExiting||void 0},s.createElement(k.Provider,{value:{...n,placement:o,ref:e}},f.children))}const $e=t=>{const{children:r,...e}=t;return v.jsx(fe,{...e,children:r})};$e.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TooltipTrigger"};const pe="flow--tooltip",be="flow--tooltip--tip",R={tooltip:pe,tip:be},me=t=>{const{children:r,className:e,...l}=t,i=j(R.tooltip,e);return v.jsx(A,{children:v.jsxs(de,{...l,className:i,children:[v.jsx(U,{className:R.tip,children:v.jsx("svg",{viewBox:"0 0 8 8",children:v.jsx("path",{d:"M0 0 L4 4 L8 0"})})}),r]})})};me.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tooltip"};export{$e as T,me as a};
