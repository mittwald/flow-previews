import{j as t}from"./iframe-BxDpVhRd.js";import{f as d}from"./FormField.module-CqWyJNQI.js";import{$ as I,b as w}from"./useFormValidation-BO_UVXRs.js";import{a as P}from"./FieldError-BrR5GiZM.js";import{a as j,$ as R}from"./Input-CLCKEIJY.js";import{b}from"./utils-CpjREF5t.js";import{P as F,f as B}from"./PropsContextProvider-D577-dj4.js";import"./browser-DkE4SP-u.js";import{u as C}from"./useMakeFocusable-DOqtKzac.js";const f="mittwald.flow-core.file.awaitedArrayBuffer";function N(e){return f in e&&e[f]instanceof ArrayBuffer&&!e[f].detached}const q=async e=>{if(N(e))return e;const s=await e.arrayBuffer();return Object.assign(e,{[f]:s}),e},A="flow--file-field--file-input",T="flow--file-field--trigger",v={FileInput:A,trigger:T},h=e=>{const{children:s,isDisabled:c,onChange:r,isReadOnly:p,ref:u}=e,a=b(u),l=()=>{var i,n;(i=a.current)!=null&&i.value&&(a.current.value="",r==null||r(null)),(n=a.current)==null||n.click()},o=i=>{r==null||r(i.target.files)},m={Button:{onPress:l,className:v.trigger,isDisabled:c,isReadOnly:p}};return t.jsxs(F,{props:m,children:[s,t.jsx(j,{className:v.FileInput,type:"file",ref:a,onChange:o})]})};h.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""},isReadOnly:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren"]};const D=B("FileField",e=>{const{children:s,ref:c,isRequired:r,isInvalid:p,isDisabled:u,validationBehavior:a,onChange:l,isReadOnly:o,...m}=e,i=b(c),n=I({value:void 0,validationBehavior:a,isInvalid:p});w({validationBehavior:a},n,i);const $={...m,"aria-invalid":n.displayValidation.isInvalid,value:void 0},g={Label:{className:d.label,optional:!e.isRequired},FieldDescription:{className:d.fieldDescription},FieldError:{className:d.customFieldError}},x=y=>{y&&l&&Promise.all(Array.from(y).map(q)).then(()=>l(y))};return C(i),t.jsx(R.Provider,{value:$,children:t.jsx(P.Provider,{value:n.displayValidation,children:t.jsx(F,{props:g,children:t.jsx("div",{"data-readonly":o,"data-required":!!r||void 0,"data-invalid":n.displayValidation.isInvalid||void 0,className:d.formField,children:t.jsx(h,{ref:i,isReadOnly:o,onChange:o?void 0:x,isDisabled:u,children:s})})})})})});D.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"FileField"};export{D as F,q as a};
