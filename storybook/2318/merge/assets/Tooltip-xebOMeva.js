import{R as f,r as i,j as x}from"./iframe-CNIcTJYh.js";import{c as H}from"./clsx-B-dksMZM.js";import{C as _}from"./flowComponent-60nesrge.js";import{$ as B,d as k,a as A}from"./utils-BMrW0rs-.js";import{c as F,d as U,e as W,b as K,f as V,g as Y,$ as q}from"./OverlayArrow-CaHszdLs.js";import{e as z,R as G,$ as T,b as J}from"./index-D3p32_5k.js";import{$ as D}from"./filterDOMProps-BNnC3YgW.js";import{$ as Q,b as X}from"./useFocusable-pw23kKVy.js";import{k as Z,h as ee}from"./useFocus-Z0zsAUPg.js";import{$ as M}from"./useFocusRing-DW-rJUC8.js";const C=f.createContext(null);function te(e){let{children:r}=e,t=i.useContext(C),[l,a]=i.useState(0),c=i.useMemo(()=>({parent:t,modalCount:l,addModal(){a(n=>n+1),t&&t.addModal()},removeModal(){a(n=>n-1),t&&t.removeModal()}}),[t,l]);return f.createElement(C.Provider,{value:c},r)}function re(){let e=i.useContext(C);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:void 0}}}function oe(e){let{modalProviderProps:r}=re();return f.createElement("div",{"data-overlay-container":!0,...e,...r})}function le(e){return f.createElement(te,null,f.createElement(oe,e))}function ne(e){let r=z(),{portalContainer:t=r?null:document.body,...l}=e,{getContainer:a}=F();if(!e.portalContainer&&a&&(t=a()),f.useEffect(()=>{if(t?.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[t]),!t)return null;let c=f.createElement(le,l);return G.createPortal(c,t)}function ae(e,r){let t=D(e,{labelable:!0}),{hoverProps:l}=M({onHoverStart:()=>r?.open(!0),onHoverEnd:()=>r?.close()});return{tooltipProps:T(t,l,{role:"tooltip"})}}function ie(e,r,t){let{isDisabled:l,trigger:a,shouldCloseOnPress:c=!0}=e,n=J(),o=i.useRef(!1),s=i.useRef(!1),p=()=>{(o.current||s.current)&&r.open(s.current)},$=g=>{!o.current&&!s.current&&r.close(g)};i.useEffect(()=>{let g=y=>{t&&t.current&&y.key==="Escape"&&(y.stopPropagation(),r.close(!0))};if(r.isOpen)return document.addEventListener("keydown",g,!0),()=>{document.removeEventListener("keydown",g,!0)}},[t,r]);let v=()=>{a!=="focus"&&(Z()==="pointer"?o.current=!0:o.current=!1,p())},h=()=>{a!=="focus"&&(s.current=!1,o.current=!1,$())},E=()=>{c&&(s.current=!1,o.current=!1,$(!0))},d=()=>{ee()&&(s.current=!0,p())},L=()=>{s.current=!1,o.current=!1,$(!0)},{hoverProps:N}=M({isDisabled:l,onHoverStart:v,onHoverEnd:h}),{focusableProps:j}=Q({isDisabled:l,onFocus:d,onBlur:L},t);return{triggerProps:{"aria-describedby":r.isOpen?n:void 0,...T(j,N,{onPointerDown:E,onKeyDown:E}),tabIndex:void 0},tooltipProps:{id:n}}}const ce=1500,R=500;let b={},se=0,P=!1,u=null,m=null;function S(e={}){let{delay:r=ce,closeDelay:t=R}=e,{isOpen:l,open:a,close:c}=U(e),n=i.useMemo(()=>`${++se}`,[]),o=i.useRef(null),s=i.useRef(c),p=()=>{b[n]=h},$=()=>{for(let d in b)d!==n&&(b[d](!0),delete b[d])},v=()=>{o.current&&clearTimeout(o.current),o.current=null,$(),p(),P=!0,a(),u&&(clearTimeout(u),u=null),m&&(clearTimeout(m),m=null)},h=d=>{d||t<=0?(o.current&&clearTimeout(o.current),o.current=null,s.current()):o.current||(o.current=setTimeout(()=>{o.current=null,s.current()},t)),u&&(clearTimeout(u),u=null),P&&(m&&clearTimeout(m),m=setTimeout(()=>{delete b[n],m=null,P=!1},Math.max(R,t)))},E=()=>{$(),p(),!l&&!u&&!P?u=setTimeout(()=>{u=null,P=!0,v()},r):l||v()};return i.useEffect(()=>{s.current=c},[c]),i.useEffect(()=>()=>{o.current&&clearTimeout(o.current),b[n]&&delete b[n]},[n]),{isOpen:l,open:d=>{!d&&r>0&&!o.current?E():v()},close:h}}const O=i.createContext(null),I=i.createContext(null);function fe(e){let r=S(e),t=i.useRef(null),{triggerProps:l,tooltipProps:a}=ie(e,r,t);return f.createElement(k,{values:[[O,r],[I,{...a,triggerRef:t}]]},f.createElement(X,{...l,ref:t},e.children))}const de=i.forwardRef(function({UNSTABLE_portalContainer:r,...t},l){[t,l]=B(t,l,I);let a=i.useContext(O),c=S(t),n=t.isOpen!=null||t.defaultOpen!=null||!a?c:a,o=W(l,n.isOpen)||t.isExiting||!1;return!n.isOpen&&!o?null:f.createElement(ne,{portalContainer:r},f.createElement(ue,{...t,tooltipRef:l,isExiting:o}))});function ue(e){let r=i.useContext(O),t=i.useRef(null),{overlayProps:l,arrowProps:a,placement:c,triggerAnchorPoint:n}=K({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,arrowRef:t,offset:e.offset,crossOffset:e.crossOffset,isOpen:r.isOpen,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip,containerPadding:e.containerPadding,onClose:()=>r.close(!0)}),o=V(e.tooltipRef,!!c)||e.isEntering||!1,s=A({...e,defaultClassName:"react-aria-Tooltip",values:{placement:c,isEntering:o,isExiting:e.isExiting,state:r}});e=T(e,l);let{tooltipProps:p}=ae(e,r),$=D(e,{global:!0});return f.createElement("div",{...T($,s,p),ref:e.tooltipRef,style:{...l.style,"--trigger-anchor-point":n?`${n.x}px ${n.y}px`:void 0,...s.style},"data-placement":c??void 0,"data-entering":o||void 0,"data-exiting":e.isExiting||void 0},f.createElement(Y.Provider,{value:{...a,placement:c,ref:t}},s.children))}const $e=e=>{const{children:r,...t}=e;return x.jsx(fe,{...t,children:r})};$e.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TooltipTrigger"};const pe="flow--tooltip",be="flow--tooltip--tip",w={tooltip:pe,tip:be},me=e=>{const{children:r,className:t,...l}=e,a=H(w.tooltip,t);return x.jsx(_,{children:x.jsxs(de,{...l,className:a,children:[x.jsx(q,{className:w.tip,children:x.jsx("svg",{viewBox:"0 0 8 8",children:x.jsx("path",{d:"M0 0 L4 4 L8 0"})})}),r]})})};me.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tooltip"};export{$e as T,me as a};
