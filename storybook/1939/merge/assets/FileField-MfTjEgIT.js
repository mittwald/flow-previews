import{j as t}from"./iframe-DoW4S5y5.js";import{f as c}from"./FormField.module-B9AzUSUD.js";import{a as $,c as F}from"./Form-1DUWHykH.js";import{$ as P}from"./FieldError-DdRlRixc.js";import{b as w,$ as I}from"./Group-BtU7cQ2J.js";import{b as y}from"./utils-BERKyAtu.js";import{P as v,f as j}from"./PropsContextProvider-BqGtFlt4.js";import"./browser-1Svz-vih.js";const f="mittwald.flow-core.file.awaitedArrayBuffer";function C(e){return f in e&&e[f]instanceof ArrayBuffer&&!e[f].detached}const B=async e=>{if(C(e))return e;const s=await e.arrayBuffer();return Object.assign(e,{[f]:s}),e},A="flow--file-field--trigger",N={trigger:A},h=e=>{const{children:s,isDisabled:o,onChange:r,ref:p}=e,n=y(p),l=()=>{var i,a;(i=n.current)!=null&&i.value&&(n.current.value="",r==null||r(null)),(a=n.current)==null||a.click()},d=i=>{r==null||r(i.target.files)},m={Button:{onPress:l,className:N.trigger,isDisabled:o}};return t.jsxs(v,{props:m,mergeInParentContext:!0,children:[s,t.jsx(w,{style:{display:"none"},type:"file",ref:n,onChange:d})]})};h.__docgenInfo={description:"@internal",methods:[],displayName:"FileInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: FileList | null) => void",signature:{arguments:[{type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]},name:"files"}],return:{name:"void"}}},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:""},ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""}},composes:["PropsWithChildren"]};const R=j("FileField",e=>{const{children:s,ref:o,isRequired:r,isInvalid:p,isDisabled:n,validationBehavior:l,onChange:d,...m}=e,i=y(o),a=$({value:void 0,validationBehavior:l,isInvalid:p});F({validationBehavior:l},a,i);const x={...m,ref:i,"aria-invalid":a.displayValidation.isInvalid,value:void 0},b={Label:{className:c.label,optional:!e.isRequired},FieldDescription:{className:c.fieldDescription},FieldError:{className:c.customFieldError}},g=u=>{u&&d&&Promise.all(Array.from(u).map(B)).then(()=>d(u))};return t.jsx(I.Provider,{value:x,children:t.jsx(P.Provider,{value:a.displayValidation,children:t.jsx(v,{props:b,children:t.jsx("div",{"data-required":!!r||void 0,"data-invalid":a.displayValidation.isInvalid||void 0,className:c.formField,children:t.jsx(h,{ref:o,onChange:g,isDisabled:n,children:s})})})})})});R.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"FileField"};export{R as F,B as a};
