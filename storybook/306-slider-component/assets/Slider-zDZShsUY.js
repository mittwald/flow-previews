import{r as p,R as D}from"./index-uCp2LrAq.js";import{f as $e}from"./flowComponent-B3aOilil.js";import{c as Te}from"./clsx-B-dksMZM.js";import{P as we}from"./PropsContextProvider-v92cY4my.js";import{B as re}from"./Button-RSy4MY88.js";import"./IconApp-DEshkfZj.js";import{B as Pe,a as ye}from"./IconWarning-Ba_VjyzM.js";import{a as Q,d as ue,b as q,f as de,c as De}from"./utils-DZgOXw50.js";import{a as se}from"./Label-BQk6lJ-q.js";import{c as ae,b as A}from"./index-CFQDndEx.js";import{$ as ce}from"./filterDOMProps-CeZl_uWj.js";import{$ as xe}from"./useNumberFormatter-DTr98jAo.js";import{$ as Me}from"./useControlledState-B8AA3oOY.js";import{$ as Z,a as O}from"./number-nHrFdSb-.js";import{d as _,e as Ve,f as Ee}from"./usePress-CaJD4Kpr.js";import{g as ke,l as Re,m as Ke,a as Se,c as fe,b as Ce}from"./useFocusable-DpEA8Hsr.js";import{$ as me}from"./useLabel-D9TuMkUI.js";import{$ as be}from"./useLocalizedStringFormatter-CHReNXSI.js";import{$ as Fe}from"./useFormReset-Bt7ImmB-.js";import{$ as Ie}from"./VisuallyHidden-DWE0U9Im.js";function pe(r){let{onMoveStart:t,onMove:e,onMoveEnd:c}=r,o=p.useRef({didMove:!1,lastPosition:null,id:null}),{addGlobalListener:l,removeGlobalListener:f}=_(),g=ae((u,P,$,i)=>{$===0&&i===0||(o.current.didMove||(o.current.didMove=!0,t==null||t({type:"movestart",pointerType:P,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey})),e==null||e({type:"move",pointerType:P,deltaX:$,deltaY:i,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey}))}),h=ae((u,P)=>{Ve(),o.current.didMove&&(c==null||c({type:"moveend",pointerType:P,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey}))});return{moveProps:p.useMemo(()=>{let u={},P=()=>{Ee(),o.current.didMove=!1};if(typeof PointerEvent>"u"){let i=n=>{if(n.button===0){var m,b,v,y;g(n,"mouse",n.pageX-((v=(m=o.current.lastPosition)===null||m===void 0?void 0:m.pageX)!==null&&v!==void 0?v:0),n.pageY-((y=(b=o.current.lastPosition)===null||b===void 0?void 0:b.pageY)!==null&&y!==void 0?y:0)),o.current.lastPosition={pageX:n.pageX,pageY:n.pageY}}},x=n=>{n.button===0&&(h(n,"mouse"),f(window,"mousemove",i,!1),f(window,"mouseup",x,!1))};u.onMouseDown=n=>{n.button===0&&(P(),n.stopPropagation(),n.preventDefault(),o.current.lastPosition={pageX:n.pageX,pageY:n.pageY},l(window,"mousemove",i,!1),l(window,"mouseup",x,!1))};let s=n=>{let m=[...n.changedTouches].findIndex(({identifier:E})=>E===o.current.id);if(m>=0){var b,v;let{pageX:E,pageY:I}=n.changedTouches[m];var y,M;g(n,"touch",E-((y=(b=o.current.lastPosition)===null||b===void 0?void 0:b.pageX)!==null&&y!==void 0?y:0),I-((M=(v=o.current.lastPosition)===null||v===void 0?void 0:v.pageY)!==null&&M!==void 0?M:0)),o.current.lastPosition={pageX:E,pageY:I}}},T=n=>{[...n.changedTouches].findIndex(({identifier:b})=>b===o.current.id)>=0&&(h(n,"touch"),o.current.id=null,f(window,"touchmove",s),f(window,"touchend",T),f(window,"touchcancel",T))};u.onTouchStart=n=>{if(n.changedTouches.length===0||o.current.id!=null)return;let{pageX:m,pageY:b,identifier:v}=n.changedTouches[0];P(),n.stopPropagation(),n.preventDefault(),o.current.lastPosition={pageX:m,pageY:b},o.current.id=v,l(window,"touchmove",s,!1),l(window,"touchend",T,!1),l(window,"touchcancel",T,!1)}}else{let i=s=>{if(s.pointerId===o.current.id){var T,n;let v=s.pointerType||"mouse";var m,b;g(s,v,s.pageX-((m=(T=o.current.lastPosition)===null||T===void 0?void 0:T.pageX)!==null&&m!==void 0?m:0),s.pageY-((b=(n=o.current.lastPosition)===null||n===void 0?void 0:n.pageY)!==null&&b!==void 0?b:0)),o.current.lastPosition={pageX:s.pageX,pageY:s.pageY}}},x=s=>{if(s.pointerId===o.current.id){let T=s.pointerType||"mouse";h(s,T),o.current.id=null,f(window,"pointermove",i,!1),f(window,"pointerup",x,!1),f(window,"pointercancel",x,!1)}};u.onPointerDown=s=>{s.button===0&&o.current.id==null&&(P(),s.stopPropagation(),s.preventDefault(),o.current.lastPosition={pageX:s.pageX,pageY:s.pageY},o.current.id=s.pointerId,l(window,"pointermove",i,!1),l(window,"pointerup",x,!1),l(window,"pointercancel",x,!1))}}let $=(i,x,s)=>{P(),g(i,"keyboard",x,s),h(i,"keyboard")};return u.onKeyDown=i=>{switch(i.key){case"Left":case"ArrowLeft":i.preventDefault(),i.stopPropagation(),$(i,-1,0);break;case"Right":case"ArrowRight":i.preventDefault(),i.stopPropagation(),$(i,1,0);break;case"Up":case"ArrowUp":i.preventDefault(),i.stopPropagation(),$(i,0,-1);break;case"Down":case"ArrowDown":i.preventDefault(),i.stopPropagation(),$(i,0,1);break}},u},[o,l,f,g,h])}}const ee=new WeakMap;function J(r,t){let e=ee.get(r);if(!e)throw new Error("Unknown slider state");return`${e.id}-${t}`}function Le(r,t,e){let{labelProps:c,fieldProps:o}=me(r),l=r.orientation==="vertical";var f;ee.set(t,{id:(f=c.id)!==null&&f!==void 0?f:o.id,"aria-describedby":r["aria-describedby"],"aria-details":r["aria-details"]});let{direction:g}=be(),{addGlobalListener:h,removeGlobalListener:R}=_();const u=p.useRef(null),P=g==="rtl",$=p.useRef(null),{moveProps:i}=pe({onMoveStart(){$.current=null},onMove({deltaX:n,deltaY:m}){let{height:b,width:v}=e.current.getBoundingClientRect(),y=l?b:v;$.current==null&&($.current=t.getThumbPercent(u.current)*y);let M=l?m:n;if((l||P)&&(M=-M),$.current+=M,u.current!=null&&e.current){const E=Z($.current/y,0,1);t.setThumbPercent(u.current,E)}},onMoveEnd(){u.current!=null&&(t.setThumbDragging(u.current,!1),u.current=null)}});let x=p.useRef(void 0),s=(n,m,b,v)=>{if(e.current&&!r.isDisabled&&t.values.every((y,M)=>!t.isThumbDragging(M))){let{height:y,width:M,top:E,left:I}=e.current.getBoundingClientRect(),H=l?y:M,k=((l?v:b)-(l?E:I))/H;(g==="rtl"||l)&&(k=1-k);let F=t.getPercentValue(k),K,d=t.values.findIndex(S=>F-S<0);if(d===0)K=d;else if(d===-1)K=t.values.length-1;else{let S=t.values[d-1],C=t.values[d];Math.abs(S-F)<Math.abs(C-F)?K=d-1:K=d}K>=0&&t.isThumbEditable(K)?(n.preventDefault(),u.current=K,t.setFocusedThumb(K),x.current=m,t.setThumbDragging(u.current,!0),t.setThumbValue(K,F),h(window,"mouseup",T,!1),h(window,"touchend",T,!1),h(window,"pointerup",T,!1)):u.current=null}},T=n=>{var m,b;((b=n.pointerId)!==null&&b!==void 0?b:(m=n.changedTouches)===null||m===void 0?void 0:m[0].identifier)===x.current&&(u.current!=null&&(t.setThumbDragging(u.current,!1),u.current=null),R(window,"mouseup",T,!1),R(window,"touchend",T,!1),R(window,"pointerup",T,!1))};return"htmlFor"in c&&c.htmlFor&&(delete c.htmlFor,c.onClick=()=>{var n;(n=document.getElementById(J(t,0)))===null||n===void 0||n.focus(),ke("keyboard")}),{labelProps:c,groupProps:{role:"group",...o},trackProps:A({onMouseDown(n){n.button!==0||n.altKey||n.ctrlKey||n.metaKey||s(n,void 0,n.clientX,n.clientY)},onPointerDown(n){n.pointerType==="mouse"&&(n.button!==0||n.altKey||n.ctrlKey||n.metaKey)||s(n,n.pointerId,n.clientX,n.clientY)},onTouchStart(n){s(n,n.changedTouches[0].identifier,n.changedTouches[0].clientX,n.changedTouches[0].clientY)},style:{position:"relative",touchAction:"none"}},i),outputProps:{htmlFor:t.values.map((n,m)=>J(t,m)).join(" "),"aria-live":"off"}}}function Ne(r,t){let{index:e=0,isRequired:c,validationState:o,isInvalid:l,trackRef:f,inputRef:g,orientation:h=t.orientation,name:R}=r,u=r.isDisabled||t.isDisabled,P=h==="vertical",{direction:$}=be(),{addGlobalListener:i,removeGlobalListener:x}=_(),s=ee.get(t);var T;const{labelProps:n,fieldProps:m}=me({...r,id:J(t,e),"aria-labelledby":`${s.id} ${(T=r["aria-labelledby"])!==null&&T!==void 0?T:""}`.trim()}),b=t.values[e],v=p.useCallback(()=>{g.current&&Re(g.current)},[g]),y=t.focusedThumb===e;p.useEffect(()=>{y&&v()},[y,v]);let M=$==="rtl",E=p.useRef(null),{keyboardProps:I}=Ke({onKeyDown(d){let{getThumbMaxValue:S,getThumbMinValue:C,decrementThumb:X,incrementThumb:G,setThumbValue:a,setThumbDragging:w,pageSize:V}=t;if(!/^(PageUp|PageDown|Home|End)$/.test(d.key)){d.continuePropagation();return}switch(d.preventDefault(),w(e,!0),d.key){case"PageUp":G(e,V);break;case"PageDown":X(e,V);break;case"Home":a(e,C(e));break;case"End":a(e,S(e));break}w(e,!1)}}),{moveProps:H}=pe({onMoveStart(){E.current=null,t.setThumbDragging(e,!0)},onMove({deltaX:d,deltaY:S,pointerType:C,shiftKey:X}){const{getThumbPercent:G,setThumbPercent:a,decrementThumb:w,incrementThumb:V,step:U,pageSize:z}=t;let{width:ge,height:ve}=f.current.getBoundingClientRect(),ne=P?ve:ge;if(E.current==null&&(E.current=G(e)*ne),C==="keyboard")d>0&&M||d<0&&!M||S>0?w(e,X?z:U):V(e,X?z:U);else{let W=P?S:d;(P||M)&&(W=-W),E.current+=W,a(e,Z(E.current/ne,0,1))}},onMoveEnd(){t.setThumbDragging(e,!1)}});t.setThumbEditable(e,!u);const{focusableProps:B}=Se(A(r,{onFocus:()=>t.setFocusedThumb(e),onBlur:()=>t.setFocusedThumb(void 0)}),g);let N=p.useRef(void 0),Y=d=>{v(),N.current=d,t.setThumbDragging(e,!0),i(window,"mouseup",k,!1),i(window,"touchend",k,!1),i(window,"pointerup",k,!1)},k=d=>{var S,C;((C=d.pointerId)!==null&&C!==void 0?C:(S=d.changedTouches)===null||S===void 0?void 0:S[0].identifier)===N.current&&(v(),t.setThumbDragging(e,!1),x(window,"mouseup",k,!1),x(window,"touchend",k,!1),x(window,"pointerup",k,!1))},F=t.getThumbPercent(e);(P||$==="rtl")&&(F=1-F);let K=u?{}:A(I,H,{onMouseDown:d=>{d.button!==0||d.altKey||d.ctrlKey||d.metaKey||Y()},onPointerDown:d=>{d.button!==0||d.altKey||d.ctrlKey||d.metaKey||Y(d.pointerId)},onTouchStart:d=>{Y(d.changedTouches[0].identifier)}});return Fe(g,b,d=>{t.setThumbValue(e,d)}),{inputProps:A(B,m,{type:"range",tabIndex:u?void 0:0,min:t.getThumbMinValue(e),max:t.getThumbMaxValue(e),step:t.step,value:b,name:R,disabled:u,"aria-orientation":h,"aria-valuetext":t.getThumbValueLabel(e),"aria-required":c||void 0,"aria-invalid":l||o==="invalid"||void 0,"aria-errormessage":r["aria-errormessage"],"aria-describedby":[s["aria-describedby"],r["aria-describedby"]].filter(Boolean).join(" "),"aria-details":[s["aria-details"],r["aria-details"]].filter(Boolean).join(" "),onChange:d=>{t.setThumbValue(e,parseFloat(d.target.value))}}),thumbProps:{...K,style:{position:"absolute",[P?"top":"left"]:`${F*100}%`,transform:"translate(-50%, -50%)",touchAction:"none"}},labelProps:n,isDragging:t.isThumbDragging(e),isDisabled:u,isFocused:y}}const Xe=0,Ae=100,He=1;function Ye(r){const{isDisabled:t=!1,minValue:e=Xe,maxValue:c=Ae,numberFormatter:o,step:l=He,orientation:f="horizontal"}=r;let g=p.useMemo(()=>{let a=(c-e)/10;return a=O(a,0,a+l,l),Math.max(a,l)},[l,c,e]),h=p.useCallback(a=>a==null?void 0:a.map((w,V)=>{let U=V===0?e:w[V-1],z=V===a.length-1?c:w[V+1];return O(w,U,z,l)}),[e,c,l]),R=p.useMemo(()=>h(ie(r.value)),[r.value]),u=p.useMemo(()=>{var a;return h((a=ie(r.defaultValue))!==null&&a!==void 0?a:[e])},[r.defaultValue,e]),P=le(r.value,r.defaultValue,r.onChange),$=le(r.value,r.defaultValue,r.onChangeEnd);const[i,x]=Me(R,u,P),[s,T]=p.useState(new Array(i.length).fill(!1)),n=p.useRef(new Array(i.length).fill(!0)),[m,b]=p.useState(void 0),v=p.useRef(i),y=p.useRef(s);let M=a=>{v.current=a,x(a)},E=a=>{y.current=a,T(a)};function I(a){return(a-e)/(c-e)}function H(a){return a===0?e:i[a-1]}function B(a){return a===i.length-1?c:i[a+1]}function N(a){return n.current[a]}function Y(a,w){n.current[a]=w}function k(a,w){if(t||!N(a))return;const V=H(a),U=B(a);w=O(w,V,U,l);let z=oe(v.current,a,w);M(z)}function F(a,w){if(t||!N(a))return;w&&(v.current=i);const V=y.current[a];y.current=oe(y.current,a,w),E(y.current),$&&V&&!y.current.some(Boolean)&&$(v.current)}function K(a){return o.format(a)}function d(a,w){k(a,C(w))}function S(a){return Math.round((a-e)/l)*l+e}function C(a){const w=a*(c-e)+e;return Z(S(w),e,c)}function X(a,w=1){let V=Math.max(w,l);k(a,O(i[a]+V,e,c,l))}function G(a,w=1){let V=Math.max(w,l);k(a,O(i[a]-V,e,c,l))}return{values:i,getThumbValue:a=>i[a],setThumbValue:k,setThumbPercent:d,isThumbDragging:a=>s[a],setThumbDragging:F,focusedThumb:m,setFocusedThumb:b,getThumbPercent:a=>I(i[a]),getValuePercent:I,getThumbValueLabel:a=>K(i[a]),getFormattedValue:K,getThumbMinValue:H,getThumbMaxValue:B,getPercentValue:C,isThumbEditable:N,setThumbEditable:Y,incrementThumb:X,decrementThumb:G,step:l,pageSize:g,orientation:f,isDisabled:t}}function oe(r,t,e){return r[t]===e?r:[...r.slice(0,t),e,...r.slice(t+1)]}function ie(r){if(r!=null)return Array.isArray(r)?r:[r]}function le(r,t,e){return c=>{typeof r=="number"||typeof t=="number"?e==null||e(c[0]):e==null||e(c)}}const Ue=p.createContext(null),j=p.createContext(null),te=p.createContext(null),he=p.createContext(null);function ze(r,t){[r,t]=Q(r,t,Ue);let e=p.useRef(null),c=xe(r.formatOptions),o=Ye({...r,numberFormatter:c}),[l,f]=ue(),{groupProps:g,trackProps:h,labelProps:R,outputProps:u}=Le({...r,label:f},o,e),P=q({...r,values:{orientation:o.orientation,isDisabled:o.isDisabled,state:o},defaultClassName:"react-aria-Slider"}),$=ce(r);return delete $.id,D.createElement(de,{values:[[j,o],[te,{...h,ref:e}],[he,u],[se,{...R,ref:l}]]},D.createElement("div",{...$,...g,...P,ref:t,slot:r.slot||void 0,"data-orientation":o.orientation,"data-disabled":o.isDisabled||void 0}))}const Be=p.forwardRef(ze);function Ge(r,t){[r,t]=Q(r,t,he);let{children:e,style:c,className:o,...l}=r,f=p.useContext(j),g=q({className:o,style:c,children:e,defaultChildren:f.getThumbValueLabel(0),defaultClassName:"react-aria-SliderOutput",values:{orientation:f.orientation,isDisabled:f.isDisabled,state:f}});return D.createElement("output",{...l,...g,ref:t,"data-orientation":f.orientation||void 0,"data-disabled":f.isDisabled||void 0})}const Oe=p.forwardRef(Ge);function qe(r,t){[r,t]=Q(r,t,te);let e=p.useContext(j),{onHoverStart:c,onHoverEnd:o,onHoverChange:l,...f}=r,{hoverProps:g,isHovered:h}=fe({onHoverStart:c,onHoverEnd:o,onHoverChange:l}),R=q({...r,defaultClassName:"react-aria-SliderTrack",values:{orientation:e.orientation,isDisabled:e.isDisabled,isHovered:h,state:e}});return D.createElement("div",{...A(f,g),...R,ref:t,"data-hovered":h||void 0,"data-orientation":e.orientation||void 0,"data-disabled":e.isDisabled||void 0})}const je=p.forwardRef(qe);function We(r,t){let e=p.useContext(j),{ref:c}=De(te),{index:o=0}=r,l=p.useRef(null),[f,g]=ue(),{thumbProps:h,inputProps:R,labelProps:u,isDragging:P,isFocused:$,isDisabled:i}=Ne({...r,index:o,trackRef:c,inputRef:l,label:g},e),{focusProps:x,isFocusVisible:s}=Ce(),{hoverProps:T,isHovered:n}=fe(r),m=q({...r,defaultClassName:"react-aria-SliderThumb",values:{state:e,isHovered:n,isDragging:P,isFocused:$,isFocusVisible:s,isDisabled:i}}),b=ce(r);return delete b.id,D.createElement("div",{...A(b,h,T),...m,ref:t,style:{...h.style,...m.style},"data-hovered":n||void 0,"data-dragging":P||void 0,"data-focused":$||void 0,"data-focus-visible":s||void 0,"data-disabled":i||void 0},D.createElement(Ie,null,D.createElement("input",{ref:l,...A(R,x)})),D.createElement(de,{values:[[se,{...u,ref:f}]]},m.children))}const Je=p.forwardRef(We),Qe="flow--slider",Ze="flow--slider--text",_e="flow--slider--value",et="flow--slider--track",tt="flow--slider--fill",nt="flow--slider--thumb",rt="flow--slider--increment",at="flow--slider--decrement",ot="flow--slider--disabled",L={slider:Qe,text:Ze,value:_e,track:et,fill:tt,thumb:nt,increment:rt,decrement:at,disabled:ot},it=$e("Slider",r=>{const{className:t,children:e,name:c,isDisabled:o,...l}=r,f=Te(L.slider,o&&L.disabled,t),g={Label:{unstyled:!0}};return D.createElement(Be,{className:f,isDisabled:o,...l},D.createElement("div",{className:L.text},D.createElement(Oe,{className:L.value}),D.createElement(we,{props:g},e)),D.createElement(je,{className:L.track},({state:h})=>D.createElement(D.Fragment,null,D.createElement(re,{onPress:()=>h.decrementThumb(0),"aria-label":"decrement",size:"s",variant:"plain",className:L.decrement,isDisabled:o},D.createElement(Pe,null)),D.createElement(re,{onPress:()=>h.incrementThumb(0),size:"s",variant:"plain",className:L.increment,isDisabled:o},D.createElement(ye,null)),D.createElement("div",{className:L.fill,style:{width:h.getThumbPercent(0)*100+"%"}}),D.createElement(Je,{name:c,className:L.thumb}))))});it.__docgenInfo={description:"",methods:[],displayName:"Slider",props:{tunnelId:{required:!1,tsType:{name:"string"},description:"@internal"},render:{required:!1,tsType:{name:"union",raw:"FlowRenderFn<P> | false",elements:[{name:"signature",type:"function",raw:`(
  component: ComponentType<P>,
  props: P,
) => ReactNode`,signature:{arguments:[{type:{name:"ComponentType",elements:[{name:"P"}],raw:"ComponentType<P>"},name:"component"},{type:{name:"P"},name:"props"}],return:{name:"ReactNode"}}},{name:"literal",value:"false"}]},description:"@internal"}},composes:["PropsWithChildren","Pick"]};export{it as S};
