import{l as oe,m as X,h as le,n as fe,o as L,p as Z,e as S,q as ue,r as ce,s as W,d as Y,t as de}from"./useFocusable-C08EbcBh.js";import{r as T,R as ge}from"./index-BwDkhjyp.js";import{c as C,a as ee,f as pe}from"./index-CoJk2QQB.js";const ve=T.createContext({isNative:!0,open:$e,useHref:e=>e});function ye(){return T.useContext(ve)}function Le(e,n){let s=e.getAttribute("target");return(!s||s==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!n.metaKey&&!n.ctrlKey&&!n.altKey&&!n.shiftKey}function A(e,n,s=!0){var l,f;let{metaKey:g,ctrlKey:u,altKey:y,shiftKey:p}=n;oe()&&(!((f=window.event)===null||f===void 0||(l=f.type)===null||l===void 0)&&l.startsWith("key"))&&e.target==="_blank"&&(X()?g=!0:u=!0);let E=le()&&X()&&!fe()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:g,ctrlKey:u,altKey:y,shiftKey:p}):new MouseEvent("click",{metaKey:g,ctrlKey:u,altKey:y,shiftKey:p,bubbles:!0,cancelable:!0});A.isOpening=s,L(e),e.dispatchEvent(E),A.isOpening=!1}A.isOpening=!1;function Te(e,n){if(e instanceof HTMLAnchorElement)n(e);else if(e.hasAttribute("data-href")){let s=document.createElement("a");s.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(s.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(s.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(s.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(s.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(s.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(s),n(s),e.removeChild(s)}}function $e(e,n){Te(e,s=>A(s,n))}function Ie(e){return{"data-href":e.href,"data-target":e.target,"data-rel":e.rel,"data-download":e.download,"data-ping":e.ping,"data-referrer-policy":e.referrerPolicy}}function De(e){let n=ye();return{href:e!=null&&e.href?n.useHref(e==null?void 0:e.href):void 0,target:e==null?void 0:e.target,rel:e==null?void 0:e.rel,download:e==null?void 0:e.download,ping:e==null?void 0:e.ping,referrerPolicy:e==null?void 0:e.referrerPolicy}}function be(){let e=T.useRef(new Map),n=T.useCallback((f,g,u,y)=>{let p=y!=null&&y.once?(...E)=>{e.current.delete(u),u(...E)}:u;e.current.set(u,{type:g,eventTarget:f,fn:p,options:y}),f.addEventListener(g,u,y)},[]),s=T.useCallback((f,g,u,y)=>{var p;let E=((p=e.current.get(u))===null||p===void 0?void 0:p.fn)||u;f.removeEventListener(g,E,y),e.current.delete(u)},[]),l=T.useCallback(()=>{e.current.forEach((f,g)=>{s(f.eventTarget,f.type,g,f.options)})},[s]);return T.useEffect(()=>l,[l]),{addGlobalListener:n,removeGlobalListener:s,removeAllGlobalListeners:l}}let _="default",N="",H=new WeakMap;function j(e){if(Z()){if(_==="default"){const n=S(e);N=n.documentElement.style.webkitUserSelect,n.documentElement.style.webkitUserSelect="none"}_="disabled"}else(e instanceof HTMLElement||e instanceof SVGElement)&&(H.set(e,e.style.userSelect),e.style.userSelect="none")}function D(e){if(Z()){if(_!=="disabled")return;_="restoring",setTimeout(()=>{ue(()=>{if(_==="restoring"){const n=S(e);n.documentElement.style.webkitUserSelect==="none"&&(n.documentElement.style.webkitUserSelect=N||""),N="",_="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&H.has(e)){let n=H.get(e);e.style.userSelect==="none"&&(e.style.userSelect=n),e.getAttribute("style")===""&&e.removeAttribute("style"),H.delete(e)}}const te=ge.createContext({register:()=>{}});te.displayName="PressResponderContext";function Pe(e,n){return n.get?n.get.call(e):n.value}function re(e,n,s){if(!n.has(e))throw new TypeError("attempted to "+s+" private field on non-instance");return n.get(e)}function he(e,n){var s=re(e,n,"get");return Pe(e,s)}function Ee(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function me(e,n,s){Ee(e,n),n.set(e,s)}function Ke(e,n,s){if(n.set)n.set.call(e,s);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=s}}function z(e,n,s){var l=re(e,n,"set");return Ke(e,l,s),s}function Se(e){let n=T.useContext(te);if(n){let{register:s,...l}=n;e=ee(l,e),s()}return de(n,e.ref),e}var U=new WeakMap;class G{continuePropagation(){z(this,U,!1)}get shouldStopPropagation(){return he(this,U)}constructor(n,s,l){me(this,U,{writable:!0,value:void 0}),z(this,U,!0),this.type=n,this.pointerType=s,this.target=l.currentTarget,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.ctrlKey=l.ctrlKey,this.altKey=l.altKey}}const q=Symbol("linkClicked");function Ue(e){let{onPress:n,onPressChange:s,onPressStart:l,onPressEnd:f,onPressUp:g,isDisabled:u,isPressed:y,preventFocusOnPress:p,shouldCancelOnPointerExit:E,allowTextSelectionOnPress:h,ref:Me,...ae}=Se(e),[ie,B]=T.useState(!1),w=T.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:m,removeAllGlobalListeners:x}=be(),b=C((t,o)=>{let $=w.current;if(u||$.didFirePressStart)return!1;let i=!0;if($.isTriggeringEvent=!0,l){let c=new G("pressstart",o,t);l(c),i=c.shouldStopPropagation}return s&&s(!0),$.isTriggeringEvent=!1,$.didFirePressStart=!0,B(!0),i}),v=C((t,o,$=!0)=>{let i=w.current;if(!i.didFirePressStart)return!1;i.ignoreClickAfterPress=!0,i.didFirePressStart=!1,i.isTriggeringEvent=!0;let c=!0;if(f){let r=new G("pressend",o,t);f(r),c=r.shouldStopPropagation}if(s&&s(!1),B(!1),n&&$&&!u){let r=new G("press",o,t);n(r),c&&(c=r.shouldStopPropagation)}return i.isTriggeringEvent=!1,c}),k=C((t,o)=>{let $=w.current;if(u)return!1;if(g){$.isTriggeringEvent=!0;let i=new G("pressup",o,t);return g(i),$.isTriggeringEvent=!1,i.shouldStopPropagation}return!0}),K=C(t=>{let o=w.current;o.isPressed&&o.target&&(o.isOverTarget&&o.pointerType!=null&&v(P(o.target,t),o.pointerType,!1),o.isPressed=!1,o.isOverTarget=!1,o.activePointerId=null,o.pointerType=null,x(),h||D(o.target))}),I=C(t=>{E&&K(t)}),se=T.useMemo(()=>{let t=w.current,o={onKeyDown(i){if(R(i.nativeEvent,i.currentTarget)&&i.currentTarget.contains(i.target)){var c;Q(i.target,i.key)&&i.preventDefault();let r=!0;if(!t.isPressed&&!i.repeat){t.target=i.currentTarget,t.isPressed=!0,r=b(i,"keyboard");let a=i.currentTarget,d=O=>{R(O,a)&&!O.repeat&&a.contains(O.target)&&t.target&&k(P(t.target,O),"keyboard")};m(S(i.currentTarget),"keyup",pe(d,$),!0)}r&&i.stopPropagation(),i.metaKey&&X()&&((c=t.metaKeyEvents)===null||c===void 0||c.set(i.key,i.nativeEvent))}else i.key==="Meta"&&(t.metaKeyEvents=new Map)},onClick(i){if(!(i&&!i.currentTarget.contains(i.target))&&i&&i.button===0&&!t.isTriggeringEvent&&!A.isOpening){let c=!0;if(u&&i.preventDefault(),!t.ignoreClickAfterPress&&!t.ignoreEmulatedMouseEvents&&!t.isPressed&&(t.pointerType==="virtual"||W(i.nativeEvent))){!u&&!p&&L(i.currentTarget);let r=b(i,"virtual"),a=k(i,"virtual"),d=v(i,"virtual");c=r&&a&&d}t.ignoreEmulatedMouseEvents=!1,t.ignoreClickAfterPress=!1,c&&i.stopPropagation()}}},$=i=>{var c;if(t.isPressed&&t.target&&R(i,t.target)){var r;Q(i.target,i.key)&&i.preventDefault();let d=i.target;v(P(t.target,i),"keyboard",t.target.contains(d)),x(),i.key!=="Enter"&&V(t.target)&&t.target.contains(d)&&!i[q]&&(i[q]=!0,A(t.target,i,!1)),t.isPressed=!1,(r=t.metaKeyEvents)===null||r===void 0||r.delete(i.key)}else if(i.key==="Meta"&&(!((c=t.metaKeyEvents)===null||c===void 0)&&c.size)){var a;let d=t.metaKeyEvents;t.metaKeyEvents=void 0;for(let O of d.values())(a=t.target)===null||a===void 0||a.dispatchEvent(new KeyboardEvent("keyup",O))}};if(typeof PointerEvent<"u"){o.onPointerDown=a=>{if(a.button!==0||!a.currentTarget.contains(a.target))return;if(ce(a.nativeEvent)){t.pointerType="virtual";return}F(a.currentTarget)&&a.preventDefault(),t.pointerType=a.pointerType;let d=!0;t.isPressed||(t.isPressed=!0,t.isOverTarget=!0,t.activePointerId=a.pointerId,t.target=a.currentTarget,!u&&!p&&L(a.currentTarget),h||j(t.target),d=b(a,t.pointerType),m(S(a.currentTarget),"pointermove",i,!1),m(S(a.currentTarget),"pointerup",c,!1),m(S(a.currentTarget),"pointercancel",r,!1)),d&&a.stopPropagation()},o.onMouseDown=a=>{a.currentTarget.contains(a.target)&&a.button===0&&(F(a.currentTarget)&&a.preventDefault(),a.stopPropagation())},o.onPointerUp=a=>{!a.currentTarget.contains(a.target)||t.pointerType==="virtual"||a.button===0&&M(a,a.currentTarget)&&k(a,t.pointerType||a.pointerType)};let i=a=>{a.pointerId===t.activePointerId&&(t.target&&M(a,t.target)?!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,b(P(t.target,a),t.pointerType)):t.target&&t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,v(P(t.target,a),t.pointerType,!1),I(a)))},c=a=>{a.pointerId===t.activePointerId&&t.isPressed&&a.button===0&&t.target&&(M(a,t.target)&&t.pointerType!=null?v(P(t.target,a),t.pointerType):t.isOverTarget&&t.pointerType!=null&&v(P(t.target,a),t.pointerType,!1),t.isPressed=!1,t.isOverTarget=!1,t.activePointerId=null,t.pointerType=null,x(),h||D(t.target))},r=a=>{K(a)};o.onDragStart=a=>{a.currentTarget.contains(a.target)&&K(a)}}else{o.onMouseDown=r=>{if(r.button!==0||!r.currentTarget.contains(r.target))return;if(F(r.currentTarget)&&r.preventDefault(),t.ignoreEmulatedMouseEvents){r.stopPropagation();return}t.isPressed=!0,t.isOverTarget=!0,t.target=r.currentTarget,t.pointerType=W(r.nativeEvent)?"virtual":"mouse",!u&&!p&&L(r.currentTarget),b(r,t.pointerType)&&r.stopPropagation(),m(S(r.currentTarget),"mouseup",i,!1)},o.onMouseEnter=r=>{if(!r.currentTarget.contains(r.target))return;let a=!0;t.isPressed&&!t.ignoreEmulatedMouseEvents&&t.pointerType!=null&&(t.isOverTarget=!0,a=b(r,t.pointerType)),a&&r.stopPropagation()},o.onMouseLeave=r=>{if(!r.currentTarget.contains(r.target))return;let a=!0;t.isPressed&&!t.ignoreEmulatedMouseEvents&&t.pointerType!=null&&(t.isOverTarget=!1,a=v(r,t.pointerType,!1),I(r)),a&&r.stopPropagation()},o.onMouseUp=r=>{r.currentTarget.contains(r.target)&&!t.ignoreEmulatedMouseEvents&&r.button===0&&k(r,t.pointerType||"mouse")};let i=r=>{if(r.button===0){if(t.isPressed=!1,x(),t.ignoreEmulatedMouseEvents){t.ignoreEmulatedMouseEvents=!1;return}t.target&&M(r,t.target)&&t.pointerType!=null?v(P(t.target,r),t.pointerType):t.target&&t.isOverTarget&&t.pointerType!=null&&v(P(t.target,r),t.pointerType,!1),t.isOverTarget=!1}};o.onTouchStart=r=>{if(!r.currentTarget.contains(r.target))return;let a=we(r.nativeEvent);if(!a)return;t.activePointerId=a.identifier,t.ignoreEmulatedMouseEvents=!0,t.isOverTarget=!0,t.isPressed=!0,t.target=r.currentTarget,t.pointerType="touch",!u&&!p&&L(r.currentTarget),h||j(t.target),b(r,t.pointerType)&&r.stopPropagation(),m(Y(r.currentTarget),"scroll",c,!0)},o.onTouchMove=r=>{if(!r.currentTarget.contains(r.target))return;if(!t.isPressed){r.stopPropagation();return}let a=J(r.nativeEvent,t.activePointerId),d=!0;a&&M(a,r.currentTarget)?!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,d=b(r,t.pointerType)):t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,d=v(r,t.pointerType,!1),I(r)),d&&r.stopPropagation()},o.onTouchEnd=r=>{if(!r.currentTarget.contains(r.target))return;if(!t.isPressed){r.stopPropagation();return}let a=J(r.nativeEvent,t.activePointerId),d=!0;a&&M(a,r.currentTarget)&&t.pointerType!=null?(k(r,t.pointerType),d=v(r,t.pointerType)):t.isOverTarget&&t.pointerType!=null&&(d=v(r,t.pointerType,!1)),d&&r.stopPropagation(),t.isPressed=!1,t.activePointerId=null,t.isOverTarget=!1,t.ignoreEmulatedMouseEvents=!0,t.target&&!h&&D(t.target),x()},o.onTouchCancel=r=>{r.currentTarget.contains(r.target)&&(r.stopPropagation(),t.isPressed&&K(r))};let c=r=>{t.isPressed&&r.target.contains(t.target)&&K({currentTarget:t.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};o.onDragStart=r=>{r.currentTarget.contains(r.target)&&K(r)}}return o},[m,u,p,x,h,K,I,v,b,k]);return T.useEffect(()=>()=>{var t;h||D((t=w.current.target)!==null&&t!==void 0?t:void 0)},[h]),{isPressed:y||ie,pressProps:ee(ae,se)}}function V(e){return e.tagName==="A"&&e.hasAttribute("href")}function R(e,n){const{key:s,code:l}=e,f=n,g=f.getAttribute("role");return(s==="Enter"||s===" "||s==="Spacebar"||l==="Space")&&!(f instanceof Y(f).HTMLInputElement&&!ne(f,s)||f instanceof Y(f).HTMLTextAreaElement||f.isContentEditable)&&!((g==="link"||!g&&V(f))&&s!=="Enter")}function we(e){const{targetTouches:n}=e;return n.length>0?n[0]:null}function J(e,n){const s=e.changedTouches;for(let l=0;l<s.length;l++){const f=s[l];if(f.identifier===n)return f}return null}function P(e,n){return{currentTarget:e,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey}}function xe(e){let n=0,s=0;return e.width!==void 0?n=e.width/2:e.radiusX!==void 0&&(n=e.radiusX),e.height!==void 0?s=e.height/2:e.radiusY!==void 0&&(s=e.radiusY),{top:e.clientY-s,right:e.clientX+n,bottom:e.clientY+s,left:e.clientX-n}}function ke(e,n){return!(e.left>n.right||n.left>e.right||e.top>n.bottom||n.top>e.bottom)}function M(e,n){let s=n.getBoundingClientRect(),l=xe(e);return ke(s,l)}function F(e){return!(e instanceof HTMLElement)||!e.hasAttribute("draggable")}function Q(e,n){return e instanceof HTMLInputElement?!ne(e,n):e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!V(e)}const Oe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ne(e,n){return e.type==="checkbox"||e.type==="radio"?n===" ":Oe.has(e.type)}export{Ue as $,ye as a,De as b,Le as c,be as d,A as e,te as f,Ie as g};
