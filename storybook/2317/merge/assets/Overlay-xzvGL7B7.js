import{r as i,R as u,j as m}from"./iframe-wn9t8CHT.js";import{c as _}from"./clsx-B-dksMZM.js";import{u as F}from"./useOverlayController-BCCPmC-G.js";import{v as L}from"./flowComponent-CQL_Hol9.js";import{O as W}from"./OverlayContextProvider-DPqnyBOx.js";import{L as k}from"./LoadingSpinner-C5pntlan.js";import{u as z}from"./Button-CkMrcy8B.js";import{$ as A,b as T,a as P,d as B}from"./utils-BBqjM3mV.js";import{h as U,i as K,j as G,k as J,l as x,m as Q,n as X,b as Y}from"./Dialog-QaAGaw4t.js";import{e as D,$ as g,a as Z}from"./index-Daog0jgF.js";import{$ as N}from"./filterDOMProps-BNnC3YgW.js";import{a as ee}from"./useCollator-ia3Kz-2A.js";import{$ as E}from"./SelectionManager-CyQywfav.js";import{d as te,e as C,f as M}from"./OverlayArrow-Dlbb_9eh.js";let c=typeof document<"u"&&window.visualViewport;function ne(){let t=D(),[e,n]=i.useState(()=>t?{width:0,height:0}:R());return i.useEffect(()=>{let a=()=>{c&&c.scale>1||n(s=>{let r=R();return r.width===s.width&&r.height===s.height?s:r})},o,l=s=>{c&&c.scale>1||E(s.target)&&(o=requestAnimationFrame(()=>{(!document.activeElement||!E(document.activeElement))&&n(r=>{let d={width:window.innerWidth,height:window.innerHeight};return d.width===r.width&&d.height===r.height?r:d})}))};return window.addEventListener("blur",l,!0),c?c.addEventListener("resize",a):window.addEventListener("resize",a),()=>{cancelAnimationFrame(o),window.removeEventListener("blur",l,!0),c?c.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function R(){return{width:c?c.width*c.scale:window.innerWidth,height:c?c.height*c.scale:window.innerHeight}}function re(t,e,n){let{overlayProps:a,underlayProps:o}=U({...t,isOpen:e.isOpen,onClose:e.close},n);return K({isDisabled:!e.isOpen}),G(),i.useEffect(()=>{if(e.isOpen&&n.current)return J([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:g(a),underlayProps:o}}const ae=i.createContext(null),y=i.createContext(null),ie=i.forwardRef(function(e,n){if(i.useContext(y))return u.createElement(S,{...e,modalRef:n},e.children);let{isDismissable:o,isKeyboardDismissDisabled:l,isOpen:s,defaultOpen:r,onOpenChange:d,children:f,isEntering:p,isExiting:$,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:v,...b}=e;return u.createElement(j,{isDismissable:o,isKeyboardDismissDisabled:l,isOpen:s,defaultOpen:r,onOpenChange:d,isEntering:p,isExiting:$,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:v},u.createElement(S,{...b,modalRef:n},f))});function oe(t,e){[t,e]=A(t,e,ae);let n=i.useContext(x),a=te(t),o=t.isOpen!=null||t.defaultOpen!=null||!n?a:n,l=T(e),s=i.useRef(null),r=C(l,o.isOpen),d=C(s,o.isOpen),f=r||d||t.isExiting||!1,p=D();return!o.isOpen&&!f||p?null:u.createElement(se,{...t,state:o,isExiting:f,overlayRef:l,modalRef:s})}const j=i.forwardRef(oe);function se({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:a}=e,{modalProps:o,underlayProps:l}=re(e,a,n),s=M(e.overlayRef)||e.isEntering||!1,r=P({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:s,isExiting:e.isExiting,state:a}}),d=ne(),f;if(typeof document<"u"){let $=ee(document.body)?document.body:document.scrollingElement||document.documentElement,h=$.getBoundingClientRect().height%1;f=$.scrollHeight-h}let p={...r.style,"--visual-viewport-height":d.height+"px","--page-height":f!==void 0?f+"px":void 0};return u.createElement(X,{isExiting:e.isExiting,portalContainer:t},u.createElement("div",{...g(N(e,{global:!0}),l),...r,style:p,ref:e.overlayRef,"data-entering":s||void 0,"data-exiting":e.isExiting||void 0},u.createElement(B,{values:[[y,{modalProps:o,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[x,a]]},r.children)))}function S(t){let{modalProps:e,modalRef:n,isExiting:a,isDismissable:o}=i.useContext(y),l=i.useContext(x),s=i.useMemo(()=>Z(t.modalRef,n),[t.modalRef,n]),r=T(s),d=M(r),f=P({...t,defaultClassName:"react-aria-Modal",values:{isEntering:d,isExiting:a,state:l}});return u.createElement("div",{...g(N(t,{global:!0}),e),...f,ref:r,"data-entering":d||void 0,"data-exiting":a||void 0},o&&u.createElement(Q,{onDismiss:l.close}),f.children)}const le="flow--overlay",q={overlay:le},O=i.memo(t=>{const e=i.useContext(L).LoadingSpinner??k;return m.jsx(e,{...t})});O.displayName="LoadingSpinnerView";O.__docgenInfo={description:"",methods:[],displayName:"LoadingSpinnerView"};const H=()=>(z(),m.jsx(O,{color:"dark"}));H.__docgenInfo={description:"",methods:[],displayName:"OverlaySuspenseFallback"};const I=t=>{const{children:e,className:n,...a}=t,[o,l]=i.useState(!1),s=()=>(i.useLayoutEffect(()=>(l(!0),()=>l(!1)),[l]),m.jsx(H,{...a})),r=o?q.overlay:n;return m.jsx(j,{...a,className:r,children:m.jsx(ie,{children:m.jsx(i.Suspense,{fallback:m.jsx(s,{}),children:m.jsx(Y,{children:e})})})})};I.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const w=i.memo(t=>{const e=i.useContext(L).OverlayContent??I;return m.jsx(e,{...t})});w.displayName="OverlayContentView";w.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const de=t=>{const{controller:e,children:n,isDismissable:a=!0,className:o,overlayType:l="Modal",isDefaultOpen:s,isOpen:r,onOpen:d,onClose:f,onOpenChange:p,ref:$}=t,h=F(l,{reuseControllerFromContext:!0,isDefaultOpen:s,onClose:f,onOpen:d,onOpenChange:p}),v=e??h,b=r??v.useIsOpen(),V=_(q.overlay,o);return m.jsx(w,{onOpenChange:v.setOpen,isOpen:b,ref:$,isDismissable:a,className:V,children:m.jsx(W,{type:"Modal",controller:v,children:n})})};de.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."},isOpen:{required:!1,tsType:{name:"boolean"},description:""},isDefaultOpen:{required:!1,tsType:{name:"boolean"},description:""},onOpen:{required:!1,tsType:{name:"OverlayOpenHandler"},description:""},onClose:{required:!1,tsType:{name:"OverlayCloseHandler"},description:""},onOpenChange:{required:!1,tsType:{name:"OverlayOpenStateHandler"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};export{O as L,de as O};
