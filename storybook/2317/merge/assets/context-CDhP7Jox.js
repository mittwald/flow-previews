import{m as O,b as s,o as d}from"./flowComponent-BmGOFz_C.js";import{u as l,a as o}from"./useStatic-C9zmt-CB.js";import{r as a}from"./iframe-C_YE0yRE.js";class r{isOpen=!1;onOpenHandlers=new Set;onCloseHandlers=new Set;onOpenChangeHandlers=new Set;constructor(e){O(this,{isOpen:d,open:s.bound,close:s.bound,toggle:s.bound,setOpen:s.bound}),this.isOpen=e?.isDefaultOpen??!1,e?.onOpen&&this.onOpenHandlers.add(e.onOpen),e?.onClose&&this.onCloseHandlers.add(e.onClose),e?.onOpenChange&&this.onOpenChangeHandlers.add(e.onOpenChange)}static useNew(e={}){return l(()=>new r(e))}addOpenStateHandler(e,n){return n.add(e),()=>{n.delete(e)}}addOnOpen(e){return this.addOpenStateHandler(e,this.onOpenHandlers)}addOnClose(e){return this.addOpenStateHandler(e,this.onCloseHandlers)}addOnOpenChange(e){return this.addOpenStateHandler(e,this.onOpenChangeHandlers)}useOnHandler(e,n){a.useEffect(()=>e?n(e):void 0,[e,this])}useOnOpen(e){this.useOnHandler(e,n=>this.addOnOpen(n))}useOnClose(e){this.useOnHandler(e,n=>this.addOnClose(n))}useOnOpenChange(e){this.useOnHandler(e,n=>this.addOnOpenChange(n))}executeHandlers(e,n){return Array.from(n).map(t=>t(e)).some(t=>t===!1)}executeOnClose(){return this.executeHandlers(!1,this.onCloseHandlers)}executeOnOpen(){return this.executeHandlers(!0,this.onOpenHandlers)}executeOnOpenChange(e){return this.executeHandlers(e,this.onOpenChangeHandlers)}open(){this.setOpen(!0)}close(){this.setOpen(!1)}toggle(){this.setOpen(!this.isOpen)}setOpen(e){if(this.isOpen===e)return;let n=!1;e?n=this.executeOnOpen():n=this.executeOnClose(),n||(n=this.executeOnOpenChange(e)),n||(this.isOpen=e)}useIsOpen(){return o(()=>this.isOpen)}}const i=a.createContext({}),c=()=>a.useContext(i);export{r as O,i as o,c as u};
