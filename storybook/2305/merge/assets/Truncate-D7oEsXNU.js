import{r as n,j as w}from"./iframe-nlVW-CPZ.js";import{c as E}from"./clsx-B-dksMZM.js";import{e as z}from"./remote-D3GclicH.js";const B="flow--truncate",F="flow--truncate--ellipsis",N={truncate:B,ellipsis:F};function M(){var r=n.useRef(null);if(r.current)return r.current;var t=document.createElement("canvas");return r.current=t.getContext("2d"),r.current}function O(r){var t=r.text,m=r.width,s=m===void 0?0:m,u=r.offset,i=u===void 0?8:u,f=r.ellipsis,d=f===void 0?"...":f,g=n.useState(0),T=g[0],R=g[1],C=n.useState(!1),_=C[0],S=C[1],y=n.useState(!1),b=y[0],k=y[1],c=n.useRef(null),l=M(),W=n.useCallback(function(){if(c.current){var e=window.getComputedStyle(c.current),a=[e["font-weight"],e["font-style"],e["font-size"],e["font-family"]].join(" ");l.font=a}},[l]),h=n.useCallback(function(){var e,a;s?a=s:a=(e=c.current)===null||e===void 0?void 0:e.getBoundingClientRect().width,R(a);var o=l.measureText(t).width;S(a<o),k(!0)},[l,t,s]);n.useEffect(function(){W(),h()},[h,W]),n.useEffect(function(){var e=new ResizeObserver(function(a){a.length>0&&h()});return c.current&&e.observe(c.current),function(){e.disconnect()}},[h]);var j=n.useMemo(function(){if(!_)return t;for(var e=t.length,a=t.slice(e-i,e),o,p=e-i,v=0;v<p-1;){var x=Math.floor((p-v)/2+v);o=t.slice(0,x),l.measureText(o+d+a).width<T?v=x:p=x}return o=t.slice(0,v||1),o+d+a},[l,d,i,_,T,t]);return n.createElement("div",{ref:c,style:{width:s||"100%",whiteSpace:"nowrap"}},j)}const P=r=>{const{children:t,className:m,title:s,offset:u,ellipsis:i}=r,f=E(N.truncate,m);if(u||i){const d=z(t)??"";return w.jsx("span",{title:s,className:f,children:w.jsx(O,{offset:u,ellipsis:i,text:d})})}return w.jsx("span",{title:s,className:E(f,N.ellipsis),children:t})};P.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Truncate",props:{title:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren","PropsWithClassName","Omit"]};export{P as T};
