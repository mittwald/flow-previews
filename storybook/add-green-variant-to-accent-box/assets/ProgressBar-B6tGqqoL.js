import{$ as x,d as v,a as P}from"./utils-BAtcVSHo.js";import{a as g}from"./Label--FbMCZJS.js";import{r as u,R as m}from"./index-BZISi7jw.js";import{$ as V}from"./index-Dfd2pZHs.js";import{$ as h}from"./filterDOMProps-CeZl_uWj.js";import{$ as N}from"./useLabel-Bh1EGhcd.js";import{a as M}from"./useLocalizedStringFormatter-CZn_2Om1.js";import{$ as I}from"./NumberFormatter-DNR9MAW-.js";function p(l,e=-1/0,a=1/0){return Math.min(Math.max(l,e),a)}function d(l,e){let a=l,r=e.toString(),f=r.indexOf("."),t=f>=0?r.length-f:0;if(t>0){let o=Math.pow(10,t);a=Math.round(a*o)/o}return a}function j(l,e,a,r){e=Number(e),a=Number(a);let f=(l-(isNaN(e)?0:e))%r,t=d(Math.abs(f)*2>=r?l+Math.sign(f)*(r-Math.abs(f)):l-f,r);return isNaN(e)?!isNaN(a)&&t>a&&(t=Math.floor(d(a/r,r))*r):t<e?t=e:!isNaN(a)&&t>a&&(t=e+Math.floor(d((a-e)/r,r))*r),t=d(t,r),t}function w(l={}){let{locale:e}=M();return u.useMemo(()=>new I(e,l),[e,l])}function y(l){let{value:e=0,minValue:a=0,maxValue:r=100,valueLabel:f,isIndeterminate:t,formatOptions:o={style:"percent"}}=l,c=h(l,{labelable:!0}),{labelProps:$,fieldProps:n}=N({...l,labelElementType:"span"});e=p(e,a,r);let b=(e-a)/(r-a),s=w(o);if(!t&&!f){let i=o.style==="percent"?b:e;f=s.format(i)}return{progressBarProps:V(c,{...n,"aria-valuenow":t?void 0:e,"aria-valuemin":a,"aria-valuemax":r,"aria-valuetext":t?void 0:f,role:"progressbar"}),labelProps:$}}const B=u.createContext(null),k=u.forwardRef(function(e,a){[e,a]=x(e,a,B);let{value:r=0,minValue:f=0,maxValue:t=100,isIndeterminate:o=!1}=e;r=p(r,f,t);let[c,$]=v(!e["aria-label"]&&!e["aria-labelledby"]),{progressBarProps:n,labelProps:b}=y({...e,label:$}),s=o?void 0:(r-f)/(t-f)*100,i=P({...e,defaultClassName:"react-aria-ProgressBar",values:{percentage:s,valueText:n["aria-valuetext"],isIndeterminate:o}});return m.createElement("div",{...n,...i,ref:a,slot:e.slot||void 0},m.createElement(g.Provider,{value:{...b,ref:c,elementType:"span"}},i.children))});export{B as $,w as a,k as b,p as c,j as d};
