import{r as o,R as s}from"./index-uCp2LrAq.js";import{c as I}from"./clsx-B-dksMZM.js";import{u as E,O as y,A as M}from"./index-BbnjpHj5.js";import{a as L,g as h,i as b,j as O,b as C,f as z,h as A}from"./utils-8G7INyPj.js";import{b as B,c as q,d as F,e as U,f as u,g as W,h as K,i as V}from"./Dialog-DPtrt-IL.js";import{c as w,b as p,P as j}from"./flowComponent-DziSYcSt.js";import{$ as R}from"./filterDOMProps-CeZl_uWj.js";import{$ as H}from"./OverlayArrow-DVSzW_UP.js";let d=typeof document<"u"&&window.visualViewport;function k(){let t=w(),[e,r]=o.useState(()=>t?{width:0,height:0}:v());return o.useEffect(()=>{let a=()=>{r(n=>{let i=v();return i.width===n.width&&i.height===n.height?n:i})};return d?d.addEventListener("resize",a):window.addEventListener("resize",a),()=>{d?d.removeEventListener("resize",a):window.removeEventListener("resize",a)}},[]),e}function v(){return{width:d&&(d==null?void 0:d.width)||window.innerWidth,height:d&&(d==null?void 0:d.height)||window.innerHeight}}function G(t,e,r){let{overlayProps:a,underlayProps:n}=B({...t,isOpen:e.isOpen,onClose:e.close},r);return q({isDisabled:!e.isOpen}),F(),o.useEffect(()=>{if(e.isOpen)return U([r.current])},[e.isOpen,r]),{modalProps:p(a),underlayProps:n}}const J=o.createContext(null),x=o.createContext(null);function Q(t,e){if(o.useContext(x))return s.createElement(g,{...t,modalRef:e},t.children);let{isDismissable:a,isKeyboardDismissDisabled:n,isOpen:i,defaultOpen:c,onOpenChange:l,children:f,isEntering:$,isExiting:m,UNSTABLE_portalContainer:S,shouldCloseOnInteractOutside:_,...T}=t;return s.createElement(P,{isDismissable:a,isKeyboardDismissDisabled:n,isOpen:i,defaultOpen:c,onOpenChange:l,isEntering:$,isExiting:m,UNSTABLE_portalContainer:S,shouldCloseOnInteractOutside:_},s.createElement(g,{...T,modalRef:e},f))}const X=o.forwardRef(Q);function Y(t,e){[t,e]=L(t,e,J);let r=o.useContext(u),a=H(t),n=t.isOpen!=null||t.defaultOpen!=null||!r?a:r,i=h(e),c=o.useRef(null),l=b(i,n.isOpen),f=b(c,n.isOpen),$=l||f||t.isExiting||!1,m=w();return!n.isOpen&&!$||m?null:s.createElement(Z,{...t,state:n,isExiting:$,overlayRef:i,modalRef:c})}const P=o.forwardRef(Y);function Z({UNSTABLE_portalContainer:t,...e}){let r=e.modalRef,{state:a}=e,{modalProps:n,underlayProps:i}=G(e,a,r),c=O(e.overlayRef)||e.isEntering||!1,l=C({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:c,isExiting:e.isExiting,state:a}}),f=k(),$={...l.style,"--visual-viewport-height":f.height+"px"};return s.createElement(W,{isExiting:e.isExiting,portalContainer:t},s.createElement("div",{...p(R(e),i),...l,style:$,ref:e.overlayRef,"data-entering":c||void 0,"data-exiting":e.isExiting||void 0},s.createElement(z,{values:[[x,{modalProps:n,modalRef:r,isExiting:e.isExiting,isDismissable:e.isDismissable}],[u,a]]},l.children)))}function g(t){let{modalProps:e,modalRef:r,isExiting:a,isDismissable:n}=o.useContext(x),i=o.useContext(u),c=o.useMemo(()=>A(t.modalRef,r),[t.modalRef,r]),l=h(c),f=O(l),$=C({...t,defaultClassName:"react-aria-Modal",values:{isEntering:f,isExiting:a,state:i}});return s.createElement("div",{...p(R(t),e),...$,ref:l,"data-entering":f||void 0,"data-exiting":a||void 0},n&&s.createElement(K,{onDismiss:i.close}),$.children)}const ee="flow--overlay",te={overlay:ee,"overlay-fade":"flow--overlay--overlay-fade"},D=t=>{const{controller:e,children:r,className:a}=t,n=E({reuseControllerFromContext:!0}),i=e??n,c=i.useIsOpen(),l=I(te.overlay,a);return s.createElement(P,{className:l,isDismissable:!0,isOpen:c,onOpenChange:f=>i.setOpen(f)},s.createElement(X,null,s.createElement(V,null,s.createElement(y,{value:i},r))))};D.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const N=t=>{const e=E(),r={Button:{render:(a,n)=>s.createElement(M,{openOverlay:e},s.createElement(a,{...n}))}};return s.createElement(y,{value:e},s.createElement(j,{props:r},t.children))};N.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger"};N.__docgenInfo={description:"",methods:[],displayName:"OverlayTrigger"};D.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};export{N as O,D as a};
