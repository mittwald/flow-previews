import{w as de,u as ue,t as Y,x as pe,v as te,y as re,h as K,z as ve,p as $e,q as be,f as y,i as $,A as ye,B as ge,d as he,C as Pe,$ as W}from"./useFocus-4XTC7e6o.js";import{r as E,R as Te}from"./index-BdpSHsi2.js";import{a as x,$ as ne,g as Ee}from"./mergeRefs-COuk0-v5.js";import{c as me}from"./useFocusRing-DY5AGIis.js";import"./index-DU8gk_nc.js";const xe=E.createContext({isNative:!0,open:Se,useHref:e=>e});function ae(){return E.useContext(xe)}function Be(e,r){let i=e.getAttribute("target");return(!i||i==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!r.metaKey&&!r.ctrlKey&&!r.altKey&&!r.shiftKey}function A(e,r,i=!0){var o,f;let{metaKey:p,ctrlKey:v,altKey:u,shiftKey:P}=r;de()&&(!((f=window.event)===null||f===void 0||(o=f.type)===null||o===void 0)&&o.startsWith("key"))&&e.target==="_blank"&&(Y()?p=!0:v=!0);let T=ue()&&Y()&&!pe()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:p,ctrlKey:v,altKey:u,shiftKey:P}):new MouseEvent("click",{metaKey:p,ctrlKey:v,altKey:u,shiftKey:P,bubbles:!0,cancelable:!0});A.isOpening=i,te(e),e.dispatchEvent(T),A.isOpening=!1}A.isOpening=!1;function we(e,r){if(e instanceof HTMLAnchorElement)r(e);else if(e.hasAttribute("data-href")){let i=document.createElement("a");i.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(i.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(i.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(i.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(i.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(i),r(i),e.removeChild(i)}}function Se(e,r){we(e,i=>A(i,r))}function Ye(e){let r=ae();var i;const o=r.useHref((i=e.href)!==null&&i!==void 0?i:"");return{"data-href":e.href?o:void 0,"data-target":e.target,"data-rel":e.rel,"data-download":e.download,"data-ping":e.ping,"data-referrer-policy":e.referrerPolicy}}function Xe(e){let r=ae();var i;const o=r.useHref((i=e==null?void 0:e.href)!==null&&i!==void 0?i:"");return{href:e!=null&&e.href?o:void 0,target:e==null?void 0:e.target,rel:e==null?void 0:e.rel,download:e==null?void 0:e.download,ping:e==null?void 0:e.ping,referrerPolicy:e==null?void 0:e.referrerPolicy}}let _="default",X="",D=new WeakMap;function ke(e){if(re()){if(_==="default"){const r=K(e);X=r.documentElement.style.webkitUserSelect,r.documentElement.style.webkitUserSelect="none"}_="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let r="userSelect"in e.style?"userSelect":"webkitUserSelect";D.set(e,e.style[r]),e.style[r]="none"}}function j(e){if(re()){if(_!=="disabled")return;_="restoring",setTimeout(()=>{ve(()=>{if(_==="restoring"){const r=K(e);r.documentElement.style.webkitUserSelect==="none"&&(r.documentElement.style.webkitUserSelect=X||""),X="",_="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&D.has(e)){let r=D.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[i]==="none"&&(e.style[i]=r),e.getAttribute("style")===""&&e.removeAttribute("style"),D.delete(e)}}const ie=Te.createContext({register:()=>{}});ie.displayName="PressResponderContext";function Ke(e,r){return r.get?r.get.call(e):r.value}function se(e,r,i){if(!r.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(e)}function _e(e,r){var i=se(e,r,"get");return Ke(e,i)}function Ae(e,r){if(r.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ce(e,r,i){Ae(e,r),r.set(e,i)}function Ie(e,r,i){if(r.set)r.set.call(e,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}function q(e,r,i){var o=se(e,r,"set");return Ie(e,o,i),i}function Me(e){let r=E.useContext(ie);if(r){let{register:i,...o}=r;e=ne(o,e),i()}return he(r,e.ref),e}var O=new WeakMap;class U{continuePropagation(){q(this,O,!1)}get shouldStopPropagation(){return _e(this,O)}constructor(r,i,o,f){Ce(this,O,{writable:!0,value:void 0}),q(this,O,!0);var p;let v=(p=f==null?void 0:f.target)!==null&&p!==void 0?p:o.currentTarget;const u=v==null?void 0:v.getBoundingClientRect();let P,T=0,C,g=null;o.clientX!=null&&o.clientY!=null&&(C=o.clientX,g=o.clientY),u&&(C!=null&&g!=null?(P=C-u.left,T=g-u.top):(P=u.width/2,T=u.height/2)),this.type=r,this.pointerType=i,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=P,this.y=T}}const J=Symbol("linkClicked"),Q="react-aria-pressable-style",Z="data-react-aria-pressable";function ze(e){let{onPress:r,onPressChange:i,onPressStart:o,onPressEnd:f,onPressUp:p,onClick:v,isDisabled:u,isPressed:P,preventFocusOnPress:T,shouldCancelOnPointerExit:C,allowTextSelectionOnPress:g,ref:H,...le}=Me(e),[fe,G]=E.useState(!1),w=E.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:I,removeAllGlobalListeners:R}=me(),M=x((t,s)=>{let c=w.current;if(u||c.didFirePressStart)return!1;let n=!0;if(c.isTriggeringEvent=!0,o){let l=new U("pressstart",s,t);o(l),n=l.shouldStopPropagation}return i&&i(!0),c.isTriggeringEvent=!1,c.didFirePressStart=!0,G(!0),n}),S=x((t,s,c=!0)=>{let n=w.current;if(!n.didFirePressStart)return!1;n.didFirePressStart=!1,n.isTriggeringEvent=!0;let l=!0;if(f){let a=new U("pressend",s,t);f(a),l=a.shouldStopPropagation}if(i&&i(!1),G(!1),r&&c&&!u){let a=new U("press",s,t);r(a),l&&(l=a.shouldStopPropagation)}return n.isTriggeringEvent=!1,l}),L=x((t,s)=>{let c=w.current;if(u)return!1;if(p){c.isTriggeringEvent=!0;let n=new U("pressup",s,t);return p(n),c.isTriggeringEvent=!1,n.shouldStopPropagation}return!0}),m=x(t=>{let s=w.current;if(s.isPressed&&s.target){s.didFirePressStart&&s.pointerType!=null&&S(k(s.target,t),s.pointerType,!1),s.isPressed=!1,s.isOverTarget=!1,s.activePointerId=null,s.pointerType=null,R(),g||j(s.target);for(let c of s.disposables)c();s.disposables=[]}}),N=x(t=>{C&&m(t)}),F=x(t=>{v==null||v(t)}),V=x((t,s)=>{if(v){let c=new MouseEvent("click",t);$e(c,s),v(be(c))}}),ce=E.useMemo(()=>{let t=w.current,s={onKeyDown(n){if(B(n.nativeEvent,n.currentTarget)&&y(n.currentTarget,$(n.nativeEvent))){var l;ee($(n.nativeEvent),n.key)&&n.preventDefault();let a=!0;if(!t.isPressed&&!n.repeat){t.target=n.currentTarget,t.isPressed=!0,t.pointerType="keyboard",a=M(n,"keyboard");let d=n.currentTarget,b=h=>{B(h,d)&&!h.repeat&&y(d,$(h))&&t.target&&L(k(t.target,h),"keyboard")};I(K(n.currentTarget),"keyup",Ee(b,c),!0)}a&&n.stopPropagation(),n.metaKey&&Y()&&((l=t.metaKeyEvents)===null||l===void 0||l.set(n.key,n.nativeEvent))}else n.key==="Meta"&&(t.metaKeyEvents=new Map)},onClick(n){if(!(n&&!y(n.currentTarget,$(n.nativeEvent)))&&n&&n.button===0&&!t.isTriggeringEvent&&!A.isOpening){let l=!0;if(u&&n.preventDefault(),!t.ignoreEmulatedMouseEvents&&!t.isPressed&&(t.pointerType==="virtual"||Pe(n.nativeEvent))){let a=M(n,"virtual"),d=L(n,"virtual"),b=S(n,"virtual");F(n),l=a&&d&&b}else if(t.isPressed&&t.pointerType!=="keyboard"){let a=t.pointerType||n.nativeEvent.pointerType||"virtual";l=S(k(n.currentTarget,n),a,!0),t.isOverTarget=!1,F(n),m(n)}t.ignoreEmulatedMouseEvents=!1,l&&n.stopPropagation()}}},c=n=>{var l;if(t.isPressed&&t.target&&B(n,t.target)){var a;ee($(n),n.key)&&n.preventDefault();let b=$(n),h=y(t.target,$(n));S(k(t.target,n),"keyboard",h),h&&V(n,t.target),R(),n.key!=="Enter"&&z(t.target)&&y(t.target,b)&&!n[J]&&(n[J]=!0,A(t.target,n,!1)),t.isPressed=!1,(a=t.metaKeyEvents)===null||a===void 0||a.delete(n.key)}else if(n.key==="Meta"&&(!((l=t.metaKeyEvents)===null||l===void 0)&&l.size)){var d;let b=t.metaKeyEvents;t.metaKeyEvents=void 0;for(let h of b.values())(d=t.target)===null||d===void 0||d.dispatchEvent(new KeyboardEvent("keyup",h))}};if(typeof PointerEvent<"u"){s.onPointerDown=a=>{if(a.button!==0||!y(a.currentTarget,$(a.nativeEvent)))return;if(ye(a.nativeEvent)){t.pointerType="virtual";return}t.pointerType=a.pointerType;let d=!0;if(!t.isPressed){t.isPressed=!0,t.isOverTarget=!0,t.activePointerId=a.pointerId,t.target=a.currentTarget,g||ke(t.target),d=M(a,t.pointerType);let b=$(a.nativeEvent);"releasePointerCapture"in b&&b.releasePointerCapture(a.pointerId),I(K(a.currentTarget),"pointerup",n,!1),I(K(a.currentTarget),"pointercancel",l,!1)}d&&a.stopPropagation()},s.onMouseDown=a=>{if(y(a.currentTarget,$(a.nativeEvent))&&a.button===0){if(T){let d=ge(a.target);d&&t.disposables.push(d)}a.stopPropagation()}},s.onPointerUp=a=>{!y(a.currentTarget,$(a.nativeEvent))||t.pointerType==="virtual"||a.button===0&&L(a,t.pointerType||a.pointerType)},s.onPointerEnter=a=>{a.pointerId===t.activePointerId&&t.target&&!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,M(k(t.target,a),t.pointerType))},s.onPointerLeave=a=>{a.pointerId===t.activePointerId&&t.target&&t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,S(k(t.target,a),t.pointerType,!1),N(a))};let n=a=>{if(a.pointerId===t.activePointerId&&t.isPressed&&a.button===0&&t.target){if(y(t.target,$(a))&&t.pointerType!=null){let d=!1,b=setTimeout(()=>{t.isPressed&&t.target instanceof HTMLElement&&(d?m(a):(te(t.target),t.target.click()))},80);I(a.currentTarget,"click",()=>d=!0,!0),t.disposables.push(()=>clearTimeout(b))}else m(a);t.isOverTarget=!1}},l=a=>{m(a)};s.onDragStart=a=>{y(a.currentTarget,$(a.nativeEvent))&&m(a)}}return s},[I,u,T,R,g,m,N,S,M,L,F,V]);return E.useEffect(()=>{if(!H)return;const t=K(H.current);if(!t||!t.head||t.getElementById(Q))return;const s=t.createElement("style");s.id=Q,s.textContent=`
@layer {
  [${Z}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),t.head.prepend(s)},[H]),E.useEffect(()=>{let t=w.current;return()=>{var s;g||j((s=t.target)!==null&&s!==void 0?s:void 0);for(let c of t.disposables)c();t.disposables=[]}},[g]),{isPressed:P||fe,pressProps:ne(le,ce,{[Z]:!0})}}function z(e){return e.tagName==="A"&&e.hasAttribute("href")}function B(e,r){const{key:i,code:o}=e,f=r,p=f.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||o==="Space")&&!(f instanceof W(f).HTMLInputElement&&!oe(f,i)||f instanceof W(f).HTMLTextAreaElement||f.isContentEditable)&&!((p==="link"||!p&&z(f))&&i!=="Enter")}function k(e,r){let i=r.clientX,o=r.clientY;return{currentTarget:e,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,clientX:i,clientY:o}}function Le(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!z(e)}function ee(e,r){return e instanceof HTMLInputElement?!oe(e,r):Le(e)}const Oe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function oe(e,r){return e.type==="checkbox"||e.type==="radio"?r===" ":Oe.has(e.type)}export{ze as $,Ce as _,Xe as a,ae as b,Be as c,j as d,ke as e,A as f,ie as g,Ye as h};
