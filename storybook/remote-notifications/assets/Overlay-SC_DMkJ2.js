import{j as u}from"./jsx-runtime-D_zvdyIk.js";import{r as s,R as m}from"./index-F2Fta7eo.js";import{c as S}from"./clsx-B-dksMZM.js";import{u as j,a as _}from"./OverlayTrigger-BE-czxY4.js";import{$ as I,b as E,a as O,f as q}from"./utils-D0arg4qg.js";import{j as W,k as z,l as B,m as V,n as x,o as H,p as A,d as F}from"./Dialog-BBdTn5Uc.js";import{b as C,$ as b,d as U}from"./mergeRefs-12BfVTtv.js";import{$ as w}from"./filterDOMProps-CeZl_uWj.js";import{$ as K,a as h,b as R}from"./useOverlayTriggerState-Bt-3O924.js";import{v as k}from"./PropsContextProvider-4j-6Yfh0.js";let d=typeof document<"u"&&window.visualViewport;function G(){let t=C(),[e,n]=s.useState(()=>t?{width:0,height:0}:y());return s.useEffect(()=>{let i=()=>{n(a=>{let r=y();return r.width===a.width&&r.height===a.height?a:r})};return d?d.addEventListener("resize",i):window.addEventListener("resize",i),()=>{d?d.removeEventListener("resize",i):window.removeEventListener("resize",i)}},[]),e}function y(){return{width:d&&(d==null?void 0:d.width)||window.innerWidth,height:d&&(d==null?void 0:d.height)||window.innerHeight}}function J(t,e,n){let{overlayProps:i,underlayProps:a}=W({...t,isOpen:e.isOpen,onClose:e.close},n);return z({isDisabled:!e.isOpen}),B(),s.useEffect(()=>{if(e.isOpen&&n.current)return V([n.current])},[e.isOpen,n]),{modalProps:b(i),underlayProps:a}}const Q=s.createContext(null),v=s.createContext(null),X=s.forwardRef(function(e,n){if(s.useContext(v))return m.createElement(g,{...e,modalRef:n},e.children);let{isDismissable:a,isKeyboardDismissDisabled:r,isOpen:c,defaultOpen:o,onOpenChange:l,children:f,isEntering:$,isExiting:p,UNSTABLE_portalContainer:M,shouldCloseOnInteractOutside:L,...N}=e;return m.createElement(P,{isDismissable:a,isKeyboardDismissDisabled:r,isOpen:c,defaultOpen:o,onOpenChange:l,isEntering:$,isExiting:p,UNSTABLE_portalContainer:M,shouldCloseOnInteractOutside:L},m.createElement(g,{...N,modalRef:n},f))});function Y(t,e){[t,e]=I(t,e,Q);let n=s.useContext(x),i=K(t),a=t.isOpen!=null||t.defaultOpen!=null||!n?i:n,r=E(e),c=s.useRef(null),o=h(r,a.isOpen),l=h(c,a.isOpen),f=o||l||t.isExiting||!1,$=C();return!a.isOpen&&!f||$?null:m.createElement(Z,{...t,state:a,isExiting:f,overlayRef:r,modalRef:c})}const P=s.forwardRef(Y);function Z({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:i}=e,{modalProps:a,underlayProps:r}=J(e,i,n),c=R(e.overlayRef)||e.isEntering||!1,o=O({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:c,isExiting:e.isExiting,state:i}}),l=G(),f={...o.style,"--visual-viewport-height":l.height+"px"};return m.createElement(A,{isExiting:e.isExiting,portalContainer:t},m.createElement("div",{...b(w(e),r),...o,style:f,ref:e.overlayRef,"data-entering":c||void 0,"data-exiting":e.isExiting||void 0},m.createElement(q,{values:[[v,{modalProps:a,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[x,i]]},o.children)))}function g(t){let{modalProps:e,modalRef:n,isExiting:i,isDismissable:a}=s.useContext(v),r=s.useContext(x),c=s.useMemo(()=>U(t.modalRef,n),[t.modalRef,n]),o=E(c),l=R(o),f=O({...t,defaultClassName:"react-aria-Modal",values:{isEntering:l,isExiting:i,state:r}});return m.createElement("div",{...b(w(t),e),...f,ref:o,"data-entering":l||void 0,"data-exiting":i||void 0},a&&m.createElement(H,{onDismiss:r.close}),f.children)}const ee="flow--overlay",te={overlay:ee},D=t=>{const{children:e,...n}=t;return u.jsx(P,{...n,children:u.jsx(X,{children:u.jsx(F,{children:e})})})};D.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const T=t=>{const e=s.useContext(k).OverlayContent??D;return u.jsx(e,{...t})};T.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const ne=t=>{const{controller:e,children:n,isDismissable:i=!0,className:a,overlayType:r="Modal",ref:c}=t,o=j(r,{reuseControllerFromContext:!0}),l=e??o,f=l.useIsOpen(),$=S(te.overlay,a);return u.jsx(T,{onOpenChange:p=>l.setOpen(p),isOpen:f,ref:c,isDismissable:i,className:$,children:u.jsx(_,{type:"Modal",controller:l,children:n})})};ne.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."}},composes:["PropsWithChildren","PropsWithClassName"]};export{ne as O};
