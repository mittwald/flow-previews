import{r as n,R as s,j as K}from"./iframe-BQyHcTNh.js";import{P as de}from"./Popover-DSb6ue0f.js";import{c as G}from"./clsx-B-dksMZM.js";import{f as Q}from"./flowComponent-n43oODHt.js";import{J as se}from"./IconWarning-D8COeLpG.js";import{$ as z,a as ne}from"./Collection-DEfh8kkF.js";import{b as X,a as _,d as Y,e as ce,$ as Z,f as ue}from"./utils-CdCPWCHO.js";import{$ as V,a as fe,b as ee,c as $e,d as pe}from"./DragAndDrop-B4Mz3xog.js";import{f as be,o as ve,s as me}from"./Dialog-CTkyeFiO.js";import{a as ge}from"./RSPContexts-BtdGc8q9.js";import{$ as xe,a as he}from"./SelectionIndicator-BnroM9vv.js";import{$ as Pe}from"./Separator-BIV1anzw.js";import{a as De}from"./Text-C9BF5CjQ.js";import{$ as oe,c as ye,e as Se,f as Ee,i as Ce}from"./CollectionBuilder-D9BuGY1P.js";import{f as te,$ as F,g as j,e as Fe}from"./index-BkXVqc6U.js";import{$ as M}from"./filterDOMProps-i7L6S0l1.js";import{$ as ke}from"./inertValue-CRBweRG2.js";import{b as Be}from"./usePress-qWGUTJsN.js";import{l as Me,k as we,g as q}from"./useFocus-COF7nP05.js";import{c as Oe,$ as ae,a as _e}from"./useFocusRing-gNgZcCH8.js";import{e as Le,a as Ie}from"./SelectionManager-DeoXhPYy.js";import{a as Ne}from"./useLabel-DeM_oEx1.js";import{a as Ae,$ as Te}from"./useListState-CY9fdn3l.js";import{$ as Ve}from"./context-BymCJUNL.js";import{b as Ue}from"./useCollator-B9ukcsEW.js";import{a as He}from"./FocusScope-DELlCJxb.js";const R=new WeakMap;function ze(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function Re(t,e){let l=R.get(t);if(!l)throw new Error("Unknown list");return`${l.id}-option-${ze(e)}`}function We(t,e,l){let o=M(t,{labelable:!0}),r=t.selectionBehavior||"toggle",i=t.linkBehavior||(r==="replace"?"action":"override");r==="toggle"&&i==="action"&&(i="override");let{listProps:a}=be({...t,ref:l,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:i}),{focusWithinProps:d}=Oe({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),c=te(t.id);R.set(e,{id:c,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:i,UNSTABLE_itemBehavior:t.UNSTABLE_itemBehavior});let{labelProps:$,fieldProps:p}=Ne({...t,id:c,labelElementType:"span"});return{labelProps:$,listBoxProps:F(o,d,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...F(p,a)})}}function Ke(t,e,l){var o,r;let{key:i}=t,a=R.get(e);var d;let c=(d=t.isDisabled)!==null&&d!==void 0?d:e.selectionManager.isDisabled(i);var $;let p=($=t.isSelected)!==null&&$!==void 0?$:e.selectionManager.isSelected(i);var b;let u=(b=t.shouldSelectOnPressUp)!==null&&b!==void 0?b:a?.shouldSelectOnPressUp;var x;let m=(x=t.shouldFocusOnHover)!==null&&x!==void 0?x:a?.shouldFocusOnHover;var g;let v=(g=t.shouldUseVirtualFocus)!==null&&g!==void 0?g:a?.shouldUseVirtualFocus;var h;let E=(h=t.isVirtualized)!==null&&h!==void 0?h:a?.isVirtualized,k=j(),P=j(),y={role:"option","aria-disabled":c||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?p:void 0};Me()&&we()||(y["aria-label"]=t["aria-label"],y["aria-labelledby"]=k,y["aria-describedby"]=P);let f=e.collection.getItem(i);if(E){let S=Number(f?.index);y["aria-posinset"]=Number.isNaN(S)?void 0:S+1,y["aria-setsize"]=ve(e.collection)}let D=a?.onAction?()=>{var S;return a==null||(S=a.onAction)===null||S===void 0?void 0:S.call(a,i)}:void 0,C=Re(e,i),{itemProps:w,isPressed:I,isFocused:O,hasAction:U,allowsSelection:N}=Le({selectionManager:e.selectionManager,key:i,ref:l,shouldSelectOnPressUp:u,allowsDifferentPressOrigin:u&&m,isVirtualized:E,shouldUseVirtualFocus:v,isDisabled:c,onAction:D||!(f==null||(o=f.props)===null||o===void 0)&&o.onAction?Fe(f==null||(r=f.props)===null||r===void 0?void 0:r.onAction,D):void 0,linkBehavior:a?.linkBehavior,UNSTABLE_itemBehavior:a?.UNSTABLE_itemBehavior,id:C}),{hoverProps:A}=ae({isDisabled:c||!m,onHoverStart(){q()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(i))}}),B=M(f?.props);delete B.id;let T=Be(f?.props);return{optionProps:{...y,...F(B,w,A,T),id:C},labelProps:{id:k},descriptionProps:{id:P},isFocused:O,isFocusVisible:O&&e.selectionManager.isFocused&&q(),isSelected:p,isDisabled:c,isPressed:I,allowsSelection:N,hasAction:U}}function je(t){let{heading:e,"aria-label":l}=t,o=te();return{itemProps:{role:"presentation"},headingProps:e?{id:o,role:"presentation"}:{},groupProps:{role:"group","aria-label":l,"aria-labelledby":e?o:void 0}}}const le=n.createContext(null),L=n.createContext(null),qe=n.forwardRef(function(e,l){[e,l]=Z(e,l,le);let o=n.useContext(L);return o?s.createElement(re,{state:o,props:e,listBoxRef:l}):s.createElement(Se,{content:s.createElement(Ee,e)},r=>s.createElement(Je,{props:e,listBoxRef:l,collection:r}))});function Je({props:t,listBoxRef:e,collection:l}){t={...t,collection:l,children:null,items:null};let{layoutDelegate:o}=n.useContext(z),r=Te({...t,layoutDelegate:o});return s.createElement(re,{state:r,props:t,listBoxRef:e})}function re({state:t,props:e,listBoxRef:l}){[e,l]=Z(e,l,ge);let{dragAndDropHooks:o,layout:r="stack",orientation:i="vertical",filter:a}=e,d=Ae(t,a),{collection:c,selectionManager:$}=d,p=!!o?.useDraggableCollectionState,b=!!o?.useDroppableCollectionState,{direction:u}=Ve(),{disabledBehavior:x,disabledKeys:m}=$,g=Ue({usage:"search",sensitivity:"base"}),{isVirtualized:v,layoutDelegate:h,dropTargetDelegate:E,CollectionRoot:k}=n.useContext(z),P=n.useMemo(()=>e.keyboardDelegate||new Ie({collection:c,collator:g,ref:l,disabledKeys:m,disabledBehavior:x,layout:r,orientation:i,direction:u,layoutDelegate:h}),[c,g,l,x,m,i,u,e.keyboardDelegate,r,h]),{listBoxProps:y}=We({...e,shouldSelectOnPressUp:p||e.shouldSelectOnPressUp,keyboardDelegate:P,isVirtualized:v},d,l);n.useRef(p),n.useRef(b),n.useEffect(()=>{},[p,b]);let f,D,C,w=!1,I=null,O=n.useRef(null);if(p&&o){f=o.useDraggableCollectionState({collection:c,selectionManager:$,preview:o.renderDragPreview?O:void 0}),o.useDraggableCollection({},f,l);let H=o.DragPreview;I=o.renderDragPreview?s.createElement(H,{ref:O},o.renderDragPreview):null}if(b&&o){D=o.useDroppableCollectionState({collection:c,selectionManager:$});let H=o.dropTargetDelegate||E||new o.ListDropTargetDelegate(c,l,{orientation:i,layout:r,direction:u});C=o.useDroppableCollection({keyboardDelegate:P,dropTargetDelegate:H},D,l),w=D.isDropTarget({type:"root"})}let{focusProps:U,isFocused:N,isFocusVisible:A}=_e(),B=d.collection.size===0,T={isDropTarget:w,isEmpty:B,isFocused:N,isFocusVisible:A,layout:e.layout||"stack",state:d},S=_({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:T}),W=null;B&&e.renderEmptyState&&(W=s.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(T)));let ie=M(e,{global:!0});return s.createElement(He,null,s.createElement("div",{...F(ie,S,y,U,C?.collectionProps),ref:l,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":w||void 0,"data-empty":B||void 0,"data-focused":N||void 0,"data-focus-visible":A||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},s.createElement(Y,{values:[[le,e],[L,d],[V,{dragAndDropHooks:o,dragState:f,dropState:D}],[Pe,{elementType:"div"}],[fe,{render:Xe}],[ne,{name:"ListBoxSection",render:Ge}]]},s.createElement(he,null,s.createElement(k,{collection:c,scrollRef:l,persistedKeys:$e($,o,D),renderDropIndicator:ee(o,D)}))),W,I))}function Ge(t,e,l,o="react-aria-ListBoxSection"){let r=n.useContext(L),{dragAndDropHooks:i,dropState:a}=n.useContext(V),{CollectionBranch:d}=n.useContext(z),[c,$]=ue();var p;let{headingProps:b,groupProps:u}=je({heading:$,"aria-label":(p=t["aria-label"])!==null&&p!==void 0?p:void 0}),x=_({defaultClassName:o,className:t.className,style:t.style,values:{}}),m=M(t,{global:!0});return delete m.id,s.createElement("section",{...F(m,x,u),ref:e},s.createElement(me.Provider,{value:{...b,ref:c}},s.createElement(d,{collection:r.collection,parent:l,renderDropIndicator:ee(i,a)})))}const Qe=oe(ye,function(e,l,o){let r=X(l),i=n.useContext(L),{dragAndDropHooks:a,dragState:d,dropState:c}=n.useContext(V),{optionProps:$,labelProps:p,descriptionProps:b,...u}=Ke({key:o.key,"aria-label":e?.["aria-label"]},i,r),{hoverProps:x,isHovered:m}=ae({isDisabled:!u.allowsSelection&&!u.hasAction,onHoverStart:o.props.onHoverStart,onHoverChange:o.props.onHoverChange,onHoverEnd:o.props.onHoverEnd}),g=null;d&&a&&(g=a.useDraggableItem({key:o.key},d));let v=null;c&&a&&(v=a.useDroppableItem({target:{type:"item",key:o.key,dropPosition:"on"}},c,r));let h=d&&d.isDragging(o.key),E=_({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...u,isHovered:m,selectionMode:i.selectionManager.selectionMode,selectionBehavior:i.selectionManager.selectionBehavior,allowsDragging:!!d,isDragging:h,isDropTarget:v?.isDropTarget}});n.useEffect(()=>{o.textValue},[o.textValue]);let k=e.href?"a":"div",P=M(e,{global:!0});return delete P.id,delete P.onClick,s.createElement(k,{...F(P,E,$,x,g?.dragProps,v?.dropProps),ref:r,"data-allows-dragging":!!d||void 0,"data-selected":u.isSelected||void 0,"data-disabled":u.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":u.isFocused||void 0,"data-focus-visible":u.isFocusVisible||void 0,"data-pressed":u.isPressed||void 0,"data-dragging":h||void 0,"data-drop-target":v?.isDropTarget||void 0,"data-selection-mode":i.selectionManager.selectionMode==="none"?void 0:i.selectionManager.selectionMode},s.createElement(Y,{values:[[De,{slots:{[ce]:p,label:p,description:b}}],[xe,{isSelected:u.isSelected}]]},E.children))});function Xe(t,e){e=X(e);let{dragAndDropHooks:l,dropState:o}=n.useContext(V),{dropIndicatorProps:r,isHidden:i,isDropTarget:a}=l.useDropIndicator(t,o,e);return i?null:s.createElement(Ze,{...t,dropIndicatorProps:r,isDropTarget:a,ref:e})}function Ye(t,e){let{dropIndicatorProps:l,isDropTarget:o,...r}=t,i=_({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:o}});return s.createElement("div",{...l,...i,role:"option",ref:e,"data-drop-target":o||void 0})}const Ze=n.forwardRef(Ye);oe(Ce,function(e,l,o){let r=n.useContext(L),{isLoading:i,onLoadMore:a,scrollOffset:d,...c}=e,$=n.useRef(null),p=n.useMemo(()=>({onLoadMore:a,collection:r?.collection,sentinelRef:$,scrollOffset:d}),[a,d,r?.collection]);pe(p,$);let b=_({...c,id:void 0,children:o.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:null}),u={tabIndex:-1};return s.createElement(s.Fragment,null,s.createElement("div",{style:{position:"relative",width:0,height:0},inert:ke(!0)},s.createElement("div",{"data-testid":"loadMoreSentinel",ref:$,style:{position:"absolute",height:1,width:1}})),i&&b.children&&s.createElement("div",{...F(M(e,{global:!0}),u),...b,role:"option",ref:l},b.children))});const eo="flow--options--popover",oo="flow--options",J={popover:eo,options:oo},to=Q("Options",t=>{const{className:e,children:l,controller:o,renderEmptyState:r,onAction:i,...a}=t,d=G(J.options,e);return K.jsx(de,{className:J.popover,controller:o,...a,children:K.jsx(qe,{onAction:i,className:d,renderEmptyState:r,children:l})})});to.__docgenInfo={description:"",methods:[],displayName:"Options",props:{controller:{required:!0,tsType:{name:"OverlayController"},description:""}},composes:["Pick","PopoverProps"]};const ao="flow--option",lo={option:ao},ro=Q("Option",t=>{const{className:e,children:l,textValue:o=se(l),value:r=o,ref:i,...a}=t,d=G(lo.option,e),c=n.Children.count(l)>=1;return n.createElement(Qe,{className:d,ref:i,...a,textValue:o,id:r,key:r},c?l:o)});ro.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Option"};export{L as $,ro as O,to as a,R as b,Re as c,le as d};
