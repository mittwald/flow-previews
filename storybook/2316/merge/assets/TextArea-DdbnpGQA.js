import{r as f,j as n}from"./iframe-B___tkgA.js";import{f as _,P as k}from"./flowComponent-Bo9LBx3J.js";import{b as I}from"./utils-BoKG2kRw.js";import{u as Z}from"./useFieldComponent-vfbWFIJK.js";import{c as $}from"./clsx-B-dksMZM.js";import{u as q}from"./useControlledHostValueProps-C4-i_rC0.js";import{F as B}from"./FieldDescription-C1ZwwWMX.js";import{$ as G}from"./useLocalizedStringFormatter-BO-JJMTJ.js";import{$ as J,a as K}from"./TextField-4VWUIDAX.js";const O="flow--text-area--input",Q="flow--text-area--horizontal-resize",W="flow--text-area--vertical-resize",X="flow--text-area--resize",c={input:O,horizontalResize:Q,verticalResize:W,resize:X},Y={"de-DE":{"textArea.characters":(e,s)=>`${s.select({0:()=>`${e.count}`,other:()=>`${e.count}/${e.maxCount}`},e.maxCount)} Zeichen`},"en-US":{"textArea.characters":(e,s)=>`${s.select({0:()=>`${e.count}`,other:()=>`${e.count}/${e.maxCount}`},e.maxCount)} characters`}},ee=_("TextArea",e=>{const{children:s,placeholder:g,rows:a=5,autoResizeMaxRows:h=a,ref:R,allowVerticalResize:b,allowHorizontalResize:H,showCharacterCount:d,className:E,onChange:m,...j}=q(e),[y,L]=f.useState(e.defaultValue?.length??e.value?.length??0),{FieldErrorView:N,FieldErrorCaptureContext:A,fieldPropsContext:P,fieldProps:x}=Z(e);let{allowResize:o}=e;b?o="vertical":H&&(o="horizontal");const F=$(x.className,E),M=$(c.input,typeof o=="boolean"&&o?c.resize:null,o==="horizontal"?c.horizontalResize:o==="vertical"?c.verticalResize:null),D=t=>{d&&L(t.length),m&&m(t)},T=G(Y).format("textArea.characters",{count:y,maxCount:e.maxLength??0}),r=I(R),p=t=>`calc(var(--line-height--m) * ${t} + (var(--form-control--padding-y) * 2))`,[l,V]=f.useState(!1),u=a!==h,w=o&&(!u||u&&l);f.useEffect(()=>{const t=r.current;if(!t)return;const U=t.offsetHeight;let i=!1;const z=()=>{i=!0},C=()=>{if(!i||l)return;t.offsetHeight!==U&&(V(!0),i=!1)},v=()=>{i=!1};return window.addEventListener("mousedown",z),window.addEventListener("mousemove",C),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousedown",z),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",v)}},[l]);const S=()=>{if(r.current&&u&&!w){r.current.style.height="0px";const t=r.current.scrollHeight;r.current.style.height=t+2+"px"}};return n.jsx(J,{...j,...x,className:F,onChange:D,children:n.jsxs(k,{props:P,children:[n.jsx(A,{children:s}),n.jsx(K,{rows:a,"aria-hidden":e["aria-hidden"],placeholder:g,className:M,ref:r,onChange:S,style:{minHeight:p(a),maxHeight:w?void 0:p(h)}}),d&&n.jsx(B,{children:T}),n.jsx(N,{})]})})});ee.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TextArea"};export{ee as T};
