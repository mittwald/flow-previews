import{r as a,R as u,j as m}from"./iframe-C-RKPwSE.js";import{c as q}from"./clsx-B-dksMZM.js";import{u as F}from"./useOverlayController-DFCL4B8t.js";import{O as H}from"./OverlayContextProvider-wIYWseIw.js";import{L as W}from"./LoadingSpinner-B5fSKp-d.js";import{v as R}from"./flowComponent-_zksvKqG.js";import{u as k}from"./Button-C4QFurWq.js";import{$ as z,b as S,a as L,d as A}from"./utils-BNo7v4Co.js";import{h as B,i as U,j as K,k as G,l as b,m as J,n as Q,b as X}from"./Dialog-5IYWsYFe.js";import{e as P,$ as x,a as Y}from"./index-ChFaffKJ.js";import{$ as N}from"./filterDOMProps-BNnC3YgW.js";import{a as Z}from"./useCollator-CE95nY3l.js";import{$ as w}from"./SelectionManager-CqNsU9e7.js";import{d as ee,e as E,f as M}from"./OverlayArrow-zXeQXnR5.js";let f=typeof document<"u"&&window.visualViewport;function te(){let t=P(),[e,n]=a.useState(()=>t?{width:0,height:0}:O());return a.useEffect(()=>{let i=()=>{f&&f.scale>1||n(s=>{let r=O();return r.width===s.width&&r.height===s.height?s:r})},o,l=s=>{f&&f.scale>1||w(s.target)&&(o=requestAnimationFrame(()=>{(!document.activeElement||!w(document.activeElement))&&n(r=>{let c={width:window.innerWidth,height:window.innerHeight};return c.width===r.width&&c.height===r.height?r:c})}))};return window.addEventListener("blur",l,!0),f?f.addEventListener("resize",i):window.addEventListener("resize",i),()=>{cancelAnimationFrame(o),window.removeEventListener("blur",l,!0),f?f.removeEventListener("resize",i):window.removeEventListener("resize",i)}},[]),e}function O(){return{width:f?f.width*f.scale:window.innerWidth,height:f?f.height*f.scale:window.innerHeight}}function ne(t,e,n){let{overlayProps:i,underlayProps:o}=B({...t,isOpen:e.isOpen,onClose:e.close},n);return U({isDisabled:!e.isOpen}),K(),a.useEffect(()=>{if(e.isOpen&&n.current)return G([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:x(i),underlayProps:o}}const re=a.createContext(null),v=a.createContext(null),ie=a.forwardRef(function(e,n){if(a.useContext(v))return u.createElement(C,{...e,modalRef:n},e.children);let{isDismissable:o,isKeyboardDismissDisabled:l,isOpen:s,defaultOpen:r,onOpenChange:c,children:d,isEntering:p,isExiting:$,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:V,..._}=e;return u.createElement(T,{isDismissable:o,isKeyboardDismissDisabled:l,isOpen:s,defaultOpen:r,onOpenChange:c,isEntering:p,isExiting:$,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:V},u.createElement(C,{..._,modalRef:n},d))});function ae(t,e){[t,e]=z(t,e,re);let n=a.useContext(b),i=ee(t),o=t.isOpen!=null||t.defaultOpen!=null||!n?i:n,l=S(e),s=a.useRef(null),r=E(l,o.isOpen),c=E(s,o.isOpen),d=r||c||t.isExiting||!1,p=P();return!o.isOpen&&!d||p?null:u.createElement(oe,{...t,state:o,isExiting:d,overlayRef:l,modalRef:s})}const T=a.forwardRef(ae);function oe({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:i}=e,{modalProps:o,underlayProps:l}=ne(e,i,n),s=M(e.overlayRef)||e.isEntering||!1,r=L({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:s,isExiting:e.isExiting,state:i}}),c=te(),d;if(typeof document<"u"){let $=Z(document.body)?document.body:document.scrollingElement||document.documentElement,h=$.getBoundingClientRect().height%1;d=$.scrollHeight-h}let p={...r.style,"--visual-viewport-height":c.height+"px","--page-height":d!==void 0?d+"px":void 0};return u.createElement(Q,{isExiting:e.isExiting,portalContainer:t},u.createElement("div",{...x(N(e,{global:!0}),l),...r,style:p,ref:e.overlayRef,"data-entering":s||void 0,"data-exiting":e.isExiting||void 0},u.createElement(A,{values:[[v,{modalProps:o,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[b,i]]},r.children)))}function C(t){let{modalProps:e,modalRef:n,isExiting:i,isDismissable:o}=a.useContext(v),l=a.useContext(b),s=a.useMemo(()=>Y(t.modalRef,n),[t.modalRef,n]),r=S(s),c=M(r),d=L({...t,defaultClassName:"react-aria-Modal",values:{isEntering:c,isExiting:i,state:l}});return u.createElement("div",{...x(N(t,{global:!0}),e),...d,ref:r,"data-entering":c||void 0,"data-exiting":i||void 0},o&&u.createElement(J,{onDismiss:l.close}),d.children)}const se="flow--overlay",D={overlay:se},g=a.memo(t=>{const e=a.useContext(R).LoadingSpinner??W;return m.jsx(e,{...t})});g.displayName="LoadingSpinnerView";g.__docgenInfo={description:"",methods:[],displayName:"LoadingSpinnerView"};const j=()=>(k(),m.jsx(g,{color:"dark"}));j.__docgenInfo={description:"",methods:[],displayName:"OverlaySuspenseFallback"};const I=t=>{const{children:e,className:n,...i}=t,[o,l]=a.useState(!1),s=()=>(a.useLayoutEffect(()=>(l(!0),()=>l(!1)),[l]),m.jsx(j,{...i})),r=o?D.overlay:n;return m.jsx(T,{...i,className:r,children:m.jsx(ie,{children:m.jsx(a.Suspense,{fallback:m.jsx(s,{}),children:m.jsx(X,{children:e})})})})};I.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const y=a.memo(t=>{const e=a.useContext(R).OverlayContent??I;return m.jsx(e,{...t})});y.displayName="OverlayContentView";y.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const le=t=>{const{controller:e,children:n,isDismissable:i=!0,className:o,overlayType:l="Modal",isOpen:s,ref:r}=t,c=F(l,{reuseControllerFromContext:!0}),d=e??c,p=s??d.useIsOpen(),$=q(D.overlay,o);return m.jsx(y,{onOpenChange:h=>d.setOpen(h),isOpen:p,ref:r,isDismissable:i,className:$,children:m.jsx(H,{type:"Modal",controller:d,children:n})})};le.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};export{g as L,le as O};
