import{r as s,R as i}from"./index-Cs7sjTYM.js";import{c as O}from"./clsx-B-dksMZM.js";import{P as A}from"./PropsContextProvider-DXo7lD_U.js";import{f as L,P as U,O as j}from"./flowComponent-CoaKa5Zc.js";import{r as q}from"./index-Cf-03bMR.js";import{d as B,e as V,f as G,g as H,h as g,i as W,j as F,u as K,b as Y,O as k,c as J,$ as Q}from"./OverlayTrigger-BMwC8rTT.js";import{A as X}from"./Activity-Cr-Aqo1o.js";import{$ as Z,c as N,h as P,i as _,a as M,g as ee,b as te}from"./utils-Cd8r7pc9.js";import{$ as R,a as E}from"./index-j_f0pOtZ.js";import{$ as D}from"./filterDOMProps-CeZl_uWj.js";import{a as oe}from"./OverlayArrow-Bm5GlnqX.js";import{H as ne}from"./Header-DGylnXUI.js";import{A as re}from"./Action-DsOH_S21.js";import{B as ae}from"./Button-LvzQeJxk.js";import"./IconApp-BHp1-pnQ.js";import{l as ie}from"./IconWarning-6UHFXu6F.js";let m=typeof document<"u"&&window.visualViewport;function le(){let n=R(),[e,o]=s.useState(()=>n?{width:0,height:0}:w());return s.useEffect(()=>{let t=()=>{o(r=>{let a=w();return a.width===r.width&&a.height===r.height?r:a})};return m?m.addEventListener("resize",t):window.addEventListener("resize",t),()=>{m?m.removeEventListener("resize",t):window.removeEventListener("resize",t)}},[]),e}function w(){return{width:m&&(m==null?void 0:m.width)||window.innerWidth,height:m&&(m==null?void 0:m.height)||window.innerHeight}}function se(n,e,o){let{overlayProps:t,underlayProps:r}=B({...n,isOpen:e.isOpen,onClose:e.close},o);return V({isDisabled:!e.isOpen}),G(),s.useEffect(()=>{if(e.isOpen)return H([o.current])},[e.isOpen,o]),{modalProps:E(t),underlayProps:r}}const de=s.createContext(null),b=s.createContext(null);function ce(n,e){if(s.useContext(b))return i.createElement(C,{...n,modalRef:e},n.children);let{isDismissable:t,isKeyboardDismissDisabled:r,isOpen:a,defaultOpen:l,onOpenChange:d,children:c,isEntering:f,isExiting:h,UNSTABLE_portalContainer:p,shouldCloseOnInteractOutside:u,...$}=n;return i.createElement(T,{isDismissable:t,isKeyboardDismissDisabled:r,isOpen:a,defaultOpen:l,onOpenChange:d,isEntering:f,isExiting:h,UNSTABLE_portalContainer:p,shouldCloseOnInteractOutside:u},i.createElement(C,{...$,modalRef:e},c))}const fe=s.forwardRef(ce);function ue(n,e){[n,e]=Z(n,e,de);let o=s.useContext(g),t=oe(n),r=n.isOpen!=null||n.defaultOpen!=null||!o?t:o,a=N(e),l=s.useRef(null),d=P(a,r.isOpen),c=P(l,r.isOpen),f=d||c||n.isExiting||!1,h=R();return!r.isOpen&&!f||h?null:i.createElement(me,{...n,state:r,isExiting:f,overlayRef:a,modalRef:l})}const T=s.forwardRef(ue);function me({UNSTABLE_portalContainer:n,...e}){let o=e.modalRef,{state:t}=e,{modalProps:r,underlayProps:a}=se(e,t,o),l=_(e.overlayRef)||e.isEntering||!1,d=M({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:l,isExiting:e.isExiting,state:t}}),c=le(),f={...d.style,"--visual-viewport-height":c.height+"px"};return i.createElement(W,{isExiting:e.isExiting,portalContainer:n},i.createElement("div",{...E(D(e),a),...d,style:f,ref:e.overlayRef,"data-entering":l||void 0,"data-exiting":e.isExiting||void 0},i.createElement(ee,{values:[[b,{modalProps:r,modalRef:o,isExiting:e.isExiting,isDismissable:e.isDismissable}],[g,t]]},d.children)))}function C(n){let{modalProps:e,modalRef:o,isExiting:t,isDismissable:r}=s.useContext(b),a=s.useContext(g),l=s.useMemo(()=>te(n.modalRef,o),[n.modalRef,o]),d=N(l),c=_(d),f=M({...n,defaultClassName:"react-aria-Modal",values:{isEntering:c,isExiting:t,state:a}});return i.createElement("div",{...E(D(n),e),...f,ref:d,"data-entering":c||void 0,"data-exiting":t||void 0},r&&i.createElement(F,{onDismiss:a.close}),f.children)}const pe="flow--modal",he="flow--modal--off-canvas",ve="flow--modal--header",$e="flow--modal--content",ge="flow--modal--action-group",Ee="flow--modal--left",be="flow--modal--close-button",v={modal:pe,offCanvas:he,header:ve,content:$e,actionGroup:ge,"size-s":"flow--modal--size-s","size-m":"flow--modal--size-m","modal-zoom":"flow--modal--modal-zoom","modal-slide-in-from-right":"flow--modal--modal-slide-in-from-right",left:Ee,"modal-slide-in-from-left":"flow--modal--modal-slide-in-from-left","modal-slide-up":"flow--modal--modal-slide-up",closeButton:be};var S=function(){var n=function(e,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},n(e,o)};return function(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(e,o);function t(){this.constructor=e}e.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}}(),y="html",x="svg",ye="http://www.w3.org/2000/svg",xe=function(n,e){var o,t,r,a=(o=n.ownerDocument)!==null&&o!==void 0?o:document,l=(r=(t=a.defaultView)!==null&&t!==void 0?t:a.parentWindow)!==null&&r!==void 0?r:window;if(e===y)return n instanceof l.HTMLElement;if(e===x)return n instanceof l.SVGElement;throw new Error('Unrecognized element type "'.concat(e,'" for validateElementType.'))},I=function(n,e){var o={},t,r,a;if(n===y)a=document.createElement("div");else if(n===x)a=document.createElementNS(ye,"g");else throw new Error('Invalid element type "'.concat(n,'" for createPortalNode: must be "html" or "svg".'));if(e&&typeof e=="object")for(var l=0,d=Object.entries(e.attributes);l<d.length;l++){var c=d[l],f=c[0],h=c[1];a.setAttribute(f,h)}var p={element:a,elementType:n,setPortalProps:function(u){o=u},getInitialPortalProps:function(){return o},mount:function(u,$){if($!==r){if(p.unmount(),u!==t&&!xe(u,n))throw new Error('Invalid element type for portal: "'.concat(n,'" portalNodes must be used with ').concat(n," elements, but OutPortal is within <").concat(u.tagName,">."));u.replaceChild(p.element,$),t=u,r=$}},unmount:function(u){u&&u!==r||t&&r&&(t.replaceChild(r,p.element),t=void 0,r=void 0)}};return p},Pe=function(n){S(e,n);function e(o){var t=n.call(this,o)||this;return t.addPropsChannel=function(){Object.assign(t.props.node,{setPortalProps:function(r){t.setState({nodeProps:r})}})},t.state={nodeProps:t.props.node.getInitialPortalProps()},t}return e.prototype.componentDidMount=function(){this.addPropsChannel()},e.prototype.componentDidUpdate=function(){this.addPropsChannel()},e.prototype.render=function(){var o=this,t=this.props,r=t.children,a=t.node;return q.createPortal(s.Children.map(r,function(l){return s.isValidElement(l)?s.cloneElement(l,o.state.nodeProps):l}),a.element)},e}(s.PureComponent),we=function(n){S(e,n);function e(o){var t=n.call(this,o)||this;return t.placeholderNode=s.createRef(),t.passPropsThroughPortal(),t}return e.prototype.passPropsThroughPortal=function(){var o=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(o)},e.prototype.componentDidMount=function(){var o=this.props.node;this.currentPortalNode=o;var t=this.placeholderNode.current,r=t.parentNode;o.mount(r,t),this.passPropsThroughPortal()},e.prototype.componentDidUpdate=function(){var o=this.props.node;this.currentPortalNode&&o!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode.setPortalProps({}),this.currentPortalNode=o);var t=this.placeholderNode.current,r=t.parentNode;o.mount(r,t),this.passPropsThroughPortal()},e.prototype.componentWillUnmount=function(){var o=this.props.node;o.unmount(this.placeholderNode.current),o.setPortalProps({})},e.prototype.render=function(){return s.createElement("div",{ref:this.placeholderNode})},e}(s.PureComponent),Ce=I.bind(null,y);I.bind(null,x);const Oe="flow--modal-overlay--overlay",Ne={overlay:Oe,"overlay-fade":"flow--modal-overlay--overlay-fade"},z=n=>{const{controller:e,children:o,isDismissable:t=!0,className:r,_experimentalNoUnmountContent:a=!1}=n,l=K("Modal",{reuseControllerFromContext:!0}),d=e??l,c=d.useIsOpen(),f=O(Ne.overlay,r),h=i.createElement(Y,null,i.createElement(k,{type:"Modal",controller:d},o)),p=i.useMemo(()=>a?Ce():null,[]);return i.createElement(i.Fragment,null,p&&i.createElement(Pe,{node:p},i.createElement(X,{isActive:c},h)),i.createElement(T,{className:f,isDismissable:t,isOpen:c,onOpenChange:u=>d.setOpen(u)},i.createElement(fe,null,p?i.createElement(we,{node:p}):h)))};z.__docgenInfo={description:"",methods:[],displayName:"ModalOverlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},_experimentalNoUnmountContent:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren"]};const _e=L("Modal",n=>{const{size:e="s",offCanvas:o,controller:t,children:r,refProp:a,className:l,offCanvasOrientation:d="right",...c}=n,f=O(o?v.offCanvas:v.modal,v[`size-${e}`],v[d],l),h={Content:{className:v.content},Heading:{level:2,slot:"title",tunnelId:"heading"},ActionGroup:{className:v.actionGroup,spacing:"m"}};return i.createElement(z,{className:f,controller:t,...c},i.createElement(A,{props:h},i.createElement(U,null,i.createElement(ne,{className:v.header},i.createElement(j,{id:"heading"}),o&&i.createElement(re,{closeOverlay:"Modal"},i.createElement(ae,{variant:"plain",color:"secondary",className:v.closeButton},i.createElement(ie,null)))),r)))});_e.__docgenInfo={description:"",methods:[],displayName:"Modal"};const Me=n=>{const{children:e,...o}=n;return i.createElement(J,{overlayType:"Modal",...o,component:Q},e)};Me.__docgenInfo={description:"",methods:[],displayName:"ModalTrigger",props:{tunnelId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"@internal"},wrapWith:{required:!1,tsType:{name:"ReactElement"},description:""},isDefaultOpen:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:""}}};export{_e as M,Me as a};
