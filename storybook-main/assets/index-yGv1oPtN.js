import{x as Ve,m as _e,f as X,i as V,o as _}from"./useFocusable-DdMdjPK0.js";import{e as et,b as J,$ as tt}from"./flowComponent-CvYijzQN.js";import{e as lt,$ as ue,a as ae,f as it}from"./usePress-GzZvjGFA.js";import{r as g,R as U}from"./index-uCp2LrAq.js";import{r as st}from"./index-BOkhicXD.js";import{$ as rt}from"./FocusScope-DsV13NlO.js";import{$ as ot}from"./useEvent-JfVSFEa6.js";import{m as q,n as nt}from"./Dialog-CUn0EhxI.js";import{$ as ce,a as ut}from"./useLocalizedStringFormatter-5VR59M9e.js";import{$ as at}from"./useControlledState-B8AA3oOY.js";import{a as fe}from"./utils-DWaAzItp.js";import{f as de}from"./Collection-BDIHGFnI.js";import{$ as he}from"./filterDOMProps-CeZl_uWj.js";import{P as ct}from"./Popover-IRcdiENY.js";function ft(i,e){const t=[];for(;i&&i!==document.documentElement;)q(i,e)&&t.push(i),i=i.parentElement;return t}let dt=0;const H=new Map;function ht(i){let[e,t]=g.useState();return et(()=>{if(!i)return;let l=H.get(i);if(l)t(l.element.id);else{let s=`react-aria-description-${dt++}`;t(s);let r=document.createElement("div");r.id=s,r.style.display="none",r.textContent=i,document.body.appendChild(r),l={refCount:0,element:r},H.set(i,l)}return l.refCount++,()=>{l&&--l.refCount===0&&(l.element.remove(),H.delete(i))}},[i]),{"aria-describedby":i?e:void 0}}function pe(i,e){let t=ee(i,e,"left"),l=ee(i,e,"top"),s=e.offsetWidth,r=e.offsetHeight,o=i.scrollLeft,a=i.scrollTop,{borderTopWidth:c,borderLeftWidth:p}=getComputedStyle(i),y=i.scrollLeft+parseInt(p,10),v=i.scrollTop+parseInt(c,10),d=y+i.clientWidth,f=v+i.clientHeight;t<=o?o=t-parseInt(p,10):t+s>d&&(o+=t+s-d),l<=v?a=l-parseInt(c,10):l+r>f&&(a+=l+r-f),i.scrollLeft=o,i.scrollTop=a}function ee(i,e,t){const l=t==="left"?"offsetLeft":"offsetTop";let s=0;for(;e.offsetParent&&(s+=e[l],e.offsetParent!==i);){if(e.offsetParent.contains(i)){s-=i[l];break}e=e.offsetParent}return s}function te(i,e){if(document.contains(i)){let o=document.scrollingElement||document.documentElement;if(window.getComputedStyle(o).overflow==="hidden"){let c=ft(i);for(let p of c)pe(p,i)}else{var t;let{left:c,top:p}=i.getBoundingClientRect();i==null||(t=i.scrollIntoView)===null||t===void 0||t.call(i,{block:"nearest"});let{left:y,top:v}=i.getBoundingClientRect();if(Math.abs(c-y)>1||Math.abs(p-v)>1){var l,s,r;e==null||(s=e.containingElement)===null||s===void 0||(l=s.scrollIntoView)===null||l===void 0||l.call(s,{block:"center",inline:"center"}),(r=i.scrollIntoView)===null||r===void 0||r.call(i,{block:"nearest"})}}}}const pt=500;function ge(i){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:s,threshold:r=pt,accessibilityDescription:o}=i;const a=g.useRef();let{addGlobalListener:c,removeGlobalListener:p}=lt(),{pressProps:y}=ue({isDisabled:e,onPressStart(d){if(d.continuePropagation(),(d.pointerType==="mouse"||d.pointerType==="touch")&&(t&&t({...d,type:"longpressstart"}),a.current=setTimeout(()=>{d.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),s&&s({...d,type:"longpress"}),a.current=void 0},r),d.pointerType==="touch")){let f=A=>{A.preventDefault()};c(d.target,"contextmenu",f,{once:!0}),c(window,"pointerup",()=>{setTimeout(()=>{p(d.target,"contextmenu",f)},30)},{once:!0})}},onPressEnd(d){a.current&&clearTimeout(a.current),l&&(d.pointerType==="mouse"||d.pointerType==="touch")&&l({...d,type:"longpressend"})}}),v=ht(s&&!e?o:void 0);return{longPressProps:J(y,v)}}let N=new Map;function gt(i){let{locale:e}=ce(),t=e+(i?Object.entries(i).sort((s,r)=>s[0]<r[0]?-1:1).join():"");if(N.has(t))return N.get(t);let l=new Intl.Collator(e,i);return N.set(t,l),l}function Z(i){return Ve()?i.altKey:i.ctrlKey}function O(i){return _e()?i.metaKey:i.ctrlKey}const yt=1e3;function bt(i){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=i,s=g.useRef({search:"",timeout:null}).current,r=o=>{let a=vt(o.key);if(!a||o.ctrlKey||o.metaKey||!o.currentTarget.contains(o.target))return;a===" "&&s.search.trim().length>0&&(o.preventDefault(),"continuePropagation"in o||o.stopPropagation()),s.search+=a;let c=e.getKeyForSearch(s.search,t.focusedKey);c==null&&(c=e.getKeyForSearch(s.search)),c!=null&&(t.setFocusedKey(c),l&&l(c)),clearTimeout(s.timeout),s.timeout=setTimeout(()=>{s.search=""},yt)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?r:null}}}function vt(i){return i.length===1||!/^[A-Z]/i.test(i)?i:""}function $t(i){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:s=!1,shouldFocusWrap:r=!1,disallowEmptySelection:o=!1,disallowSelectAll:a=!1,selectOnFocus:c=e.selectionBehavior==="replace",disallowTypeAhead:p=!1,shouldUseVirtualFocus:y,allowsTabNavigation:v=!1,isVirtualized:d,scrollRef:f=l,linkBehavior:A="action"}=i,{direction:S}=ce(),b=ae(),w=n=>{if(n.altKey&&n.key==="Tab"&&n.preventDefault(),!l.current.contains(n.target))return;const $=(h,R)=>{if(h!=null){if(e.isLink(h)&&A==="selection"&&c&&!Z(n)){st.flushSync(()=>{e.setFocusedKey(h,R)});let L=f.current.querySelector(`[data-key="${CSS.escape(h.toString())}"]`),Q=e.getItemProps(h);b.open(L,n,Q.href,Q.routerOptions);return}if(e.setFocusedKey(h,R),e.isLink(h)&&A==="override")return;n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):c&&!Z(n)&&e.replaceSelection(h)}};switch(n.key){case"ArrowDown":if(t.getKeyBelow){var P,x;n.preventDefault();let h=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(P=t.getFirstKey)===null||P===void 0?void 0:P.call(t);h==null&&r&&(h=(x=t.getFirstKey)===null||x===void 0?void 0:x.call(t,e.focusedKey)),$(h)}break;case"ArrowUp":if(t.getKeyAbove){var C,F;n.preventDefault();let h=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(C=t.getLastKey)===null||C===void 0?void 0:C.call(t);h==null&&r&&(h=(F=t.getLastKey)===null||F===void 0?void 0:F.call(t,e.focusedKey)),$(h)}break;case"ArrowLeft":if(t.getKeyLeftOf){var z,u;n.preventDefault();let h=t.getKeyLeftOf(e.focusedKey);h==null&&r&&(h=S==="rtl"?(z=t.getFirstKey)===null||z===void 0?void 0:z.call(t,e.focusedKey):(u=t.getLastKey)===null||u===void 0?void 0:u.call(t,e.focusedKey)),$(h,S==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){var E,W;n.preventDefault();let h=t.getKeyRightOf(e.focusedKey);h==null&&r&&(h=S==="rtl"?(E=t.getLastKey)===null||E===void 0?void 0:E.call(t,e.focusedKey):(W=t.getFirstKey)===null||W===void 0?void 0:W.call(t,e.focusedKey)),$(h,S==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){n.preventDefault();let h=t.getFirstKey(e.focusedKey,O(n));e.setFocusedKey(h),O(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):c&&e.replaceSelection(h)}break;case"End":if(t.getLastKey){n.preventDefault();let h=t.getLastKey(e.focusedKey,O(n));e.setFocusedKey(h),O(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):c&&e.replaceSelection(h)}break;case"PageDown":if(t.getKeyPageBelow){n.preventDefault();let h=t.getKeyPageBelow(e.focusedKey);$(h)}break;case"PageUp":if(t.getKeyPageAbove){n.preventDefault();let h=t.getKeyPageAbove(e.focusedKey);$(h)}break;case"a":O(n)&&e.selectionMode==="multiple"&&a!==!0&&(n.preventDefault(),e.selectAll());break;case"Escape":!o&&e.selectedKeys.size!==0&&(n.stopPropagation(),n.preventDefault(),e.clearSelection());break;case"Tab":if(!v){if(n.shiftKey)l.current.focus();else{let h=rt(l.current,{tabbable:!0}),R,L;do L=h.lastChild(),L&&(R=L);while(L);R&&!R.contains(document.activeElement)&&_(R)}break}}},m=g.useRef({top:0,left:0});ot(f,"scroll",d?null:()=>{m.current={top:f.current.scrollTop,left:f.current.scrollLeft}});let K=n=>{if(e.isFocused){n.currentTarget.contains(n.target)||e.setFocused(!1);return}if(n.currentTarget.contains(n.target)){if(e.setFocused(!0),e.focusedKey==null){let x=F=>{F!=null&&(e.setFocusedKey(F),c&&e.replaceSelection(F))},C=n.relatedTarget;var $,P;C&&n.currentTarget.compareDocumentPosition(C)&Node.DOCUMENT_POSITION_FOLLOWING?x(($=e.lastSelectedKey)!==null&&$!==void 0?$:t.getLastKey()):x((P=e.firstSelectedKey)!==null&&P!==void 0?P:t.getFirstKey())}else d||(f.current.scrollTop=m.current.top,f.current.scrollLeft=m.current.left);if(!d&&e.focusedKey!=null){let x=f.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);x&&(x.contains(document.activeElement)||_(x),V()==="keyboard"&&te(x,{containingElement:l.current}))}}},B=n=>{n.currentTarget.contains(n.relatedTarget)||e.setFocused(!1)};const M=g.useRef(s);g.useEffect(()=>{if(M.current){let n=null;s==="first"&&(n=t.getFirstKey()),s==="last"&&(n=t.getLastKey());let $=e.selectedKeys;if($.size){for(let P of $)if(e.canSelectItem(P)){n=P;break}}e.setFocused(!0),e.setFocusedKey(n),n==null&&!y&&X(l.current)}},[]);let T=g.useRef(e.focusedKey);g.useEffect(()=>{let n=V();if(e.isFocused&&e.focusedKey!=null&&(f!=null&&f.current)){let $=f.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);$&&(n==="keyboard"||M.current)&&(d||pe(f.current,$),n!=="virtual"&&te($,{containingElement:l.current}))}e.isFocused&&e.focusedKey==null&&T.current!=null&&X(l.current),T.current=e.focusedKey,M.current=!1},[d,f,e.focusedKey,e.isFocused,l]);let I={onKeyDown:w,onFocus:K,onBlur:B,onMouseDown(n){f.current===n.target&&n.preventDefault()}},{typeSelectProps:j}=bt({keyboardDelegate:t,selectionManager:e});p||(I=J(j,I));let k;return y||(k=e.focusedKey==null?0:-1),{collectionProps:{...I,tabIndex:k}}}function Gt(i){let{selectionManager:e,key:t,ref:l,shouldSelectOnPressUp:s,shouldUseVirtualFocus:r,focus:o,isDisabled:a,onAction:c,allowsDifferentPressOrigin:p,linkBehavior:y="action"}=i,v=ae(),d=u=>{if(u.pointerType==="keyboard"&&Z(u))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(y==="selection"){let E=e.getItemProps(t);v.open(l.current,u,E.href,E.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(y==="override"||y==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):u&&u.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||u&&(O(u)||u.pointerType==="touch"||u.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};g.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!r&&(o?o():document.activeElement!==l.current&&X(l.current))},[l,t,e.focusedKey,e.childFocusStrategy,e.isFocused,r]),a=a||e.isDisabled(t);let f={};!r&&!a?f={tabIndex:t===e.focusedKey?0:-1,onFocus(u){u.target===l.current&&e.setFocusedKey(t)}}:a&&(f.onMouseDown=u=>{u.preventDefault()});let A=e.isLink(t)&&y==="override",S=e.isLink(t)&&y!=="selection"&&y!=="none",b=!a&&e.canSelectItem(t)&&!A,w=(c||S)&&!a,m=w&&(e.selectionBehavior==="replace"?!b:!b||e.isEmpty),K=w&&b&&e.selectionBehavior==="replace",B=m||K,M=g.useRef(null),T=B&&b,I=g.useRef(!1),j=g.useRef(!1),k=u=>{if(c&&c(),S){let E=e.getItemProps(t);v.open(l.current,u,E.href,E.routerOptions)}},n={};s?(n.onPressStart=u=>{M.current=u.pointerType,I.current=T,u.pointerType==="keyboard"&&(!B||ie())&&d(u)},p?(n.onPressUp=m?null:u=>{u.pointerType!=="keyboard"&&b&&d(u)},n.onPress=m?k:null):n.onPress=u=>{if(m||K&&u.pointerType!=="mouse"){if(u.pointerType==="keyboard"&&!le())return;k(u)}else u.pointerType!=="keyboard"&&b&&d(u)}):(n.onPressStart=u=>{M.current=u.pointerType,I.current=T,j.current=m,b&&(u.pointerType==="mouse"&&!m||u.pointerType==="keyboard"&&(!w||ie()))&&d(u)},n.onPress=u=>{(u.pointerType==="touch"||u.pointerType==="pen"||u.pointerType==="virtual"||u.pointerType==="keyboard"&&B&&le()||u.pointerType==="mouse"&&j.current)&&(B?k(u):b&&d(u))}),f["data-key"]=t,n.preventFocusOnPress=r;let{pressProps:$,isPressed:P}=ue(n),x=K?u=>{M.current==="mouse"&&(u.stopPropagation(),u.preventDefault(),k(u))}:void 0,{longPressProps:C}=ge({isDisabled:!T,onLongPress(u){u.pointerType==="touch"&&(d(u),e.setSelectionBehavior("toggle"))}}),F=u=>{M.current==="touch"&&I.current&&u.preventDefault()},z=e.isLink(t)?u=>{it.isOpening||u.preventDefault()}:void 0;return{itemProps:J(f,b||m?$:{},T?C:{},{onDoubleClick:x,onDragStartCapture:F,onClick:z}),isPressed:P,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:a,allowsSelection:b,hasAction:B}}function le(){let i=window.event;return(i==null?void 0:i.key)==="Enter"}function ie(){let i=window.event;return(i==null?void 0:i.key)===" "||(i==null?void 0:i.code)==="Space"}class mt{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}getNextKey(e){for(e=this.collection.getKeyAfter(e);e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyAfter(e)}return null}getPreviousKey(e){for(e=this.collection.getKeyBefore(e);e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyBefore(e)}return null}findKey(e,t,l){let s=this.getItem(e);if(!s)return null;let r=s.getBoundingClientRect();do e=t(e),s=this.getItem(e);while(s&&l(r,s.getBoundingClientRect()));return e}isSameRow(e,t){return e.top===t.top||e.left!==t.left}isSameColumn(e,t){return e.left===t.left||e.top!==t.top}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,t=>this.getNextColumn(t,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,t=>this.getNextColumn(t,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){let t=this.collection.getItem(e);if((t==null?void 0:t.type)==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyBefore(e)}return null}getItem(e){return e!==null?this.ref.current.querySelector(`[data-key="${CSS.escape(e.toString())}"]`):null}getKeyPageAbove(e){let t=this.ref.current,l=this.getItem(e);if(!l)return null;if(!q(t))return this.getFirstKey();let s=t.getBoundingClientRect(),r=l.getBoundingClientRect();if(this.orientation==="horizontal"){let o=s.x-t.scrollLeft,a=Math.max(0,r.x-o+r.width-s.width);for(;l&&r.x-o>a;)e=this.getKeyAbove(e),l=e==null?null:this.getItem(e),r=l==null?void 0:l.getBoundingClientRect()}else{let o=s.y-t.scrollTop,a=Math.max(0,r.y-o+r.height-s.height);for(;l&&r.y-o>a;)e=this.getKeyAbove(e),l=e==null?null:this.getItem(e),r=l==null?void 0:l.getBoundingClientRect()}return e??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,l=this.getItem(e);if(!l)return null;if(!q(t))return this.getLastKey();let s=t.getBoundingClientRect(),r=l.getBoundingClientRect();if(this.orientation==="horizontal"){let o=s.x-t.scrollLeft,a=Math.min(t.scrollWidth,r.x-o-r.width+s.width);for(;l&&r.x-o<a;)e=this.getKeyBelow(e),l=e==null?null:this.getItem(e),r=l==null?void 0:l.getBoundingClientRect()}else{let o=s.y-t.scrollTop,a=Math.min(t.scrollHeight,r.y-o-r.height+s.height);for(;l&&r.y-o<a;)e=this.getKeyBelow(e),l=e==null?null:this.getItem(e),r=l==null?void 0:l.getBoundingClientRect()}return e??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,s=t||this.getFirstKey();for(;s!=null;){let r=l.getItem(s),o=r.textValue.slice(0,e.length);if(r.textValue&&this.collator.compare(o,e)===0)return s;s=this.getKeyBelow(s)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation,this.direction=t.direction,this.layout=t.layout||"stack"}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all";this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function Xt(i){let{selectionManager:e,collection:t,disabledKeys:l,ref:s,keyboardDelegate:r}=i,o=gt({usage:"search",sensitivity:"base"}),a=e.disabledBehavior,c=g.useMemo(()=>r||new mt({collection:t,disabledKeys:l,disabledBehavior:a,ref:s,collator:o}),[r,t,l,s,o,a]),{collectionProps:p}=$t({...i,ref:s,selectionManager:e,keyboardDelegate:c});return{listProps:p}}class Kt{build(e,t){return this.context=t,se(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let s of e.items)yield*this.getFullNode({value:s},{renderer:t})}else{let s=[];U.Children.forEach(t,o=>{s.push(o)});let r=0;for(let o of s){let a=this.getFullNode({element:o,index:r},{});for(let c of a)r++,yield c}}}getKey(e,t,l,s){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${s}${t.key}`;let r=t.value;if(r!=null){var o;let a=(o=r.key)!==null&&o!==void 0?o:r.id;if(a==null)throw new Error("No key found for item");return a}return s?`${s}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,s){let r=e.element;if(!r&&e.value&&t&&t.renderer){let c=this.cache.get(e.value);if(c&&(!c.shouldInvalidate||!c.shouldInvalidate(this.context))){c.index=e.index,c.parentKey=s?s.key:null,yield c;return}r=t.renderer(e.value)}if(U.isValidElement(r)){let c=r.type;if(typeof c!="function"&&typeof c.getCollectionNode!="function"){let d=typeof r.type=="function"?r.type.name:r.type;throw new Error(`Unknown element <${d}> in collection.`)}let p=c.getCollectionNode(r.props,this.context),y=e.index,v=p.next();for(;!v.done&&v.value;){let d=v.value;e.index=y;let f=d.key;f||(f=d.element?null:this.getKey(r,e,t,l));let S=[...this.getFullNode({...d,key:f,index:y,wrapper:xt(e.wrapper,d.wrapper)},this.getChildState(t,d),l?`${l}${r.key}`:r.key,s)];for(let b of S){if(b.value=d.value||e.value,b.value&&this.cache.set(b.value,b),e.type&&b.type!==e.type)throw new Error(`Unsupported type <${Y(b.type)}> in <${Y(s.type)}>. Only <${Y(e.type)}> is supported.`);y++,yield b}v=p.next(S)}return}if(e.key==null)return;let o=this,a={type:e.type,props:e.props,key:e.key,parentKey:s?s.key:null,value:e.value,level:s?s.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:se(function*(){if(!e.hasChildNodes)return;let c=0;for(let p of e.childNodes()){p.key!=null&&(p.key=`${a.key}${p.key}`),p.index=c;let y=o.getFullNode(p,o.getChildState(t,p),a.key,a);for(let v of y)c++,yield v}})};yield a}constructor(){this.cache=new WeakMap}}function se(i){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=i());for(let l of t)e.push(l),yield l}}}function xt(i,e){if(i&&e)return t=>i(e(t));if(i)return i;if(e)return e}function Y(i){return i[0].toUpperCase()+i.slice(1)}function qt(i,e,t){let l=g.useMemo(()=>new Kt,[]),{children:s,items:r,collection:o}=i;return g.useMemo(()=>{if(o)return o;let c=l.build({children:s,items:r},t);return e(c)},[l,s,r,o,t,e])}function ye(i,e){return typeof e.getChildren=="function"?e.getChildren(i.key):i.childNodes}function St(i){return Pt(i)}function Pt(i,e){for(let t of i)return t}function G(i,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let l=[...re(i,e),e],s=[...re(i,t),t],r=l.slice(0,s.length).findIndex((o,a)=>o!==s[a]);return r!==-1?(e=l[r],t=s[r],e.index-t.index):l.findIndex(o=>o===t)>=0?1:(s.findIndex(o=>o===e)>=0,-1)}function re(i,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=i.getItem(e.parentKey),t.unshift(e);return t}const oe=new WeakMap;function Zt(i){let e=oe.get(i);if(e!=null)return e;e=0;let t=l=>{for(let s of l)s.type==="section"?t(ye(s,i)):e++};return t(i),oe.set(i,e),e}var be={};be={longPressMessage:"اضغط مطولاً أو اضغط على Alt + السهم لأسفل لفتح القائمة"};var ve={};ve={longPressMessage:"Натиснете продължително или натиснете Alt+ стрелка надолу, за да отворите менюто"};var $e={};$e={longPressMessage:"Dlouhým stiskem nebo stisknutím kláves Alt + šipka dolů otevřete nabídku"};var me={};me={longPressMessage:"Langt tryk eller tryk på Alt + pil ned for at åbne menuen"};var Ke={};Ke={longPressMessage:"Drücken Sie lange oder drücken Sie Alt + Nach-unten, um das Menü zu öffnen"};var xe={};xe={longPressMessage:"Πιέστε παρατεταμένα ή πατήστε Alt + κάτω βέλος για να ανοίξετε το μενού"};var Se={};Se={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var Pe={};Pe={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el menú"};var De={};De={longPressMessage:"Menüü avamiseks vajutage pikalt või vajutage klahve Alt + allanool"};var Ae={};Ae={longPressMessage:"Avaa valikko painamalla pohjassa tai näppäinyhdistelmällä Alt + Alanuoli"};var we={};we={longPressMessage:"Appuyez de manière prolongée ou appuyez sur Alt + Flèche vers le bas pour ouvrir le menu."};var Be={};Be={longPressMessage:"לחץ לחיצה ארוכה או הקש Alt + ArrowDown כדי לפתוח את התפריט"};var Ce={};Ce={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var Fe={};Fe={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyíl gombot a menü megnyitásához"};var Ee={};Ee={longPressMessage:"Premere a lungo o premere Alt + Freccia giù per aprire il menu"};var Me={};Me={longPressMessage:"長押しまたは Alt+下矢印キーでメニューを開く"};var Te={};Te={longPressMessage:"길게 누르거나 Alt + 아래쪽 화살표를 눌러 메뉴 열기"};var Ie={};Ie={longPressMessage:"Norėdami atidaryti meniu, nuspaudę palaikykite arba paspauskite „Alt + ArrowDown“."};var ke={};ke={longPressMessage:"Lai atvērtu izvēlni, turiet nospiestu vai nospiediet taustiņu kombināciju Alt + lejupvērstā bultiņa"};var Re={};Re={longPressMessage:"Langt trykk eller trykk Alt + PilNed for å åpne menyen"};var Le={};Le={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var Oe={};Oe={longPressMessage:"Naciśnij i przytrzymaj lub naciśnij klawisze Alt + Strzałka w dół, aby otworzyć menu"};var ze={};ze={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var je={};je={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var Ue={};Ue={longPressMessage:"Apăsați lung sau apăsați pe Alt + săgeată în jos pentru a deschide meniul"};var We={};We={longPressMessage:"Нажмите и удерживайте или нажмите Alt + Стрелка вниз, чтобы открыть меню"};var He={};He={longPressMessage:"Ponuku otvoríte dlhým stlačením alebo stlačením klávesu Alt + klávesu so šípkou nadol"};var Ne={};Ne={longPressMessage:"Za odprtje menija pritisnite in držite gumb ali pritisnite Alt+puščica navzdol"};var Ye={};Ye={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var Ge={};Ge={longPressMessage:"Håll nedtryckt eller tryck på Alt + pil nedåt för att öppna menyn"};var Xe={};Xe={longPressMessage:"Menüyü açmak için uzun basın veya Alt + Aşağı Ok tuşuna basın"};var qe={};qe={longPressMessage:"Довго або звичайно натисніть комбінацію клавіш Alt і стрілка вниз, щоб відкрити меню"};var Ze={};Ze={longPressMessage:"长按或按 Alt + 向下方向键以打开菜单"};var Je={};Je={longPressMessage:"長按或按 Alt+向下鍵以開啟功能表"};var Qe={};Qe={"ar-AE":be,"bg-BG":ve,"cs-CZ":$e,"da-DK":me,"de-DE":Ke,"el-GR":xe,"en-US":Se,"es-ES":Pe,"et-EE":De,"fi-FI":Ae,"fr-FR":we,"he-IL":Be,"hr-HR":Ce,"hu-HU":Fe,"it-IT":Ee,"ja-JP":Me,"ko-KR":Te,"lt-LT":Ie,"lv-LV":ke,"nb-NO":Re,"nl-NL":Le,"pl-PL":Oe,"pt-BR":ze,"pt-PT":je,"ro-RO":Ue,"ru-RU":We,"sk-SK":He,"sl-SI":Ne,"sr-SP":Ye,"sv-SE":Ge,"tr-TR":Xe,"uk-UA":qe,"zh-CN":Ze,"zh-TW":Je};function Dt(i){return i&&i.__esModule?i.default:i}function Jt(i,e,t){let{type:l="menu",isDisabled:s,trigger:r="press"}=i,o=tt(),{triggerProps:a,overlayProps:c}=nt({type:l},e,t),p=f=>{if(!s&&!(r==="longPress"&&!f.altKey)&&t&&t.current)switch(f.key){case"Enter":case" ":if(r==="longPress")return;case"ArrowDown":"continuePropagation"in f||f.stopPropagation(),f.preventDefault(),e.toggle("first");break;case"ArrowUp":"continuePropagation"in f||f.stopPropagation(),f.preventDefault(),e.toggle("last");break;default:"continuePropagation"in f&&f.continuePropagation()}},y=ut(Dt(Qe),"@react-aria/menu"),{longPressProps:v}=ge({isDisabled:s||r!=="longPress",accessibilityDescription:y.format("longPressMessage"),onLongPressStart(){e.close()},onLongPress(){e.open("first")}}),d={onPressStart(f){f.pointerType!=="touch"&&f.pointerType!=="keyboard"&&!s&&e.open(f.pointerType==="virtual"?"first":null)},onPress(f){f.pointerType==="touch"&&!s&&e.toggle()}};return delete a.onPress,{menuTriggerProps:{...a,...r==="press"?d:v,id:o,onKeyDown:p},menuProps:{...c,"aria-labelledby":o,autoFocus:e.focusStrategy||!0,onClose:e.close}}}function At(i){let e=he(i,{labelable:!0}),t;return i.orientation==="vertical"&&(t="vertical"),i.elementType!=="hr"?{separatorProps:{...e,role:"separator","aria-orientation":t}}:{separatorProps:e}}class D extends Set{constructor(e,t,l){super(e),e instanceof D?(this.anchorKey=t||e.anchorKey,this.currentKey=l||e.currentKey):(this.anchorKey=t,this.currentKey=l)}}function wt(i,e){if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0}function Qt(i){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:l,selectionBehavior:s="toggle",disabledBehavior:r="all"}=i,o=g.useRef(!1),[,a]=g.useState(!1),c=g.useRef(null),p=g.useRef(null),[,y]=g.useState(null),v=g.useMemo(()=>ne(i.selectedKeys),[i.selectedKeys]),d=g.useMemo(()=>ne(i.defaultSelectedKeys,new D),[i.defaultSelectedKeys]),[f,A]=at(v,d,i.onSelectionChange),S=g.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),[b,w]=g.useState(s);s==="replace"&&b==="toggle"&&typeof f=="object"&&f.size===0&&w("replace");let m=g.useRef(s);return g.useEffect(()=>{s!==m.current&&(w(s),m.current=s)},[s]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:b,setSelectionBehavior:w,get isFocused(){return o.current},setFocused(K){o.current=K,a(K)},get focusedKey(){return c.current},get childFocusStrategy(){return p.current},setFocusedKey(K,B="first"){c.current=K,p.current=B,y(K)},selectedKeys:f,setSelectedKeys(K){(l||!wt(K,f))&&A(K)},disabledKeys:S,disabledBehavior:r}}function ne(i,e){return i?i==="all"?"all":new D(i):e}class Vt{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&G(this.collection,l,e)<0)&&(e=l)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&G(this.collection,l,e)>0)&&(e=l)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new D([e],e,e);else{let l=this.state.selectedKeys,s=l.anchorKey||e;t=new D(l,s,e);for(let r of this.getKeyRange(s,l.currentKey||e))t.delete(r);for(let r of this.getKeyRange(e,s))this.canSelectItem(r)&&t.add(r)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let l=this.collection.getItem(e),s=this.collection.getItem(t);return l&&s?G(this.collection,l,s)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let l=[],s=e;for(;s;){let r=this.collection.getItem(s);if((r&&r.type==="item"||r.type==="cell"&&this.allowsCellSelection)&&l.push(s),s===t)return l;s=this.collection.getKeyAfter(s)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new D(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new D([e],e,e):new D;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new D;for(let l of e)if(l=this.getKey(l),l!=null&&(t.add(l),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l;){if(this.canSelectItem(l)){let s=this.collection.getItem(l);s.type==="item"&&e.push(l),s.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t(St(ye(s,this.collection)).key)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new D)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let l=this.collection.getItem(e);return!(!l||!(l==null||(t=l.props)===null||t===void 0)&&t.isDisabled||l.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,l;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,l;return!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}constructor(e,t,l){this.collection=e,this.state=t;var s;this.allowsCellSelection=(s=l==null?void 0:l.allowsCellSelection)!==null&&s!==void 0?s:!1,this._isSelectAll=null}}const Bt=g.createContext({});function Ct(i,e){let[t,l]=fe(i,e,Bt),s=de("header",i,e);return s||U.createElement("header",{className:"react-aria-Header",...t,ref:l},t.children)}const _t=g.forwardRef(Ct),Ft=g.createContext({});function Et(i,e){let[t,l]=fe(i,e,Ft),{elementType:s,orientation:r,style:o,className:a}=t,c=s||"hr";c==="hr"&&r==="vertical"&&(c="div");let{separatorProps:p}=At({elementType:s,orientation:r}),y=de("separator",i,e);return y||U.createElement(c,{...he(t),...p,style:o,className:a??"react-aria-Separator",ref:l,slot:t.slot||void 0})}const el=g.forwardRef(Et);ct.__docgenInfo={description:"",methods:[],displayName:"Popover"};export{Qt as $,qt as a,Vt as b,Xt as c,Zt as d,Gt as e,Jt as f,el as g,Ft as h,_t as i,$t as j,gt as k,mt as l,bt as m};
