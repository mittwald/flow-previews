import{j as d}from"./jsx-runtime-D_zvdyIk.js";import{r as u,R as m}from"./index-BZISi7jw.js";import{S as C,f as z,A as k,O as P,P as q}from"./flowComponent-QaLaNUaQ.js";import{a as U,C as _,M as G}from"./ContextMenuContent-C9TXG0sK.js";import"./ContextMenuSection-Cr5cVYnI.js";import{B as J}from"./Button-DMvMpHNz.js";import"./IconApp-2NmtClNa.js";import{x as Q}from"./IconWarning-eLy06F5O.js";import{c as h}from"./clsx-B-dksMZM.js";import{T as X}from"./Text-Cf2tf5FC.js";import{A as F}from"./Activity-DrXcoKbv.js";import{$ as A,b as Y,c as Z}from"./Collection-DxADqCjP.js";import{c as N,a as w,g as O,$ as ee,f as te}from"./utils-CzVyYWZn.js";import{a as se,b as ae,c as ie}from"./CollectionBuilder-D73R-Ru4.js";import{$ as ne}from"./Hidden-DBxI3g91.js";import{a as v,d as oe}from"./index-IBhSrjl6.js";import{$ as S}from"./filterDOMProps-CeZl_uWj.js";import{a as L}from"./useLabel-Hju3pN3c.js";import{$ as re}from"./useHasTabbableChild-5OHQREjG.js";import{a as le}from"./usePress-DZCrAIzv.js";import{c as de,f as ce}from"./SelectionManager-D_sMwGle.js";import{a as ue}from"./useLocalizedStringFormatter-D6AjEcek.js";import{b as D,a as fe}from"./useFocusRing-DzGSygZM.js";import{$ as be}from"./useSingleSelectListState-HCetLLf6.js";const R=new WeakMap;function T(s,e,t){return s?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${R.get(s)}-${t}-${e}`):""}function me(s,e,t){let{key:a,isDisabled:i,shouldSelectOnPressUp:r}=s,{selectionManager:o,selectedKey:n}=e,l=a===n,c=i||e.isDisabled||e.selectionManager.isDisabled(a),{itemProps:f,isPressed:b}=de({selectionManager:o,key:a,ref:t,isDisabled:c,shouldSelectOnPressUp:r,linkBehavior:"selection"}),p=T(e,a,"tab"),y=T(e,a,"tabpanel"),{tabIndex:j}=f,$=e.collection.getItem(a),M=S($==null?void 0:$.props,{labelable:!0});delete M.id;let H=le($==null?void 0:$.props);return{tabProps:v(M,H,f,{id:p,"aria-selected":l,"aria-disabled":c||void 0,"aria-controls":l?y:void 0,tabIndex:c?void 0:j,role:"tab"}),isSelected:l,isDisabled:c,isPressed:b}}function pe(s,e,t){let a=re(t)?void 0:0;var i;const r=T(e,(i=s.id)!==null&&i!==void 0?i:e==null?void 0:e.selectedKey,"tabpanel"),o=L({...s,id:r,"aria-labelledby":T(e,e==null?void 0:e.selectedKey,"tab")});return{tabPanelProps:v(o,{tabIndex:a,role:"tabpanel","aria-describedby":s["aria-describedby"],"aria-details":s["aria-details"]})}}class $e{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,a;return this.disabledKeys.has(e)||!!(!((a=this.collection.getItem(e))===null||a===void 0||(t=a.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){do e=this.collection.getKeyAfter(e),e==null&&(e=this.collection.getFirstKey());while(this.isDisabled(e));return e}getPreviousKey(e){do e=this.collection.getKeyBefore(e),e==null&&(e=this.collection.getLastKey());while(this.isDisabled(e));return e}constructor(e,t,a,i=new Set){this.collection=e,this.flipDirection=t==="rtl"&&a==="horizontal",this.disabledKeys=i,this.tabDirection=a==="horizontal"}}function xe(s,e,t){let{orientation:a="horizontal",keyboardActivation:i="automatic"}=s,{collection:r,selectionManager:o,disabledKeys:n}=e,{direction:l}=ue(),c=u.useMemo(()=>new $e(r,l,a,n),[r,n,a,l]),{collectionProps:f}=ce({ref:t,selectionManager:o,keyboardDelegate:c,selectOnFocus:i==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),b=oe();R.set(e,b);let p=L({...s,id:b});return{tabListProps:{...v(f,p),role:"tablist","aria-orientation":a,tabIndex:void 0}}}function he(s){var e,t;let a=be({...s,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=s.defaultSelectedKey)!==null&&e!==void 0?e:E(s.collection,s.disabledKeys?new Set(s.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:i,collection:r,selectedKey:o}=a,n=u.useRef(o);return u.useEffect(()=>{let l=o;(i.isEmpty||l==null||!r.getItem(l))&&(l=E(r,a.disabledKeys),l!=null&&i.setSelectedKeys([l])),(l!=null&&i.focusedKey==null||!i.isFocused&&l!==n.current)&&i.setFocusedKey(l),n.current=l}),{...a,isDisabled:s.isDisabled||!1}}function E(s,e){let t=null;if(s){var a,i,r,o;for(t=s.getFirstKey();t!=null&&(e.has(t)||!((i=s.getItem(t))===null||i===void 0||(a=i.props)===null||a===void 0)&&a.isDisabled)&&t!==s.getLastKey();)t=s.getKeyAfter(t);t!=null&&(e.has(t)||!((o=s.getItem(t))===null||o===void 0||(r=o.props)===null||r===void 0)&&r.isDisabled)&&t===s.getLastKey()&&(t=s.getFirstKey())}return t}const I=u.createContext(null),x=u.createContext(null),ve=u.forwardRef(function(e,t){[e,t]=ee(e,t,I);let{children:a,orientation:i="horizontal"}=e;return a=u.useMemo(()=>typeof a=="function"?a({orientation:i,defaultChildren:null}):a,[a,i]),m.createElement(ae,{content:a},r=>m.createElement(ye,{props:e,collection:r,tabsRef:t}))});function ye({props:s,tabsRef:e,collection:t}){let{orientation:a="horizontal"}=s,i=he({...s,collection:t,children:void 0}),{focusProps:r,isFocused:o,isFocusVisible:n}=D({within:!0}),l=u.useMemo(()=>({orientation:a,isFocusWithin:o,isFocusVisible:n}),[a,o,n]),c=w({...s,defaultClassName:"react-aria-Tabs",values:l});return m.createElement("div",{...S(s),...r,...c,ref:e,slot:s.slot||void 0,"data-focused":o||void 0,"data-orientation":a,"data-focus-visible":n||void 0,"data-disabled":i.isDisabled||void 0},m.createElement(O,{values:[[I,s],[x,i]]},c.children))}const ge=u.forwardRef(function(e,t){return u.useContext(x)?m.createElement(Pe,{props:e,forwardedRef:t}):m.createElement(ie,e)});function Pe({props:s,forwardedRef:e}){let t=u.useContext(x),{CollectionRoot:a}=u.useContext(A),{orientation:i="horizontal",keyboardActivation:r="automatic"}=te(I),o=N(e),{tabListProps:n}=xe({...s,orientation:i,keyboardActivation:r},t,o),l=w({...s,children:null,defaultClassName:"react-aria-TabList",values:{orientation:i,state:t}}),c=S(s);return delete c.id,m.createElement("div",{...c,...n,ref:o,...l,"data-orientation":i||void 0},m.createElement(a,{collection:t.collection,persistedKeys:Z(t.selectionManager.focusedKey)}))}const Ke=se("item",(s,e,t)=>{let a=u.useContext(x),i=N(e),{tabProps:r,isSelected:o,isDisabled:n,isPressed:l}=me({key:t.key,...s},a,i),{focusProps:c,isFocused:f,isFocusVisible:b}=D(),{hoverProps:p,isHovered:y}=fe({isDisabled:n,onHoverStart:s.onHoverStart,onHoverEnd:s.onHoverEnd,onHoverChange:s.onHoverChange}),j=w({...s,id:void 0,defaultClassName:"react-aria-Tab",values:{isSelected:o,isDisabled:n,isFocused:f,isFocusVisible:b,isPressed:l,isHovered:y}}),$=t.props.href?"a":"div";return m.createElement($,{...v(r,c,p,j),ref:i,"data-selected":o||void 0,"data-disabled":n||void 0,"data-focused":f||void 0,"data-focus-visible":b||void 0,"data-pressed":l||void 0,"data-hovered":y||void 0})}),Ce=ne(function(e,t){const a=u.useContext(x);let i=N(t),{tabPanelProps:r}=pe(e,a,i),{focusProps:o,isFocused:n,isFocusVisible:l}=D(),c=a.selectedKey===e.id,f=w({...e,defaultClassName:"react-aria-TabPanel",values:{isFocused:n,isFocusVisible:l,isInert:!c,state:a}});if(!c&&!e.shouldForceMount)return null;let b=S(e);delete b.id;let p=c?v(b,r,o,f):f;return m.createElement("div",{...p,ref:i,"data-focused":n||void 0,"data-focus-visible":l||void 0,inert:c?void 0:"true","data-inert":c?void 0:"true"},m.createElement(O,{values:[[I,null],[x,null]]},m.createElement(A.Provider,{value:Y},f.children)))}),Te="flow--tabs--tab-list",we="flow--tabs--tab-list--context-menu-button",Se="flow--tabs--tab-list--titles",Ie="flow--tabs--tab-list--collapsed",g={tabList:Te,contextMenuButton:we,titles:Se,collapsed:Ie};function je(s,e){var t=u.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(a){var i=t.value;i!==a&&(t.value=a,t.callback(a,i))}}}})[0];return t.callback=e,t.facade}const Ne=()=>{const s=u.useRef(null),[e,t]=u.useState(!1),a=je(null,n=>{o(),r(n)}),i=([n])=>{n&&t(!n.isIntersecting)},r=(n=a.current)=>{if(n&&n instanceof Element){const l=new IntersectionObserver(i,{root:n.parentElement,threshold:1});s.current=l,l.observe(n)}},o=()=>{var n;(n=s.current)==null||n.disconnect()};return u.useEffect(()=>(r(),o),[s.current]),{ref:a,isOverflowing:e}},De="flow--tabs--tab-title",Me="flow--tabs--tab-title--text",Fe="flow--tabs--tab-title--menu-item",K={tabTitle:De,text:Me,menuItem:Fe},W=s=>{const{className:e,...t}=s,a=h(e,K.tabTitle);return d.jsx("div",{...t,className:a,"data-selected":!0,children:d.jsx(C,{id:"ActiveTitle"})})};W.__docgenInfo={description:"",methods:[],displayName:"TabTitleCollapsed",props:{id:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithClassName"]};const B=s=>{const{selection:e,disabledKeys:t,onContextMenuSelectionChange:a}=s,i=u.useId(),r=Ne(),o=r.isOverflowing,n=h(g.tabList,o&&g.collapsed),l=p=>{a(p)},c=d.jsx(ge,{className:g.titles,ref:r.ref,children:d.jsx(C,{id:"Titles"})}),f=o&&d.jsx(W,{id:i}),b=o&&d.jsxs(U,{children:[d.jsx(J,{variant:"soft",className:g.contextMenuButton,color:"secondary","aria-labelledby":i,children:d.jsx(Q,{})}),d.jsx(_,{disabledKeys:t,selectedKeys:e?[e]:void 0,selectionMode:"navigation",onAction:p=>l(p),children:d.jsx(C,{id:"ContextMenuItems"})})]});return d.jsxs("div",{className:n,children:[c,f,b]})};B.__docgenInfo={description:"",methods:[],displayName:"TabList",props:{selection:{required:!0,tsType:{name:"union",raw:"Aria.Key | undefined",elements:[{name:"Aria.Key"},{name:"undefined"}]},description:""},onContextMenuSelectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Aria.Key) => void",signature:{arguments:[{type:{name:"Aria.Key"},name:"key"}],return:{name:"void"}}},description:""},disabledKeys:{required:!1,tsType:{name:"Iterable",elements:[{name:"Aria.Key"}],raw:"Iterable<Aria.Key>"},description:""}}};const Ee="flow--tabs",Ae={tabs:Ee},Oe=z("Tabs",s=>{const{children:e,className:t,defaultSelectedKey:a,disabledKeys:i,ref:r,onSelectionChange:o,...n}=s,l=h(Ae.tabs,t),[c,f]=u.useState(a);return d.jsxs(k,{children:[e,d.jsxs(ve,{slot:null,className:l,...n,selectedKey:c,onSelectionChange:b=>{f(b),o&&o(b)},disabledKeys:i,ref:r,children:[d.jsx(B,{selection:c,onContextMenuSelectionChange:b=>{f(b),o&&o(b)},disabledKeys:i}),d.jsx(C,{id:"Panels"})]})]})});Oe.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tabs"};const V=u.createContext({id:"undefined"}),Le=()=>u.useContext(V),Re=V.Provider,We=s=>{const{children:e,className:t,...a}=s,{id:i}=Le(),r=h(K.tabTitle,t);return d.jsxs(d.Fragment,{children:[d.jsx(P,{id:"Titles",children:d.jsx(Ke,{...a,id:i,className:r,children:o=>d.jsxs(d.Fragment,{children:[d.jsx(X,{emulateBoldWidth:!0,children:d.jsx("span",{className:K.text,children:e})}),d.jsx(P,{id:"ActiveTitle",children:o.isSelected&&e})]})})}),d.jsx(P,{id:"ContextMenuItems",children:d.jsx(G,{className:K.menuItem,id:i,children:e})})]})};We.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TabTitle",composes:["Omit","PropsWithChildren"]};const Be="flow--tabs--tab--tab-panel",Ve={tabPanel:Be},He=s=>{const{children:e,className:t,id:a,...i}=s,r=h(Ve.tabPanel,t),o=u.useId(),n=a??o,l=c=>{const f=c.state.selectedKey===n,b={Content:{wrapWith:d.jsx(F,{isActive:f})},Section:{wrapWith:d.jsx(F,{isActive:f})}};return d.jsx(q,{props:b,dependencies:[f,e],children:e})};return d.jsx(P,{id:"Panels",children:d.jsx(Re,{value:{id:n},children:d.jsx(Ce,{className:r,shouldForceMount:!0,id:n,...i,children:l})})})};He.__docgenInfo={description:`@flr-generate all
@flr-clear-props-context`,methods:[],displayName:"Tab",composes:["Omit","PropsWithChildren"]};export{Oe as T,He as a,We as b};
