import{r as c,R as o}from"./index-Cs7sjTYM.js";import{c as h}from"./clsx-B-dksMZM.js";import{P as T}from"./PropsContextProvider-BmJWDS_p.js";import{f as S,P as I,L as _}from"./flowComponent-DAlTzncN.js";import{d as B,e as L,f as q,g as A,h as p,i as F,j as G,u as H,b as U,O as W,c as K,$ as V}from"./OverlayTrigger-D_6slmKS.js";import{$ as j,f as y,h as x,i as O,a as C,e as k,g as J}from"./utils-CgpzwoFP.js";import{$ as w,b}from"./index-C8LjR2Bd.js";import{$ as R}from"./filterDOMProps-CeZl_uWj.js";import{a as Q}from"./OverlayArrow-B9aGSeR2.js";import{H as X}from"./Header-DBKsZyg3.js";import{A as Y}from"./Action-RON2sik7.js";import{B as Z}from"./Button--8fa32YB.js";import"./IconApp-0HsaHm1x.js";import{l as ee}from"./IconWarning-RmcqCVHd.js";let m=typeof document<"u"&&window.visualViewport;function te(){let t=w(),[e,a]=c.useState(()=>t?{width:0,height:0}:v());return c.useEffect(()=>{let n=()=>{a(l=>{let r=v();return r.width===l.width&&r.height===l.height?l:r})};return m?m.addEventListener("resize",n):window.addEventListener("resize",n),()=>{m?m.removeEventListener("resize",n):window.removeEventListener("resize",n)}},[]),e}function v(){return{width:m&&(m==null?void 0:m.width)||window.innerWidth,height:m&&(m==null?void 0:m.height)||window.innerHeight}}function ae(t,e,a){let{overlayProps:n,underlayProps:l}=B({...t,isOpen:e.isOpen,onClose:e.close},a);return L({isDisabled:!e.isOpen}),q(),c.useEffect(()=>{if(e.isOpen)return A([a.current])},[e.isOpen,a]),{modalProps:b(n),underlayProps:l}}const oe=c.createContext(null),g=c.createContext(null);function ne(t,e){if(c.useContext(g))return o.createElement(E,{...t,modalRef:e},t.children);let{isDismissable:n,isKeyboardDismissDisabled:l,isOpen:r,defaultOpen:i,onOpenChange:s,children:f,isEntering:d,isExiting:$,UNSTABLE_portalContainer:N,shouldCloseOnInteractOutside:D,...z}=t;return o.createElement(P,{isDismissable:n,isKeyboardDismissDisabled:l,isOpen:r,defaultOpen:i,onOpenChange:s,isEntering:d,isExiting:$,UNSTABLE_portalContainer:N,shouldCloseOnInteractOutside:D},o.createElement(E,{...z,modalRef:e},f))}const le=c.forwardRef(ne);function re(t,e){[t,e]=j(t,e,oe);let a=c.useContext(p),n=Q(t),l=t.isOpen!=null||t.defaultOpen!=null||!a?n:a,r=y(e),i=c.useRef(null),s=x(r,l.isOpen),f=x(i,l.isOpen),d=s||f||t.isExiting||!1,$=w();return!l.isOpen&&!d||$?null:o.createElement(ie,{...t,state:l,isExiting:d,overlayRef:r,modalRef:i})}const P=c.forwardRef(re);function ie({UNSTABLE_portalContainer:t,...e}){let a=e.modalRef,{state:n}=e,{modalProps:l,underlayProps:r}=ae(e,n,a),i=O(e.overlayRef)||e.isEntering||!1,s=C({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:i,isExiting:e.isExiting,state:n}}),f=te(),d={...s.style,"--visual-viewport-height":f.height+"px"};return o.createElement(F,{isExiting:e.isExiting,portalContainer:t},o.createElement("div",{...b(R(e),r),...s,style:d,ref:e.overlayRef,"data-entering":i||void 0,"data-exiting":e.isExiting||void 0},o.createElement(k,{values:[[g,{modalProps:l,modalRef:a,isExiting:e.isExiting,isDismissable:e.isDismissable}],[p,n]]},s.children)))}function E(t){let{modalProps:e,modalRef:a,isExiting:n,isDismissable:l}=c.useContext(g),r=c.useContext(p),i=c.useMemo(()=>J(t.modalRef,a),[t.modalRef,a]),s=y(i),f=O(s),d=C({...t,defaultClassName:"react-aria-Modal",values:{isEntering:f,isExiting:n,state:r}});return o.createElement("div",{...b(R(t),e),...d,ref:s,"data-entering":f||void 0,"data-exiting":n||void 0},l&&o.createElement(G,{onDismiss:r.close}),d.children)}const se="flow--modal",de="flow--modal--off-canvas",ce="flow--modal--header",fe="flow--modal--content",me="flow--modal--action-group",ue="flow--modal--close-button",u={modal:se,offCanvas:de,header:ce,content:fe,actionGroup:me,"size-s":"flow--modal--size-s","size-m":"flow--modal--size-m","modal-zoom":"flow--modal--modal-zoom","modal-slide-in":"flow--modal--modal-slide-in","modal-slide-up":"flow--modal--modal-slide-up",closeButton:ue},$e="flow--modal-overlay--overlay",pe={overlay:$e,"overlay-fade":"flow--modal-overlay--overlay-fade"},M=t=>{const{controller:e,children:a,isDismissable:n=!0,className:l}=t,r=H("Modal",{reuseControllerFromContext:!0}),i=e??r,s=i.useIsOpen(),f=h(pe.overlay,l);return o.createElement(P,{className:f,isDismissable:n,isOpen:s,onOpenChange:d=>i.setOpen(d)},o.createElement(le,null,o.createElement(U,null,o.createElement(W,{type:"Modal",controller:i},a))))};M.__docgenInfo={description:"",methods:[],displayName:"ModalOverlay",props:{controller:{required:!1,tsType:{name:"OverlayController"},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren"]};const be=S("Modal",t=>{const{size:e="s",offCanvas:a,controller:n,children:l,refProp:r,className:i,...s}=t,f=h(a?u.offCanvas:u.modal,u[`size-${e}`],i),d={Content:{className:u.content},Heading:{level:2,slot:"title",tunnelId:"heading"},ActionGroup:{className:u.actionGroup}};return o.createElement(M,{className:f,controller:n,...s},o.createElement(T,{props:d},o.createElement(I,null,o.createElement(X,{className:u.header},o.createElement(_,{id:"heading"}),a&&o.createElement(Y,{closeOverlay:"Modal"},o.createElement(Z,{variant:"plain",color:"secondary",className:u.closeButton},o.createElement(ee,null)))),l)))});be.__docgenInfo={description:"",methods:[],displayName:"Modal"};const ge=t=>{const{children:e,...a}=t;return o.createElement(K,{overlayType:"Modal",...a,component:V},e)};ge.__docgenInfo={description:"",methods:[],displayName:"ModalTrigger",props:{tunnelId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"@internal"},wrapWith:{required:!1,tsType:{name:"ReactElement"},description:""},isDefaultOpen:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};export{be as M,ge as a};
