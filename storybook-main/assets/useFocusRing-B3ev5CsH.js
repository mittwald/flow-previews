import{a as ge,b as ye,c as N,d as he,e as oe,f as le,g as _,h as Te,i as ce,j as ue,k as S,l as E,m as Pe,n as Ee,o as me,p as xe,q as Z,r as we,s as Se,t as ke,u as Fe,v as Le}from"./useFocusable-MRbdgJr0.js";import{r as p,R as _e}from"./iframe-Dpfie29P.js";import{c as A,$ as fe,d as Ce}from"./index-__VJVmNO.js";const Ke=p.createContext({isNative:!0,open:Ie,useHref:e=>e});function de(){return p.useContext(Ke)}function Ae(e,r){let n=e.getAttribute("target");return(!n||n==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!r.metaKey&&!r.ctrlKey&&!r.altKey&&!r.shiftKey}function D(e,r,n=!0){var o,s;let{metaKey:u,ctrlKey:f,altKey:l,shiftKey:v}=r;ge()&&(!((s=window.event)===null||s===void 0||(o=s.type)===null||o===void 0)&&o.startsWith("key"))&&e.target==="_blank"&&(N()?u=!0:f=!0);let b=ye()&&N()&&!he()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:u,ctrlKey:f,altKey:l,shiftKey:v}):new MouseEvent("click",{metaKey:u,ctrlKey:f,altKey:l,shiftKey:v,bubbles:!0,cancelable:!0});D.isOpening=n,oe(e),e.dispatchEvent(b),D.isOpening=!1}D.isOpening=!1;function He(e,r){if(e instanceof HTMLAnchorElement)r(e);else if(e.hasAttribute("data-href")){let n=document.createElement("a");n.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(n.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(n.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(n.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(n.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(n),r(n),e.removeChild(n)}}function Ie(e,r){He(e,n=>D(n,r))}function Je(e){let r=de();var n;const o=r.useHref((n=e.href)!==null&&n!==void 0?n:"");return{"data-href":e.href?o:void 0,"data-target":e.target,"data-rel":e.rel,"data-download":e.download,"data-ping":e.ping,"data-referrer-policy":e.referrerPolicy}}function Qe(e){let r=de();var n;const o=r.useHref((n=e?.href)!==null&&n!==void 0?n:"");return{href:e?.href?o:void 0,target:e?.target,rel:e?.rel,download:e?.download,ping:e?.ping,referrerPolicy:e?.referrerPolicy}}function Ze(e,r,n,o){!r.isNative&&e.currentTarget instanceof HTMLAnchorElement&&e.currentTarget.href&&!e.isDefaultPrevented()&&Ae(e.currentTarget,e)&&n&&(e.preventDefault(),r.open(e.currentTarget,e,n,o))}function z(){let e=p.useRef(new Map),r=p.useCallback((s,u,f,l)=>{let v=l?.once?(...b)=>{e.current.delete(f),f(...b)}:f;e.current.set(f,{type:u,eventTarget:s,fn:v,options:l}),s.addEventListener(u,v,l)},[]),n=p.useCallback((s,u,f,l)=>{var v;let b=((v=e.current.get(f))===null||v===void 0?void 0:v.fn)||f;s.removeEventListener(u,b,l),e.current.delete(f)},[]),o=p.useCallback(()=>{e.current.forEach((s,u)=>{n(s.eventTarget,s.type,u,s.options)})},[n]);return p.useEffect(()=>o,[o]),{addGlobalListener:r,removeGlobalListener:n,removeAllGlobalListeners:o}}function Me(e,r){if(r.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function De(e,r,n){Me(e,r),r.set(e,n)}let M="default",X="",V=new WeakMap;function Oe(e){if(le()){if(M==="default"){const r=_(e);X=r.documentElement.style.webkitUserSelect,r.documentElement.style.webkitUserSelect="none"}M="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let r="userSelect"in e.style?"userSelect":"webkitUserSelect";V.set(e,e.style[r]),e.style[r]="none"}}function ee(e){if(le()){if(M!=="disabled")return;M="restoring",setTimeout(()=>{Te(()=>{if(M==="restoring"){const r=_(e);r.documentElement.style.webkitUserSelect==="none"&&(r.documentElement.style.webkitUserSelect=X||""),X="",M="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&V.has(e)){let r=V.get(e),n="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[n]==="none"&&(e.style[n]=r),e.getAttribute("style")===""&&e.removeAttribute("style"),V.delete(e)}}const pe=_e.createContext({register:()=>{}});pe.displayName="PressResponderContext";function We(e,r){return r.get?r.get.call(e):r.value}function ve(e,r,n){if(!r.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return r.get(e)}function Ge(e,r){var n=ve(e,r,"get");return We(e,n)}function Ue(e,r,n){if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}function te(e,r,n){var o=ve(e,r,"set");return Ue(e,o,n),n}function Re(e){let r=p.useContext(pe);if(r){let{register:n,...o}=r;e=fe(o,e),n()}return me(r,e.ref),e}var G=new WeakMap;class U{continuePropagation(){te(this,G,!1)}get shouldStopPropagation(){return Ge(this,G)}constructor(r,n,o,s){De(this,G,{writable:!0,value:void 0}),te(this,G,!0);var u;let f=(u=s?.target)!==null&&u!==void 0?u:o.currentTarget;const l=f?.getBoundingClientRect();let v,b=0,x,d=null;o.clientX!=null&&o.clientY!=null&&(x=o.clientX,d=o.clientY),l&&(x!=null&&d!=null?(v=x-l.left,b=d-l.top):(v=l.width/2,b=l.height/2)),this.type=r,this.pointerType=n,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=v,this.y=b}}const re=Symbol("linkClicked"),ne="react-aria-pressable-style",ie="data-react-aria-pressable";function et(e){let{onPress:r,onPressChange:n,onPressStart:o,onPressEnd:s,onPressUp:u,onClick:f,isDisabled:l,isPressed:v,preventFocusOnPress:b,shouldCancelOnPointerExit:x,allowTextSelectionOnPress:d,ref:k,...w}=Re(e),[L,g]=p.useState(!1),T=p.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:m,removeAllGlobalListeners:C}=z(),O=A((t,c)=>{let h=T.current;if(l||h.didFirePressStart)return!1;let i=!0;if(h.isTriggeringEvent=!0,o){let $=new U("pressstart",c,t);o($),i=$.shouldStopPropagation}return n&&n(!0),h.isTriggeringEvent=!1,h.didFirePressStart=!0,g(!0),i}),I=A((t,c,h=!0)=>{let i=T.current;if(!i.didFirePressStart)return!1;i.didFirePressStart=!1,i.isTriggeringEvent=!0;let $=!0;if(s){let a=new U("pressend",c,t);s(a),$=a.shouldStopPropagation}if(n&&n(!1),g(!1),r&&h&&!l){let a=new U("press",c,t);r(a),$&&($=a.shouldStopPropagation)}return i.isTriggeringEvent=!1,$}),W=A((t,c)=>{let h=T.current;if(l)return!1;if(u){h.isTriggeringEvent=!0;let i=new U("pressup",c,t);return u(i),h.isTriggeringEvent=!1,i.shouldStopPropagation}return!0}),K=A(t=>{let c=T.current;if(c.isPressed&&c.target){c.didFirePressStart&&c.pointerType!=null&&I(H(c.target,t),c.pointerType,!1),c.isPressed=!1,c.isOverTarget=!1,c.activePointerId=null,c.pointerType=null,C(),d||ee(c.target);for(let h of c.disposables)h();c.disposables=[]}}),J=A(t=>{x&&K(t)}),B=A(t=>{l||f?.(t)}),Q=A((t,c)=>{if(!l&&f){let h=new MouseEvent("click",t);ce(h,c),f(ue(h))}}),$e=p.useMemo(()=>{let t=T.current,c={onKeyDown(i){if(Y(i.nativeEvent,i.currentTarget)&&S(i.currentTarget,E(i.nativeEvent))){var $;ae(E(i.nativeEvent),i.key)&&i.preventDefault();let a=!0;if(!t.isPressed&&!i.repeat){t.target=i.currentTarget,t.isPressed=!0,t.pointerType="keyboard",a=O(i,"keyboard");let y=i.currentTarget,P=F=>{Y(F,y)&&!F.repeat&&S(y,E(F))&&t.target&&W(H(t.target,F),"keyboard")};m(_(i.currentTarget),"keyup",Ce(P,h),!0)}a&&i.stopPropagation(),i.metaKey&&N()&&(($=t.metaKeyEvents)===null||$===void 0||$.set(i.key,i.nativeEvent))}else i.key==="Meta"&&(t.metaKeyEvents=new Map)},onClick(i){if(!(i&&!S(i.currentTarget,E(i.nativeEvent)))&&i&&i.button===0&&!t.isTriggeringEvent&&!D.isOpening){let $=!0;if(l&&i.preventDefault(),!t.ignoreEmulatedMouseEvents&&!t.isPressed&&(t.pointerType==="virtual"||xe(i.nativeEvent))){let a=O(i,"virtual"),y=W(i,"virtual"),P=I(i,"virtual");B(i),$=a&&y&&P}else if(t.isPressed&&t.pointerType!=="keyboard"){let a=t.pointerType||i.nativeEvent.pointerType||"virtual",y=W(H(i.currentTarget,i),a),P=I(H(i.currentTarget,i),a,!0);$=y&&P,t.isOverTarget=!1,B(i),K(i)}t.ignoreEmulatedMouseEvents=!1,$&&i.stopPropagation()}}},h=i=>{var $;if(t.isPressed&&t.target&&Y(i,t.target)){var a;ae(E(i),i.key)&&i.preventDefault();let P=E(i),F=S(t.target,E(i));I(H(t.target,i),"keyboard",F),F&&Q(i,t.target),C(),i.key!=="Enter"&&q(t.target)&&S(t.target,P)&&!i[re]&&(i[re]=!0,D(t.target,i,!1)),t.isPressed=!1,(a=t.metaKeyEvents)===null||a===void 0||a.delete(i.key)}else if(i.key==="Meta"&&(!(($=t.metaKeyEvents)===null||$===void 0)&&$.size)){var y;let P=t.metaKeyEvents;t.metaKeyEvents=void 0;for(let F of P.values())(y=t.target)===null||y===void 0||y.dispatchEvent(new KeyboardEvent("keyup",F))}};if(typeof PointerEvent<"u"){c.onPointerDown=a=>{if(a.button!==0||!S(a.currentTarget,E(a.nativeEvent)))return;if(Pe(a.nativeEvent)){t.pointerType="virtual";return}t.pointerType=a.pointerType;let y=!0;if(!t.isPressed){t.isPressed=!0,t.isOverTarget=!0,t.activePointerId=a.pointerId,t.target=a.currentTarget,d||Oe(t.target),y=O(a,t.pointerType);let P=E(a.nativeEvent);"releasePointerCapture"in P&&P.releasePointerCapture(a.pointerId),m(_(a.currentTarget),"pointerup",i,!1),m(_(a.currentTarget),"pointercancel",$,!1)}y&&a.stopPropagation()},c.onMouseDown=a=>{if(S(a.currentTarget,E(a.nativeEvent))&&a.button===0){if(b){let y=Ee(a.target);y&&t.disposables.push(y)}a.stopPropagation()}},c.onPointerUp=a=>{!S(a.currentTarget,E(a.nativeEvent))||t.pointerType==="virtual"||a.button===0&&!t.isPressed&&W(a,t.pointerType||a.pointerType)},c.onPointerEnter=a=>{a.pointerId===t.activePointerId&&t.target&&!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,O(H(t.target,a),t.pointerType))},c.onPointerLeave=a=>{a.pointerId===t.activePointerId&&t.target&&t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,I(H(t.target,a),t.pointerType,!1),J(a))};let i=a=>{if(a.pointerId===t.activePointerId&&t.isPressed&&a.button===0&&t.target){if(S(t.target,E(a))&&t.pointerType!=null){let y=!1,P=setTimeout(()=>{t.isPressed&&t.target instanceof HTMLElement&&(y?K(a):(oe(t.target),t.target.click()))},80);m(a.currentTarget,"click",()=>y=!0,!0),t.disposables.push(()=>clearTimeout(P))}else K(a);t.isOverTarget=!1}},$=a=>{K(a)};c.onDragStart=a=>{S(a.currentTarget,E(a.nativeEvent))&&K(a)}}return c},[m,l,b,C,d,K,J,I,O,W,B,Q]);return p.useEffect(()=>{if(!k)return;const t=_(k.current);if(!t||!t.head||t.getElementById(ne))return;const c=t.createElement("style");c.id=ne,c.textContent=`
@layer {
  [${ie}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),t.head.prepend(c)},[k]),p.useEffect(()=>{let t=T.current;return()=>{var c;d||ee((c=t.target)!==null&&c!==void 0?c:void 0);for(let h of t.disposables)h();t.disposables=[]}},[d]),{isPressed:v||L,pressProps:fe(w,$e,{[ie]:!0})}}function q(e){return e.tagName==="A"&&e.hasAttribute("href")}function Y(e,r){const{key:n,code:o}=e,s=r,u=s.getAttribute("role");return(n==="Enter"||n===" "||n==="Spacebar"||o==="Space")&&!(s instanceof Z(s).HTMLInputElement&&!be(s,n)||s instanceof Z(s).HTMLTextAreaElement||s.isContentEditable)&&!((u==="link"||!u&&q(s))&&n!=="Enter")}function H(e,r){let n=r.clientX,o=r.clientY;return{currentTarget:e,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,clientX:n,clientY:o}}function Ve(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!q(e)}function ae(e,r){return e instanceof HTMLInputElement?!be(e,r):Ve(e)}const Be=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function be(e,r){return e.type==="checkbox"||e.type==="radio"?r===" ":Be.has(e.type)}function Ye(e){let{isDisabled:r,onBlurWithin:n,onFocusWithin:o,onFocusWithinChange:s}=e,u=p.useRef({isFocusWithin:!1}),{addGlobalListener:f,removeAllGlobalListeners:l}=z(),v=p.useCallback(d=>{d.currentTarget.contains(d.target)&&u.current.isFocusWithin&&!d.currentTarget.contains(d.relatedTarget)&&(u.current.isFocusWithin=!1,l(),n&&n(d),s&&s(!1))},[n,s,u,l]),b=we(v),x=p.useCallback(d=>{if(!d.currentTarget.contains(d.target))return;const k=_(d.target),w=Se(k);if(!u.current.isFocusWithin&&w===E(d.nativeEvent)){o&&o(d),s&&s(!0),u.current.isFocusWithin=!0,b(d);let L=d.currentTarget;f(k,"focus",g=>{if(u.current.isFocusWithin&&!S(L,g.target)){let T=new k.defaultView.FocusEvent("blur",{relatedTarget:g.target});ce(T,L);let m=ue(T);v(m)}},{capture:!0})}},[o,s,b,f,v]);return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:x,onBlur:v}}}let j=!1,R=0;function Ne(){j=!0,setTimeout(()=>{j=!1},50)}function se(e){e.pointerType==="touch"&&Ne()}function Xe(){if(!(typeof document>"u"))return R===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",se),R++,()=>{R--,!(R>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",se)}}function tt(e){let{onHoverStart:r,onHoverChange:n,onHoverEnd:o,isDisabled:s}=e,[u,f]=p.useState(!1),l=p.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;p.useEffect(Xe,[]);let{addGlobalListener:v,removeAllGlobalListeners:b}=z(),{hoverProps:x,triggerHoverEnd:d}=p.useMemo(()=>{let k=(g,T)=>{if(l.pointerType=T,s||T==="touch"||l.isHovered||!g.currentTarget.contains(g.target))return;l.isHovered=!0;let m=g.currentTarget;l.target=m,v(_(g.target),"pointerover",C=>{l.isHovered&&l.target&&!S(l.target,C.target)&&w(C,C.pointerType)},{capture:!0}),r&&r({type:"hoverstart",target:m,pointerType:T}),n&&n(!0),f(!0)},w=(g,T)=>{let m=l.target;l.pointerType="",l.target=null,!(T==="touch"||!l.isHovered||!m)&&(l.isHovered=!1,b(),o&&o({type:"hoverend",target:m,pointerType:T}),n&&n(!1),f(!1))},L={};return typeof PointerEvent<"u"&&(L.onPointerEnter=g=>{j&&g.pointerType==="mouse"||k(g,g.pointerType)},L.onPointerLeave=g=>{!s&&g.currentTarget.contains(g.target)&&w(g,g.pointerType)}),{hoverProps:L,triggerHoverEnd:w}},[r,n,o,s,l,v,b]);return p.useEffect(()=>{s&&d({currentTarget:l.target},l.pointerType)},[s]),{hoverProps:x,isHovered:u}}function rt(e={}){let{autoFocus:r=!1,isTextInput:n,within:o}=e,s=p.useRef({isFocused:!1,isFocusVisible:r||ke()}),[u,f]=p.useState(!1),[l,v]=p.useState(()=>s.current.isFocused&&s.current.isFocusVisible),b=p.useCallback(()=>v(s.current.isFocused&&s.current.isFocusVisible),[]),x=p.useCallback(w=>{s.current.isFocused=w,f(w),b()},[b]);Fe(w=>{s.current.isFocusVisible=w,b()},[],{isTextInput:n});let{focusProps:d}=Le({isDisabled:o,onFocusChange:x}),{focusWithinProps:k}=Ye({isDisabled:!o,onFocusWithinChange:x});return{isFocused:u,isFocusVisible:l,focusProps:o?k:d}}export{et as $,De as _,de as a,Qe as b,Ze as c,tt as d,rt as e,pe as f,Ye as g,z as h,D as i,ee as j,Oe as k,Je as l};
