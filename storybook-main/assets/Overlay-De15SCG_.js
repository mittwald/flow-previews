import{r as a,R as u,j as m}from"./iframe-GtWYOLNc.js";import{c as q}from"./clsx-B-dksMZM.js";import{u as H}from"./useOverlayController-Cm_PeV9X.js";import{O as I}from"./OverlayContextProvider-C3tl0ORG.js";import{L as W}from"./LoadingSpinner-BgxzSWV-.js";import{v as R}from"./flowComponent-BhbvfIbA.js";import{u as _}from"./Button-DAMH2RQe.js";import{$ as F,b as P,a as S,d as k}from"./utils-DD5Sc9KY.js";import{d as z,e as A,f as B,g as U,h as x,i as K,j as G,k as J}from"./Dialog-E17SkaPF.js";import{c as L,$ as v,a as Q}from"./index-DroEwyNc.js";import{$ as M}from"./filterDOMProps-i7L6S0l1.js";import{a as X}from"./useCollator-CosXWie8.js";import{$ as w}from"./SelectionManager-BxJ0cmnl.js";import{c as Y,d as E,e as D}from"./OverlayArrow-DIM14olf.js";import{C as Z}from"./ClearPropsContextView-C2nQoxxe.js";let f=typeof document<"u"&&window.visualViewport;function ee(){let t=L(),[e,n]=a.useState(()=>t?{width:0,height:0}:C());return a.useEffect(()=>{let i=()=>{f&&f.scale>1||n(s=>{let r=C();return r.width===s.width&&r.height===s.height?s:r})},o,d=s=>{f&&f.scale>1||w(s.target)&&(o=requestAnimationFrame(()=>{(!document.activeElement||!w(document.activeElement))&&n(r=>{let l={width:window.innerWidth,height:window.innerHeight};return l.width===r.width&&l.height===r.height?r:l})}))};return window.addEventListener("blur",d,!0),f?f.addEventListener("resize",i):window.addEventListener("resize",i),()=>{cancelAnimationFrame(o),window.removeEventListener("blur",d,!0),f?f.removeEventListener("resize",i):window.removeEventListener("resize",i)}},[]),e}function C(){return{width:f?f.width*f.scale:window.innerWidth,height:f?f.height*f.scale:window.innerHeight}}function te(t,e,n){let{overlayProps:i,underlayProps:o}=z({...t,isOpen:e.isOpen,onClose:e.close},n);return A({isDisabled:!e.isOpen}),B(),a.useEffect(()=>{if(e.isOpen&&n.current)return U([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:v(i),underlayProps:o}}const ne=a.createContext(null),b=a.createContext(null),re=a.forwardRef(function(e,n){if(a.useContext(b))return u.createElement(O,{...e,modalRef:n},e.children);let{isDismissable:o,isKeyboardDismissDisabled:d,isOpen:s,defaultOpen:r,onOpenChange:l,children:c,isEntering:$,isExiting:p,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:N,...V}=e;return u.createElement(T,{isDismissable:o,isKeyboardDismissDisabled:d,isOpen:s,defaultOpen:r,onOpenChange:l,isEntering:$,isExiting:p,UNSTABLE_portalContainer:h,shouldCloseOnInteractOutside:N},u.createElement(O,{...V,modalRef:n},c))});function ie(t,e){[t,e]=F(t,e,ne);let n=a.useContext(x),i=Y(t),o=t.isOpen!=null||t.defaultOpen!=null||!n?i:n,d=P(e),s=a.useRef(null),r=E(d,o.isOpen),l=E(s,o.isOpen),c=r||l||t.isExiting||!1,$=L();return!o.isOpen&&!c||$?null:u.createElement(ae,{...t,state:o,isExiting:c,overlayRef:d,modalRef:s})}const T=a.forwardRef(ie);function ae({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:i}=e,{modalProps:o,underlayProps:d}=te(e,i,n),s=D(e.overlayRef)||e.isEntering||!1,r=S({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:s,isExiting:e.isExiting,state:i}}),l=ee(),c;if(typeof document<"u"){let p=X(document.body)?document.body:document.scrollingElement||document.documentElement,h=p.getBoundingClientRect().height%1;c=p.scrollHeight-h}let $={...r.style,"--visual-viewport-height":l.height+"px","--page-height":c!==void 0?c+"px":void 0};return u.createElement(G,{isExiting:e.isExiting,portalContainer:t},u.createElement("div",{...v(M(e,{global:!0}),d),...r,style:$,ref:e.overlayRef,"data-entering":s||void 0,"data-exiting":e.isExiting||void 0},u.createElement(k,{values:[[b,{modalProps:o,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[x,i]]},r.children)))}function O(t){let{modalProps:e,modalRef:n,isExiting:i,isDismissable:o}=a.useContext(b),d=a.useContext(x),s=a.useMemo(()=>Q(t.modalRef,n),[t.modalRef,n]),r=P(s),l=D(r),c=S({...t,defaultClassName:"react-aria-Modal",values:{isEntering:l,isExiting:i,state:d}});return u.createElement("div",{...v(M(t,{global:!0}),e),...c,ref:r,"data-entering":l||void 0,"data-exiting":i||void 0},o&&u.createElement(K,{onDismiss:d.close}),c.children)}const oe="flow--overlay",se={overlay:oe},g=a.memo(t=>{const e=a.useContext(R).LoadingSpinner??W;return m.jsx(e,{...t})});g.displayName="LoadingSpinnerView";g.__docgenInfo={description:"",methods:[],displayName:"LoadingSpinnerView"};const le=()=>(_(),m.jsx(g,{color:"dark"})),j=t=>{const{children:e,...n}=t;return m.jsx(T,{...n,children:m.jsx(a.Suspense,{fallback:m.jsx(le,{}),children:m.jsx(re,{children:m.jsx(J,{children:e})})})})};j.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"OverlayContent",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},isDismissable:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""}},composes:["PropsWithChildren","PropsWithClassName"]};const y=a.memo(t=>{const e=a.useContext(R).OverlayContent??j;return m.jsx(e,{...t})});y.displayName="OverlayContentView";y.__docgenInfo={description:"",methods:[],displayName:"OverlayContentView"};const de=t=>{const{controller:e,children:n,isDismissable:i=!0,className:o,overlayType:d="Modal",ref:s}=t,r=H(d,{reuseControllerFromContext:!0}),l=e??r,c=l.useIsOpen(),$=q(se.overlay,o);return m.jsx(Z,{keep:d,children:m.jsx(y,{onOpenChange:p=>l.setOpen(p),isOpen:c,ref:s,isDismissable:i,className:$,children:m.jsx(I,{type:"Modal",controller:l,children:c&&n})})})};de.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLDivElement"}],raw:"Ref<HTMLDivElement>"},description:""},controller:{required:!1,tsType:{name:"OverlayController"},description:"The controller to control the overlay state."},isDismissable:{required:!1,tsType:{name:"boolean"},description:"Whether the overlay can be closed by clicking outside of it."},overlayType:{required:!1,tsType:{name:"union",raw:'"Modal" | "LightBox"',elements:[{name:"literal",value:'"Modal"'},{name:"literal",value:'"LightBox"'}]},description:"Whether the overlay is a modal or a light box."}},composes:["PropsWithChildren","PropsWithClassName"]};export{de as O};
