import{$ as ye}from"./NumberFormatter-DNR9MAW-.js";import{a as ge,$ as he}from"./LiveAnnouncer-CeCcBDbP.js";import{r as N}from"./iframe-Cnqm4lFy.js";import{c as xe}from"./useFocusRing-CPUfygMd.js";import{c as R}from"./mergeRefs-8x0kH2T_.js";import{$ as ve}from"./useLocalizedStringFormatter-CQJQXq27.js";const Ee=new RegExp("^.*\\(.*\\).*$"),Pe=["latn","arab","hanidec","deva","beng","fullwide"];class De{parse(t){return T(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,i){return T(this.locale,this.options,t).isValidPartialNumber(t,e,i)}getNumberingSystem(t){return T(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const A=new Map;function T(s,t,e){let i=V(s,t);if(!s.includes("-nu-")&&!i.isValidPartialNumber(e)){for(let n of Pe)if(n!==i.options.numberingSystem){let o=V(s+(s.includes("-u-")?"-nu-":"-u-nu-")+n,t);if(o.isValidPartialNumber(e))return o}}return i}function V(s,t){let e=s+(t?Object.entries(t).sort((n,o)=>n[0]<o[0]?-1:1).join():""),i=A.get(e);return i||(i=new Se(s,t),A.set(e,i)),i}class Se{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=P(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let u=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let l=e.indexOf(".");l===-1&&(l=e.length),e=e.replace(".",""),l-2===0?e=`0.${e}`:l-2===-1?e=`0.0${e}`:l-2===-2?e="0.00":e=`${e.slice(0,l-2)}.${e.slice(l-2)}`,u>-1&&(e=`-${e}`)}let i=e?+e:NaN;if(isNaN(i))return NaN;if(this.options.style==="percent"){var n,o;let u={...this.options,style:"decimal",minimumFractionDigits:Math.min(((n=this.options.minimumFractionDigits)!==null&&n!==void 0?n:0)+2,20),maximumFractionDigits:Math.min(((o=this.options.maximumFractionDigits)!==null&&o!==void 0?o:0)+2,20)};return new De(this.locale,u).parse(new ye(this.locale,u).format(i))}return this.options.currencySign==="accounting"&&Ee.test(t)&&(i=-1*i),i}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=P(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&this.symbols.group&&(t=P(t," ",this.symbols.group),t=P(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,i=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&i>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=P(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=we(t,this.formatter,this.options,e);var i,n;this.options.style==="percent"&&(((i=this.options.minimumFractionDigits)!==null&&i!==void 0?i:0)>18||((n=this.options.maximumFractionDigits)!==null&&n!==void 0?n:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const B=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),Ne=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function we(s,t,e,i){var n,o,u,l;let g=new Intl.NumberFormat(s,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),m=g.formatToParts(-10000.111),$=g.formatToParts(10000.111),c=Ne.map(a=>g.formatToParts(a));var d;let b=(d=(n=m.find(a=>a.type==="minusSign"))===null||n===void 0?void 0:n.value)!==null&&d!==void 0?d:"-",p=(o=$.find(a=>a.type==="plusSign"))===null||o===void 0?void 0:o.value;!p&&((i==null?void 0:i.signDisplay)==="exceptZero"||(i==null?void 0:i.signDisplay)==="always")&&(p="+");let f=(u=new Intl.NumberFormat(s,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(a=>a.type==="decimal"))===null||u===void 0?void 0:u.value,w=(l=m.find(a=>a.type==="group"))===null||l===void 0?void 0:l.value,h=m.filter(a=>!B.has(a.type)).map(a=>L(a.value)),x=c.flatMap(a=>a.filter(r=>!B.has(r.type)).map(r=>L(r.value))),y=[...new Set([...h,...x])].sort((a,r)=>r.length-a.length),v=y.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${y.join("|")}|[\\p{White_Space}]`,"gu"),E=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),D=new Map(E.map((a,r)=>[a,r])),S=new RegExp(`[${E.join("")}]`,"g");return{minusSign:b,plusSign:p,decimal:f,group:w,literals:v,numeral:S,index:a=>String(D.get(a))}}function P(s,t,e){return s.replaceAll?s.replaceAll(t,e):s.split(t).join(e)}function L(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var C={};C={Empty:"فارغ"};var M={};M={Empty:"Изпразни"};var z={};z={Empty:"Prázdné"};var _={};_={Empty:"Tom"};var k={};k={Empty:"Leer"};var G={};G={Empty:"Άδειο"};var K={};K={Empty:"Empty"};var U={};U={Empty:"Vacío"};var j={};j={Empty:"Tühjenda"};var W={};W={Empty:"Tyhjä"};var q={};q={Empty:"Vide"};var H={};H={Empty:"ריק"};var O={};O={Empty:"Prazno"};var Y={};Y={Empty:"Üres"};var Z={};Z={Empty:"Vuoto"};var J={};J={Empty:"空"};var X={};X={Empty:"비어 있음"};var Q={};Q={Empty:"Tuščias"};var ee={};ee={Empty:"Tukšs"};var te={};te={Empty:"Tom"};var ie={};ie={Empty:"Leeg"};var re={};re={Empty:"Pusty"};var se={};se={Empty:"Vazio"};var ae={};ae={Empty:"Vazio"};var ne={};ne={Empty:"Gol"};var oe={};oe={Empty:"Не заполнено"};var le={};le={Empty:"Prázdne"};var me={};me={Empty:"Prazen"};var ue={};ue={Empty:"Prazno"};var ce={};ce={Empty:"Tomt"};var de={};de={Empty:"Boş"};var pe={};pe={Empty:"Пусто"};var fe={};fe={Empty:"空"};var $e={};$e={Empty:"空白"};var be={};be={"ar-AE":C,"bg-BG":M,"cs-CZ":z,"da-DK":_,"de-DE":k,"el-GR":G,"en-US":K,"es-ES":U,"et-EE":j,"fi-FI":W,"fr-FR":q,"he-IL":H,"hr-HR":O,"hu-HU":Y,"it-IT":Z,"ja-JP":J,"ko-KR":X,"lt-LT":Q,"lv-LV":ee,"nb-NO":te,"nl-NL":ie,"pl-PL":re,"pt-BR":se,"pt-PT":ae,"ro-RO":ne,"ru-RU":oe,"sk-SK":le,"sl-SI":me,"sr-SP":ue,"sv-SE":ce,"tr-TR":de,"uk-UA":pe,"zh-CN":fe,"zh-TW":$e};function Fe(s){return s&&s.__esModule?s.default:s}function Le(s){const t=N.useRef(void 0);let{value:e,textValue:i,minValue:n,maxValue:o,isDisabled:u,isReadOnly:l,isRequired:g,onIncrement:m,onIncrementPage:$,onDecrement:c,onDecrementPage:d,onDecrementToMin:b,onIncrementToMax:p}=s;const I=ve(Fe(be),"@react-aria/spinbutton"),f=()=>clearTimeout(t.current);N.useEffect(()=>()=>f(),[]);let w=r=>{if(!(r.ctrlKey||r.metaKey||r.shiftKey||r.altKey||l||r.nativeEvent.isComposing))switch(r.key){case"PageUp":if($){r.preventDefault(),$==null||$();break}case"ArrowUp":case"Up":m&&(r.preventDefault(),m==null||m());break;case"PageDown":if(d){r.preventDefault(),d==null||d();break}case"ArrowDown":case"Down":c&&(r.preventDefault(),c==null||c());break;case"Home":b&&(r.preventDefault(),b==null||b());break;case"End":p&&(r.preventDefault(),p==null||p());break}},h=N.useRef(!1),x=()=>{h.current=!0},y=()=>{h.current=!1},v=i===""?I.format("Empty"):(i||`${e}`).replace("-","−");N.useEffect(()=>{h.current&&(ge("assertive"),he(v,"assertive"))},[v]);const E=R(r=>{f(),m==null||m(),t.current=window.setTimeout(()=>{(o===void 0||isNaN(o)||e===void 0||isNaN(e)||e<o)&&E(60)},r)}),D=R(r=>{f(),c==null||c(),t.current=window.setTimeout(()=>{(n===void 0||isNaN(n)||e===void 0||isNaN(e)||e>n)&&D(60)},r)});let S=r=>{r.preventDefault()},{addGlobalListener:F,removeAllGlobalListeners:a}=xe();return{spinButtonProps:{role:"spinbutton","aria-valuenow":e!==void 0&&!isNaN(e)?e:void 0,"aria-valuetext":v,"aria-valuemin":n,"aria-valuemax":o,"aria-disabled":u||void 0,"aria-readonly":l||void 0,"aria-required":g||void 0,onKeyDown:w,onFocus:x,onBlur:y},incrementButtonProps:{onPressStart:()=>{E(400),F(window,"contextmenu",S)},onPressEnd:()=>{f(),a()},onFocus:x,onBlur:y},decrementButtonProps:{onPressStart:()=>{D(400),F(window,"contextmenu",S)},onPressEnd:()=>{f(),a()},onFocus:x,onBlur:y}}}export{De as $,Le as a};
