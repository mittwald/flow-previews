import{r as u,R as $,j as d}from"./iframe-BziZnbbf.js";import{v as U,R as S,f as G,N as J,q as T,P as Q}from"./flowComponent-JHIQPa02.js";import{B as X}from"./Button-BsOsKcj7.js";import{N as Y}from"./IconWarning-CJvxfsrj.js";import{c as P}from"./clsx-B-dksMZM.js";import{C as Z}from"./ContextMenuTriggerView-BafuQLOQ.js";import{C as ee,M as te}from"./MenuItem-Dzje33bv.js";import{T as se}from"./Text-C2tTVpcM.js";import{A as E}from"./Activity-Bw2Wafdy.js";import{$ as L,c as ae,b as ne}from"./Collection-BOZKLSmZ.js";import{$ as ie,b as D,a as N,d as R,c as oe}from"./utils-C0RTyIHD.js";import{$ as le,a as re}from"./SelectionIndicator-8CTToPIL.js";import{$ as de,e as ce,g as ue,f as fe}from"./CollectionBuilder-9i2XwoUY.js";import{b as be}from"./Hidden-Bnko_h1D.js";import{$ as h,f as me}from"./index-DKHZz9bz.js";import{$ as C}from"./filterDOMProps-i7L6S0l1.js";import{$ as O}from"./inertValue-DFsTTrJ4.js";import{$ as k}from"./useLabel-fjbW-LOk.js";import{$ as $e}from"./useHasTabbableChild-DlfRfVgL.js";import{b as pe}from"./usePress-D5emiALM.js";import{$ as xe}from"./useFocusable-KPf6K6gw.js";import{e as he,b as ve}from"./SelectionManager-D4K7ysz9.js";import{$ as ye}from"./context-BDhuSyDo.js";import{a as j,$ as ge}from"./useFocusRing-CNOPmzHu.js";import{$ as Pe}from"./useSingleSelectListState-IHsIshw4.js";const V=new WeakMap;function M(s,e,t){return s?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${V.get(s)}-${t}-${e}`):""}function Ce(s,e,t){let{key:a,isDisabled:n,shouldSelectOnPressUp:r}=s,{selectionManager:o,selectedKey:i}=e,l=a===i,c=n||e.isDisabled||e.selectionManager.isDisabled(a),{itemProps:f,isPressed:b}=he({selectionManager:o,key:a,ref:t,isDisabled:c,shouldSelectOnPressUp:r,linkBehavior:"selection"}),m=M(e,a,"tab"),x=M(e,a,"tabpanel"),{tabIndex:v}=f,p=e.collection.getItem(a),y=C(p?.props,{labelable:!0});delete y.id;let _=pe(p?.props),{focusableProps:q}=xe({isDisabled:c},t);return{tabProps:h(y,q,_,f,{id:m,"aria-selected":l,"aria-disabled":c||void 0,"aria-controls":l?x:void 0,tabIndex:c?void 0:v,role:"tab"}),isSelected:l,isDisabled:c,isPressed:b}}function Ke(s,e,t){let a=$e(t)?void 0:0;var n;const r=M(e,(n=s.id)!==null&&n!==void 0?n:e?.selectedKey,"tabpanel"),o=k({...s,id:r,"aria-labelledby":M(e,e?.selectedKey,"tab")});return{tabPanelProps:h(o,{tabIndex:a,role:"tabpanel","aria-describedby":s["aria-describedby"],"aria-details":s["aria-details"]})}}class Te{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,a;return this.disabledKeys.has(e)||!!(!((a=this.collection.getItem(e))===null||a===void 0||(t=a.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let t=e;do t=this.collection.getKeyAfter(t),t==null&&(t=this.collection.getFirstKey());while(t!=null&&this.isDisabled(t));return t}getPreviousKey(e){let t=e;do t=this.collection.getKeyBefore(t),t==null&&(t=this.collection.getLastKey());while(t!=null&&this.isDisabled(t));return t}constructor(e,t,a,n=new Set){this.collection=e,this.flipDirection=t==="rtl"&&a==="horizontal",this.disabledKeys=n,this.tabDirection=a==="horizontal"}}function we(s,e,t){let{orientation:a="horizontal",keyboardActivation:n="automatic"}=s,{collection:r,selectionManager:o,disabledKeys:i}=e,{direction:l}=ye(),c=u.useMemo(()=>new Te(r,l,a,i),[r,i,a,l]),{collectionProps:f}=ve({ref:t,selectionManager:o,keyboardDelegate:c,selectOnFocus:n==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),b=me();V.set(e,b);let m=k({...s,id:b});return{tabListProps:{...h(f,m),role:"tablist","aria-orientation":a,tabIndex:void 0}}}function Se(s){var e,t;let a=Pe({...s,onSelectionChange:s.onSelectionChange?l=>{var c;l!=null&&((c=s.onSelectionChange)===null||c===void 0||c.call(s,l))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=s.defaultSelectedKey)!==null&&e!==void 0?e:A(s.collection,s.disabledKeys?new Set(s.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:n,collection:r,selectedKey:o}=a,i=u.useRef(o);return u.useEffect(()=>{let l=o;s.selectedKey==null&&(n.isEmpty||l==null||!r.getItem(l))&&(l=A(r,a.disabledKeys),l!=null&&n.setSelectedKeys([l])),(l!=null&&n.focusedKey==null||!n.isFocused&&l!==i.current)&&n.setFocusedKey(l),i.current=l}),{...a,isDisabled:s.isDisabled||!1}}function A(s,e){let t=null;if(s){var a,n,r,o;for(t=s.getFirstKey();t!=null&&(e.has(t)||!((n=s.getItem(t))===null||n===void 0||(a=n.props)===null||a===void 0)&&a.isDisabled)&&t!==s.getLastKey();)t=s.getKeyAfter(t);t!=null&&(e.has(t)||!((o=s.getItem(t))===null||o===void 0||(r=o.props)===null||r===void 0)&&r.isDisabled)&&t===s.getLastKey()&&(t=s.getFirstKey())}return t}const I=u.createContext(null),g=u.createContext(null),Me=u.forwardRef(function(e,t){[e,t]=ie(e,t,I);let{children:a,orientation:n="horizontal"}=e;return a=u.useMemo(()=>typeof a=="function"?a({orientation:n,defaultChildren:null}):a,[a,n]),$.createElement(ce,{content:a},r=>$.createElement(Ne,{props:e,collection:r,tabsRef:t}))});function Ne({props:s,tabsRef:e,collection:t}){let{orientation:a="horizontal"}=s,n=Se({...s,collection:t,children:void 0}),{focusProps:r,isFocused:o,isFocusVisible:i}=j({within:!0}),l=u.useMemo(()=>({orientation:a,isFocusWithin:o,isFocusVisible:i}),[a,o,i]),c=N({...s,defaultClassName:"react-aria-Tabs",values:l}),f=C(s,{global:!0});return $.createElement("div",{...h(f,c,r),ref:e,slot:s.slot||void 0,"data-focused":o||void 0,"data-orientation":a,"data-focus-visible":i||void 0,"data-disabled":n.isDisabled||void 0},$.createElement(R,{values:[[I,s],[g,n]]},c.children))}const Ie=u.forwardRef(function(e,t){return u.useContext(g)?$.createElement(De,{props:e,forwardedRef:t}):$.createElement(fe,e)});function De({props:s,forwardedRef:e}){let t=u.useContext(g),{CollectionRoot:a}=u.useContext(L),{orientation:n="horizontal",keyboardActivation:r="automatic"}=oe(I),o=D(e),{tabListProps:i}=we({...s,orientation:n,keyboardActivation:r},t,o),l=N({...s,children:null,defaultClassName:"react-aria-TabList",values:{orientation:n,state:t}}),c=C(s,{global:!0});return delete c.id,$.createElement("div",{...h(c,l,i),ref:o,"data-orientation":n||void 0},$.createElement(re,null,$.createElement(a,{collection:t.collection,persistedKeys:ne(t.selectionManager.focusedKey)})))}class W extends ue{}W.type="item";const je=de(W,(s,e,t)=>{let a=u.useContext(g),n=D(e),{tabProps:r,isSelected:o,isDisabled:i,isPressed:l}=Ce({key:t.key,...s},a,n),{focusProps:c,isFocused:f,isFocusVisible:b}=j(),{hoverProps:m,isHovered:x}=ge({isDisabled:i,onHoverStart:s.onHoverStart,onHoverEnd:s.onHoverEnd,onHoverChange:s.onHoverChange}),v=N({...s,id:void 0,children:t.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:o,isDisabled:i,isFocused:f,isFocusVisible:b,isPressed:l,isHovered:x}}),p=t.props.href?"a":"div",y=C(s,{global:!0});return delete y.id,delete y.onClick,$.createElement(p,{...h(y,v,r,c,m),ref:n,"data-selected":o||void 0,"data-disabled":i||void 0,"data-focused":f||void 0,"data-focus-visible":b||void 0,"data-pressed":l||void 0,"data-hovered":x||void 0},$.createElement(le.Provider,{value:{isSelected:o}},v.children))}),Fe=be(function(e,t){const a=u.useContext(g);let n=D(t),{id:r,...o}=e,{tabPanelProps:i}=Ke(e,a,n),{focusProps:l,isFocused:c,isFocusVisible:f}=j(),b=a.selectedKey===e.id,m=N({...e,defaultClassName:"react-aria-TabPanel",values:{isFocused:c,isFocusVisible:f,isInert:O(!b),state:a}});if(!b&&!e.shouldForceMount)return null;let x=C(o,{global:!0});delete x.id;let v=b?h(x,i,l,m):m;return $.createElement("div",{...v,ref:n,"data-focused":c||void 0,"data-focus-visible":f||void 0,inert:O(!b||e.inert),"data-inert":b?void 0:"true"},$.createElement(R,{values:[[I,null],[g,null]]},$.createElement(L.Provider,{value:ae},m.children)))}),F=u.memo(s=>{const e=u.useContext(U).ContextMenu??ee;return d.jsx(e,{...s})});F.displayName="ContextMenuView";F.__docgenInfo={description:"",methods:[],displayName:"ContextMenuView"};const Ee="flow--tabs--tab-list",Oe="flow--tabs--tab-list--context-menu-button",Ae="flow--tabs--tab-list--titles",Le="flow--tabs--tab-list--collapsed",K={tabList:Ee,contextMenuButton:Oe,titles:Ae,collapsed:Le};function Re(s,e){var t=u.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(a){var n=t.value;n!==a&&(t.value=a,t.callback(a,n))}}}})[0];return t.callback=e,t.facade}const ke=()=>{const s=u.useRef(null),[e,t]=u.useState(!1),a=Re(null,i=>{o(),r(i)}),n=([i])=>{i&&t(!i.isIntersecting)},r=(i=a.current)=>{if(i&&i instanceof Element){const l=new IntersectionObserver(n,{root:i.parentElement,threshold:1});s.current=l,l.observe(i)}},o=()=>{s.current?.disconnect()};return u.useEffect(()=>(r(),o),[s.current]),{ref:a,isOverflowing:e}},Ve="flow--tabs--tab-title",We="flow--tabs--tab-title--text",Be="flow--tabs--tab-title--menu-item",w={tabTitle:Ve,text:We,menuItem:Be},B=s=>{const{className:e,...t}=s,a=P(e,w.tabTitle);return d.jsx("div",{...t,className:a,"data-selected":!0,children:d.jsx(S,{id:"ActiveTitle"})})};B.__docgenInfo={description:"",methods:[],displayName:"TabTitleCollapsed",props:{id:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithClassName"]};const H=s=>{const{selection:e,disabledKeys:t,onContextMenuSelectionChange:a}=s,n=u.useId(),r=ke(),o=r.isOverflowing,i=P(K.tabList,o&&K.collapsed),l=m=>{a(m)},c=d.jsx(Ie,{className:K.titles,ref:r.ref,children:d.jsx(S,{id:"Titles"})}),f=o&&d.jsx(B,{id:n}),b=o&&d.jsxs(Z,{children:[d.jsx(X,{variant:"soft",className:K.contextMenuButton,color:"secondary","aria-labelledby":n,children:d.jsx(Y,{})}),d.jsx(F,{disabledKeys:t,selectedKeys:e?[e]:void 0,selectionMode:"navigation",onAction:m=>l(m),children:d.jsx(S,{id:"ContextMenuItems"})})]});return d.jsxs("div",{className:i,children:[c,f,b]})};H.__docgenInfo={description:"",methods:[],displayName:"TabList",props:{selection:{required:!0,tsType:{name:"union",raw:"Aria.Key | undefined",elements:[{name:"Aria.Key"},{name:"undefined"}]},description:""},onContextMenuSelectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Aria.Key) => void",signature:{arguments:[{type:{name:"Aria.Key"},name:"key"}],return:{name:"void"}}},description:""},disabledKeys:{required:!1,tsType:{name:"Iterable",elements:[{name:"Aria.Key"}],raw:"Iterable<Aria.Key>"},description:""}}};const He="flow--tabs",ze={tabs:He},_e=G("Tabs",s=>{const{children:e,className:t,defaultSelectedKey:a,selectedKey:n,disabledKeys:r,ref:o,onSelectionChange:i,...l}=s,c=P(ze.tabs,t),[f,b]=u.useState(n??a);return d.jsxs(J,{children:[e,d.jsxs(Me,{slot:null,className:c,...l,selectedKey:f,onSelectionChange:m=>{b(m),i&&i(m)},disabledKeys:r,ref:o,children:[d.jsx(H,{selection:f,onContextMenuSelectionChange:m=>{b(m),i&&i(m)},disabledKeys:r}),d.jsx(S,{id:"Panels"})]})]})});_e.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tabs"};const z=u.createContext({id:"undefined"}),qe=()=>u.useContext(z),Ue=z.Provider,Ge=s=>{const{children:e,className:t,...a}=s,{id:n}=qe(),r=P(w.tabTitle,t);return d.jsxs(d.Fragment,{children:[d.jsx(T,{id:"Titles",children:d.jsx(je,{...a,id:n,className:r,children:o=>d.jsxs(d.Fragment,{children:[d.jsx(se,{emulateBoldWidth:!0,children:d.jsx("span",{className:w.text,children:e})}),d.jsx(T,{id:"ActiveTitle",children:o.isSelected&&e})]})})}),d.jsx(T,{id:"ContextMenuItems",children:d.jsx(te,{className:w.menuItem,id:n,children:e})})]})};Ge.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"TabTitle",composes:["Omit","PropsWithChildren"]};const Je="flow--tabs--tab--tab-panel",Qe={tabPanel:Je},Xe=s=>{const{children:e,className:t,id:a,...n}=s,r=P(Qe.tabPanel,t),o=u.useId(),i=a??o,l=c=>{const f=c.state.selectedKey===i,b={Content:{wrapWith:d.jsx(E,{isActive:f})},Section:{wrapWith:d.jsx(E,{isActive:f})}};return d.jsx(Q,{props:b,dependencies:[f,e],children:e})};return d.jsx(T,{id:"Panels",children:d.jsx(Ue,{value:{id:i},children:d.jsx(Fe,{className:r,shouldForceMount:!0,id:i,...n,children:l})})})};Xe.__docgenInfo={description:"@flr-generate all",methods:[],displayName:"Tab",composes:["Omit","PropsWithChildren"]};export{F as C,_e as T,Xe as a,Ge as b};
