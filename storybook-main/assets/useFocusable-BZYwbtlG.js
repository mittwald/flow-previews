import{r as u,R as B}from"./index-Cs7sjTYM.js";import{d as N,c as ee,$ as te,b as O}from"./index-C8LjR2Bd.js";import{f as ne}from"./utils-DI5tH0Ou.js";const h=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},p=e=>e&&"window"in e&&e.window===e?e:h(e).defaultView||window;function V(e){if(re())e.focus({preventScroll:!0});else{let n=oe(e);e.focus(),ae(n)}}let F=null;function re(){if(F==null){F=!1;try{document.createElement("div").focus({get preventScroll(){return F=!0,!0}})}catch{}}return F}function oe(e){let n=e.parentNode,t=[],r=document.scrollingElement||document.documentElement;for(;n instanceof HTMLElement&&n!==r;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),n=n.parentNode;return r instanceof HTMLElement&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),t}function ae(e){for(let{element:n,scrollTop:t,scrollLeft:r}of e)n.scrollTop=t,n.scrollLeft=r}function M(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function K(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function $(e){let n=null;return()=>(n==null&&(n=e()),n)}const A=$(function(){return K(/^Mac/i)}),ie=$(function(){return K(/^iPhone/i)}),se=$(function(){return K(/^iPad/i)||A()&&navigator.maxTouchPoints>1}),ue=$(function(){return ie()||se()}),Me=$(function(){return A()||ue()}),Ce=$(function(){return M(/AppleWebKit/i)&&!ce()}),ce=$(function(){return M(/Chrome/i)}),z=$(function(){return M(/Android/i)}),De=$(function(){return M(/Firefox/i)});let m=new Map,k=new Set;function R(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let n=r=>{if(!e(r)||!r.target)return;let o=m.get(r.target);o||(o=new Set,m.set(r.target,o),r.target.addEventListener("transitioncancel",t,{once:!0})),o.add(r.propertyName)},t=r=>{if(!e(r)||!r.target)return;let o=m.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",t),m.delete(r.target)),m.size===0)){for(let s of k)s();k.clear()}};document.body.addEventListener("transitionrun",n),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?R():document.addEventListener("DOMContentLoaded",R));function de(e){requestAnimationFrame(()=>{m.size===0?e():k.add(e)})}function fe(e,n){N(()=>{if(e&&e.ref&&n)return e.ref.current=n.current,()=>{e.ref&&(e.ref.current=null)}})}function le(e){return e.mozInputSource===0&&e.isTrusted?!0:z()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function ke(e){return!z()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}class be{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function G(e){let n=u.useRef({isFocused:!1,observer:null});N(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=ee(r=>{e==null||e(r)});return u.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,s=c=>{n.current.isFocused=!1,o.disabled&&t(new be("blur",c)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var c;(c=n.current.observer)===null||c===void 0||c.disconnect();let a=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function U(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const s=u.useCallback(d=>{if(d.target===d.currentTarget)return r&&r(d),o&&o(!1),!0},[r,o]),c=G(s),a=u.useCallback(d=>{const f=h(d.target);d.target===d.currentTarget&&f.activeElement===d.target&&(t&&t(d),o&&o(!0),c(d))},[o,t,c]);return{focusProps:{onFocus:!n&&(t||o||r)?a:void 0,onBlur:!n&&(r||o)?s:void 0}}}let b=null,L=new Set,T=new Map,g=!1,W=!1;const $e={Tab:!0,Escape:!0};function C(e,n){for(let t of L)t(e,n)}function ve(e){return!(e.metaKey||!A()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function x(e){g=!0,ve(e)&&(b="keyboard",C("keyboard",e))}function l(e){b="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(g=!0,C("pointer",e))}function q(e){le(e)&&(g=!0,b="virtual")}function Y(e){e.target===window||e.target===document||(!g&&!W&&(b="virtual",C("virtual",e)),g=!1,W=!1)}function J(){g=!1,W=!0}function H(e){if(typeof window>"u"||T.get(p(e)))return;const n=p(e),t=h(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){g=!0,r.apply(this,arguments)},t.addEventListener("keydown",x,!0),t.addEventListener("keyup",x,!0),t.addEventListener("click",q,!0),n.addEventListener("focus",Y,!0),n.addEventListener("blur",J,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",l,!0),t.addEventListener("pointermove",l,!0),t.addEventListener("pointerup",l,!0)):(t.addEventListener("mousedown",l,!0),t.addEventListener("mousemove",l,!0),t.addEventListener("mouseup",l,!0)),n.addEventListener("beforeunload",()=>{Q(e)},{once:!0}),T.set(n,{focus:r})}const Q=(e,n)=>{const t=p(e),r=h(e);n&&r.removeEventListener("DOMContentLoaded",n),T.has(t)&&(t.HTMLElement.prototype.focus=T.get(t).focus,r.removeEventListener("keydown",x,!0),r.removeEventListener("keyup",x,!0),r.removeEventListener("click",q,!0),t.removeEventListener("focus",Y,!0),t.removeEventListener("blur",J,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",l,!0),r.removeEventListener("pointermove",l,!0),r.removeEventListener("pointerup",l,!0)):(r.removeEventListener("mousedown",l,!0),r.removeEventListener("mousemove",l,!0),r.removeEventListener("mouseup",l,!0)),T.delete(t))};function pe(e){const n=h(e);let t;return n.readyState!=="loading"?H(e):(t=()=>{H(e)},n.addEventListener("DOMContentLoaded",t)),()=>Q(e,t)}typeof document<"u"&&pe();function X(){return b!=="pointer"}function ge(){return b}function We(e){b=e,C(e,null)}function Ie(){H();let[e,n]=u.useState(b);return u.useEffect(()=>{let t=()=>{n(b)};return L.add(t),()=>{L.delete(t)}},[]),te()?null:e}const Ee=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function me(e,n,t){var r;const o=typeof window<"u"?p(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?p(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,c=typeof window<"u"?p(t==null?void 0:t.target).HTMLElement:HTMLElement,a=typeof window<"u"?p(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof o&&!Ee.has(t==null||(r=t.target)===null||r===void 0?void 0:r.type)||(t==null?void 0:t.target)instanceof s||(t==null?void 0:t.target)instanceof c&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof a&&!$e[t.key])}function he(e,n,t){H(),u.useEffect(()=>{let r=(o,s)=>{me(!!(t!=null&&t.isTextInput),o,s)&&e(X())};return L.add(r),()=>{L.delete(r)}},n)}function we(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:r,onFocusWithinChange:o}=e,s=u.useRef({isFocusWithin:!1}),c=u.useCallback(f=>{s.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(s.current.isFocusWithin=!1,t&&t(f),o&&o(!1))},[t,o,s]),a=G(c),d=u.useCallback(f=>{!s.current.isFocusWithin&&document.activeElement===f.target&&(r&&r(f),o&&o(!0),s.current.isFocusWithin=!0,a(f))},[r,o,a]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:c}}}let S=!1,D=0;function I(){S=!0,setTimeout(()=>{S=!1},50)}function _(e){e.pointerType==="touch"&&I()}function ye(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",_):document.addEventListener("touchend",I),D++,()=>{D--,!(D>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",_):document.removeEventListener("touchend",I))}}function Be(e){let{onHoverStart:n,onHoverChange:t,onHoverEnd:r,isDisabled:o}=e,[s,c]=u.useState(!1),a=u.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;u.useEffect(ye,[]);let{hoverProps:d,triggerHoverEnd:f}=u.useMemo(()=>{let w=(i,E)=>{if(a.pointerType=E,o||E==="touch"||a.isHovered||!i.currentTarget.contains(i.target))return;a.isHovered=!0;let P=i.currentTarget;a.target=P,n&&n({type:"hoverstart",target:P,pointerType:E}),t&&t(!0),c(!0)},y=(i,E)=>{if(a.pointerType="",a.target=null,E==="touch"||!a.isHovered)return;a.isHovered=!1;let P=i.currentTarget;r&&r({type:"hoverend",target:P,pointerType:E}),t&&t(!1),c(!1)},v={};return typeof PointerEvent<"u"?(v.onPointerEnter=i=>{S&&i.pointerType==="mouse"||w(i,i.pointerType)},v.onPointerLeave=i=>{!o&&i.currentTarget.contains(i.target)&&y(i,i.pointerType)}):(v.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},v.onMouseEnter=i=>{!a.ignoreEmulatedMouseEvents&&!S&&w(i,"mouse"),a.ignoreEmulatedMouseEvents=!1},v.onMouseLeave=i=>{!o&&i.currentTarget.contains(i.target)&&y(i,"mouse")}),{hoverProps:v,triggerHoverEnd:y}},[n,t,r,o,a]);return u.useEffect(()=>{o&&f({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:d,isHovered:s}}function j(e){if(!e)return;let n=!0;return t=>{let r={...t,preventDefault(){t.preventDefault()},isDefaultPrevented(){return t.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){n=!1}};e(r),n&&t.stopPropagation()}}function Te(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:j(e.onKeyDown),onKeyUp:j(e.onKeyUp)}}}function Le(e){const n=h(e);if(ge()==="virtual"){let t=n.activeElement;de(()=>{n.activeElement===t&&e.isConnected&&V(e)})}else V(e)}function Ke(e={}){let{autoFocus:n=!1,isTextInput:t,within:r}=e,o=u.useRef({isFocused:!1,isFocusVisible:n||X()}),[s,c]=u.useState(!1),[a,d]=u.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=u.useCallback(()=>d(o.current.isFocused&&o.current.isFocusVisible),[]),w=u.useCallback(i=>{o.current.isFocused=i,c(i),f()},[f]);he(i=>{o.current.isFocusVisible=i,f()},[],{isTextInput:t});let{focusProps:y}=U({isDisabled:r,onFocusChange:w}),{focusWithinProps:v}=we({isDisabled:!r,onFocusWithinChange:w});return{isFocused:s,isFocusVisible:a,focusProps:r?v:y}}let Z=B.createContext(null);function Pe(e){let n=u.useContext(Z)||{};fe(n,e);let{ref:t,...r}=n;return r}function Fe(e,n){let{children:t,...r}=e,o=ne(n),s={...r,ref:o};return B.createElement(Z.Provider,{value:s},t)}let Ae=B.forwardRef(Fe);function Oe(e,n){let{focusProps:t}=U(e),{keyboardProps:r}=Te(e),o=O(t,r),s=Pe(n),c=e.isDisabled?{}:s,a=u.useRef(e.autoFocus);return u.useEffect(()=>{a.current&&n.current&&Le(n.current),a.current=!1},[n]),{focusableProps:O({...o,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},c)}}export{we as $,Be as a,Ke as b,Oe as c,p as d,h as e,Le as f,We as g,A as h,Ce as i,X as j,ge as k,Ae as l,V as m,Te as n,De as o,se as p,ue as q,de as r,ke as s,le as t,fe as u,Me as v,U as w,ie as x,z as y,Ie as z};
